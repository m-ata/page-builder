{"ast":null,"code":"import _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/pages/booking/details.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { setToState as _setToState } from 'state/actions';\nimport { Box, Button, Checkbox, Divider, FormControlLabel, FormGroup, Grid, TextField, Typography, Container, IconButton, OutlinedInput, InputLabel, InputAdornment, FormHelperText, FormControl } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { useSnackbar } from 'notistack';\nimport ReservationCart from 'components/booking/components/ReservationCart';\nimport BookingStepper from 'components/booking/components/BookingStepper';\nimport BookingLayout from 'components/layout/containers/booking-layout';\nimport WebCmsGlobal from 'components/webcms-global';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport TrackedChangesDialog from 'components/TrackedChangesDialog';\nimport LoginDialog from 'components/LoginComponent/LoginDialog';\nimport PhoneInput from '@webcms-ui/core/phone-input';\nimport OtherGuestInfo from 'components/booking/OtherGuestInfo';\nimport PaymentInformation from 'components/booking/components/PaymentInformation';\nimport ProgressButton from 'components/booking/components/ProgressButton';\nimport { useOrestAction } from 'model/orest';\nimport TagManager from '@webcms-globals/tag-manager';\nimport { REQUEST_METHOD_CONST } from 'model/orest/constants';\nimport { required, validateEmail } from 'state/utils/form';\nimport moment from 'moment';\nimport MomentAdapter from '@date-io/moment';\nimport { DatePicker, LocalizationProvider } from '@material-ui/pickers';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport { UseOrest } from '@webcms/orest';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { getBookingSteps, bookingSteps, bookingStepCodes } from 'components/booking/commons';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    '@global': {\n      'button:focus': {\n        outline: 'none'\n      }\n    },\n    containerBooking: {\n      '& > *': {\n        opacity: 0.9\n      }\n    },\n    root: {\n      marginTop: 16,\n      background: theme.palette.background.paper,\n      width: '100%',\n      backgroundColor: '#fff',\n      border: '1px solid #dadadd',\n      borderRadius: 6\n    },\n    stepperRoot: {\n      backgroundColor: '#fff',\n      border: '1px solid #dadadd',\n      borderRadius: 6,\n      \"@media print\": {\n        display: 'none'\n      }\n    },\n    infoTextField: {\n      background: '#FFFFFF',\n      '& fieldset': {\n        borderRadius: 0\n      }\n    },\n    createAccountHelperText: {\n      textAlign: 'right'\n    },\n    textRed: {\n      color: 'red'\n    },\n    topSpaceBox: {\n      width: '100%',\n      display: 'block',\n      marginTop: 60\n    },\n    bottomSpaceBox: {\n      width: '100%',\n      display: 'block',\n      marginBottom: '30vh',\n      '@media print': {\n        display: 'none'\n      }\n    }\n  };\n});\n\nfunction mandatoryFieldMarker(contactInfo, mandatoryField) {\n  var useMandatoryField = mandatoryField && mandatoryField.split(',') || false;\n\n  if (!Array.isArray(useMandatoryField)) {\n    return contactInfo;\n  }\n\n  var newContactInfo = _objectSpread({}, contactInfo);\n\n  Object.keys(contactInfo).map(function (key) {\n    if (mandatoryField.includes(contactInfo[key].key)) {\n      newContactInfo[key].isrequired = true;\n    }\n  });\n  return newContactInfo;\n}\n\nvar settings = {\n  containerMaxWidth: 'lg',\n  containerSpacing: 3,\n  leftColumn: {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 8,\n    xl: 8\n  },\n  rightColumn: {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 4,\n    xl: 4\n  }\n};\n\nvar DetailsPage = function DetailsPage(props) {\n  _s();\n\n  var _WEBCMS_DATA$assets3, _WEBCMS_DATA$assets3$, _GENERAL_SETTINGS$hot, _GENERAL_SETTINGS$hot2;\n\n  var classes = useStyles(),\n      _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      WEBCMS_DATA = _useContext.WEBCMS_DATA,\n      locale = _useContext.locale,\n      _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      state = props.state,\n      setToState = props.setToState,\n      hideLayout = props.hideLayout,\n      showAddons = Boolean(GENERAL_SETTINGS.hotelSettings.product) || Boolean(GENERAL_SETTINGS.hotelSettings.remark) || Boolean(GENERAL_SETTINGS.hotelSettings.transport),\n      _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar,\n      _useState = useState(false),\n      setUseScrollUp = _useState[1],\n      router = useRouter(),\n      _useState2 = useState(false),\n      isLoginDialog = _useState2[0],\n      setIsLoginDialog = _useState2[1],\n      _useState3 = useState(false),\n      isOpenLoginDialog = _useState3[0],\n      setIsOpenLoginDialog = _useState3[1],\n      _useState4 = useState(false),\n      emailIsAlreadyExistsDialog = _useState4[0],\n      setEmailIsAlreadyExistsDialog = _useState4[1],\n      _useState5 = useState(false),\n      isRouting = _useState5[0],\n      setIsRouting = _useState5[1],\n      loginfo = useSelector(function (state) {\n    return state.orest.currentUser && state.orest.currentUser.loginfo;\n  }),\n      token = useSelector(function (state) {\n    var _state$orest, _state$orest$currentU;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : _state$orest$currentU.auth.access_token) || false;\n  }),\n      clientBase = useSelector(function (state) {\n    var _state$orest2, _state$orest2$state;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest2 = state.orest) === null || _state$orest2 === void 0 ? void 0 : (_state$orest2$state = _state$orest2.state) === null || _state$orest2$state === void 0 ? void 0 : _state$orest2$state.client) || false;\n  }),\n      iframe = router.query.iframe === 'true',\n      isLogoutButton = token && iframe,\n      _useOrestAction = useOrestAction(),\n      deleteOrestCurrentUserInfo = _useOrestAction.deleteOrestCurrentUserInfo,\n      resetOrestState = _useOrestAction.resetOrestState,\n      _useState6 = useState({\n    width: '100%',\n    height: '100%',\n    imgHeight: '100%'\n  }),\n      pageSizes = _useState6[0],\n      setPageSizes = _useState6[1],\n      _useState7 = useState(false),\n      isButtonRouting = _useState7[0],\n      setIsButtonRouting = _useState7[1];\n\n  useEffect(function () {\n    var _WEBCMS_DATA$assets, _WEBCMS_DATA$assets$m;\n\n    var isEffect = true;\n\n    if (!(state.selectedRooms.length > 0)) {\n      setIsRouting(true);\n      router.push({\n        pathname: '/booking/rooms',\n        query: router.query\n      });\n    }\n\n    if (isEffect && WEBCMS_DATA !== null && WEBCMS_DATA !== void 0 && (_WEBCMS_DATA$assets = WEBCMS_DATA.assets) !== null && _WEBCMS_DATA$assets !== void 0 && (_WEBCMS_DATA$assets$m = _WEBCMS_DATA$assets.meta) !== null && _WEBCMS_DATA$assets$m !== void 0 && _WEBCMS_DATA$assets$m.googleTag) {\n      var _WEBCMS_DATA$assets2, _WEBCMS_DATA$assets2$;\n\n      TagManager.page.setChange({\n        hotelName: WEBCMS_DATA === null || WEBCMS_DATA === void 0 ? void 0 : (_WEBCMS_DATA$assets2 = WEBCMS_DATA.assets) === null || _WEBCMS_DATA$assets2 === void 0 ? void 0 : (_WEBCMS_DATA$assets2$ = _WEBCMS_DATA$assets2.meta) === null || _WEBCMS_DATA$assets2$ === void 0 ? void 0 : _WEBCMS_DATA$assets2$.title,\n        hotelId: GENERAL_SETTINGS.HOTELREFNO,\n        pageTitle: window.document.title,\n        pagePath: location.href,\n        pageStep: 'Guest Details'\n      });\n    }\n\n    setPageSizes({\n      width: window.innerWidth,\n      height: window.innerHeight,\n      imgHeight: window.innerHeight + 104.1\n    });\n    window.addEventListener('scroll', handleScroll, {\n      passive: true\n    });\n    window.addEventListener('resize', function () {\n      setPageSizes({\n        width: window.innerWidth,\n        height: window.innerHeight,\n        imgHeight: window.innerHeight + 104.1\n      });\n    });\n    router.events.on('routeChangeStart', function () {\n      return setIsButtonRouting(true);\n    });\n    router.events.on('routeChangeComplete', function () {\n      return setIsButtonRouting(false);\n    });\n    return function () {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n  useEffect(function () {\n    window.handleContinueByGuestDetailPage = function () {\n      return handleContinue();\n    };\n  }, [state.selectedPaymentTypeId]);\n  useEffect(function () {\n    if (loginfo) {\n      setIsLoginDialog(true);\n      UseOrest({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: 'auth/checktoken',\n        token: token,\n        method: REQUEST_METHOD_CONST.POST,\n        params: {\n          token: token,\n          hotelrefno: ''\n        }\n      }).then(function (checkTokenResponse) {\n        var _checkTokenResponse$d;\n\n        if (checkTokenResponse !== null && checkTokenResponse !== void 0 && (_checkTokenResponse$d = checkTokenResponse.data) !== null && _checkTokenResponse$d !== void 0 && _checkTokenResponse$d.active) {\n          if (clientBase && clientBase !== null && clientBase !== void 0 && clientBase.id) {\n            setClientInfo(clientBase);\n          } else if ((router.query.clientid || loginfo.accid) && token) {\n            UseOrest({\n              apiUrl: GENERAL_SETTINGS.OREST_URL,\n              endpoint: 'client/getbyid',\n              token: token,\n              params: {\n                key: router.query.clientid || loginfo.accid,\n                allhotels: true\n              }\n            }).then(function (client) {\n              if (client.status === 200 && client.data.count > 0) {\n                setClientInfo(client.data.data);\n              }\n            });\n          }\n        } else {\n          enqueueSnackbar(t('str_sessionTimeoutLoginAgain'), {\n            variant: 'info'\n          });\n          deleteOrestCurrentUserInfo();\n        }\n      })[\"catch\"](function () {\n        enqueueSnackbar(t('str_sessionTimeoutLoginAgain'), {\n          variant: 'info'\n        });\n        deleteOrestCurrentUserInfo();\n      });\n    } else {\n      setIsLoginDialog(false);\n    }\n  }, [clientBase, loginfo]);\n\n  var handleScroll = function handleScroll() {\n    var _window, _document, _document$documentEle, _document2, _document2$body, _window2;\n\n    var windowSize = ((_window = window) === null || _window === void 0 ? void 0 : _window.innerWidth) || ((_document = document) === null || _document === void 0 ? void 0 : (_document$documentEle = _document.documentElement) === null || _document$documentEle === void 0 ? void 0 : _document$documentEle.clientWidth) || ((_document2 = document) === null || _document2 === void 0 ? void 0 : (_document2$body = _document2.body) === null || _document2$body === void 0 ? void 0 : _document2$body.clientWidth) || 0;\n\n    if (windowSize <= 959 && ((_window2 = window) === null || _window2 === void 0 ? void 0 : _window2.pageYOffset) > 100) {\n      setUseScrollUp(true);\n    } else {\n      setUseScrollUp(false);\n    }\n  };\n\n  var setClientInfo = function setClientInfo(clientInfoData) {\n    var newContactInfo = state.contactInfo;\n    newContactInfo.firstName.value = clientInfoData.firstname;\n    newContactInfo.firstName.iserror = false;\n    selectedRooms[0].guestList[0].firstName.value = clientInfoData.firstname;\n    newContactInfo.lastName.value = clientInfoData.lastname;\n    newContactInfo.lastName.iserror = false;\n    selectedRooms[0].guestList[0].lastName.value = clientInfoData.lastname;\n    newContactInfo.mail.value = clientInfoData.email;\n    newContactInfo.mail.iserror = false;\n    selectedRooms[0].guestList[0].mail.value = clientInfoData.email;\n    newContactInfo.birthDate.value = clientInfoData.birthdate;\n    newContactInfo.birthDate.iserror = false;\n    selectedRooms[0].guestList[0].birthDate.value = clientInfoData.birthdate;\n    newContactInfo.healthcode.value = clientInfoData.healthcode;\n    newContactInfo.healthcode.iserror = false;\n    selectedRooms[0].guestList[0].healthcode.value = clientInfoData.healthcode;\n    newContactInfo.phone.value = clientInfoData.mobiletel;\n    newContactInfo.phone.iserror = false;\n    selectedRooms[0].guestList[0].phone.value = clientInfoData.mobiletel;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], newContactInfo);\n  };\n\n  var _useState8 = useState({\n    isActive: false,\n    password: '',\n    showPassword: false,\n    isError: false\n  }),\n      createAccount = _useState8[0],\n      setCreateAccount = _useState8[1];\n\n  var contactInfoSettings = {\n    spacing: 2,\n    margin: 'none',\n    variant: 'outlined'\n  };\n\n  var hasPayType = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, filter) {\n      var payType;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              payType = state.hotelPaymentType && state.hotelPaymentType.paymentypes.length > 0 && state.hotelPaymentType.paymentypes.filter(function (item) {\n                return item[filter];\n              })[0];\n              return _context.abrupt(\"return\", Boolean(payType && Number(id) === Number(payType.id)));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function hasPayType(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var selectedRooms = state.selectedRooms;\n  var contactInfo = mandatoryFieldMarker(state.contactInfo, GENERAL_SETTINGS.hotelSettings.cireqflds);\n\n  var changeFirstName = function changeFirstName(e) {\n    contactInfo.firstName.value = e.currentTarget.value;\n    contactInfo.firstName.iserror = false;\n    selectedRooms[0].guestList[0].firstName.value = e.currentTarget.value;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], contactInfo);\n  };\n\n  var changeLastName = function changeLastName(e) {\n    contactInfo.lastName.value = e.currentTarget.value;\n    contactInfo.lastName.iserror = false;\n    selectedRooms[0].guestList[0].lastName.value = e.currentTarget.value;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], contactInfo);\n  };\n\n  var changeMail = function changeMail(e) {\n    setToState('ibe', ['continueWithoutClientRecord'], false);\n    contactInfo.mail.value = e.currentTarget.value;\n    contactInfo.mail.iserror = false;\n    selectedRooms[0].guestList[0].mail.value = e.currentTarget.value;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], contactInfo);\n  };\n\n  var changeHealtCode = function changeHealtCode(e) {\n    contactInfo.healthcode.value = e.currentTarget.value;\n    contactInfo.healthcode.iserror = false;\n    selectedRooms[0].guestList[0].healthcode.value = e.currentTarget.value;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], contactInfo);\n  };\n\n  var changePhoneNumber = function changePhoneNumber(e) {\n    contactInfo.phone.value = e;\n    contactInfo.phone.iserror = false;\n    selectedRooms[0].guestList[0].phone.value = e;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], contactInfo);\n  };\n\n  var changeDateOfBirth = function changeDateOfBirth(date) {\n    if (date) {\n      if (date._isValid) {\n        contactInfo.birthDate.value = date._d;\n        selectedRooms[0].guestList[0].birthDate.value = date._d;\n      } else {\n        contactInfo.birthDate.value = date._d;\n        selectedRooms[0].guestList[0].birthDate.value = date._d;\n      }\n\n      contactInfo.birthDate.iserror = false;\n      setToState('ibe', ['selectedRooms'], selectedRooms);\n      setToState('ibe', ['contactInfo'], contactInfo);\n    }\n  };\n\n  var changeNote = function changeNote(e) {\n    contactInfo.note.value = e.currentTarget.value;\n    selectedRooms[0].guestList[0].note.value = e.currentTarget.value;\n    setToState('ibe', ['selectedRooms'], selectedRooms);\n    setToState('ibe', ['contactInfo'], contactInfo);\n  };\n\n  var emailValidation = function emailValidation(email) {\n    return axios({\n      url: \"\".concat(GENERAL_SETTINGS.BASE_URL, \"api/ors/guest/email/valid\"),\n      method: 'post',\n      data: {\n        email: email\n      }\n    }).then(function (response) {\n      return response.data;\n    });\n  };\n\n  var handleContinue = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(continueWithoutClientRecord) {\n      var isRequiredError, isEmailError, contactEmail, checkPayTypeIsMailOrder;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setToState('ibe', ['isHandleContinue'], true);\n              isRequiredError = false, isEmailError = false;\n              Object.keys(contactInfo).forEach(function (key) {\n                if (contactInfo[key].isrequired) {\n                  if (required(contactInfo[key].value)) {\n                    contactInfo[key].iserror = true;\n                    isRequiredError = true;\n                  }\n                }\n              });\n\n              if (createAccount.isActive && (createAccount.password === '' || createAccount.password.length < 6)) {\n                setCreateAccount(_objectSpread(_objectSpread({}, createAccount), {}, {\n                  isError: true\n                }));\n                enqueueSnackbar(t('str_pleaseCheckYourPassword'), {\n                  variant: 'error'\n                });\n                isRequiredError = true;\n              } else {\n                setCreateAccount(_objectSpread(_objectSpread({}, createAccount), {}, {\n                  isError: false\n                }));\n              }\n\n              _context2.next = 6;\n              return emailValidation(contactInfo.mail.value);\n\n            case 6:\n              contactEmail = _context2.sent;\n\n              if (!continueWithoutClientRecord && contactEmail.exits && !loginfo) {\n                isEmailError = true;\n                contactInfo['mail'].iserror = true;\n                setEmailIsAlreadyExistsDialog(true);\n                setToState('ibe', ['isHandleContinue'], false);\n              }\n\n              if (!contactEmail.validation) {\n                isEmailError = true;\n                contactInfo['mail'].iserror = true;\n              }\n\n              if (!(!Number(state.selectedPaymentTypeId) > 0)) {\n                _context2.next = 13;\n                break;\n              }\n\n              enqueueSnackbar(t('str_pleaseSelectAPaymentMethodToContinue'), {\n                variant: 'warning'\n              });\n              setToState('ibe', ['isHandleContinue'], false);\n              return _context2.abrupt(\"return\");\n\n            case 13:\n              _context2.next = 15;\n              return hasPayType(state.selectedPaymentTypeId, 'ismailorder');\n\n            case 15:\n              checkPayTypeIsMailOrder = _context2.sent;\n\n              if (!(checkPayTypeIsMailOrder && !state.mailOrderInfo.cardIsValid)) {\n                _context2.next = 20;\n                break;\n              }\n\n              enqueueSnackbar(t('str_pleaseCheckYourCardInformation'), {\n                variant: 'warning'\n              });\n              setToState('ibe', ['isHandleContinue'], false);\n              return _context2.abrupt(\"return\");\n\n            case 20:\n              setToState('ibe', ['contactInfo'], contactInfo);\n              selectedRooms.map(function (room, roomIndex) {\n                if (roomIndex !== 0 || roomIndex === 0 && room.totalpax > 1) {\n                  Array.from({\n                    length: room.totalpax\n                  }).map(function (pax, paxIndex) {\n                    if (roomIndex > 0 || roomIndex === 0 && paxIndex > 0) {\n                      var guestList = selectedRooms[roomIndex].guestList[paxIndex];\n                      Object.keys(guestList).forEach(function (key) {\n                        if (guestList[key].isrequired) {\n                          if (required(guestList[key].value)) {\n                            guestList[key].iserror = true;\n                            isRequiredError = true;\n                          }\n                        }\n\n                        if (guestList['mail'].value) {\n                          if (validateEmail(guestList['mail'].value)) {\n                            guestList['mail'].iserror = true;\n                            isEmailError = true;\n                          }\n                        }\n                      });\n                      setToState('ibe', ['selectedRooms', roomIndex, 'guestList', paxIndex], guestList);\n                    }\n                  });\n                }\n              });\n\n              if (isRequiredError || isEmailError) {\n                setToState('ibe', ['isHandleContinue'], false);\n\n                if (!createAccount.isError && !contactEmail.exits) {\n                  enqueueSnackbar(t('str_pleaseCheckMandatoryFields'), {\n                    variant: 'error'\n                  });\n                }\n              } else {\n                setToState('ibe', ['isHandleContinue'], false);\n\n                if (createAccount.isActive) {\n                  setToState('ibe', ['clientPassword'], createAccount.password);\n                }\n\n                router.push({\n                  pathname: '/booking/preview',\n                  query: router.query\n                });\n              }\n\n            case 23:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleContinue(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleBack = function handleBack() {\n    if (showAddons) {\n      router.push({\n        pathname: '/booking/addons',\n        query: router.query\n      });\n    } else {\n      router.push({\n        pathname: '/booking/rooms',\n        query: router.query\n      });\n    }\n\n    handleScrollTop();\n  };\n\n  var handleScrollTop = function handleScrollTop() {\n    return window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  };\n\n  var handleLogout = function handleLogout() {\n    deleteOrestCurrentUserInfo();\n    resetOrestState();\n  };\n\n  if (isRouting) {\n    return __jsx(BookingLayout, {\n      hideLayout: hideLayout,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: classes.topSpaceBox,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 17\n      }\n    }), __jsx(Container, {\n      maxWidth: settings.containerMaxWidth,\n      className: classes.containerBooking,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 17\n      }\n    }, __jsx(Grid, {\n      container: true,\n      spacing: settings.containerSpacing,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 21\n      }\n    }, __jsx(Grid, {\n      item: true,\n      xs: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      style: {\n        width: '100%',\n        height: '80vh',\n        textAlign: 'center',\n        paddingTop: '25%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 29\n      }\n    }, __jsx(\"span\", {\n      style: {\n        background: '#d5d5d5',\n        padding: 40,\n        width: '100%',\n        display: 'block',\n        fontSize: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 33\n      }\n    }, t('str_pleaseWait')))))));\n  }\n\n  return __jsx(BookingLayout, {\n    hideLayout: hideLayout,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 9\n    }\n  }, WEBCMS_DATA !== null && WEBCMS_DATA !== void 0 && (_WEBCMS_DATA$assets3 = WEBCMS_DATA.assets) !== null && _WEBCMS_DATA$assets3 !== void 0 && (_WEBCMS_DATA$assets3$ = _WEBCMS_DATA$assets3.images) !== null && _WEBCMS_DATA$assets3$ !== void 0 && _WEBCMS_DATA$assets3$.background ? __jsx(\"div\", {\n    style: {\n      width: pageSizes.width,\n      height: pageSizes.height,\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      position: 'fixed',\n      zIndex: -3\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 17\n    }\n  }, __jsx(\"ul\", {\n    style: {\n      padding: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 21\n    }\n  }, __jsx(\"li\", {\n    style: {\n      display: 'list-item'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: GENERAL_SETTINGS.STATIC_URL + WEBCMS_DATA.assets.images.background,\n    style: {\n      width: pageSizes.width,\n      height: pageSizes.imgHeight\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 29\n    }\n  })))) : null, __jsx(\"div\", {\n    className: classes.topSpaceBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 13\n    }\n  }), __jsx(Container, {\n    maxWidth: settings.containerMaxWidth,\n    className: classes.containerBooking,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: settings.containerSpacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: settings.leftColumn.xs,\n    sm: settings.leftColumn.sm,\n    md: settings.leftColumn.md,\n    lg: settings.leftColumn.lg,\n    xl: settings.leftColumn.xl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 29\n    }\n  }, __jsx(BookingStepper, {\n    classes: {\n      root: classes.stepperRoot\n    },\n    activeStep: bookingStepCodes.details,\n    steps: getBookingSteps(bookingSteps, showAddons),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 33\n    }\n  }), __jsx(Grid, {\n    container: true,\n    spacing: 0,\n    style: {\n      paddingTop: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 33\n    }\n  }, __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 37\n    }\n  }, __jsx(TrackedChangesDialog, {\n    isContainedNo: false,\n    dialogTitle: t('str_info'),\n    dialogDesc: t('str_thisEmailAddressHasBeenUsedBeforeYouCanContinueTheReservationByLoggingIn'),\n    labelYes: t('str_logInHere'),\n    labelNo: t('str_continueWithoutLogin'),\n    open: emailIsAlreadyExistsDialog,\n    onPressNo: function onPressNo() {\n      contactInfo['mail'].iserror = false;\n      setToState('ibe', ['contactInfo'], contactInfo);\n      setToState('ibe', ['continueWithoutClientRecord'], true);\n      setEmailIsAlreadyExistsDialog(false);\n      handleContinue(true);\n    },\n    onPressYes: function onPressYes() {\n      setEmailIsAlreadyExistsDialog(false);\n      setIsOpenLoginDialog(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 41\n    }\n  }), !isLoginDialog ? __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 45\n    }\n  }, __jsx(LoginDialog, {\n    open: isOpenLoginDialog,\n    onClose: function onClose(status) {\n      return setIsOpenLoginDialog(status);\n    },\n    locationName: \"booking\",\n    isLoginWrapper: true,\n    disableRegister: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 49\n    }\n  }), __jsx(Box, {\n    p: 3,\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 49\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: contactInfoSettings.spacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 53\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 57\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 61\n    }\n  }, t('str_signInForAFasterBooking'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 57\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return setIsOpenLoginDialog(true);\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"large\",\n    disabled: isButtonRouting,\n    disableElevation: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 61\n    }\n  }, t('str_login')))))) : null, !!isLoginDialog && isLogoutButton ? __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 45\n    }\n  }, __jsx(Box, {\n    p: 3,\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 49\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: contactInfoSettings.spacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 53\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 57\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleLogout();\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"large\",\n    disabled: isButtonRouting,\n    disableElevation: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 61\n    }\n  }, t('str_logout')))))) : null, __jsx(Box, {\n    p: 3,\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 41\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: contactInfoSettings.spacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 53\n    }\n  }, t('str_contactInfo'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    className: classes.infoTextField,\n    margin: contactInfoSettings.margin,\n    variant: contactInfoSettings.variant,\n    required: state.contactInfo.firstName.isrequired,\n    id: \"firstName\",\n    name: \"firstName\",\n    label: t('str_firstName'),\n    fullWidth: true,\n    onChange: function onChange(e) {\n      return changeFirstName(e);\n    },\n    value: state.contactInfo.firstName.value || '',\n    error: state.contactInfo.firstName.iserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    className: classes.infoTextField,\n    margin: contactInfoSettings.margin,\n    variant: contactInfoSettings.variant,\n    required: state.contactInfo.lastName.isrequired,\n    id: \"lastName\",\n    name: \"lastName\",\n    label: t('str_lastName'),\n    fullWidth: true,\n    onChange: function onChange(e) {\n      return changeLastName(e);\n    },\n    value: state.contactInfo.lastName.value || '',\n    error: state.contactInfo.lastName.iserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    className: classes.infoTextField,\n    margin: contactInfoSettings.margin,\n    variant: contactInfoSettings.variant,\n    required: state.contactInfo.mail.isrequired,\n    id: \"mail\",\n    name: \"mail\",\n    label: t('str_email'),\n    fullWidth: true,\n    onChange: function onChange(e) {\n      return changeMail(e);\n    },\n    value: state.contactInfo.mail.value || '',\n    error: state.contactInfo.mail.iserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 49\n    }\n  }, __jsx(PhoneInput, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    className: classes.infoTextField,\n    defaultCountry: locale === 'en' ? 'us' : locale,\n    preferredCountries: ['it', 'ie', 'de', 'fr', 'es', 'gb'],\n    regions: ['america', 'europe', 'asia', 'oceania', 'africa'],\n    id: \"phone\",\n    name: \"phone\",\n    label: t('str_phone'),\n    fullWidth: true,\n    margin: contactInfoSettings.margin,\n    variant: contactInfoSettings.variant,\n    onChange: function onChange(e) {\n      return changePhoneNumber(e);\n    },\n    required: state.contactInfo.phone.isrequired,\n    value: state.contactInfo.phone.value || '',\n    error: state.contactInfo.phone.iserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 53\n    }\n  })), (GENERAL_SETTINGS === null || GENERAL_SETTINGS === void 0 ? void 0 : (_GENERAL_SETTINGS$hot = GENERAL_SETTINGS.hotelSettings) === null || _GENERAL_SETTINGS$hot === void 0 ? void 0 : _GENERAL_SETTINGS$hot.regbirthdate) && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 53\n    }\n  }, __jsx(LocalizationProvider, {\n    dateLibInstance: moment,\n    dateAdapter: MomentAdapter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 57\n    }\n  }, __jsx(DatePicker, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    autoOk: true,\n    id: \"birthdate\",\n    name: \"birthdate\",\n    fullWidth: true,\n    disableFuture: true,\n    openTo: 'date',\n    views: ['year', 'month', 'date'],\n    inputFormat: \"DD/MM/YYYY\",\n    label: t('str_birthDate'),\n    onChange: function onChange(e) {\n      return changeDateOfBirth(e);\n    },\n    value: state.contactInfo.birthDate.value ? moment(state.contactInfo.birthDate.value) : moment().subtract(state.maxChildAge > 0 ? state.maxChildAge : 12, 'years'),\n    renderInput: function renderInput(props) {\n      return __jsx(TextField, _extends({}, props, {\n        className: classes.infoTextField,\n        margin: contactInfoSettings.margin,\n        variant: contactInfoSettings.variant,\n        fullWidth: true,\n        helperText: \"\",\n        required: state.contactInfo.birthDate.isrequired,\n        error: state.contactInfo.birthDate.iserror,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 69\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 61\n    }\n  }))), (GENERAL_SETTINGS === null || GENERAL_SETTINGS === void 0 ? void 0 : (_GENERAL_SETTINGS$hot2 = GENERAL_SETTINGS.hotelSettings) === null || _GENERAL_SETTINGS$hot2 === void 0 ? void 0 : _GENERAL_SETTINGS$hot2.reghealthcode) && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 53\n    }\n  }, __jsx(TextField, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    className: classes.infoTextField,\n    margin: contactInfoSettings.margin,\n    variant: contactInfoSettings.variant,\n    required: state.contactInfo.healthcode.isrequired,\n    id: \"healtcode\",\n    name: \"healtcode\",\n    label: t('str_healthCode'),\n    fullWidth: true,\n    onChange: function onChange(e) {\n      return changeHealtCode(e);\n    },\n    value: state.contactInfo.healthcode.value || '',\n    error: state.contactInfo.healthcode.iserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 57\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    disabled: isButtonRouting || Boolean(loginfo),\n    className: classes.infoTextField,\n    margin: \"dense\",\n    variant: \"outlined\",\n    id: \"note\",\n    name: \"note\",\n    label: t('str_note'),\n    fullWidth: true,\n    multiline: true,\n    rows: 4,\n    onChange: function onChange(e) {\n      return changeNote(e);\n    },\n    required: state.contactInfo.note.isrequired,\n    value: state.contactInfo.note.value || '',\n    error: state.contactInfo.note.iserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 53\n    }\n  })), !state.continueWithoutClientRecord && !isLoginDialog ? __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 53\n    }\n  }, __jsx(Divider, {\n    variant: \"fullWidth\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 57\n    }\n  }), __jsx(FormGroup, {\n    row: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 755,\n      columnNumber: 57\n    }\n  }, __jsx(FormControlLabel, {\n    control: __jsx(Checkbox, {\n      name: \"create-account\",\n      color: \"primary\",\n      value: createAccount,\n      onClick: function onClick() {\n        return setCreateAccount(_objectSpread(_objectSpread({}, createAccount), {}, {\n          isActive: !createAccount.isActive\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 74\n      }\n    }),\n    label: t('str_iWouldLikeToCreateAnAccount'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 756,\n      columnNumber: 61\n    }\n  })), createAccount.isActive && __jsx(Box, {\n    component: \"span\",\n    display: createAccount.isActive ? 'block' : 'none',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 762,\n      columnNumber: 61\n    }\n  }, __jsx(FormControl, {\n    variant: \"outlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 763,\n      columnNumber: 65\n    }\n  }, __jsx(InputLabel, {\n    htmlFor: \"create-account-password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 764,\n      columnNumber: 69\n    }\n  }, t('str_password')), __jsx(OutlinedInput, {\n    disabled: isButtonRouting,\n    className: classes.infoTextField,\n    id: \"create-account-password\",\n    type: createAccount.showPassword ? 'text' : 'password',\n    value: createAccount.password,\n    onChange: function onChange(e) {\n      return setCreateAccount(_objectSpread(_objectSpread({}, createAccount), {}, {\n        password: e.target.value\n      }));\n    },\n    \"aria-describedby\": \"create-account-password-helper-text\",\n    labelWidth: 70,\n    endAdornment: __jsx(InputAdornment, {\n      position: \"end\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 775,\n        columnNumber: 77\n      }\n    }, __jsx(IconButton, {\n      \"aria-label\": \"toggle password visibility\",\n      onClick: function onClick() {\n        return setCreateAccount(_objectSpread(_objectSpread({}, createAccount), {}, {\n          showPassword: !createAccount.showPassword\n        }));\n      },\n      onMouseDown: function onMouseDown(e) {\n        return e.preventDefault();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 776,\n        columnNumber: 81\n      }\n    }, createAccount.showPassword ? __jsx(Visibility, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 115\n      }\n    }) : __jsx(VisibilityOff, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 131\n      }\n    }))),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 765,\n      columnNumber: 69\n    }\n  }), __jsx(FormHelperText, {\n    id: \"create-account-password-helper-text\",\n    className: clsx(classes.createAccountHelperText, _defineProperty({}, classes.textRed, createAccount.isError)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 786,\n      columnNumber: 69\n    }\n  }, createAccount.isError ? t('str_yourPasswordMustBeAMinOf6Characters') : t('str_bookFasterOptional'))))) : null)), state.selectedRooms.length > 1 || state.selectedRooms.length >= 1 && state.selectedRooms[0].guestList.length > 1 ? __jsx(Box, {\n    p: 3,\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: contactInfoSettings.spacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 49\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 797,\n      columnNumber: 53\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 57\n    }\n  }, t('str_otherGuests'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 53\n    }\n  }, state.selectedRooms && state.selectedRooms.map(function (room, roomIndex) {\n    var roomNo = roomIndex + 1;\n    var numberOfGuests = Number(room.totalpax) + Number(room.totalchd);\n\n    if (roomIndex !== 0 || roomIndex === 0 && numberOfGuests > 1) {\n      return __jsx(\"div\", {\n        key: roomIndex,\n        style: {\n          marginBottom: 10\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 808,\n          columnNumber: 73\n        }\n      }, __jsx(Typography, {\n        variant: \"subtitle1\",\n        style: {\n          marginBottom: 10\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 809,\n          columnNumber: 77\n        }\n      }, roomNo, \".\", ' ', t('str_room'), \" (\", state.roomAvailabilityList && state.roomAvailabilityList.length > 0 && t(state.roomAvailabilityList.find(function (item) {\n        return item.id === room.roomtypeid;\n      }).shorttext), \")\"), Array.from({\n        length: numberOfGuests\n      }).map(function (pax, paxIndex) {\n        if (roomIndex > 0 || roomIndex === 0 && paxIndex > 0) {\n          var paxNo = paxIndex + 1;\n          return __jsx(\"div\", {\n            key: paxIndex,\n            style: {\n              marginBottom: 10\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 89\n            }\n          }, __jsx(Typography, {\n            variant: \"caption\",\n            display: \"block\",\n            style: {\n              marginBottom: 10\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 817,\n              columnNumber: 93\n            }\n          }, paxNo, \".\", ' ', t('str_guest')), __jsx(OtherGuestInfo, {\n            roomIndex: roomIndex,\n            paxIndex: paxIndex,\n            isDisabled: isButtonRouting,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 820,\n              columnNumber: 93\n            }\n          }));\n        }\n      }));\n    }\n  })))) : null, __jsx(Box, {\n    p: 3,\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 834,\n      columnNumber: 41\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: contactInfoSettings.spacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 835,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 836,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 837,\n      columnNumber: 53\n    }\n  }, t('str_paymentInformation'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 841,\n      columnNumber: 49\n    }\n  }, __jsx(PaymentInformation, {\n    isDisabled: isButtonRouting || state.isHandleContinue,\n    textFieldsClass: classes.infoTextField,\n    onChange: function onChange(e) {\n      return setToState('ibe', ['creditCardInfo'], e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 842,\n      columnNumber: 53\n    }\n  })))), __jsx(Box, {\n    p: 3,\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 850,\n      columnNumber: 41\n    }\n  }, __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\",\n    alignItems: \"center\",\n    spacing: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 851,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 852,\n      columnNumber: 49\n    }\n  }, __jsx(Button, {\n    disabled: isButtonRouting || state.isHandleContinue,\n    variant: \"outlined\",\n    color: \"secondary\",\n    size: \"large\",\n    disableElevation: true,\n    startIcon: __jsx(ArrowBackIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 859,\n        columnNumber: 68\n      }\n    }),\n    onClick: function onClick() {\n      return handleBack();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 853,\n      columnNumber: 53\n    }\n  }, t('str_back'))), __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 865,\n      columnNumber: 49\n    }\n  }, __jsx(ProgressButton, {\n    isLoading: state.isHandleContinue,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 866,\n      columnNumber: 53\n    }\n  }, __jsx(Button, {\n    disabled: isButtonRouting || state.isHandleContinue,\n    onClick: function onClick() {\n      return handleContinue();\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"large\",\n    disableElevation: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 867,\n      columnNumber: 57\n    }\n  }, t('str_continueReservation'))))))))))), __jsx(Grid, {\n    item: true,\n    xs: settings.rightColumn.xs,\n    sm: settings.rightColumn.sm,\n    md: settings.rightColumn.md,\n    lg: settings.rightColumn.lg,\n    xl: settings.rightColumn.xl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 886,\n      columnNumber: 21\n    }\n  }, __jsx(ReservationCart, {\n    bookingActiveStep: bookingStepCodes.details,\n    handleNextStep: function handleNextStep() {\n      return handleContinue();\n    },\n    handleBackStep: function handleBackStep() {\n      return handleBack();\n    },\n    isDisabled: isButtonRouting,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 887,\n      columnNumber: 25\n    }\n  })))), __jsx(\"div\", {\n    className: classes.bottomSpaceBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 891,\n      columnNumber: 13\n    }\n  }));\n};\n\n_s(DetailsPage, \"8OnOju9U8B9tOW5u2txryavevwA=\", false, function () {\n  return [useStyles, useTranslation, useSnackbar, useRouter, useSelector, useSelector, useSelector, useOrestAction];\n});\n\n_c = DetailsPage;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailsPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailsPage\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/pages/booking/details.js"],"names":["React","useContext","useEffect","useState","connect","useSelector","setToState","Box","Button","Checkbox","Divider","FormControlLabel","FormGroup","Grid","TextField","Typography","Container","IconButton","OutlinedInput","InputLabel","InputAdornment","FormHelperText","FormControl","makeStyles","clsx","useSnackbar","ReservationCart","BookingStepper","BookingLayout","WebCmsGlobal","useRouter","axios","ArrowBackIcon","TrackedChangesDialog","LoginDialog","PhoneInput","OtherGuestInfo","PaymentInformation","ProgressButton","useOrestAction","TagManager","REQUEST_METHOD_CONST","required","validateEmail","moment","MomentAdapter","DatePicker","LocalizationProvider","VisibilityOff","UseOrest","useTranslation","getBookingSteps","bookingSteps","bookingStepCodes","useStyles","theme","outline","containerBooking","opacity","root","marginTop","background","palette","paper","width","backgroundColor","border","borderRadius","stepperRoot","display","infoTextField","createAccountHelperText","textAlign","textRed","color","topSpaceBox","bottomSpaceBox","marginBottom","mandatoryFieldMarker","contactInfo","mandatoryField","useMandatoryField","split","Array","isArray","newContactInfo","Object","keys","map","key","includes","isrequired","settings","containerMaxWidth","containerSpacing","leftColumn","xs","sm","md","lg","xl","rightColumn","DetailsPage","props","classes","GENERAL_SETTINGS","WEBCMS_DATA","locale","t","state","hideLayout","showAddons","Boolean","hotelSettings","product","remark","transport","enqueueSnackbar","setUseScrollUp","router","isLoginDialog","setIsLoginDialog","isOpenLoginDialog","setIsOpenLoginDialog","emailIsAlreadyExistsDialog","setEmailIsAlreadyExistsDialog","isRouting","setIsRouting","loginfo","orest","currentUser","token","auth","access_token","clientBase","client","iframe","query","isLogoutButton","deleteOrestCurrentUserInfo","resetOrestState","height","imgHeight","pageSizes","setPageSizes","isButtonRouting","setIsButtonRouting","isEffect","selectedRooms","length","push","pathname","assets","meta","googleTag","page","setChange","hotelName","title","hotelId","HOTELREFNO","pageTitle","window","document","pagePath","location","href","pageStep","innerWidth","innerHeight","addEventListener","handleScroll","passive","events","on","removeEventListener","handleContinueByGuestDetailPage","handleContinue","selectedPaymentTypeId","apiUrl","OREST_URL","endpoint","method","POST","params","hotelrefno","then","checkTokenResponse","data","active","id","setClientInfo","clientid","accid","allhotels","status","count","variant","windowSize","documentElement","clientWidth","body","pageYOffset","clientInfoData","firstName","value","firstname","iserror","guestList","lastName","lastname","mail","email","birthDate","birthdate","healthcode","phone","mobiletel","isActive","password","showPassword","isError","createAccount","setCreateAccount","contactInfoSettings","spacing","margin","hasPayType","filter","payType","hotelPaymentType","paymentypes","item","Number","cireqflds","changeFirstName","e","currentTarget","changeLastName","changeMail","changeHealtCode","changePhoneNumber","changeDateOfBirth","date","_isValid","_d","changeNote","note","emailValidation","url","BASE_URL","response","continueWithoutClientRecord","isRequiredError","isEmailError","forEach","contactEmail","exits","validation","checkPayTypeIsMailOrder","mailOrderInfo","cardIsValid","room","roomIndex","totalpax","from","pax","paxIndex","handleBack","handleScrollTop","scrollTo","top","behavior","handleLogout","paddingTop","padding","fontSize","images","left","overflow","position","zIndex","STATIC_URL","details","regbirthdate","subtract","maxChildAge","reghealthcode","target","preventDefault","roomNo","numberOfGuests","totalchd","roomAvailabilityList","find","roomtypeid","shorttext","paxNo","isHandleContinue","mapStateToProps","formReducer","ibe","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport { connect, useSelector } from 'react-redux'\nimport { setToState } from 'state/actions'\nimport {\n    Box,\n    Button,\n    Checkbox,\n    Divider,\n    FormControlLabel,\n    FormGroup,\n    Grid,\n    TextField,\n    Typography,\n    Container,\n    IconButton,\n    OutlinedInput,\n    InputLabel,\n    InputAdornment,\n    FormHelperText,\n    FormControl\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport { useSnackbar } from 'notistack'\nimport ReservationCart from 'components/booking/components/ReservationCart'\nimport BookingStepper from 'components/booking/components/BookingStepper'\nimport BookingLayout from 'components/layout/containers/booking-layout'\nimport WebCmsGlobal from 'components/webcms-global'\nimport { useRouter } from 'next/router'\nimport axios from 'axios'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport TrackedChangesDialog from 'components/TrackedChangesDialog'\nimport LoginDialog from 'components/LoginComponent/LoginDialog'\nimport PhoneInput from '@webcms-ui/core/phone-input'\nimport OtherGuestInfo from 'components/booking/OtherGuestInfo'\nimport PaymentInformation from 'components/booking/components/PaymentInformation'\nimport ProgressButton from 'components/booking/components/ProgressButton'\nimport { useOrestAction } from 'model/orest'\nimport TagManager from '@webcms-globals/tag-manager'\nimport { REQUEST_METHOD_CONST } from 'model/orest/constants'\nimport { required, validateEmail } from 'state/utils/form'\nimport moment from 'moment'\nimport MomentAdapter from '@date-io/moment'\nimport { DatePicker, LocalizationProvider } from '@material-ui/pickers'\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'\nimport { UseOrest } from '@webcms/orest'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { getBookingSteps, bookingSteps, bookingStepCodes } from 'components/booking/commons'\n\nconst useStyles = makeStyles((theme) => ({\n    '@global': {\n        'button:focus': {\n            outline: 'none',\n        },\n    },\n    containerBooking: {\n        '& > *': {\n            opacity: 0.9\n        }\n    },\n    root: {\n        marginTop: 16,\n        background: theme.palette.background.paper,\n        width: '100%',\n        backgroundColor: '#fff',\n        border: '1px solid #dadadd',\n        borderRadius: 6,\n    },\n    stepperRoot: {\n        backgroundColor: '#fff',\n        border: '1px solid #dadadd',\n        borderRadius: 6,\n        \"@media print\": {\n            display: 'none'\n        }\n    },\n    infoTextField: {\n        background: '#FFFFFF',\n        '& fieldset': {\n            borderRadius: 0,\n        },\n    },\n    createAccountHelperText: {\n        textAlign: 'right',\n    },\n    textRed: {\n        color: 'red'\n    },\n    topSpaceBox: {\n        width: '100%',\n        display: 'block',\n        marginTop: 60,\n    },\n    bottomSpaceBox: {\n        width: '100%',\n        display: 'block',\n        marginBottom: '30vh',\n        '@media print': {\n            display: 'none',\n        },\n    },\n}))\n\nfunction mandatoryFieldMarker(contactInfo, mandatoryField) {\n    const useMandatoryField = mandatoryField && mandatoryField.split(',') || false\n    if(!Array.isArray(useMandatoryField)){\n        return contactInfo\n    }\n\n    let newContactInfo = {...contactInfo}\n    Object.keys(contactInfo).map((key) => {\n        if(mandatoryField.includes(contactInfo[key].key)){\n            newContactInfo[key].isrequired = true\n        }\n    })\n    return newContactInfo\n}\n\nconst settings = {\n    containerMaxWidth: 'lg',\n    containerSpacing: 3,\n    leftColumn: {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        lg: 8,\n        xl: 8,\n    },\n    rightColumn: {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        lg: 4,\n        xl: 4,\n    },\n}\n\nconst DetailsPage = (props) => {\n    const classes = useStyles()\n        , { GENERAL_SETTINGS, WEBCMS_DATA, locale } = useContext(WebCmsGlobal)\n        , { t } = useTranslation()\n        , { state, setToState, hideLayout } = props\n        , showAddons = Boolean(GENERAL_SETTINGS.hotelSettings.product) || Boolean(GENERAL_SETTINGS.hotelSettings.remark) || Boolean(GENERAL_SETTINGS.hotelSettings.transport)\n        , { enqueueSnackbar } = useSnackbar()\n        , [, setUseScrollUp] = useState(false)\n        , router = useRouter()\n        , [isLoginDialog, setIsLoginDialog] = useState(false)\n        , [isOpenLoginDialog, setIsOpenLoginDialog] = useState(false)\n        , [emailIsAlreadyExistsDialog, setEmailIsAlreadyExistsDialog] = useState(false)\n        , [isRouting, setIsRouting] = useState(false)\n        , loginfo = useSelector((state) => state.orest.currentUser && state.orest.currentUser.loginfo)\n        , token = useSelector((state) => state?.orest?.currentUser?.auth.access_token || false)\n        , clientBase = useSelector((state) => state?.orest?.state?.client || false)\n        , iframe = router.query.iframe === 'true'\n        , isLogoutButton = (token && iframe)\n        , { deleteOrestCurrentUserInfo, resetOrestState } = useOrestAction()\n        , [pageSizes, setPageSizes] = useState({\n            width: '100%',\n            height: '100%',\n            imgHeight: '100%',\n         })\n        , [isButtonRouting, setIsButtonRouting] = useState(false)\n\n    useEffect(() => {\n        let isEffect = true\n\n        if (!(state.selectedRooms.length > 0)) {\n            setIsRouting(true)\n            router.push ({\n                pathname: '/booking/rooms',\n                query: router.query\n            })\n        }\n        if (isEffect && WEBCMS_DATA?.assets?.meta?.googleTag) {\n            TagManager.page.setChange({\n                hotelName: WEBCMS_DATA?.assets?.meta?.title,\n                hotelId: GENERAL_SETTINGS.HOTELREFNO,\n                pageTitle: window.document.title,\n                pagePath: location.href,\n                pageStep: 'Guest Details',\n            })\n        }\n\n        setPageSizes({\n            width: window.innerWidth,\n            height: window.innerHeight,\n            imgHeight: window.innerHeight + 104.1\n        })\n\n        window.addEventListener('scroll', handleScroll, { passive: true })\n        window.addEventListener('resize', () => {\n            setPageSizes({\n                width: window.innerWidth,\n                height: window.innerHeight,\n                imgHeight: window.innerHeight + 104.1\n            })\n        })\n\n        router.events.on('routeChangeStart', () => setIsButtonRouting(true))\n        router.events.on('routeChangeComplete', () => setIsButtonRouting(false))\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll)\n        }\n    }, [])\n\n    useEffect(()=> {\n        window.handleContinueByGuestDetailPage = () => {\n            return handleContinue()\n        }\n    }, [state.selectedPaymentTypeId])\n\n    useEffect(() => {\n        if (loginfo) {\n            setIsLoginDialog(true)\n            UseOrest({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: 'auth/checktoken',\n                token: token,\n                method: REQUEST_METHOD_CONST.POST,\n                params: {\n                    token: token,\n                    hotelrefno: '',\n                },\n            }).then((checkTokenResponse) => {\n                if (checkTokenResponse?.data?.active) {\n                    if (clientBase && clientBase?.id) {\n                        setClientInfo(clientBase)\n                    } else if ((router.query.clientid || loginfo.accid) && token) {\n                        UseOrest({\n                            apiUrl: GENERAL_SETTINGS.OREST_URL,\n                            endpoint: 'client/getbyid',\n                            token,\n                            params: {\n                                key: router.query.clientid || loginfo.accid,\n                                allhotels: true,\n                            },\n                        }).then((client) => {\n                            if (client.status === 200 && client.data.count > 0) {\n                                setClientInfo(client.data.data)\n                            }\n                        })\n                    }\n                }else{\n                    enqueueSnackbar(t('str_sessionTimeoutLoginAgain'), { variant: 'info' })\n                    deleteOrestCurrentUserInfo()\n                }\n            }).catch(() => {\n                enqueueSnackbar(t('str_sessionTimeoutLoginAgain'), { variant: 'info' })\n                deleteOrestCurrentUserInfo()\n            })\n        } else {\n            setIsLoginDialog(false)\n        }\n    }, [clientBase, loginfo])\n\n    const handleScroll = () => {\n        let windowSize = window?.innerWidth || document?.documentElement?.clientWidth || document?.body?.clientWidth || 0;\n        if(windowSize <= 959 && window?.pageYOffset > 100){\n            setUseScrollUp(true)\n        }else{\n            setUseScrollUp(false)\n        }\n    }\n\n    const setClientInfo = (clientInfoData) => {\n        let newContactInfo = state.contactInfo\n\n        newContactInfo.firstName.value = clientInfoData.firstname\n        newContactInfo.firstName.iserror = false\n        selectedRooms[0].guestList[0].firstName.value = clientInfoData.firstname\n\n        newContactInfo.lastName.value = clientInfoData.lastname\n        newContactInfo.lastName.iserror = false\n        selectedRooms[0].guestList[0].lastName.value = clientInfoData.lastname\n\n        newContactInfo.mail.value = clientInfoData.email\n        newContactInfo.mail.iserror = false\n        selectedRooms[0].guestList[0].mail.value = clientInfoData.email\n\n        newContactInfo.birthDate.value = clientInfoData.birthdate\n        newContactInfo.birthDate.iserror = false\n        selectedRooms[0].guestList[0].birthDate.value = clientInfoData.birthdate\n\n        newContactInfo.healthcode.value = clientInfoData.healthcode\n        newContactInfo.healthcode.iserror = false\n        selectedRooms[0].guestList[0].healthcode.value = clientInfoData.healthcode\n\n        newContactInfo.phone.value = clientInfoData.mobiletel\n        newContactInfo.phone.iserror = false\n        selectedRooms[0].guestList[0].phone.value = clientInfoData.mobiletel\n\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], newContactInfo)\n    }\n\n    const [createAccount, setCreateAccount] = useState({\n        isActive: false,\n        password: '',\n        showPassword: false,\n        isError: false\n    })\n\n\n    const contactInfoSettings = {\n        spacing: 2,\n        margin: 'none',\n        variant: 'outlined',\n    }\n\n    const hasPayType = async (id, filter) => {\n        const payType = state.hotelPaymentType && state.hotelPaymentType.paymentypes.length > 0 && state.hotelPaymentType.paymentypes.filter((item) => item[filter])[0]\n        return Boolean(payType && Number(id) === Number(payType.id))\n    }\n\n    let selectedRooms = state.selectedRooms\n    let contactInfo = mandatoryFieldMarker(state.contactInfo, GENERAL_SETTINGS.hotelSettings.cireqflds)\n\n    const changeFirstName = (e) => {\n        contactInfo.firstName.value = e.currentTarget.value\n        contactInfo.firstName.iserror = false\n        selectedRooms[0].guestList[0].firstName.value = e.currentTarget.value\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], contactInfo)\n    }\n\n    const changeLastName = (e) => {\n        contactInfo.lastName.value = e.currentTarget.value\n        contactInfo.lastName.iserror = false\n        selectedRooms[0].guestList[0].lastName.value = e.currentTarget.value\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], contactInfo)\n    }\n\n    const changeMail = (e) => {\n        setToState('ibe', ['continueWithoutClientRecord'], false)\n        contactInfo.mail.value = e.currentTarget.value\n        contactInfo.mail.iserror = false\n        selectedRooms[0].guestList[0].mail.value = e.currentTarget.value\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], contactInfo)\n    }\n\n    const changeHealtCode = (e) => {\n        contactInfo.healthcode.value = e.currentTarget.value\n        contactInfo.healthcode.iserror = false\n        selectedRooms[0].guestList[0].healthcode.value = e.currentTarget.value\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], contactInfo)\n    }\n\n    const changePhoneNumber = (e) => {\n        contactInfo.phone.value = e\n        contactInfo.phone.iserror = false\n        selectedRooms[0].guestList[0].phone.value = e\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], contactInfo)\n    }\n\n    const changeDateOfBirth = (date) => {\n        if (date) {\n            if (date._isValid) {\n                contactInfo.birthDate.value = date._d\n                selectedRooms[0].guestList[0].birthDate.value = date._d\n            } else {\n                contactInfo.birthDate.value = date._d\n                selectedRooms[0].guestList[0].birthDate.value = date._d\n            }\n            contactInfo.birthDate.iserror = false\n            setToState('ibe', ['selectedRooms'], selectedRooms)\n            setToState('ibe', ['contactInfo'], contactInfo)\n        }\n    }\n\n    const changeNote = (e) => {\n        contactInfo.note.value = e.currentTarget.value\n        selectedRooms[0].guestList[0].note.value = e.currentTarget.value\n        setToState('ibe', ['selectedRooms'], selectedRooms)\n        setToState('ibe', ['contactInfo'], contactInfo)\n    }\n\n    const emailValidation = (email) => {\n        return axios({\n            url: `${GENERAL_SETTINGS.BASE_URL}api/ors/guest/email/valid`,\n            method: 'post',\n            data: {\n                email: email\n            }\n        }).then((response)=> {\n            return response.data\n        })\n    }\n\n\n    const handleContinue = async (continueWithoutClientRecord) => {\n        setToState('ibe', ['isHandleContinue'], true)\n        let isRequiredError = false, isEmailError = false\n\n        Object.keys(contactInfo).forEach(function(key) {\n            if (contactInfo[key].isrequired) {\n                if (required(contactInfo[key].value)) {\n                    contactInfo[key].iserror = true\n                    isRequiredError = true\n                }\n            }\n        })\n\n        if(createAccount.isActive && (createAccount.password === '' || createAccount.password.length < 6)){\n            setCreateAccount({ ...createAccount, isError: true })\n            enqueueSnackbar(t('str_pleaseCheckYourPassword'), { variant: 'error' })\n            isRequiredError = true\n        }else{\n            setCreateAccount({ ...createAccount, isError: false })\n        }\n\n        const contactEmail = await emailValidation(contactInfo.mail.value)\n        if(!continueWithoutClientRecord && contactEmail.exits && !loginfo){\n            isEmailError = true\n            contactInfo['mail'].iserror = true\n            setEmailIsAlreadyExistsDialog(true)\n            setToState('ibe', ['isHandleContinue'], false)\n        }\n\n        if(!contactEmail.validation){\n            isEmailError = true\n            contactInfo['mail'].iserror = true\n        }\n\n        if(!Number(state.selectedPaymentTypeId) > 0){\n            enqueueSnackbar(t('str_pleaseSelectAPaymentMethodToContinue'), { variant: 'warning' })\n            setToState('ibe', ['isHandleContinue'], false)\n            return;\n        }\n\n        const checkPayTypeIsMailOrder = await hasPayType(state.selectedPaymentTypeId, 'ismailorder')\n        if(checkPayTypeIsMailOrder && (!state.mailOrderInfo.cardIsValid)){\n            enqueueSnackbar(t('str_pleaseCheckYourCardInformation'), { variant: 'warning' })\n            setToState('ibe', ['isHandleContinue'], false)\n            return;\n        }\n\n        setToState('ibe', ['contactInfo'], contactInfo)\n        selectedRooms.map((room, roomIndex) => {\n            if (roomIndex !== 0 || (roomIndex === 0 && room.totalpax > 1)) {\n                Array.from({ length: room.totalpax }).map((pax, paxIndex) => {\n                    if (roomIndex > 0 || (roomIndex === 0 && paxIndex > 0)) {\n                        let guestList = selectedRooms[roomIndex].guestList[paxIndex]\n                        Object.keys(guestList).forEach(function(key) {\n                            if (guestList[key].isrequired) {\n                                if (required(guestList[key].value)) {\n                                    guestList[key].iserror = true\n                                    isRequiredError = true\n                                }\n                            }\n\n                            if (guestList['mail'].value) {\n                                if (validateEmail(guestList['mail'].value)) {\n                                    guestList['mail'].iserror = true\n                                    isEmailError = true\n                                }\n                            }\n                        })\n\n                        setToState('ibe', ['selectedRooms', roomIndex, 'guestList', paxIndex], guestList)\n                    }\n                })\n            }\n        })\n\n        if(isRequiredError || isEmailError){\n            setToState('ibe', ['isHandleContinue'], false)\n            if(!createAccount.isError && !contactEmail.exits){\n                enqueueSnackbar(t('str_pleaseCheckMandatoryFields'), { variant: 'error' })\n            }\n        }else{\n            setToState('ibe', ['isHandleContinue'], false)\n            if(createAccount.isActive){\n                setToState('ibe', ['clientPassword'], createAccount.password)\n            }\n            router.push ({\n                pathname: '/booking/preview',\n                query: router.query\n            })\n        }\n    }\n\n    const handleBack = () => {\n        if(showAddons){\n            router.push ({\n                pathname: '/booking/addons',\n                query: router.query\n            })\n        }else{\n            router.push ({\n                pathname: '/booking/rooms',\n                query: router.query\n            })\n        }\n        handleScrollTop()\n    }\n\n    const handleScrollTop = () => {\n        return window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        })\n    }\n\n    const handleLogout = () => {\n        deleteOrestCurrentUserInfo()\n        resetOrestState()\n    }\n\n    if (isRouting) {\n        return (\n            <BookingLayout hideLayout={hideLayout}>\n                <div className={classes.topSpaceBox} />\n                <Container maxWidth={settings.containerMaxWidth} className={classes.containerBooking}>\n                    <Grid container spacing={settings.containerSpacing}>\n                        <Grid item xs={12}>\n                            <div style={{ width: '100%', height: '80vh', textAlign: 'center', paddingTop: '25%' }}>\n                                <span style={{\n                                    background: '#d5d5d5',\n                                    padding: 40,\n                                    width: '100%',\n                                    display: 'block',\n                                    fontSize: 15,\n                                }}>\n                                    {t('str_pleaseWait')}\n                                </span>\n                            </div>\n                        </Grid>\n                    </Grid>\n                </Container>\n            </BookingLayout>\n        )\n    }\n\n    return (\n        <BookingLayout hideLayout={hideLayout}>\n            {WEBCMS_DATA?.assets?.images?.background ? (\n                <div style={{ width: pageSizes.width, height: pageSizes.height, top:0, left: 0, overflow: 'hidden', position: 'fixed', zIndex: -3 }}>\n                    <ul style={{padding: 0}}>\n                        <li style={{display: 'list-item'}}>\n                            <img src={GENERAL_SETTINGS.STATIC_URL + WEBCMS_DATA.assets.images.background} style={{width: pageSizes.width, height: pageSizes.imgHeight,}} />\n                        </li>\n                    </ul>\n                </div>\n            ): null}\n            <div className={classes.topSpaceBox} />\n            <Container maxWidth={settings.containerMaxWidth} className={classes.containerBooking}>\n                <Grid container spacing={settings.containerSpacing}>\n                    <Grid item xs={settings.leftColumn.xs} sm={settings.leftColumn.sm} md={settings.leftColumn.md} lg={settings.leftColumn.lg} xl={settings.leftColumn.xl}>\n                        <Grid container spacing={0}>\n                            <Grid item xs={12}>\n                                <BookingStepper classes={{ root: classes.stepperRoot }} activeStep={bookingStepCodes.details} steps={getBookingSteps(bookingSteps, showAddons)}/>\n                                <Grid container spacing={0} style={{paddingTop: 10}}>\n                                    <React.Fragment>\n                                        <TrackedChangesDialog\n                                            isContainedNo={false}\n                                            dialogTitle={t('str_info')}\n                                            dialogDesc={t('str_thisEmailAddressHasBeenUsedBeforeYouCanContinueTheReservationByLoggingIn')}\n                                            labelYes={t('str_logInHere')}\n                                            labelNo={t('str_continueWithoutLogin')}\n                                            open={emailIsAlreadyExistsDialog}\n                                            onPressNo={() => {\n                                                contactInfo['mail'].iserror = false\n                                                setToState('ibe', ['contactInfo'], contactInfo)\n                                                setToState('ibe', ['continueWithoutClientRecord'], true)\n                                                setEmailIsAlreadyExistsDialog(false)\n                                                handleContinue(true)\n                                            }}\n                                            onPressYes={() => {\n                                                setEmailIsAlreadyExistsDialog(false)\n                                                setIsOpenLoginDialog(true)\n                                            }}\n                                        />\n                                        {(!isLoginDialog) ? (\n                                            <React.Fragment>\n                                                <LoginDialog open={isOpenLoginDialog} onClose={(status) => setIsOpenLoginDialog(status)} locationName='booking' isLoginWrapper disableRegister/>\n                                                <Box p={3} className={classes.root}>\n                                                    <Grid container spacing={contactInfoSettings.spacing}>\n                                                        <Grid item xs={12}>\n                                                            <Typography variant='h6' gutterBottom>\n                                                                {t('str_signInForAFasterBooking')}\n                                                            </Typography>\n                                                        </Grid>\n                                                        <Grid item xs={12}>\n                                                            <Button onClick={() => setIsOpenLoginDialog(true)} variant='contained' color='primary' size='large' disabled={isButtonRouting} disableElevation>\n                                                                {t('str_login')}\n                                                            </Button>\n                                                        </Grid>\n                                                    </Grid>\n                                                </Box>\n                                            </React.Fragment>\n                                        ): null}\n                                        {(!!isLoginDialog && isLogoutButton) ? (\n                                            <React.Fragment>\n                                                <Box p={3} className={classes.root}>\n                                                    <Grid container spacing={contactInfoSettings.spacing}>\n                                                        <Grid item xs={12}>\n                                                            <Button onClick={() => handleLogout()} variant='contained' color='primary' size='large' disabled={isButtonRouting} disableElevation>\n                                                                {t('str_logout')}\n                                                            </Button>\n                                                        </Grid>\n                                                    </Grid>\n                                                </Box>\n                                            </React.Fragment>\n                                        ) : null}\n                                        <Box p={3} className={classes.root}>\n                                            <Grid container spacing={contactInfoSettings.spacing}>\n                                                <Grid item xs={12}>\n                                                    <Typography variant=\"h6\" gutterBottom>\n                                                        {t('str_contactInfo')}\n                                                    </Typography>\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <TextField\n                                                        disabled={isButtonRouting || Boolean(loginfo)}\n                                                        className={classes.infoTextField}\n                                                        margin={contactInfoSettings.margin}\n                                                        variant={contactInfoSettings.variant}\n                                                        required={state.contactInfo.firstName.isrequired}\n                                                        id=\"firstName\"\n                                                        name=\"firstName\"\n                                                        label={t('str_firstName')}\n                                                        fullWidth\n                                                        onChange={(e)=> changeFirstName(e)}\n                                                        value={state.contactInfo.firstName.value || ''}\n                                                        error={state.contactInfo.firstName.iserror}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <TextField\n                                                        disabled={isButtonRouting || Boolean(loginfo)}\n                                                        className={classes.infoTextField}\n                                                        margin={contactInfoSettings.margin}\n                                                        variant={contactInfoSettings.variant}\n                                                        required={state.contactInfo.lastName.isrequired}\n                                                        id=\"lastName\"\n                                                        name=\"lastName\"\n                                                        label={t('str_lastName')}\n                                                        fullWidth\n                                                        onChange={(e)=> changeLastName(e)}\n                                                        value={state.contactInfo.lastName.value || ''}\n                                                        error={state.contactInfo.lastName.iserror}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <TextField\n                                                        disabled={isButtonRouting || Boolean(loginfo)}\n                                                        className={classes.infoTextField}\n                                                        margin={contactInfoSettings.margin}\n                                                        variant={contactInfoSettings.variant}\n                                                        required={state.contactInfo.mail.isrequired}\n                                                        id=\"mail\"\n                                                        name=\"mail\"\n                                                        label={t('str_email')}\n                                                        fullWidth\n                                                        onChange={(e)=> changeMail(e)}\n                                                        value={state.contactInfo.mail.value || ''}\n                                                        error={state.contactInfo.mail.iserror}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <PhoneInput\n                                                        disabled={isButtonRouting || Boolean(loginfo)}\n                                                        className={classes.infoTextField}\n                                                        defaultCountry={locale === 'en' ? 'us': locale}\n                                                        preferredCountries={['it', 'ie', 'de', 'fr', 'es', 'gb']}\n                                                        regions={['america', 'europe', 'asia', 'oceania', 'africa']}\n                                                        id=\"phone\"\n                                                        name=\"phone\"\n                                                        label={t('str_phone')}\n                                                        fullWidth\n                                                        margin={contactInfoSettings.margin}\n                                                        variant={contactInfoSettings.variant}\n                                                        onChange={(e)=> changePhoneNumber(e)}\n                                                        required={state.contactInfo.phone.isrequired}\n                                                        value={state.contactInfo.phone.value || ''}\n                                                        error={state.contactInfo.phone.iserror}\n                                                    />\n                                                </Grid>\n                                                {GENERAL_SETTINGS?.hotelSettings?.regbirthdate && (\n                                                    <Grid item xs={12} sm={6}>\n                                                        <LocalizationProvider dateLibInstance={moment} dateAdapter={MomentAdapter}>\n                                                            <DatePicker\n                                                                disabled={isButtonRouting || Boolean(loginfo)}\n                                                                autoOk\n                                                                id=\"birthdate\"\n                                                                name=\"birthdate\"\n                                                                fullWidth\n                                                                disableFuture\n                                                                openTo={'date'}\n                                                                views={['year', 'month', 'date']}\n                                                                inputFormat=\"DD/MM/YYYY\"\n                                                                label={t('str_birthDate')}\n                                                                onChange={(e) => changeDateOfBirth(e)}\n                                                                value={state.contactInfo.birthDate.value ? moment(state.contactInfo.birthDate.value) : moment().subtract(state.maxChildAge > 0 ? state.maxChildAge : 12, 'years')}\n                                                                renderInput={(props) =>\n                                                                    <TextField\n                                                                        {...props}\n                                                                        className={classes.infoTextField}\n                                                                        margin={contactInfoSettings.margin}\n                                                                        variant={contactInfoSettings.variant}\n                                                                        fullWidth\n                                                                        helperText=\"\"\n                                                                        required={state.contactInfo.birthDate.isrequired}\n                                                                        error={state.contactInfo.birthDate.iserror}\n                                                                    />\n                                                                }\n                                                            />\n                                                        </LocalizationProvider>\n                                                    </Grid>\n                                                )}\n                                                {GENERAL_SETTINGS?.hotelSettings?.reghealthcode && (\n                                                    <Grid item xs={12} sm={6}>\n                                                        <TextField\n                                                            disabled={isButtonRouting || Boolean(loginfo)}\n                                                            className={classes.infoTextField}\n                                                            margin={contactInfoSettings.margin}\n                                                            variant={contactInfoSettings.variant}\n                                                            required={state.contactInfo.healthcode.isrequired}\n                                                            id=\"healtcode\"\n                                                            name=\"healtcode\"\n                                                            label={t('str_healthCode')}\n                                                            fullWidth\n                                                            onChange={(e)=> changeHealtCode(e)}\n                                                            value={state.contactInfo.healthcode.value || ''}\n                                                            error={state.contactInfo.healthcode.iserror}\n                                                        />\n                                                    </Grid>\n                                                )}\n                                                <Grid item xs={12}>\n                                                    <TextField\n                                                        disabled={isButtonRouting || Boolean(loginfo)}\n                                                        className={classes.infoTextField}\n                                                        margin=\"dense\"\n                                                        variant=\"outlined\"\n                                                        id=\"note\"\n                                                        name=\"note\"\n                                                        label={t('str_note')}\n                                                        fullWidth\n                                                        multiline\n                                                        rows={4}\n                                                        onChange={(e)=> changeNote(e)}\n                                                        required={state.contactInfo.note.isrequired}\n                                                        value={state.contactInfo.note.value || ''}\n                                                        error={state.contactInfo.note.iserror}\n                                                    />\n                                                </Grid>\n                                                {(!state.continueWithoutClientRecord && !isLoginDialog) ? (\n                                                    <Grid item xs={12}>\n                                                        <Divider variant=\"fullWidth\" />\n                                                        <FormGroup row>\n                                                            <FormControlLabel\n                                                                control={<Checkbox name=\"create-account\" color=\"primary\" value={createAccount} onClick={()=> setCreateAccount({ ...createAccount, isActive: !createAccount.isActive })}/>}\n                                                                label={t('str_iWouldLikeToCreateAnAccount')}\n                                                            />\n                                                        </FormGroup>\n                                                        {createAccount.isActive && (\n                                                            <Box component=\"span\" display={createAccount.isActive ? 'block' : 'none'}>\n                                                                <FormControl variant=\"outlined\">\n                                                                    <InputLabel htmlFor=\"create-account-password\">{t('str_password')}</InputLabel>\n                                                                    <OutlinedInput\n                                                                        disabled={isButtonRouting}\n                                                                        className={classes.infoTextField}\n                                                                        id=\"create-account-password\"\n                                                                        type={createAccount.showPassword ? 'text' : 'password'}\n                                                                        value={createAccount.password}\n                                                                        onChange={(e) => setCreateAccount({ ...createAccount, password: e.target.value, })}\n                                                                        aria-describedby=\"create-account-password-helper-text\"\n                                                                        labelWidth={70}\n                                                                        endAdornment={\n                                                                            <InputAdornment position=\"end\">\n                                                                                <IconButton\n                                                                                    aria-label=\"toggle password visibility\"\n                                                                                    onClick={() => setCreateAccount({ ...createAccount, showPassword: !createAccount.showPassword, })}\n                                                                                    onMouseDown={(e) => e.preventDefault()}\n                                                                                >\n                                                                                    {createAccount.showPassword ? <Visibility/> : <VisibilityOff/>}\n                                                                                </IconButton>\n                                                                            </InputAdornment>\n                                                                        }\n                                                                    />\n                                                                    <FormHelperText id=\"create-account-password-helper-text\" className={clsx(classes.createAccountHelperText, { [classes.textRed]: createAccount.isError } )}>{createAccount.isError ? t('str_yourPasswordMustBeAMinOf6Characters') : t('str_bookFasterOptional')}</FormHelperText>\n                                                                </FormControl>\n                                                            </Box>\n                                                        )}\n                                                    </Grid>\n                                                ): null}\n                                            </Grid>\n                                        </Box>\n                                        {state.selectedRooms.length > 1 || (state.selectedRooms.length >= 1 && state.selectedRooms[0].guestList.length > 1) ? (\n                                            <Box p={3} className={classes.root}>\n                                                <Grid container spacing={contactInfoSettings.spacing}>\n                                                    <Grid item xs={12}>\n                                                        <Typography variant=\"h6\" gutterBottom>\n                                                            {t('str_otherGuests')}\n                                                        </Typography>\n                                                    </Grid>\n                                                    <Grid item xs={12}>\n                                                        {state.selectedRooms && state.selectedRooms.map((room, roomIndex) => {\n                                                                let roomNo = roomIndex + 1\n                                                                const numberOfGuests = Number(room.totalpax) + Number(room.totalchd)\n                                                                if (roomIndex !== 0 || (roomIndex === 0 && numberOfGuests > 1)) {\n                                                                    return (\n                                                                        <div key={roomIndex} style={{ marginBottom: 10 }}>\n                                                                            <Typography variant='subtitle1' style={{ marginBottom: 10 }}>\n                                                                                {roomNo}.{' '}{t('str_room')} ({state.roomAvailabilityList && state.roomAvailabilityList.length > 0 && t(state.roomAvailabilityList.find((item) => item.id === room.roomtypeid).shorttext) })\n                                                                            </Typography>\n                                                                            {Array.from({ length: numberOfGuests }).map((pax, paxIndex) => {\n                                                                                if (roomIndex > 0 || (roomIndex === 0 && paxIndex > 0)) {\n                                                                                    let paxNo = paxIndex + 1\n                                                                                    return (\n                                                                                        <div key={paxIndex} style={{ marginBottom: 10 }}>\n                                                                                            <Typography variant='caption' display='block' style={{ marginBottom: 10 }}>\n                                                                                                {paxNo}.{' '}{t('str_guest')}\n                                                                                            </Typography>\n                                                                                            <OtherGuestInfo roomIndex={roomIndex} paxIndex={paxIndex} isDisabled={isButtonRouting}/>\n                                                                                        </div>\n                                                                                    )\n                                                                                }\n                                                                            })}\n                                                                        </div>\n                                                                    )\n                                                                }\n                                                            },\n                                                        )}\n                                                    </Grid>\n                                                </Grid>\n                                            </Box>\n                                        ) : null}\n                                        <Box p={3} className={classes.root}>\n                                            <Grid container spacing={contactInfoSettings.spacing}>\n                                                <Grid item xs={12}>\n                                                    <Typography variant=\"h6\" gutterBottom>\n                                                        {t('str_paymentInformation')}\n                                                    </Typography>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <PaymentInformation\n                                                        isDisabled={isButtonRouting || state.isHandleContinue}\n                                                        textFieldsClass={classes.infoTextField}\n                                                        onChange={(e)=> setToState('ibe', ['creditCardInfo'], e)}\n                                                    />\n                                                </Grid>\n                                            </Grid>\n                                        </Box>\n                                        <Box p={3} className={classes.root}>\n                                            <Grid container direction=\"row\" justify=\"space-between\" alignItems=\"center\" spacing={3}>\n                                                <Grid item>\n                                                    <Button\n                                                        disabled={isButtonRouting || state.isHandleContinue}\n                                                        variant='outlined'\n                                                        color='secondary'\n                                                        size='large'\n                                                        disableElevation\n                                                        startIcon={<ArrowBackIcon />}\n                                                        onClick={() => handleBack()}\n                                                    >\n                                                        {t('str_back')}\n                                                    </Button>\n                                                </Grid>\n                                                <Grid item>\n                                                    <ProgressButton isLoading={state.isHandleContinue}>\n                                                        <Button\n                                                            disabled={isButtonRouting || state.isHandleContinue}\n                                                            onClick={()=> handleContinue()}\n                                                            variant=\"contained\"\n                                                            color=\"primary\"\n                                                            size=\"large\"\n                                                            disableElevation\n                                                        >\n                                                            {t('str_continueReservation')}\n                                                        </Button>\n                                                    </ProgressButton>\n                                                </Grid>\n                                            </Grid>\n                                        </Box>\n                                    </React.Fragment>\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={settings.rightColumn.xs} sm={settings.rightColumn.sm} md={settings.rightColumn.md} lg={settings.rightColumn.lg} xl={settings.rightColumn.xl}>\n                        <ReservationCart bookingActiveStep={bookingStepCodes.details} handleNextStep={() => handleContinue()} handleBackStep={() => handleBack()} isDisabled={isButtonRouting}/>\n                    </Grid>\n                </Grid>\n            </Container>\n            <div className={classes.bottomSpaceBox} />\n        </BookingLayout>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailsPage)"]},"metadata":{},"sourceType":"module"}