{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/paragraph/Paragraph.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ViewList } from '@webcms/orest';\nimport WebCmsGlobal from 'components/webcms-global';\nimport { useRouter } from 'next/router';\nimport { OREST_ENDPOINT } from '../../../../../../../model/orest/constants';\nimport { connect, useSelector } from 'react-redux';\n\nconst Paragraph = props => {\n  var _router$query2;\n\n  const {\n    paragraph,\n    state\n  } = props;\n  const {\n    GENERAL_SETTINGS,\n    token\n  } = useContext(WebCmsGlobal);\n  const router = useRouter();\n  const clientToken = useSelector(state => {\n    var _router$query;\n\n    return state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : router === null || router === void 0 ? void 0 : (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.authToken;\n  });\n  const companyId = (router === null || router === void 0 ? void 0 : (_router$query2 = router.query) === null || _router$query2 === void 0 ? void 0 : _router$query2.companyID) || GENERAL_SETTINGS.HOTELREFNO;\n  const {\n    0: data,\n    1: setData\n  } = useState('');\n  const authToken = token || clientToken || router.query.authToken;\n  useEffect(() => {\n    if (paragraph !== null && paragraph !== void 0 && paragraph.gid) {\n      ViewList({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n        token: authToken,\n        params: {\n          query: `gid:${paragraph.gid}`,\n          chkselfish: false,\n          hotelrefno: Number(companyId)\n        }\n      }).then(res => {\n        if (res.status === 200 && res.data.data.length > 0) {\n          setData(res.data.data[0].itemtext);\n        }\n      });\n    } else {\n      state.langCode !== state.defaultLang && setData(paragraph);\n    }\n  }, [paragraph]);\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }\n  }, data && __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: data\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 21\n    }\n  }));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.pageBuilder\n  };\n};\n\nexport default connect(mapStateToProps)(Paragraph);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/paragraph/Paragraph.js"],"names":["React","useContext","useEffect","useState","ViewList","WebCmsGlobal","useRouter","OREST_ENDPOINT","connect","useSelector","Paragraph","props","paragraph","state","GENERAL_SETTINGS","token","router","clientToken","orest","currentUser","auth","access_token","query","authToken","companyId","companyID","HOTELREFNO","data","setData","gid","apiUrl","OREST_URL","endpoint","HCMITEMTXTPAR","params","chkselfish","hotelrefno","Number","then","res","status","length","itemtext","langCode","defaultLang","__html","mapStateToProps","formReducer","pageBuilder"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport { ViewList } from '@webcms/orest'\nimport WebCmsGlobal from 'components/webcms-global'\nimport { useRouter } from 'next/router'\nimport { OREST_ENDPOINT } from '../../../../../../../model/orest/constants'\nimport { connect, useSelector } from 'react-redux'\n\nconst Paragraph = (props) => {\n    const { paragraph, state } = props\n    const { GENERAL_SETTINGS, token } = useContext(WebCmsGlobal)\n    const router = useRouter()\n    const clientToken = useSelector((state) => state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : router?.query?.authToken)\n    const companyId = router?.query?.companyID || GENERAL_SETTINGS.HOTELREFNO\n    const [data, setData] = useState('');\n    const authToken = token || clientToken || router.query.authToken;\n\n    useEffect(() => {\n        if (paragraph?.gid) {\n            ViewList({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n                token: authToken,\n                params: {\n                    query: `gid:${paragraph.gid}`,\n                    chkselfish: false,\n                    hotelrefno: Number(companyId)\n                },\n            }).then((res) => {\n                if (res.status === 200 && res.data.data.length > 0) {\n                    setData(res.data.data[0].itemtext)\n                }\n            })\n        } else {\n            state.langCode !== state.defaultLang && setData(paragraph);\n        }\n    }, [paragraph])\n\n    return <React.Fragment>\n        {\n            data && <div dangerouslySetInnerHTML={{__html: data}}></div>\n        }\n    </React.Fragment>\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.pageBuilder,\n    }\n}\n\nexport default connect(mapStateToProps)(Paragraph)\n"]},"metadata":{},"sourceType":"module"}