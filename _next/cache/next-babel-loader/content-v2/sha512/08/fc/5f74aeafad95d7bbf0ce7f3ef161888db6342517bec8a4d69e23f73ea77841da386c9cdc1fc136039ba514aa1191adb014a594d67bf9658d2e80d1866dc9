{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/website/pages/Page.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ViewList } from \"@webcms/orest\";\nimport { OREST_ENDPOINT } from \"../../../../../../model/orest/constants\";\nimport WebCmsGlobal from \"../../../../../webcms-global\";\nimport { useRouter } from \"next/router\";\nimport { connect } from 'react-redux';\nimport PageItemList from \"./PageItemList\";\n\nvar Page = function Page(props) {\n  _s();\n\n  var gid = props.gid,\n      state = props.state,\n      handleSelectedLink = props.handleSelectedLink;\n\n  var _useState = useState(null),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var _useState2 = useState(null),\n      otherLangsPage = _useState2[0],\n      setOtherLangsPage = _useState2[1];\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      token = _useContext.token;\n\n  var router = useRouter();\n  var companyId = router.query.companyID;\n  var authToken = token || router.query.authToken;\n  useEffect(function () {\n    if (gid) {\n      //getting web page from rafile for default language\n      ViewList({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.RAFILE,\n        token: authToken,\n        params: {\n          hotelrefno: Number(companyId),\n          query: \"gid:\".concat(gid)\n        }\n      }).then(function (res) {\n        if (res.status === 200 && res.data && res.data.data) {\n          setPage(res.data.data[0]);\n\n          if (state.langCode !== state.defaultLang) {\n            //getting web page from rafile for other languages\n            ViewList({\n              apiUrl: GENERAL_SETTINGS.OREST_URL,\n              endpoint: OREST_ENDPOINT.RAFILE,\n              token: authToken,\n              params: {\n                hotelrefno: Number(companyId),\n                query: \"code::\".concat(res.data.data[0].code, \",filetype::LANG.WEBPAGE\")\n              }\n            }).then(function (res1) {\n              var _res1$data;\n\n              if (res1.status === 200 && res1 !== null && res1 !== void 0 && (_res1$data = res1.data) !== null && _res1$data !== void 0 && _res1$data.data) {\n                setOtherLangsPage(JSON.parse(Buffer.from(res1.data.data[0].filedata, 'base64').toString('utf-8')));\n              }\n            });\n          }\n        }\n      });\n    }\n  }, [gid]);\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, page && __jsx(PageItemList, {\n    pageData: JSON.parse(Buffer.from(page.filedata, 'base64').toString('utf-8')),\n    otherLangsPage: otherLangsPage,\n    handleSelectedLink: handleSelectedLink,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }));\n};\n\n_s(Page, \"GiqY870ZOK6HRP+cD2+IJb+pGM8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Page;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.pageBuilder\n  };\n};\n\nexport default connect(mapStateToProps)(Page);\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/website/pages/Page.js"],"names":["React","useContext","useEffect","useState","ViewList","OREST_ENDPOINT","WebCmsGlobal","useRouter","connect","PageItemList","Page","props","gid","state","handleSelectedLink","page","setPage","otherLangsPage","setOtherLangsPage","GENERAL_SETTINGS","token","router","companyId","query","companyID","authToken","apiUrl","OREST_URL","endpoint","RAFILE","params","hotelrefno","Number","then","res","status","data","langCode","defaultLang","code","res1","JSON","parse","Buffer","from","filedata","toString","mapStateToProps","formReducer","pageBuilder"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {ViewList} from \"@webcms/orest\";\nimport {OREST_ENDPOINT} from \"../../../../../../model/orest/constants\";\nimport WebCmsGlobal from \"../../../../../webcms-global\";\nimport {useRouter} from \"next/router\";\nimport { connect } from 'react-redux';\nimport PageItemList from \"./PageItemList\";\n\nconst Page = (props) => {\n\n    const { gid, state, handleSelectedLink } = props;\n\n    const [page, setPage] = useState(null);\n    const [otherLangsPage, setOtherLangsPage] = useState(null);\n\n    const {GENERAL_SETTINGS, token} = useContext(WebCmsGlobal);\n    const router = useRouter();\n    const companyId = router.query.companyID;\n    const authToken = token || router.query.authToken;\n\n    useEffect(() => {\n        if(gid) {\n            //getting web page from rafile for default language\n            ViewList({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.RAFILE,\n                token: authToken,\n                params: {\n                    hotelrefno: Number(companyId),\n                    query: `gid:${gid}`,\n                }\n            }).then(res => {\n                if (res.status === 200 && res.data && res.data.data) {\n                    setPage(res.data.data[0]);\n                    if (state.langCode !== state.defaultLang) {\n                        //getting web page from rafile for other languages\n                        ViewList({\n                            apiUrl: GENERAL_SETTINGS.OREST_URL,\n                            endpoint: OREST_ENDPOINT.RAFILE,\n                            token: authToken,\n                            params: {\n                                hotelrefno: Number(companyId),\n                                query: `code::${res.data.data[0].code},filetype::LANG.WEBPAGE`,\n                            }\n                        }).then(res1 => {\n                            if (res1.status === 200 && res1?.data?.data) {\n                                setOtherLangsPage(JSON.parse(Buffer.from(res1.data.data[0].filedata, 'base64').toString('utf-8')));\n                            }\n                        })\n                    }\n                }\n            })\n        }\n    }, [gid]);\n\n    return(\n        <React.Fragment>\n            {\n                page && <PageItemList\n                    pageData={JSON.parse(Buffer.from(page.filedata, 'base64').toString('utf-8'))}\n                    otherLangsPage={otherLangsPage}\n                    handleSelectedLink={handleSelectedLink}\n                />\n            }\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        state: state.formReducer.pageBuilder\n    }\n}\n\nexport default connect(mapStateToProps)(Page);\n"]},"metadata":{},"sourceType":"module"}