{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/public/components/info/event-reservation/menu-product-card.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useRef, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { pushToState, setToState, updateState } from 'state/actions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { formatMoney } from 'model/orest/constants';\nimport { Button, Card, CardContent, Dialog, DialogActions, DialogContent, DialogTitle, Divider, Grid, TextField, Typography } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport SpinEdit from '@webcms-ui/core/spin-edit';\nimport WebCmsGlobal from 'components/webcms-global';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport CardImage from '@webcms-ui/core/card-image';\nimport { CustomToolTip } from \"../../../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport TableColumnText from \"../../../../../TableColumnText\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SpinEditV2 from \"../../../../../../@webcms-ui/core/spin-edit-v2\";\nconst useStyles = makeStyles(theme => ({\n  card: {\n    display: 'flex',\n    margin: 5\n  },\n  caption: {\n    textTransform: 'uppercase'\n  },\n  title: {\n    textTransform: 'uppercase',\n    color: theme.palette.primary.main,\n    fontWeight: 'bold'\n  },\n  media: {\n    width: 'auto',\n    height: 'auto',\n    [theme.breakpoints.up('sm')]: {\n      width: 1500\n    },\n    flexBasis: '30%',\n    [theme.breakpoints.only('xs')]: {\n      flexBasis: '0',\n      display: 'none'\n    }\n  },\n  dialogMedia: {\n    width: 'auto',\n    height: 'auto',\n    [theme.breakpoints.up('sm')]: {\n      width: 1500\n    },\n    flexBasis: '30%'\n  },\n  content: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexBasis: '70%',\n    [theme.breakpoints.only('xs')]: {\n      flexBasis: '100%'\n    }\n  },\n  cardText: {\n    flex: '1 0 auto',\n    marginBottom: 15,\n    [theme.breakpoints.up('sm')]: {\n      marginBottom: 0\n    }\n  },\n  linkAction: {\n    textDecoration: 'none',\n    textTransform: 'uppercase',\n    color: theme.palette.primary.main,\n    fontWeight: 'bold'\n  },\n  prodImageBox: {\n    display: 'none',\n    [theme.breakpoints.only('xs')]: {\n      display: 'block'\n    }\n  },\n  productDesc: {\n    fontSize: 18,\n    fontWeight: 600,\n    maxWidth: 200,\n    whiteSpace: 'nowrap',\n    '&::-webkit-scrollbar': {\n      width: '0.12em',\n      height: 4,\n      background: '#0000000a'\n    },\n    '&::-webkit-scrollbar-track': {\n      boxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)',\n      webkitBoxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)'\n    },\n    '&::-webkit-scrollbar-thumb': {\n      backgroundColor: 'rgba(12, 12, 12, 0.17)',\n      outline: '1px solid #29609747'\n    }\n  },\n  prodImage: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    opacity: '0.9',\n    borderRadius: 5,\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n  categoryItemDescOverFlow: {\n    minHeight: \"48px\",\n    height: \"48px\",\n    maxHeight: \"48px\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    color: '#648B92',\n    display: \"-webkit-box\",\n    WebkitLineClamp: 2,\n    '-webkit-line-clamp': 2,\n    '-webkit-box-orient': \"vertical\",\n    [theme.breakpoints.down('xs')]: {\n      WebkitLineClamp: 3,\n      '-webkit-line-clamp': 3,\n      minHeight: \"64px\",\n      height: \"64px\",\n      maxHeight: \"64px\"\n    }\n  },\n  productIngrText: {\n    minHeight: \"42px\",\n    height: \"42px\",\n    maxHeight: \"42px\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    display: \"-webkit-box\",\n    WebkitLineClamp: 2,\n    '-webkit-line-clamp': 2,\n    '-webkit-box-orient': \"vertical\",\n    [theme.breakpoints.down('xs')]: {\n      WebkitLineClamp: 3,\n      '-webkit-line-clamp': 3,\n      minHeight: \"72px\",\n      height: \"72px\",\n      maxHeight: \"72px\"\n    }\n  },\n  priceText: {\n    paddingRight: \"16px\",\n    textAlign: \"right\",\n    fontSize: \"20px\",\n    fontWeight: \"bold\",\n    color: \"#383636\"\n  },\n  productTitle: {\n    paddingLeft: \"16px\",\n    paddingTop: \"4px\",\n    color: \"#383636\"\n  },\n  productText: {\n    padding: \"8px 16px\",\n    fontSize: \"12px\",\n    color: \"#959494\",\n    minHeight: \"48px\"\n  },\n  productCard: {\n    marginBottom: \"16px\",\n    \"&:focus\": {\n      border: \"3px solid blue\"\n    }\n  }\n}));\n\nconst MenuProductCard = props => {\n  var _productItem$localtit, _productItem$localdes, _productItem$localtit2, _productItem$localdes2, _productItem$localdes3;\n\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation();\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    productItem,\n    isAddActive,\n    state,\n    updateState,\n    isOnlyProduct\n  } = props;\n  let selectGuestProductList = state.selectGuestProductList;\n  const checkGuestProduct = selectGuestProductList.findIndex(item => Number(item.productcodeid) === Number(isOnlyProduct ? productItem === null || productItem === void 0 ? void 0 : productItem.id : productItem === null || productItem === void 0 ? void 0 : productItem.productid));\n  const {\n    0: productQty,\n    1: setProductQty\n  } = useState(1);\n  const {\n    0: note,\n    1: setNote\n  } = useState('');\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: openToolTip,\n    1: setOpenToolTip\n  } = useState(false);\n  const isPortal = GENERAL_SETTINGS.ISPORTAL;\n  const cardRef = useRef();\n  const actionButtonDivRef = useRef();\n  let imageWithDomainUrl = productItem === null || productItem === void 0 ? void 0 : productItem.imageurl;\n  useEffect(() => {\n    if (checkGuestProduct > -1) {\n      setNote(selectGuestProductList[checkGuestProduct].note);\n      setProductQty(selectGuestProductList[checkGuestProduct].amount);\n    }\n  }, [checkGuestProduct]);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleAddProduct = () => {\n    if (checkGuestProduct > -1) {\n      selectGuestProductList[checkGuestProduct].amount = productQty;\n      selectGuestProductList[checkGuestProduct].note = note;\n    } else {\n      selectGuestProductList.push({\n        title: productItem.description,\n        productcodeid: isOnlyProduct ? productItem.id : productItem.productid,\n        reservno: null,\n        groupname: isOnlyProduct ? productItem.description : productItem.spgroupdesc,\n        qty: productItem.qty,\n        amount: productQty,\n        price: productItem.saleprice,\n        pricecurr: productItem.pricecurr,\n        pricecurrid: productItem.pricecurrid,\n        showprice: productItem.showprice,\n        ismenu: true,\n        note: note\n      });\n    }\n\n    updateState('guest', 'selectGuestProductList', selectGuestProductList);\n    setOpen(false);\n  };\n\n  const handleSubtract = () => {\n    selectGuestProductList.splice(checkGuestProduct, 1);\n    updateState('guest', 'selectGuestProductList', selectGuestProductList);\n    setProductQty(1);\n    setNote('');\n  };\n\n  let isPriceShow = productItem && productItem.showprice && GENERAL_SETTINGS.hotelSettings.product_price || false;\n\n  if (productItem.imageurl) {\n    if (!imageWithDomainUrl.includes(GENERAL_SETTINGS.STATIC_URL)) {\n      imageWithDomainUrl = GENERAL_SETTINGS.STATIC_URL + imageWithDomainUrl;\n    }\n  } else {\n    imageWithDomainUrl = GENERAL_SETTINGS.BASE_URL + 'imgs/not-found.png';\n  }\n\n  const handleOnFocus = e => {\n    if (isAddActive) {\n      if (e.currentTarget === e.target) {\n        cardRef.current.style.border = \"2px solid #44B3E4\";\n        actionButtonDivRef.current.style.display = \"block\";\n      }\n    }\n  };\n\n  const handleOnBlur = e => {\n    if (isAddActive) {\n      if (!e.currentTarget.contains(e.relatedTarget) && !open) {\n        cardRef.current.style.border = \"none\";\n        actionButtonDivRef.current.style.display = \"none\";\n      }\n    }\n  };\n\n  const handleCalculateAmount = array => {\n    let totalAmount = 0;\n\n    if (array) {\n      array.map(item => {\n        totalAmount += item === null || item === void 0 ? void 0 : item.amount;\n      });\n    }\n\n    return totalAmount;\n  };\n\n  const isSameProduct = id => {\n    const array = [...state.selectGuestProductList];\n    return array.every(e => e.productcodeid === id);\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, isPortal ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    onFocus: e => handleOnFocus(e),\n    onBlur: e => handleOnBlur(e),\n    tabIndex: 1,\n    onContextMenu: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 25\n    }\n  }, __jsx(Card, {\n    ref: cardRef,\n    className: classes.productCard,\n    style: {\n      cursor: isAddActive ? \"pointer\" : \"default\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 29\n    }\n  }, __jsx(CardContent, {\n    style: {\n      padding: \"0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 41\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: 'relative',\n      maxWidth: \"100%\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 45\n    }\n  }, __jsx(\"img\", {\n    src: productItem.imageurl,\n    style: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 49\n    }\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 41\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 49\n    }\n  }, __jsx(\"div\", {\n    style: {\n      paddingTop: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    className: classes.productTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 53\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localtit = productItem.localtitle) === null || _productItem$localtit === void 0 ? void 0 : _productItem$localtit.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.description) || ''))), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 49\n    }\n  }, isPriceShow && __jsx(Typography, {\n    className: classes.priceText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 57\n    }\n  }, productItem.saleprice > 0 ? formatMoney(productItem.saleprice) : ' - ', getSymbolFromCurrency(productItem.pricecurr))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 49\n    }\n  }, __jsx(\"div\", {\n    style: {\n      paddingTop: \"8px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 49\n    }\n  }, __jsx(Divider, {\n    style: {\n      marginLeft: \"16px\",\n      marginRight: \"16px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    className: classes.productText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 53\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localdes = productItem.localdesc) === null || _productItem$localdes === void 0 ? void 0 : _productItem$localdes.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.ingrtext) || '')), isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.durationmin) && __jsx(Typography, {\n    className: classes.productText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 61\n    }\n  }, __jsx(\"a\", {\n    style: {\n      fontWeight: '600'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 65\n    }\n  }, `${t('str_duration')}: `), `${productItem === null || productItem === void 0 ? void 0 : productItem.durationmin} ${t('str_minute')}`))))))), __jsx(\"div\", {\n    ref: actionButtonDivRef,\n    style: {\n      paddingBottom: \"16px\",\n      textAlign: \"right\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    onClick: () => {\n      actionButtonDivRef.current.style.display = \"none\";\n      cardRef.current.style.border = \"none\";\n    },\n    size: \"small\",\n    style: {\n      fontSize: \"12px\",\n      textTransform: \"capitalize\"\n    },\n    color: \"primary\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 41\n    }\n  }, t(\"str_back\")), checkGuestProduct > -1 ? __jsx(Button, {\n    size: \"small\",\n    style: {\n      marginLeft: \"8px\"\n    },\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSubtract,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 45\n    }\n  }, t(\"str_extract\")) : __jsx(CustomToolTip, {\n    title: 'cant',\n    open: openToolTip,\n    onOpen: () => isOnlyProduct && state.selectGuestProductList.length >= state.totalPax && setOpenToolTip(true),\n    onClose: () => setOpenToolTip(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 45\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    size: \"small\",\n    style: {\n      fontSize: \"10px\",\n      marginLeft: \"8px\"\n    },\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleClickOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 49\n    }\n  }, t(\"str_add\")))))))) : __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: classes.prodImage,\n    style: {\n      backgroundImage: `url(${imageWithDomainUrl})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 37\n    }\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    style: {\n      padding: '16px 16px 16px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 41\n    }\n  }, __jsx(TableColumnText, {\n    fontSize: 18,\n    fontWeight: 600,\n    showToolTip: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 45\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localtit2 = productItem.localtitle) === null || _productItem$localtit2 === void 0 ? void 0 : _productItem$localtit2.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.description) || '')), isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.durationmin) && (productItem === null || productItem === void 0 ? void 0 : productItem.durationmin) > 0 && __jsx(Typography, {\n    style: {\n      fontSize: '12px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 53\n    }\n  }, `(${productItem === null || productItem === void 0 ? void 0 : productItem.durationmin} ${t('str_minute')})`)), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 41\n    }\n  }, __jsx(Divider, {\n    light: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 45\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"body2\",\n    className: classes.productIngrText,\n    title: t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localdes2 = productItem.localdesc) === null || _productItem$localdes2 === void 0 ? void 0 : _productItem$localdes2.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.ingrtext) || ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 45\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localdes3 = productItem.localdesc) === null || _productItem$localdes3 === void 0 ? void 0 : _productItem$localdes3.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.ingrtext) || ''))), isAddActive && __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 49\n    }\n  }, __jsx(Alert, {\n    variant: \"outlined\",\n    severity: \"warning\",\n    style: {\n      fontSize: 12,\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 53\n    }\n  }, t('str_allergicInformation'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    label: t('str_note'),\n    multiline: true,\n    rows: 2,\n    value: note,\n    onChange: e => {\n      setNote(e.target.value);\n\n      if (checkGuestProduct !== -1) {\n        const data = [...state.selectGuestProductList];\n        data[checkGuestProduct].note = e.target.value;\n        updateState('guest', ['selectGuestProductList'], data);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 53\n    }\n  })), isPriceShow && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 53\n    }\n  }, __jsx(Typography, {\n    style: {\n      fontWeight: '600',\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 57\n    }\n  }, productItem.saleprice > 0 ? formatMoney(productItem.saleprice) : ' - ', getSymbolFromCurrency(productItem.pricecurr))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 49\n    }\n  }, __jsx(SpinEditV2, {\n    defaultValue: productQty,\n    label: t('str_pieces'),\n    size: 'small',\n    min: 1,\n    max: isOnlyProduct && productItem !== null && productItem !== void 0 && productItem.ispp ? state.totalPax > 1 ? isSameProduct(productItem === null || productItem === void 0 ? void 0 : productItem.id) ? state.totalPax : state.totalPax - state.selectGuestProductList.length : 1 : 99,\n    onChange: value => {\n      setProductQty(value);\n\n      if (checkGuestProduct !== -1) {\n        const data = [...state.selectGuestProductList];\n        data[checkGuestProduct].amount = value;\n        updateState('guest', ['selectGuestProductList'], data);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 49\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 53\n    }\n  }, checkGuestProduct > -1 ? __jsx(Button, {\n    fullWidth: true,\n    style: {\n      textTransform: 'none',\n      color: 'red',\n      padding: '8px'\n    },\n    startIcon: __jsx(DeleteIcon, {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 76\n      }\n    }),\n    variant: \"outlined\",\n    size: \"small\",\n    onClick: handleSubtract,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 61\n    }\n  }, t('str_removeSelection')) : __jsx(CustomToolTip, {\n    title: isOnlyProduct && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax ? t('str_productSelectionWasMadeInfo') : t('str_add'),\n    open: openToolTip,\n    onOpen: () => isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.ispp) && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax && setOpenToolTip(true),\n    onClose: () => setOpenToolTip(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 61\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 61\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    disabled: isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.ispp) && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax,\n    style: {\n      textTransform: 'none'\n    },\n    startIcon: __jsx(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 81\n      }\n    }),\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: () => !(isOnlyProduct && productItem !== null && productItem !== void 0 && productItem.ispp && state.selectGuestProductList.length >= state.totalPax) && handleAddProduct(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 66\n    }\n  }, t(\"str_add\")))))))))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n  pushToState: (stateType, stateName, value) => dispatch(pushToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuProductCard);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/public/components/info/event-reservation/menu-product-card.js"],"names":["React","useContext","useState","useRef","useEffect","connect","pushToState","setToState","updateState","makeStyles","formatMoney","Button","Card","CardContent","Dialog","DialogActions","DialogContent","DialogTitle","Divider","Grid","TextField","Typography","Alert","SpinEdit","WebCmsGlobal","useTranslation","getSymbolFromCurrency","CardImage","CustomToolTip","TableColumnText","DeleteIcon","AddIcon","SpinEditV2","useStyles","theme","card","display","margin","caption","textTransform","title","color","palette","primary","main","fontWeight","media","width","height","breakpoints","up","flexBasis","only","dialogMedia","content","flexDirection","cardText","flex","marginBottom","linkAction","textDecoration","prodImageBox","productDesc","fontSize","maxWidth","whiteSpace","background","boxShadow","webkitBoxShadow","backgroundColor","outline","prodImage","position","opacity","borderRadius","backgroundSize","backgroundRepeat","backgroundPosition","categoryItemDescOverFlow","minHeight","maxHeight","overflow","textOverflow","WebkitLineClamp","down","productIngrText","priceText","paddingRight","textAlign","productTitle","paddingLeft","paddingTop","productText","padding","productCard","border","MenuProductCard","props","classes","t","GENERAL_SETTINGS","productItem","isAddActive","state","isOnlyProduct","selectGuestProductList","checkGuestProduct","findIndex","item","Number","productcodeid","id","productid","productQty","setProductQty","note","setNote","open","setOpen","openToolTip","setOpenToolTip","isPortal","ISPORTAL","cardRef","actionButtonDivRef","imageWithDomainUrl","imageurl","amount","handleClickOpen","handleClose","handleAddProduct","push","description","reservno","groupname","spgroupdesc","qty","price","saleprice","pricecurr","pricecurrid","showprice","ismenu","handleSubtract","splice","isPriceShow","hotelSettings","product_price","includes","STATIC_URL","BASE_URL","handleOnFocus","e","currentTarget","target","current","style","handleOnBlur","contains","relatedTarget","handleCalculateAmount","array","totalAmount","map","isSameProduct","every","cursor","localtitle","removeHtmlTag","marginLeft","marginRight","localdesc","ingrtext","durationmin","paddingBottom","length","totalPax","backgroundImage","value","data","ispp","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useRef, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { pushToState, setToState, updateState } from 'state/actions'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { formatMoney } from 'model/orest/constants'\nimport {\n    Button,\n    Card,\n    CardContent,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    Divider,\n    Grid,\n    TextField,\n    Typography,\n} from '@material-ui/core'\nimport Alert from '@material-ui/lab/Alert'\nimport SpinEdit from '@webcms-ui/core/spin-edit'\nimport WebCmsGlobal from 'components/webcms-global'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport CardImage from '@webcms-ui/core/card-image'\nimport {CustomToolTip} from \"../../../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport TableColumnText from \"../../../../../TableColumnText\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SpinEditV2 from \"../../../../../../@webcms-ui/core/spin-edit-v2\";\n\nconst useStyles = makeStyles((theme) => ({\n    card: {\n        display: 'flex',\n        margin: 5,\n    },\n    caption: {\n        textTransform: 'uppercase',\n    },\n    title: {\n        textTransform: 'uppercase',\n        color: theme.palette.primary.main,\n        fontWeight: 'bold',\n    },\n    media: {\n        width: 'auto',\n        height: 'auto',\n        [theme.breakpoints.up('sm')]: {\n            width: 1500,\n        },\n        flexBasis: '30%',\n        [theme.breakpoints.only('xs')]: {\n            flexBasis: '0',\n            display: 'none',\n        },\n    },\n    dialogMedia: {\n        width: 'auto',\n        height: 'auto',\n        [theme.breakpoints.up('sm')]: {\n            width: 1500,\n        },\n        flexBasis: '30%',\n    },\n    content: {\n        display: 'flex',\n        flexDirection: 'column',\n        flexBasis: '70%',\n        [theme.breakpoints.only('xs')]: {\n            flexBasis: '100%',\n        },\n    },\n    cardText: {\n        flex: '1 0 auto',\n        marginBottom: 15,\n        [theme.breakpoints.up('sm')]: {\n            marginBottom: 0,\n        },\n    },\n    linkAction: {\n        textDecoration: 'none',\n        textTransform: 'uppercase',\n        color: theme.palette.primary.main,\n        fontWeight: 'bold',\n    },\n    prodImageBox: {\n        display: 'none',\n        [theme.breakpoints.only('xs')]: {\n            display: 'block',\n        },\n    },\n    productDesc: {\n        fontSize: 18,\n        fontWeight: 600,\n        maxWidth: 200,\n        whiteSpace: 'nowrap',\n        '&::-webkit-scrollbar': {\n            width: '0.12em',\n            height: 4,\n            background: '#0000000a',\n        },\n        '&::-webkit-scrollbar-track': {\n            boxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)',\n            webkitBoxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)',\n        },\n        '&::-webkit-scrollbar-thumb': {\n            backgroundColor: 'rgba(12, 12, 12, 0.17)',\n            outline: '1px solid #29609747',\n        },\n    },\n    prodImage: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        opacity: '0.9',\n        borderRadius: 5,\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center'\n    },\n    categoryItemDescOverFlow: {\n        minHeight: \"48px\",\n        height: \"48px\",\n        maxHeight: \"48px\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        color: '#648B92',\n        display: \"-webkit-box\",\n        WebkitLineClamp: 2,\n        '-webkit-line-clamp': 2,\n        '-webkit-box-orient': \"vertical\",\n        [theme.breakpoints.down('xs')]: {\n            WebkitLineClamp: 3,\n            '-webkit-line-clamp': 3,\n            minHeight: \"64px\",\n            height: \"64px\",\n            maxHeight: \"64px\",\n        },\n\n    },\n    productIngrText: {\n        minHeight: \"42px\",\n        height: \"42px\",\n        maxHeight: \"42px\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        display: \"-webkit-box\",\n        WebkitLineClamp: 2,\n        '-webkit-line-clamp': 2,\n        '-webkit-box-orient': \"vertical\",\n        [theme.breakpoints.down('xs')]: {\n            WebkitLineClamp: 3,\n            '-webkit-line-clamp': 3,\n            minHeight: \"72px\",\n            height: \"72px\",\n            maxHeight: \"72px\",\n        },\n    },\n    priceText: {\n        paddingRight: \"16px\",\n        textAlign: \"right\",\n        fontSize: \"20px\",\n        fontWeight: \"bold\",\n        color: \"#383636\"\n    },\n    productTitle: {\n        paddingLeft: \"16px\",\n        paddingTop: \"4px\",\n        color: \"#383636\"\n    },\n    productText: {\n        padding: \"8px 16px\",\n        fontSize: \"12px\",\n        color: \"#959494\",\n        minHeight:\"48px\"\n    },\n    productCard: {\n        marginBottom: \"16px\",\n        \"&:focus\": {\n            border: \"3px solid blue\"\n        },\n    }\n}))\n\nconst MenuProductCard = (props) => {\n    const classes = useStyles()\n    const { t } = useTranslation()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n    const { productItem, isAddActive, state, updateState, isOnlyProduct } = props\n    let selectGuestProductList = state.selectGuestProductList\n    const checkGuestProduct = selectGuestProductList.findIndex((item) => Number(item.productcodeid) === Number( isOnlyProduct ? productItem?.id : productItem?.productid))\n    const [productQty, setProductQty] = useState(1)\n    const [note, setNote] = useState('')\n    const [open, setOpen] = useState(false)\n    const [openToolTip, setOpenToolTip] = useState(false)\n    const isPortal = GENERAL_SETTINGS.ISPORTAL;\n    const cardRef = useRef();\n    const actionButtonDivRef = useRef();\n    let imageWithDomainUrl = productItem?.imageurl\n\n    useEffect(() => {\n        if(checkGuestProduct > -1) {\n            setNote(selectGuestProductList[checkGuestProduct].note)\n            setProductQty(selectGuestProductList[checkGuestProduct].amount)\n        }\n    }, [checkGuestProduct])\n\n    const handleClickOpen = () => {\n        setOpen(true)\n    }\n\n    const handleClose = () => {\n        setOpen(false)\n    }\n\n    const handleAddProduct = () => {\n        if (checkGuestProduct > -1) {\n            selectGuestProductList[checkGuestProduct].amount = productQty\n            selectGuestProductList[checkGuestProduct].note = note\n        } else {\n            selectGuestProductList.push({\n                title: productItem.description,\n                productcodeid: isOnlyProduct ? productItem.id : productItem.productid,\n                reservno: null,\n                groupname: isOnlyProduct ? productItem.description : productItem.spgroupdesc,\n                qty: productItem.qty,\n                amount: productQty,\n                price: productItem.saleprice,\n                pricecurr: productItem.pricecurr,\n                pricecurrid: productItem.pricecurrid,\n                showprice: productItem.showprice,\n                ismenu: true,\n                note: note\n            })\n        }\n\n        updateState('guest', 'selectGuestProductList', selectGuestProductList)\n        setOpen(false)\n    }\n\n    const handleSubtract = () => {\n        selectGuestProductList.splice(checkGuestProduct, 1)\n        updateState('guest', 'selectGuestProductList', selectGuestProductList)\n        setProductQty(1)\n        setNote('')\n    }\n\n    let isPriceShow = productItem && productItem.showprice && GENERAL_SETTINGS.hotelSettings.product_price || false\n\n    if(productItem.imageurl){\n        if(!imageWithDomainUrl.includes(GENERAL_SETTINGS.STATIC_URL)){\n            imageWithDomainUrl =  GENERAL_SETTINGS.STATIC_URL + imageWithDomainUrl\n        }\n    }else{\n        imageWithDomainUrl = GENERAL_SETTINGS.BASE_URL + 'imgs/not-found.png'\n    }\n\n\n    const handleOnFocus = (e) => {\n        if(isAddActive) {\n            if (e.currentTarget === e.target) {\n                cardRef.current.style.border = \"2px solid #44B3E4\";\n                actionButtonDivRef.current.style.display = \"block\";\n            }\n        }\n\n    }\n\n    const handleOnBlur = (e) => {\n        if(isAddActive) {\n            if (!e.currentTarget.contains(e.relatedTarget) && !open) {\n                cardRef.current.style.border = \"none\";\n                actionButtonDivRef.current.style.display = \"none\";\n            }\n        }\n    }\n\n    const handleCalculateAmount = (array) => {\n        let totalAmount = 0\n        if(array) {\n            array.map((item) => {\n                totalAmount += item?.amount\n            })\n        }\n      return totalAmount\n    }\n\n    const isSameProduct = (id) => {\n        const array = [...state.selectGuestProductList]\n        return array.every(e => e.productcodeid === id)\n    }\n\n    return (\n        <React.Fragment>\n            {\n                isPortal ? (\n                    <React.Fragment>\n                        <div\n                            onFocus={(e) => handleOnFocus(e)}\n                            onBlur={(e) => handleOnBlur(e)}\n                            tabIndex={1}\n                            onContextMenu={() => {}}\n                        >\n                            <Card\n                                ref={cardRef}\n                                className={classes.productCard}\n                                style={{cursor: isAddActive ?  \"pointer\" : \"default\"}}\n                            >\n                                <CardContent style={{padding: \"0\"}}>\n                                    <Grid container>\n                                        <Grid item xs={4}>\n                                            <div style={{position: 'relative', maxWidth: \"100%\", height: \"100%\"}}>\n                                                <img src={productItem.imageurl} style={{position: \"absolute\", width: \"100%\", height: \"100%\"}}/>\n                                            </div>\n                                        </Grid>\n                                        <Grid item xs={8}>\n                                            <Grid container>\n                                                <Grid item xs={12}>\n                                                    <div style={{paddingTop: \"8px\"}}/>\n                                                </Grid>\n                                                <Grid item xs={8}>\n                                                    <Typography className={classes.productTitle}>\n                                                        {t(productItem?.localtitle?.removeHtmlTag() || productItem?.description || '')}\n                                                    </Typography>\n                                                </Grid>\n                                                <Grid item xs={4}>\n                                                    {isPriceShow && (\n                                                        <Typography className={classes.priceText}>\n                                                            {(productItem.saleprice > 0) ? formatMoney(productItem.saleprice) : ' - '}\n                                                            {getSymbolFromCurrency(productItem.pricecurr)}\n                                                        </Typography>\n                                                    )}\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <div style={{paddingTop: \"8px\"}}/>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <Divider style={{marginLeft: \"16px\", marginRight: \"16px\"}}/>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <Typography className={classes.productText}>{t(productItem?.localdesc?.removeHtmlTag() || productItem?.ingrtext || '')}</Typography>\n                                                    {isOnlyProduct && productItem?.durationmin && (\n                                                            <Typography className={classes.productText}>\n                                                                <a style={{fontWeight: '600'}}>{`${t('str_duration')}: `}</a>\n                                                                {`${productItem?.durationmin} ${t('str_minute')}`}\n                                                            </Typography>\n                                                        )}\n                                                </Grid>\n                                            </Grid>\n                                        </Grid>\n                                    </Grid>\n                                </CardContent>\n                            </Card>\n                            <div ref={actionButtonDivRef} style={{paddingBottom: \"16px\", textAlign: \"right\", display: \"none\"}}>\n                                <Grid container>\n                                    <Grid item xs={12}>\n                                        <Button\n                                            onClick={() => {\n                                                actionButtonDivRef.current.style.display = \"none\";\n                                                cardRef.current.style.border = \"none\";\n                                            }}\n                                            size={\"small\"}\n                                            style={{fontSize: \"12px\", textTransform: \"capitalize\"}}\n                                            color={\"primary\"}\n                                            variant={\"outlined\"}\n                                        >\n                                            {t(\"str_back\")}\n                                        </Button>\n                                        {checkGuestProduct > -1 ? (\n                                            <Button\n                                                size={\"small\"}\n                                                style={{marginLeft: \"8px\"}}\n                                                color={\"primary\"}\n                                                variant={\"contained\"}\n                                                onClick={handleSubtract}\n                                            >\n                                                {t(\"str_extract\")}\n                                            </Button>\n                                        ) : (\n                                            <CustomToolTip\n                                                title={'cant'}\n                                                open={openToolTip}\n                                                onOpen={() => isOnlyProduct && state.selectGuestProductList.length >= state.totalPax && setOpenToolTip(true)}\n                                                onClose={() => setOpenToolTip(false)}\n                                            >\n                                                <Button\n                                                    fullWidth\n                                                    size={\"small\"}\n                                                    style={{fontSize: \"10px\", marginLeft: \"8px\"}}\n                                                    color={\"primary\"}\n                                                    variant={\"contained\"}\n                                                    onClick={handleClickOpen}\n                                                >\n                                                    {t(\"str_add\")}\n                                                </Button>\n                                            </CustomToolTip>\n                                        )}\n                                    </Grid>\n                                </Grid>\n                            </div>\n                        </div>\n                    </React.Fragment>\n                ) : (\n                    <Card>\n                        <Grid container spacing={2}>\n                            <Grid item xs={12} sm={12} md={4}>\n                                <div style={{position: 'relative', width: '100%', height: '100%'}}>\n                                    <div\n                                        className={classes.prodImage}\n                                        style={{backgroundImage: `url(${imageWithDomainUrl})`}}\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12} sm={12} md={8}>\n                                <div style={{padding: '16px 16px 16px 0'}}>\n                                    <Grid container spacing={1}>\n                                        <Grid item xs={12}>\n                                            <TableColumnText fontSize={18} fontWeight={600} showToolTip>\n                                                {t(productItem?.localtitle?.removeHtmlTag() || productItem?.description || '')}\n                                            </TableColumnText>\n                                            {\n                                                isOnlyProduct && productItem?.durationmin && productItem?.durationmin > 0 && (\n                                                    <Typography style={{fontSize: '12px'}}>{`(${productItem?.durationmin} ${t('str_minute')})`}</Typography>\n                                                )\n                                            }\n                                        </Grid>\n                                        <Grid item xs={12}>\n                                            <Divider light />\n                                        </Grid>\n                                        <Grid item xs={12}>\n                                            <Typography variant=\"body2\" className={classes.productIngrText} title={t(productItem?.localdesc?.removeHtmlTag() || productItem?.ingrtext || '')}>\n                                                {t(productItem?.localdesc?.removeHtmlTag() || productItem?.ingrtext || '')}\n                                            </Typography>\n                                        </Grid>\n                                        {isAddActive && (\n                                            <React.Fragment>\n                                                <Grid item xs={12}>\n                                                    <Alert\n                                                        variant=\"outlined\"\n                                                        severity=\"warning\"\n                                                        style={{ fontSize: 12, textAlign: 'center'}}\n                                                    >\n                                                        {t('str_allergicInformation')}\n                                                    </Alert>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <TextField\n                                                        fullWidth\n                                                        variant=\"outlined\"\n                                                        label={t('str_note')}\n                                                        multiline\n                                                        rows={2}\n                                                        value={note}\n                                                        onChange={(e) => {\n                                                            setNote(e.target.value)\n                                                            if(checkGuestProduct !== -1) {\n                                                                const data = [...state.selectGuestProductList]\n                                                                data[checkGuestProduct].note = e.target.value\n                                                                updateState('guest', ['selectGuestProductList'], data)\n                                                            }\n                                                        }}\n                                                    />\n                                                </Grid>\n                                                {isPriceShow && (\n                                                    <Grid item xs={12}>\n                                                        <Typography style={{fontWeight: '600', textAlign: 'right'}} >\n                                                            {(productItem.saleprice > 0) ? formatMoney(productItem.saleprice) : ' - '}\n                                                            {getSymbolFromCurrency(productItem.pricecurr)}\n                                                        </Typography>\n                                                    </Grid>\n                                                )}\n                                                <Grid item xs={12} sm={12} md={7}>\n                                                    <SpinEditV2\n                                                        defaultValue={productQty}\n                                                        label={t('str_pieces')}\n                                                        size={'small'}\n                                                        min={1}\n                                                        max={isOnlyProduct && productItem?.ispp ? (state.totalPax > 1 ? isSameProduct(productItem?.id) ? state.totalPax : (state.totalPax - state.selectGuestProductList.length) : 1) : 99}\n                                                        onChange={(value) => {\n                                                            setProductQty(value)\n                                                            if(checkGuestProduct !== -1) {\n                                                                const data = [...state.selectGuestProductList]\n                                                                data[checkGuestProduct].amount = value\n                                                                updateState('guest', ['selectGuestProductList'], data)\n                                                            }\n                                                        }}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={12} md={5}>\n                                                    <div>\n                                                        {checkGuestProduct > -1 ? (\n                                                            <Button\n                                                                fullWidth\n                                                                style={{textTransform: 'none', color: 'red', padding: '8px'}}\n                                                                startIcon={<DeleteIcon style={{color: 'red'}}/>}\n                                                                variant=\"outlined\"\n                                                                size=\"small\"\n                                                                onClick={handleSubtract}\n                                                            >\n                                                                {t('str_removeSelection')}\n                                                            </Button>\n                                                        ) : (\n                                                            <CustomToolTip\n                                                                title={isOnlyProduct && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax ? t('str_productSelectionWasMadeInfo') : t('str_add')}\n                                                                open={openToolTip}\n                                                                onOpen={() => isOnlyProduct && productItem?.ispp && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax && setOpenToolTip(true)}\n                                                                onClose={() => setOpenToolTip(false)}\n                                                            >\n                                                            <span>\n                                                                 <Button\n                                                                     fullWidth\n                                                                     disabled={isOnlyProduct && productItem?.ispp && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax}\n                                                                     style={{textTransform: 'none'}}\n                                                                     startIcon={<AddIcon />}\n                                                                     color={\"primary\"}\n                                                                     variant={\"contained\"}\n                                                                     onClick={() => !(isOnlyProduct && productItem?.ispp && state.selectGuestProductList.length >= state.totalPax) && handleAddProduct()}\n                                                                 >\n                                                                     {t(\"str_add\")}\n                                                                 </Button>\n                                                            </span>\n                                                            </CustomToolTip>\n                                                        )}\n                                                    </div>\n                                                </Grid>\n                                            </React.Fragment>\n                                        )}\n                                    </Grid>\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </Card>\n                )\n            }\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    pushToState: (stateType, stateName, value) => dispatch(pushToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuProductCard)\n"]},"metadata":{},"sourceType":"module"}