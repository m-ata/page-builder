{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { getChildTotals } from 'lib/helpers/useFunction';\nexport var strOrsResTerms = 'ORSRESTERMS';\n\nvar getRoomRate = function getRoomRate(roomRate) {\n  roomRate = Number(roomRate);\n\n  if (roomRate > 0 && roomRate !== null) {\n    return roomRate;\n  } else {\n    return null;\n  }\n};\n\nexport var showDiscountRate = function showDiscountRate(discounted, noDiscount) {\n  return 100 - Number(noDiscount) * 100 / Number(discounted);\n};\nexport var applyDiscount = function applyDiscount(price, discrate) {\n  if (discrate) return Number(price) * (100 - Number(discrate)) / 100;\n  return 0;\n};\n\nvar getPaxPrice = function getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate) {\n  if (totalPax === 1) {\n    return getRoomRate(sngrate);\n  } else if (totalPax === 2) {\n    return getRoomRate(dblrate);\n  } else if (totalPax === 3) {\n    return getRoomRate(trprate);\n  } else if (totalPax === 4) {\n    return getRoomRate(quadrate);\n  } else if (totalPax === 5) {\n    return getRoomRate(Number(quadrate) + Number(extrarate));\n  } else if (totalPax >= 6) {\n    var extraPax = Number(totalPax) - 5,\n        basePrice = Number(quadrate) + Number(extrarate),\n        extraPaxPrice = basePrice + Number(extra2rate) * extraPax;\n    return getRoomRate(extraPaxPrice);\n  } else {\n    return null;\n  }\n};\n\nvar getChdPrice = function getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate) {\n  var childTotals = getChildTotals(chdAges, agencyChdAges),\n      totalBaby = Number(childTotals.totalBaby) * Number(babyrate) || 0,\n      totalChd1 = Number(childTotals.totalChd1) * Number(chdrate) || 0,\n      totalChd2 = Number(childTotals.totalChd2) * Number(chd2rate) || 0;\n  return totalChd1 + totalChd2 + totalBaby;\n};\n\nexport var getTotalPrice = function getTotalPrice(priceList, totalPax, chdAges, agencyChdAges) {\n  var sngrate = priceList.sngrate,\n      dblrate = priceList.dblrate,\n      trprate = priceList.trprate,\n      quadrate = priceList.quadrate,\n      extrarate = priceList.extrarate,\n      extra2rate = priceList.extra2rate,\n      babyrate = priceList.babyrate,\n      chdrate = priceList.chdrate,\n      chd2rate = priceList.chd2rate,\n      discrate = priceList.discrate,\n      paxPrice = getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate),\n      chdPrice = getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate),\n      useTotalPrice = Number(paxPrice) + Number(chdPrice);\n  return {\n    totalPrice: useTotalPrice || 0,\n    discTotalPrice: applyDiscount(useTotalPrice, discrate) || 0\n  };\n};\nexport var useTotalPrice = function useTotalPrice(priceList, totalPax, chdAges, agencyChdAges) {\n  var totalPrice = 0,\n      discTotalPrice = 0;\n\n  var _iterator = _createForOfIteratorHelper(priceList),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var priceItems = _step.value;\n      var dailyPaxPrice = getTotalPrice(priceItems, totalPax, chdAges, agencyChdAges);\n      totalPrice += dailyPaxPrice.totalPrice;\n      discTotalPrice += dailyPaxPrice.discTotalPrice;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return {\n    totalPrice: totalPrice,\n    discTotalPrice: discTotalPrice\n  };\n};\nexport var getCurrencyCodeToIso = function getCurrencyCodeToIso(currCode) {\n  switch (currCode) {\n    case 'TL':\n      return 'TRY';\n\n    default:\n      return currCode;\n  }\n};","map":{"version":3,"sources":["/Users/mata/app-cloudweb/@webcms-globals/onlinereservation.js"],"names":["getChildTotals","strOrsResTerms","getRoomRate","roomRate","Number","showDiscountRate","discounted","noDiscount","applyDiscount","price","discrate","getPaxPrice","totalPax","sngrate","dblrate","trprate","quadrate","extrarate","extra2rate","extraPax","basePrice","extraPaxPrice","getChdPrice","chdAges","agencyChdAges","babyrate","chdrate","chd2rate","childTotals","totalBaby","totalChd1","totalChd2","getTotalPrice","priceList","paxPrice","chdPrice","useTotalPrice","totalPrice","discTotalPrice","priceItems","dailyPaxPrice","getCurrencyCodeToIso","currCode"],"mappings":"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","sourcesContent":["import { getChildTotals } from 'lib/helpers/useFunction'\nexport const strOrsResTerms = 'ORSRESTERMS'\n\nconst getRoomRate = (roomRate) => {\n    roomRate = Number(roomRate)\n    if (roomRate > 0 && roomRate !== null) {\n        return roomRate\n    } else {\n        return null\n    }\n}\n\nexport const showDiscountRate = (discounted, noDiscount) => {\n    return 100 - (Number(noDiscount) * 100 / Number(discounted))\n}\n\nexport const applyDiscount = (price, discrate) => {\n    if (discrate) return Number(price) * (100 - Number(discrate)) / 100\n    return 0\n}\n\nconst getPaxPrice = (totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate) => {\n    if (totalPax === 1) {\n        return getRoomRate(sngrate)\n    } else if (totalPax === 2) {\n        return getRoomRate(dblrate)\n    } else if (totalPax === 3) {\n        return getRoomRate(trprate)\n    } else if (totalPax === 4) {\n        return getRoomRate(quadrate)\n    } else if (totalPax === 5) {\n        return getRoomRate(Number(quadrate) + Number(extrarate))\n    } else if (totalPax >= 6) {\n        const extraPax = Number(totalPax) - 5\n            , basePrice = Number(quadrate) + Number(extrarate)\n            , extraPaxPrice = basePrice + (Number(extra2rate) * extraPax)\n        return getRoomRate(extraPaxPrice)\n    } else {\n        return null\n    }\n}\n\nconst getChdPrice = (chdAges, agencyChdAges, babyrate, chdrate, chd2rate) => {\n    const childTotals = getChildTotals(chdAges, agencyChdAges)\n        , totalBaby = Number(childTotals.totalBaby) * Number(babyrate) || 0\n        , totalChd1 = Number(childTotals.totalChd1) * Number(chdrate) || 0\n        , totalChd2 = Number(childTotals.totalChd2) * Number(chd2rate) || 0\n\n    return (totalChd1 + totalChd2 + totalBaby)\n}\n\nexport const getTotalPrice = (priceList, totalPax, chdAges, agencyChdAges) => {\n    const {\n        sngrate,\n        dblrate,\n        trprate,\n        quadrate,\n        extrarate,\n        extra2rate,\n        babyrate,\n        chdrate,\n        chd2rate,\n        discrate,\n    } = priceList\n        , paxPrice = getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate)\n        , chdPrice = getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate)\n        , useTotalPrice = Number(paxPrice) + Number(chdPrice)\n\n\n    return {\n        totalPrice: useTotalPrice || 0,\n        discTotalPrice: applyDiscount(useTotalPrice, discrate) || 0,\n    }\n}\n\nexport const useTotalPrice = (priceList, totalPax, chdAges, agencyChdAges) => {\n    let totalPrice = 0, discTotalPrice = 0\n    for (let priceItems of priceList) {\n        const dailyPaxPrice = getTotalPrice(priceItems, totalPax, chdAges, agencyChdAges)\n        totalPrice += dailyPaxPrice.totalPrice\n        discTotalPrice += dailyPaxPrice.discTotalPrice\n    }\n\n    return {\n        totalPrice,\n        discTotalPrice,\n    }\n}\n\nexport const getCurrencyCodeToIso = (currCode) => {\n    switch (currCode) {\n        case 'TL':\n            return 'TRY'\n        default:\n            return currCode\n    }\n}"]},"metadata":{},"sourceType":"module"}