{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/SearchGuest/index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSelector, connect } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { ViewList } from '@webcms/orest';\nimport { Button, IconButton, Card, CardContent, Grid, TextField, Typography, Checkbox, InputAdornment, Collapse, Divider } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { useSnackbar } from 'notistack';\nimport WebCmsGlobal from \"../../../webcms-global\";\nimport { mobileTelNoFormat, OREST_ENDPOINT } from \"../../../../model/orest/constants\";\nimport useTranslation from \"../../../../lib/translations/hooks/useTranslation\";\nimport MaterialTable, { MTableHeader } from 'material-table';\nimport { CustomToolTip } from \"../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport MaterialTableLocalization from \"../../../MaterialTableLocalization\";\nimport TrackedChangesDialog from \"../../../TrackedChangesDialog\";\nimport LoadingSpinner from \"../../../LoadingSpinner\";\nimport { HotelBellIcon } from \"../../../../assets/svg/guest/HotelBellIcon\";\nimport { SalesTotalIcon } from \"../../../../assets/svg/guest/SalesTotalIcon\";\nimport { BookIcon } from \"../../../../assets/svg/guest/BookIcon\";\nimport { deleteFromState, setToState, updateState } from \"../../../../state/actions\";\nconst useStyles = makeStyles(theme => ({\n  cardTitle: {\n    fontSize: '18px',\n    textTransform: 'uppercase',\n    textAlign: 'center'\n  },\n  cardCountText: {\n    fontSize: '35px',\n    fontWeight: 'bold'\n  },\n  title: {\n    fontSize: '28px',\n    color: '#43425D',\n    paddingBottom: '48px'\n  },\n  iconStyle: {\n    color: \"#FFF\",\n    width: \"40px\",\n    height: \"40px\"\n  },\n  iconDiv: {\n    top: \"-20px\",\n    position: \"absolute\",\n    width: \"78px\",\n    height: \"78px\"\n  },\n  triangleDiv: {\n    position: 'absolute',\n    bottom: '-24px',\n    right: '8%',\n    width: 0,\n    height: 0,\n    borderTop: '28px solid #FFF',\n    borderLeft: '14px solid transparent',\n    borderRight: '14px solid transparent'\n  },\n  dividerStyle: {\n    top: '0',\n    right: '-12px',\n    left: 'unset',\n    [theme.breakpoints.down('sm')]: {\n      display: \"none\"\n    }\n  },\n  searchButton: {\n    marginLeft: '8px',\n    [theme.breakpoints.down('sm')]: {\n      width: \"100%\",\n      marginLeft: '0'\n    }\n  },\n  textFieldContainer: {\n    position: 'relative',\n    display: 'flex',\n    [theme.breakpoints.down('sm')]: {\n      display: \"block\",\n      textAlign: \"center\"\n    }\n  }\n}));\n\nfunction SearchGuest(props) {\n  const classes = useStyles();\n  const {\n    clientParams,\n    setToState\n  } = props;\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const router = useRouter(); //context\n\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    t\n  } = useTranslation(); //redux\n\n  const token = useSelector(state => {\n    var _state$orest, _state$orest$currentU;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : _state$orest$currentU.auth.access_token) || false;\n  });\n  const hotelRefNo = useSelector(state => {\n    var _state$hotelinfo;\n\n    return (state === null || state === void 0 ? void 0 : (_state$hotelinfo = state.hotelinfo) === null || _state$hotelinfo === void 0 ? void 0 : _state$hotelinfo.currentHotelRefNo) || null;\n  }); //state\n\n  const {\n    0: openDetailSearch,\n    1: setOpenDetailSearch\n  } = useState(false);\n  const {\n    0: guestList,\n    1: setGuestList\n  } = useState([]);\n  const {\n    0: selectedGuest,\n    1: setSelectedGuest\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: searchText,\n    1: setSearchText\n  } = useState('');\n  const {\n    0: openDialog,\n    1: setOpenDialog\n  } = useState(false);\n  const {\n    0: firstLoad,\n    1: setFirstLoad\n  } = useState(true);\n  const overviewCardList = [{\n    icon: __jsx(HotelBellIcon, {\n      className: classes.iconStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }),\n    color: \"#67B549\",\n    title: t('str_reservationCount'),\n    count: 0\n  }, {\n    icon: __jsx(SalesTotalIcon, {\n      className: classes.iconStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }),\n    color: \"#F16A4B\",\n    title: t('str_salesTotal'),\n    count: 0\n  }, {\n    icon: __jsx(BookIcon, {\n      className: classes.iconStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }),\n    color: '#2697D4',\n    title: t('str_bookerBonus'),\n    count: 0\n  }];\n  const queryTypes = {\n    email: 'email',\n    mobile: 'mobile',\n    firstName: 'firstName',\n    lastName: 'lastName',\n    roomNo: 'roomNo',\n    refCode: 'refCode'\n  };\n  const {\n    0: filterList,\n    1: setFilterList\n  } = useState({\n    email: {\n      label: t('str_email'),\n      value: ''\n    },\n    mobile: {\n      label: t('str_mobile'),\n      value: ''\n    },\n    firstName: {\n      label: t('str_firstName'),\n      value: ''\n    },\n    lastName: {\n      label: t('str_lastName'),\n      value: ''\n    },\n    roomNo: {\n      label: t('str_roomNo'),\n      value: ''\n    },\n    refCode: {\n      label: t('str_refCode'),\n      value: ''\n    }\n  });\n  const columns = [{\n    title: '',\n    field: '#',\n    headerStyle: {\n      minWidth: '32px',\n      maxWidth: '32px'\n    },\n    cellStyle: {\n      padding: 0,\n      minWidth: '32px',\n      maxWidth: '32px'\n    },\n    render: props => __jsx(Typography, {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, __jsx(Button, {\n      color: 'primary',\n      variant: 'contained',\n      onClick: () => {\n        var _mobileTelNoFormat;\n\n        setSelectedGuest(props);\n        const routerQuery = router.query;\n        const obj = Object(clientParams);\n        let param = '';\n\n        for (const k in routerQuery) {\n          if (obj.hasOwnProperty(k)) {\n            param = k;\n          } else {\n            if (k === 'telno') {\n              param = 'telno';\n            }\n          }\n        }\n\n        if (param === '' || param === 'telno') {\n          if (param === 'telno') {\n            if (props !== null && props !== void 0 && props.mobiletel || props !== null && props !== void 0 && props.tel) {\n              param = 'telno';\n            } else {\n              delete routerQuery[param];\n\n              if (props !== null && props !== void 0 && props.email) {\n                param = 'email';\n              } else if (props !== null && props !== void 0 && props.mobiletel || props !== null && props !== void 0 && props.tel) {\n                param = 'mobile';\n              } else {\n                param = 'code';\n              }\n            }\n          } else {\n            if (props !== null && props !== void 0 && props.email) {\n              param = 'email';\n            } else if (props !== null && props !== void 0 && props.mobiletel || props !== null && props !== void 0 && props.tel) {\n              param = 'mobile';\n            } else {\n              param = 'code';\n            }\n          }\n        } else {\n          if (props && !props[param]) {\n            delete routerQuery[param];\n\n            if (props !== null && props !== void 0 && props.email) {\n              param = 'email';\n            } else if (props !== null && props !== void 0 && props.mobiletel || props !== null && props !== void 0 && props.tel) {\n              param = 'mobile';\n            } else {\n              param = 'code';\n            }\n          }\n        }\n\n        routerQuery[param] = props && param === 'telno' || param === 'mobile' ? (_mobileTelNoFormat = mobileTelNoFormat(props['mobiletel'] ? props['mobiletel'] : props['tel'] ? props['tel'] : props['tel2'])) === null || _mobileTelNoFormat === void 0 ? void 0 : _mobileTelNoFormat.replace('+', '') : props[param];\n        router.push({\n          pathname: router.pathname,\n          query: routerQuery\n        });\n        setTimeout(() => {\n          const routerQuery = router.query;\n          routerQuery.tab = 'details';\n          router.push({\n            pathname: router.pathname,\n            query: routerQuery\n          });\n        }, 1000);\n        setToState('guest', ['profile', 'loadGuest'], true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, t('str_select')))\n  }, {\n    title: t('str_firstName'),\n    field: 'firstname'\n  }, {\n    title: t('str_lastName'),\n    field: 'lastname'\n  }, {\n    title: t('str_birthDate'),\n    field: 'birthdate'\n  }, {\n    title: t('str_email'),\n    field: 'email'\n  }, {\n    title: t('str_mobile'),\n    field: 'mobiletel'\n  }, {\n    title: t('str_cardNo'),\n    field: 'cardno',\n    headerStyle: {\n      textAlign: 'right'\n    },\n    render: props => __jsx(Typography, {\n      style: {\n        fontSize: 'inherit',\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    }, props.cardno)\n  }, {\n    title: t('str_id'),\n    field: 'id',\n    headerStyle: {\n      textAlign: 'right'\n    },\n    render: props => __jsx(Typography, {\n      style: {\n        fontSize: 'inherit',\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }\n    }, props.id)\n  }];\n  const tableLocalization = MaterialTableLocalization();\n  useEffect(() => {\n    if (searchText.length > 0 && !openDetailSearch) {\n      const timer = setTimeout(() => {\n        setLoading(true);\n        ViewList({\n          apiUrl: GENERAL_SETTINGS.OREST_URL,\n          endpoint: OREST_ENDPOINT.CLIENT,\n          token,\n          params: {\n            query: `isactive:true`,\n            field: 'firstname,code,fullname',\n            text: `*${searchText}`,\n            allhotels: true\n          }\n        }).then(res => {\n          if (firstLoad) {\n            setFirstLoad(false);\n          }\n\n          if (res.status === 200) {\n            setGuestList(res.data.data);\n            setLoading(false);\n          } else {\n            setLoading(false);\n          }\n        });\n      }, 1200);\n      return () => clearTimeout(timer);\n    }\n  }, [searchText]);\n\n  const handleOnChange = e => {\n    const value = e.target.value;\n    const key = e.target.name;\n    setFilterList(_objectSpread(_objectSpread({}, filterList), {}, {\n      [key]: _objectSpread(_objectSpread({}, filterList[key]), {}, {\n        label: filterList[key].label,\n        value: value\n      })\n    }));\n  };\n\n  const handleFindGuest = () => {\n    let query = '';\n    Object.keys(filterList).map((item, i) => {\n      if (filterList[item].value.length > 0) {\n        if (item === queryTypes.email) {\n          query = query + `email:*${filterList[item].value},`;\n        } else if (item === queryTypes.mobile) {\n          query = query + `mobiletel:*${mobileTelNoFormat(filterList[item].value)},`;\n        } else if (item === queryTypes.firstName) {\n          query = query + `firstname:*${filterList[item].value},`;\n        } else if (item === queryTypes.lastName) {\n          query = query + `lastname:*${filterList[item].value},`;\n        } else if (item === queryTypes.roomNo) {\n          query = query + `resroomno:${filterList[item].value},`;\n        } else if (item === queryTypes.refCode) {\n          query = query + `refcode:*${filterList[item].value},`;\n        }\n      }\n    });\n    query = query + 'isactive:true';\n    setLoading(true);\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.CLIENT,\n      token,\n      params: {\n        query: query,\n        allhotels: true\n      }\n    }).then(res => {\n      if (firstLoad) {\n        setFirstLoad(false);\n      }\n\n      if (res.status === 200) {\n        setGuestList(res.data.data);\n        setLoading(false);\n      } else {\n        setLoading(false);\n      }\n    });\n  };\n\n  return __jsx(\"div\", {\n    style: {\n      paddingTop: '24px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 21\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 25\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    alignItems: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 7,\n    sm: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 37\n    }\n  }, __jsx(TextField, {\n    variant: 'outlined',\n    disabled: openDetailSearch || loading,\n    fullWidth: true,\n    label: 'Search Guest...',\n    onChange: e => setSearchText(e.target.value),\n    InputProps: {\n      endAdornment: __jsx(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 53\n        }\n      }, !openDetailSearch && loading && __jsx(LoadingSpinner, {\n        size: 18,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 90\n        }\n      })),\n      startAdornment: __jsx(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 53\n        }\n      }, __jsx(SearchIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 57\n        }\n      }))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 41\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    startIcon: __jsx(FilterListIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 56\n      }\n    }),\n    onClick: () => {\n      setOpenDetailSearch(!openDetailSearch);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 41\n    }\n  }, t('str_detailSearch')), openDetailSearch && __jsx(\"div\", {\n    className: classes.triangleDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 49\n    }\n  }))))))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 17\n    }\n  }, __jsx(Collapse, {\n    in: openDetailSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 21\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 25\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 5,\n    alignItems: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 33\n    }\n  }, Object.keys(filterList).map((item, i) => __jsx(Grid, {\n    key: i,\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 45\n    }\n  }, __jsx(\"div\", {\n    className: classes.textFieldContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    disabled: loading,\n    value: filterList[item].value,\n    id: item,\n    name: item,\n    onChange: e => handleOnChange(e),\n    color: 'primary',\n    label: filterList[item].label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 53\n    }\n  }), __jsx(Divider, {\n    className: classes.dividerStyle,\n    absolute: true,\n    orientation: 'vertical',\n    flexItem: true,\n    variant: 'fullWidth',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 53\n    }\n  })))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 37\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 41\n    }\n  }, __jsx(CustomToolTip, {\n    title: t('str_clearFilterValues'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 45\n    }\n  }, __jsx(IconButton, {\n    style: {\n      padding: '4px'\n    },\n    onClick: () => {\n      setFilterList({\n        email: {\n          label: t('str_email'),\n          value: ''\n        },\n        mobile: {\n          label: t('str_mobile'),\n          value: ''\n        },\n        firstName: {\n          label: t('str_firstName'),\n          value: ''\n        },\n        lastName: {\n          label: t('str_lastName'),\n          value: ''\n        },\n        roomNo: {\n          label: t('str_roomNo'),\n          value: ''\n        },\n        refCode: {\n          label: t('str_refCode'),\n          value: ''\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 49\n    }\n  }, __jsx(ClearIcon, {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 53\n    }\n  }))), __jsx(CustomToolTip, {\n    title: t('str_search'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 45\n    }\n  }, __jsx(Button, {\n    className: classes.searchButton,\n    disabled: loading,\n    color: 'primary',\n    variant: 'contained',\n    onClick: handleFindGuest,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 49\n    }\n  }, loading ? __jsx(LoadingSpinner, {\n    size: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 61\n    }\n  }) : __jsx(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 61\n    }\n  })))))))))), !firstLoad && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 25\n    }\n  }, __jsx(MaterialTable, {\n    columns: columns,\n    data: guestList,\n    isLoading: loading,\n    options: {\n      headerStyle: {\n        width: 'auto',\n        cursor: 'default',\n        fontWeight: \"bold\",\n        fontSize: \"12px\",\n        color: \"#A3A6B4\",\n        textTransform: \"uppercase\",\n        backgroundColor: \"#F5F6FA\",\n        whiteSpace: 'nowrap',\n        borderLeft: '1px solid #FFF'\n      },\n      cellStyle: {\n        whiteSpace: 'nowrap',\n        borderLeft: '1px solid rgba(224, 224, 224, 1)' //minWidth: '100px'\n\n      },\n      rowStyle: rowData => ({\n        backgroundColor: (selectedGuest === null || selectedGuest === void 0 ? void 0 : selectedGuest.tableData.id) === rowData.tableData.id ? '#FEF3E2' : '#FFF'\n      }),\n      toolbar: false,\n      selection: false,\n      sorting: false\n    },\n    localization: tableLocalization,\n    components: {\n      Header: props => {\n        const overrideProps = _objectSpread({}, props);\n\n        overrideProps.draggable = false;\n        overrideProps.columns[0].tableData.initialWidth = 'calc(100px)';\n        overrideProps.columns[0].tableData.width = 'calc(100px)';\n        return __jsx(MTableHeader, _extends({}, overrideProps, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 45\n          }\n        }));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 29\n    }\n  }))));\n}\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchGuest);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/SearchGuest/index.js"],"names":["React","useEffect","useState","useContext","makeStyles","useSelector","connect","useRouter","ViewList","Button","IconButton","Card","CardContent","Grid","TextField","Typography","Checkbox","InputAdornment","Collapse","Divider","SearchIcon","FilterListIcon","ClearIcon","useSnackbar","WebCmsGlobal","mobileTelNoFormat","OREST_ENDPOINT","useTranslation","MaterialTable","MTableHeader","CustomToolTip","MaterialTableLocalization","TrackedChangesDialog","LoadingSpinner","HotelBellIcon","SalesTotalIcon","BookIcon","deleteFromState","setToState","updateState","useStyles","theme","cardTitle","fontSize","textTransform","textAlign","cardCountText","fontWeight","title","color","paddingBottom","iconStyle","width","height","iconDiv","top","position","triangleDiv","bottom","right","borderTop","borderLeft","borderRight","dividerStyle","left","breakpoints","down","display","searchButton","marginLeft","textFieldContainer","SearchGuest","props","classes","clientParams","enqueueSnackbar","router","GENERAL_SETTINGS","t","token","state","orest","currentUser","auth","access_token","hotelRefNo","hotelinfo","currentHotelRefNo","openDetailSearch","setOpenDetailSearch","guestList","setGuestList","selectedGuest","setSelectedGuest","loading","setLoading","searchText","setSearchText","openDialog","setOpenDialog","firstLoad","setFirstLoad","overviewCardList","icon","count","queryTypes","email","mobile","firstName","lastName","roomNo","refCode","filterList","setFilterList","label","value","columns","field","headerStyle","minWidth","maxWidth","cellStyle","padding","render","routerQuery","query","obj","Object","param","k","hasOwnProperty","mobiletel","tel","replace","push","pathname","setTimeout","tab","cardno","id","tableLocalization","length","timer","apiUrl","OREST_URL","endpoint","CLIENT","params","text","allhotels","then","res","status","data","clearTimeout","handleOnChange","e","target","key","name","handleFindGuest","keys","map","item","i","paddingTop","endAdornment","startAdornment","cursor","backgroundColor","whiteSpace","rowStyle","rowData","tableData","toolbar","selection","sorting","Header","overrideProps","draggable","initialWidth","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext } from \"react\";\nimport {makeStyles} from '@material-ui/core/styles'\nimport { useSelector, connect } from 'react-redux'\nimport { useRouter } from 'next/router'\nimport { ViewList } from '@webcms/orest'\nimport {\n    Button,\n    IconButton,\n    Card,\n    CardContent,\n    Grid,\n    TextField,\n    Typography,\n    Checkbox,\n    InputAdornment,\n    Collapse,\n    Divider\n} from '@material-ui/core'\nimport SearchIcon from '@material-ui/icons/Search';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport {useSnackbar} from 'notistack'\nimport WebCmsGlobal from \"../../../webcms-global\";\nimport {mobileTelNoFormat, OREST_ENDPOINT} from \"../../../../model/orest/constants\";\nimport useTranslation from \"../../../../lib/translations/hooks/useTranslation\";\nimport MaterialTable, { MTableHeader } from 'material-table'\nimport {CustomToolTip} from \"../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport MaterialTableLocalization from \"../../../MaterialTableLocalization\";\nimport TrackedChangesDialog from \"../../../TrackedChangesDialog\";\nimport LoadingSpinner from \"../../../LoadingSpinner\";\nimport {HotelBellIcon} from \"../../../../assets/svg/guest/HotelBellIcon\";\nimport {SalesTotalIcon} from \"../../../../assets/svg/guest/SalesTotalIcon\";\nimport {BookIcon} from \"../../../../assets/svg/guest/BookIcon\";\nimport {deleteFromState, setToState, updateState} from \"../../../../state/actions\";\n\n\nconst useStyles = makeStyles( theme => ({\n    cardTitle: {\n        fontSize: '18px',\n        textTransform: 'uppercase',\n        textAlign: 'center'\n    },\n    cardCountText: {\n        fontSize: '35px',\n        fontWeight: 'bold'\n    },\n    title: {\n        fontSize: '28px',\n        color: '#43425D',\n        paddingBottom: '48px'\n    },\n    iconStyle: {\n        color:\"#FFF\",\n        width:\"40px\",\n        height:\"40px\"\n    },\n    iconDiv: {\n        top:\"-20px\",\n        position:\"absolute\",\n        width:\"78px\",\n        height:\"78px\"\n    },\n    triangleDiv: {\n        position: 'absolute',\n        bottom: '-24px',\n        right: '8%',\n        width: 0,\n        height: 0,\n        borderTop: '28px solid #FFF',\n        borderLeft: '14px solid transparent',\n        borderRight: '14px solid transparent',\n\n    },\n    dividerStyle: {\n        top: '0',\n        right: '-12px',\n        left: 'unset',\n        [theme.breakpoints.down('sm')]: {\n            display: \"none\",\n        },\n    },\n    searchButton: {\n        marginLeft: '8px',\n        [theme.breakpoints.down('sm')]: {\n            width: \"100%\",\n            marginLeft: '0'\n        },\n    },\n    textFieldContainer: {\n        position: 'relative',\n        display: 'flex',\n        [theme.breakpoints.down('sm')]: {\n            display: \"block\",\n            textAlign: \"center\",\n        },\n    }\n\n}));\n\nfunction SearchGuest(props) {\n    const classes = useStyles();\n\n    const { clientParams, setToState } = props;\n\n    const { enqueueSnackbar } = useSnackbar();\n    const router = useRouter();\n\n    //context\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal);\n    const { t } = useTranslation();\n\n    //redux\n    const token = useSelector((state) => state?.orest?.currentUser?.auth.access_token || false);\n    const hotelRefNo = useSelector(state => state?.hotelinfo?.currentHotelRefNo || null);\n\n    //state\n    const [openDetailSearch, setOpenDetailSearch] = useState(false);\n    const [guestList, setGuestList] = useState([]);\n    const [selectedGuest, setSelectedGuest] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [searchText, setSearchText] = useState('');\n    const [openDialog, setOpenDialog] = useState(false);\n    const [firstLoad, setFirstLoad] = useState(true);\n\n    const overviewCardList = [\n        {\n            icon:(\n                <HotelBellIcon className={classes.iconStyle}/>\n            ),\n            color: \"#67B549\",\n            title: t('str_reservationCount'),\n            count: 0\n        },\n        {\n            icon:(\n                <SalesTotalIcon className={classes.iconStyle}/>\n            ),\n            color: \"#F16A4B\",\n            title: t('str_salesTotal'),\n            count: 0\n        },\n        {\n            icon:(\n                <BookIcon className={classes.iconStyle}/>\n            ),\n            color: '#2697D4',\n            title: t('str_bookerBonus'),\n            count: 0\n        },\n    ]\n    const queryTypes = {\n        email: 'email',\n        mobile: 'mobile',\n        firstName: 'firstName',\n        lastName: 'lastName',\n        roomNo: 'roomNo',\n        refCode: 'refCode'\n\n    }\n    const [filterList, setFilterList] = useState({\n        email: {\n            label: t('str_email'),\n            value: ''\n        },\n        mobile: {\n            label: t('str_mobile'),\n            value: ''\n        },\n        firstName: {\n            label: t('str_firstName'),\n            value: ''\n        },\n        lastName: {\n            label: t('str_lastName'),\n            value: ''\n        },\n        roomNo: {\n            label: t('str_roomNo'),\n            value: ''\n        },\n        refCode: {\n            label: t('str_refCode'),\n            value: ''\n        },\n\n    })\n    const columns = [\n        {\n            title: '',\n            field: '#',\n            headerStyle: {\n                minWidth: '32px',\n                maxWidth: '32px'\n            },\n            cellStyle: {\n                padding: 0,\n                minWidth: '32px',\n                maxWidth: '32px'\n            },\n            render: props => (\n                <Typography style={{textAlign: 'center'}}>\n                    <Button\n                        color={'primary'}\n                        variant={'contained'}\n                        onClick={() => {\n                            setSelectedGuest(props);\n                            const routerQuery = router.query;\n                            const obj = Object(clientParams)\n                            let param = '';\n                            for (const k in routerQuery) {\n                                if (obj.hasOwnProperty(k)) {\n                                    param = k\n                                } else {\n                                    if(k === 'telno') {\n                                        param = 'telno'\n                                    }\n                                }\n                            }\n\n                            if(param === '' || param === 'telno') {\n                                if(param === 'telno') {\n                                    if(props?.mobiletel || props?.tel) {\n                                        param = 'telno'\n                                    } else {\n                                        delete routerQuery[param]\n                                        if(props?.email) {\n                                            param = 'email'\n                                        } else if(props?.mobiletel || props?.tel) {\n                                            param = 'mobile'\n                                        } else {\n                                            param = 'code'\n                                        }\n                                    }\n                                } else {\n                                    if(props?.email) {\n                                        param = 'email'\n                                    } else if(props?.mobiletel || props?.tel) {\n                                        param = 'mobile'\n                                    } else {\n                                        param = 'code'\n                                    }\n                                }\n                            } else {\n                                if(props && !props[param]) {\n                                    delete routerQuery[param]\n                                    if(props?.email) {\n                                        param = 'email'\n                                    } else if(props?.mobiletel || props?.tel) {\n                                        param = 'mobile'\n                                    } else {\n                                        param = 'code'\n                                    }\n                                }\n                            }\n\n                            routerQuery[param] = props && param === 'telno' || param === 'mobile' ? mobileTelNoFormat(props['mobiletel'] ? props['mobiletel'] : props['tel'] ? props['tel'] : props['tel2'])?.replace('+', '') : props[param];\n                            router.push({\n                                pathname: router.pathname,\n                                query: routerQuery\n                            })\n                            setTimeout(() => {\n                                const routerQuery = router.query;\n                                routerQuery.tab = 'details'\n                                router.push({\n                                    pathname: router.pathname,\n                                    query: routerQuery\n                                })\n                            }, 1000)\n                            setToState('guest', ['profile', 'loadGuest'], true);\n                        }}\n                    >\n                        {t('str_select')}\n                    </Button>\n                </Typography>\n\n            )\n        },\n        {\n            title: t('str_firstName'),\n            field: 'firstname',\n        },\n        {\n            title: t('str_lastName'),\n            field: 'lastname',\n        },\n        {\n            title: t('str_birthDate'),\n            field: 'birthdate',\n        },\n        {\n            title: t('str_email'),\n            field: 'email',\n        },\n        {\n            title: t('str_mobile'),\n            field: 'mobiletel',\n        },\n        {\n            title: t('str_cardNo'),\n            field: 'cardno',\n            headerStyle: {\n                textAlign: 'right'\n            },\n            render: (props) => (\n                <Typography style={{fontSize: 'inherit', textAlign: 'right'}}>{props.cardno}</Typography>\n            ),\n        },\n        {\n            title: t('str_id'),\n            field: 'id',\n            headerStyle: {\n                textAlign: 'right'\n            },\n            render: (props) => (\n                <Typography style={{fontSize: 'inherit', textAlign: 'right'}}>{props.id}</Typography>\n            ),\n        }\n    ]\n\n    const tableLocalization = MaterialTableLocalization();\n\n    useEffect(() => {\n        if(searchText.length > 0 && !openDetailSearch) {\n            const timer = setTimeout(() => {\n                setLoading(true);\n                ViewList({\n                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                    endpoint: OREST_ENDPOINT.CLIENT,\n                    token,\n                    params: {\n                        query: `isactive:true`,\n                        field: 'firstname,code,fullname',\n                        text: `*${searchText}`,\n                        allhotels: true\n                    }\n                }).then(res => {\n                    if(firstLoad) {\n                        setFirstLoad(false);\n                    }\n                    if(res.status === 200) {\n                        setGuestList(res.data.data)\n                        setLoading(false);\n                    } else {\n                        setLoading(false);\n                    }\n                })\n            }, 1200)\n            return () => clearTimeout(timer);\n        }\n    }, [searchText])\n\n    const handleOnChange = (e) => {\n        const value = e.target.value;\n        const key = e.target.name;\n\n        setFilterList({\n            ...filterList,\n            [key]: {\n                ...filterList[key],\n                label: filterList[key].label,\n                value: value\n            }\n        })\n    }\n\n    const handleFindGuest = () => {\n        let query = '';\n        Object.keys(filterList).map((item, i) => {\n            if(filterList[item].value.length > 0) {\n                if(item === queryTypes.email) {\n                    query = query + `email:*${filterList[item].value},`\n                } else if(item === queryTypes.mobile) {\n                    query = query + `mobiletel:*${mobileTelNoFormat(filterList[item].value)},`\n                } else if(item === queryTypes.firstName) {\n                    query = query + `firstname:*${filterList[item].value},`\n                } else if(item === queryTypes.lastName) {\n                    query = query + `lastname:*${filterList[item].value},`\n                } else if(item === queryTypes.roomNo) {\n                    query = query + `resroomno:${filterList[item].value},`\n                } else if(item === queryTypes.refCode) {\n                    query = query + `refcode:*${filterList[item].value},`\n                }\n            }\n        })\n        query = query + 'isactive:true'\n        setLoading(true);\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.CLIENT,\n            token,\n            params: {\n                query: query,\n                allhotels: true\n            }\n        }).then(res => {\n            if(firstLoad) {\n                setFirstLoad(false);\n            }\n            if(res.status === 200) {\n                setGuestList(res.data.data);\n                setLoading(false);\n            } else {\n                setLoading(false);\n            }\n        })\n    }\n\n    return(\n        <div style={{paddingTop: '24px'}}>\n            <Grid container spacing={3}>\n                {\n                    //TODO will be applied when booker loyalty is active\n                    /*\n                       <Grid item xs={12}>\n                    <Typography className={classes.title}>{t('str_overview')}</Typography>\n                </Grid>\n                <Grid item xs={12}>\n                    <Grid container spacing={2}>\n                        {\n                            overviewCardList.map((item, i) => (\n                                <Grid key={i} item xs={12} sm={4}>\n                                    <div style={{position: 'relative'}}>\n                                        <Card>\n                                            <CardContent style={{paddingBottom: '0'}}>\n                                                <Grid container>\n                                                    <Grid item xs={5}>\n                                                        <div className={classes.iconDiv} style={{backgroundColor:item.color}}>\n                                                            <AlignToCenter>\n                                                                {item.icon}\n                                                            </AlignToCenter>\n                                                        </div>\n                                                    </Grid>\n                                                    <Grid item xs={7}>\n                                                        <Typography className={classes.cardTitle}>{item.title}</Typography>\n                                                    </Grid>\n                                                    <Grid item xs={5}>\n                                                    </Grid>\n                                                    <Grid item xs={7} style={{textAlign: 'center'}}>\n                                                        <Typography className={classes.cardCountText} style={{color: item.color}}>\n                                                            {item.count}\n                                                        </Typography>\n                                                    </Grid>\n                                                </Grid>\n                                            </CardContent>\n                                        </Card>\n                                    </div>\n                                </Grid>\n                            ))\n                        }\n                    </Grid>\n                </Grid>\n                     */\n                }\n                <Grid item xs={12}>\n                    <div style={{position: 'relative'}}>\n                        <Card>\n                            <CardContent>\n                                <Grid container spacing={2} alignItems={'center'}>\n                                    <Grid item xs={7} sm={10}>\n                                        <TextField\n                                            variant={'outlined'}\n                                            disabled={openDetailSearch || loading}\n                                            fullWidth\n                                            label={'Search Guest...'}\n                                            onChange={(e) => setSearchText(e.target.value)}\n                                            InputProps={{\n                                                endAdornment: (\n                                                    <React.Fragment>\n                                                        {!openDetailSearch && loading && <LoadingSpinner size={18}/>}\n                                                    </React.Fragment>\n                                                ),\n                                                startAdornment: (\n                                                    <InputAdornment position=\"start\">\n                                                        <SearchIcon />\n                                                    </InputAdornment>\n                                                ),\n                                            }}\n                                        />\n                                    </Grid>\n                                    <Grid item xs={4} sm={2}>\n                                        <Button\n                                            startIcon={<FilterListIcon/>}\n                                            onClick={() => {\n                                                setOpenDetailSearch(!openDetailSearch)\n                                            }}\n                                        >\n                                            {t('str_detailSearch')}\n                                        </Button>\n                                        {\n                                            openDetailSearch && (\n                                                <div className={classes.triangleDiv}/>\n                                            )\n                                        }\n                                    </Grid>\n                                </Grid>\n                            </CardContent>\n                        </Card>\n                    </div>\n                </Grid>\n                <Grid item xs={12}>\n                    <Collapse in={openDetailSearch}>\n                        <Card>\n                            <CardContent>\n                                <Grid container spacing={5} alignItems={'center'}>\n                                    {\n                                        Object.keys(filterList).map((item, i) => (\n                                            <Grid key={i} item xs={12} sm={6} md>\n                                                <div className={classes.textFieldContainer}>\n                                                    <TextField\n                                                        disabled={loading}\n                                                        value={filterList[item].value}\n                                                        id={item}\n                                                        name={item}\n                                                        onChange={(e) => handleOnChange(e)}\n                                                        color={'primary'}\n                                                        label={filterList[item].label}\n                                                    />\n                                                    <Divider className={classes.dividerStyle} absolute orientation={'vertical'} flexItem variant={'fullWidth'}/>\n                                                </div>\n                                            </Grid>\n                                        ))\n                                    }\n                                    <Grid item xs={12} sm={12} md>\n                                        <div style={{display:'flex'}}>\n                                            <CustomToolTip title={t('str_clearFilterValues')}>\n                                                <IconButton\n                                                    style={{padding: '4px'}}\n                                                    onClick={() => {\n                                                        setFilterList({\n                                                            email: {\n                                                                label: t('str_email'),\n                                                                value: ''\n                                                            },\n                                                            mobile: {\n                                                                label: t('str_mobile'),\n                                                                value: ''\n                                                            },\n                                                            firstName: {\n                                                                label: t('str_firstName'),\n                                                                value: ''\n                                                            },\n                                                            lastName: {\n                                                                label: t('str_lastName'),\n                                                                value: ''\n                                                            },\n                                                            roomNo: {\n                                                                label: t('str_roomNo'),\n                                                                value: ''\n                                                            },\n                                                            refCode: {\n                                                                label: t('str_refCode'),\n                                                                value: ''\n                                                            },\n                                                        })\n                                                    }}\n                                                >\n                                                    <ClearIcon style={{color: 'red'}}/>\n                                                </IconButton>\n                                            </CustomToolTip>\n                                            <CustomToolTip title={t('str_search')}>\n                                                <Button\n                                                    className={classes.searchButton}\n                                                    disabled={loading}\n                                                    color={'primary'}\n                                                    variant={'contained'}\n                                                    onClick={handleFindGuest}\n                                                    fullWidth\n                                                >\n                                                    {\n                                                        loading ? (\n                                                            <LoadingSpinner size={24}/>\n                                                        ) : (\n                                                            <SearchIcon/>\n                                                        )\n                                                    }\n                                                </Button>\n                                            </CustomToolTip>\n                                        </div>\n                                    </Grid>\n                                </Grid>\n                            </CardContent>\n                        </Card>\n\n                    </Collapse>\n                </Grid>\n                {\n                    !firstLoad && (\n                        <Grid item xs={12}>\n                            <MaterialTable\n                                columns={columns}\n                                data={guestList}\n                                isLoading={loading}\n                                options={{\n                                    headerStyle:{\n                                        width: 'auto',\n                                        cursor: 'default',\n                                        fontWeight:\"bold\",\n                                        fontSize:\"12px\",\n                                        color:\"#A3A6B4\",\n                                        textTransform:\"uppercase\",\n                                        backgroundColor:\"#F5F6FA\",\n                                        whiteSpace: 'nowrap',\n                                        borderLeft: '1px solid #FFF',\n                                    },\n                                    cellStyle: {\n                                        whiteSpace: 'nowrap',\n                                        borderLeft: '1px solid rgba(224, 224, 224, 1)',\n                                        //minWidth: '100px'\n                                    },\n                                    rowStyle: rowData => ({\n                                        backgroundColor: (selectedGuest?.tableData.id === rowData.tableData.id) ? '#FEF3E2' : '#FFF'\n                                    }),\n                                    toolbar: false,\n                                    selection: false,\n                                    sorting: false,\n                                }}\n                                localization={tableLocalization}\n                                components={{\n                                    Header: (props) => {\n                                        const overrideProps = {...props}\n                                        overrideProps.draggable = false\n                                        overrideProps.columns[0].tableData.initialWidth = 'calc(100px)'\n                                        overrideProps.columns[0].tableData.width = 'calc(100px)'\n                                        return(\n                                            <MTableHeader  {...overrideProps}/>\n                                        )\n                                    },\n                                }}\n                            />\n                        </Grid>\n                    )\n                }\n            </Grid>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchGuest)\n"]},"metadata":{},"sourceType":"module"}