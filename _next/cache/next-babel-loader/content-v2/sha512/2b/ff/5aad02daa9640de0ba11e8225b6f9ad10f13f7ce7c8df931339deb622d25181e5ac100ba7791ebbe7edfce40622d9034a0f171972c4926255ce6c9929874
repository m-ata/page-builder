{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/@webcms-ui/core/carousel/index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport Slider from 'react-slick';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Button';\nimport CarouselItem from './carousel-item';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { getHyperlinkParser } from 'model/orest/constants';\nimport WebCmsGlobal from 'components/webcms-global';\nimport { useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    maxWidth: '100%',\n    height: 0,\n    margin: 10,\n    paddingTop: '56.25%'\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%' // 16:9\n\n  }\n}));\nexport default function Carousel(props) {\n  const isLogin = useSelector(state => state.orest.currentUser && state.orest.currentUser.auth) ? true : false;\n  const classes = useStyles();\n  const {\n    0: slider,\n    1: setSlider\n  } = useState({\n    nav1: null,\n    nav2: null\n  });\n  const {\n    0: loadPiority,\n    1: setLoadPiority\n  } = useState(0);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    0: mouseX,\n    1: setMouseX\n  } = useState(null);\n  const {\n    0: mouseY,\n    1: setMouseY\n  } = useState(null);\n  const {\n    0: openContextMenu,\n    1: setOpenContextMenu\n  } = useState(false);\n  const {\n    0: contextData,\n    1: setContextData\n  } = useState(null);\n  let {\n    slideData,\n    slider1,\n    slider2\n  } = props;\n  const {\n    t\n  } = useTranslation();\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  useEffect(() => {\n    setSlider(_objectSpread(_objectSpread({}, slider), {}, {\n      nav1: slider1,\n      nav2: slider2\n    }));\n  }, []);\n  const imageSetting = {\n    centerMode: true,\n    slidesToShow: 1,\n    arrows: true,\n    dots: true,\n    accessibility: true,\n    focusOnSelect: true,\n    afterChange: current => setLoadPiority(current)\n  };\n  const descSetting = {\n    centerMode: false,\n    slidesToShow: 1,\n    arrows: false,\n    dots: false,\n    focusOnSelect: true\n  };\n\n  const renderButton = cta => {\n    if (cta) {\n      var _link$text;\n\n      let link = getHyperlinkParser(cta);\n\n      if (link === false) {\n        return;\n      }\n\n      let href = link.href;\n      let text = (link === null || link === void 0 ? void 0 : (_link$text = link.text) === null || _link$text === void 0 ? void 0 : _link$text.replace(/ /g, '')) || '';\n      let host = window.location.host;\n      let isExternalLink = false;\n\n      if (href.includes('http') && !href.includes(host)) {\n        isExternalLink = true;\n      }\n\n      if (!isExternalLink) {\n        if (!isLogin && href.includes('profile') || href.includes('history')) {\n          let destinationLink = encodeURIComponent(link.href);\n          href = '/guest/login?refurl=' + destinationLink;\n        }\n\n        return __jsx(Link, {\n          id: \"slick-button\",\n          variant: \"outlined\",\n          color: \"primary\",\n          href: href,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }\n        }, t(text === null || text === void 0 ? void 0 : text.removeHtmlTag()));\n      }\n\n      return __jsx(Link, {\n        id: \"slick-button\",\n        variant: \"outlined\",\n        color: \"primary\",\n        target: \"_blank\",\n        href: href,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, t(text === null || text === void 0 ? void 0 : text.removeHtmlTag()));\n    } else {\n      return;\n    }\n  };\n\n  const handleRightClick = (e, item) => {\n    setMouseX(e.clientX - 2);\n    setMouseY(e.clientY - 4);\n    setOpenContextMenu(true);\n    setContextData(item);\n    e.preventDefault();\n  };\n\n  const onHandleCopyText = () => {\n    navigator.clipboard.writeText(contextData).then(() => {\n      enqueueSnackbar(t(\"str_copiedToClipboard\").replace('%s', `\"${contextData.substring(0, 50) + '...'}\"`), {\n        variant: 'success',\n        autoHideDuration: 2000\n      });\n    });\n    setOpenContextMenu(false);\n    setContextData(null);\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    style: {\n      marginBottom: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, __jsx(Slider, _extends({\n    asNavFor: slider.nav2,\n    ref: slider => slider1 = slider\n  }, imageSetting, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }), slideData.map((item, i) => {\n    return __jsx(CarouselItem, {\n      key: i + '-homeCarousel',\n      rootCls: classes.root,\n      mediaCls: classes.media,\n      img: GENERAL_SETTINGS.STATIC_URL + item.url,\n      title: item.title,\n      score: 3,\n      loadPriority: loadPiority === i ? \"true\" : \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 29\n      }\n    });\n  }))), __jsx(Slider, _extends({\n    asNavFor: slider.nav1,\n    ref: slider => slider2 = slider\n  }, descSetting, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }), slideData.map((item, key) => {\n    var _item$localtitle2, _item$localdesc2;\n\n    return __jsx(\"div\", {\n      key: key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, __jsx(Typography, {\n      variant: \"h6\",\n      align: \"center\",\n      gutterBottom: true,\n      onContextMenu: e => {\n        var _item$localtitle;\n\n        return handleRightClick(e, t(item === null || item === void 0 ? void 0 : (_item$localtitle = item.localtitle) === null || _item$localtitle === void 0 ? void 0 : _item$localtitle.removeHtmlTag()));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, t(item === null || item === void 0 ? void 0 : (_item$localtitle2 = item.localtitle) === null || _item$localtitle2 === void 0 ? void 0 : _item$localtitle2.removeHtmlTag())), __jsx(Typography, {\n      variant: \"body1\",\n      align: \"center\",\n      gutterBottom: true,\n      onContextMenu: e => {\n        var _item$localdesc;\n\n        return handleRightClick(e, t(item === null || item === void 0 ? void 0 : (_item$localdesc = item.localdesc) === null || _item$localdesc === void 0 ? void 0 : _item$localdesc.removeHtmlTag()));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, t(item === null || item === void 0 ? void 0 : (_item$localdesc2 = item.localdesc) === null || _item$localdesc2 === void 0 ? void 0 : _item$localdesc2.removeHtmlTag())), __jsx(Typography, {\n      variant: \"body1\",\n      align: \"center\",\n      gutterBottom: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, item.cta && renderButton(item.cta)));\n  })), __jsx(Menu, {\n    open: openContextMenu,\n    onClose: () => setOpenContextMenu(false),\n    anchorReference: \"anchorPosition\",\n    anchorPosition: mouseY !== null && mouseX !== null ? {\n      top: mouseY,\n      left: mouseX\n    } : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, __jsx(MenuItem, {\n    onClick: () => onHandleCopyText(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, t(\"str_copy\"))));\n}","map":{"version":3,"sources":["/Users/mata/app-cloudweb/@webcms-ui/core/carousel/index.js"],"names":["React","useContext","useEffect","useState","Slider","makeStyles","Box","Typography","Link","CarouselItem","useTranslation","getHyperlinkParser","WebCmsGlobal","useSelector","useSnackbar","Menu","MenuItem","useStyles","theme","root","position","maxWidth","height","margin","paddingTop","media","Carousel","props","isLogin","state","orest","currentUser","auth","classes","slider","setSlider","nav1","nav2","loadPiority","setLoadPiority","enqueueSnackbar","mouseX","setMouseX","mouseY","setMouseY","openContextMenu","setOpenContextMenu","contextData","setContextData","slideData","slider1","slider2","t","GENERAL_SETTINGS","imageSetting","centerMode","slidesToShow","arrows","dots","accessibility","focusOnSelect","afterChange","current","descSetting","renderButton","cta","link","href","text","replace","host","window","location","isExternalLink","includes","destinationLink","encodeURIComponent","removeHtmlTag","handleRightClick","e","item","clientX","clientY","preventDefault","onHandleCopyText","navigator","clipboard","writeText","then","substring","variant","autoHideDuration","marginBottom","map","i","STATIC_URL","url","title","key","localtitle","localdesc","top","left","undefined"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport Slider from 'react-slick'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Link from '@material-ui/core/Button'\nimport CarouselItem from './carousel-item'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { getHyperlinkParser } from 'model/orest/constants'\nimport WebCmsGlobal from 'components/webcms-global'\nimport { useSelector } from 'react-redux'\nimport { useSnackbar } from 'notistack'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        position: 'relative',\n        maxWidth: '100%',\n        height: 0,\n        margin: 10,\n        paddingTop: '56.25%'\n    },\n    media: {\n        height: 0,\n        paddingTop: '56.25%', // 16:9\n    }\n}))\n\nexport default function Carousel(props) {\n    const isLogin = useSelector((state) => state.orest.currentUser && state.orest.currentUser.auth) ? true : false\n    const classes = useStyles()\n    const [slider, setSlider] = useState({ nav1: null, nav2: null })\n    const [loadPiority, setLoadPiority] = useState(0)\n    const { enqueueSnackbar } = useSnackbar()\n    const [mouseX, setMouseX] = useState(null)\n    const [mouseY, setMouseY] = useState(null)\n    const [openContextMenu, setOpenContextMenu] = useState(false)\n    const [contextData, setContextData] = useState(null)\n    let { slideData, slider1, slider2 } = props\n    const { t } = useTranslation()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n\n    useEffect(() => {\n        setSlider({ ...slider, nav1: slider1, nav2: slider2 })\n    }, [])\n\n    const imageSetting = {\n        centerMode: true,\n        slidesToShow: 1,\n        arrows: true,\n        dots: true,\n        accessibility: true,\n        focusOnSelect: true,\n        afterChange: current => setLoadPiority(current),\n    }\n\n    const descSetting = {\n        centerMode: false,\n        slidesToShow: 1,\n        arrows: false,\n        dots: false,\n        focusOnSelect: true\n    }\n\n    const renderButton = (cta) => {\n        if (cta) {\n            let link = getHyperlinkParser(cta)\n            if(link === false){\n                return\n            }\n\n            let href = link.href\n            let text = link?.text?.replace(/ /g,'') || ''\n            let host = window.location.host\n\n            let isExternalLink = false\n            if(href.includes('http') && !href.includes(host)){\n                isExternalLink = true\n            }\n\n            if(!isExternalLink){\n\n                if((!isLogin) && href.includes('profile') || href.includes('history')){\n                    let destinationLink = encodeURIComponent(link.href)\n                    href = '/guest/login?refurl='+destinationLink\n                }\n\n                return (\n                    <Link id=\"slick-button\"  variant=\"outlined\" color=\"primary\" href={href}>\n                        {t(text?.removeHtmlTag())}\n                    </Link>\n                )\n            }\n\n            return (\n                <Link id=\"slick-button\"  variant=\"outlined\" color=\"primary\" target=\"_blank\" href={href}>\n                    {t(text?.removeHtmlTag())}\n                </Link>\n            )\n        } else {\n            return\n        }\n    }\n\n    const handleRightClick = (e, item) => {\n        setMouseX(e.clientX - 2)\n        setMouseY(e.clientY - 4)\n        setOpenContextMenu(true)\n        setContextData(item)\n        e.preventDefault()\n    }\n\n    const onHandleCopyText = () => {\n        navigator.clipboard.writeText(contextData).then(() => {\n            enqueueSnackbar(t(\"str_copiedToClipboard\").replace('%s', `\"${contextData.substring(0, 50) + '...'}\"`), { variant: 'success', autoHideDuration: 2000 })\n        })\n        setOpenContextMenu(false)\n        setContextData(null)\n    }\n\n    return (\n        <React.Fragment>\n            <Box style={{ marginBottom: 50 }}>\n                <Slider asNavFor={slider.nav2} ref={(slider) => (slider1 = slider)} {...imageSetting}>\n                    {slideData.map((item, i) => {\n                        return (\n                            <CarouselItem\n                                key={i + '-homeCarousel'}\n                                rootCls={classes.root}\n                                mediaCls={classes.media}\n                                img={GENERAL_SETTINGS.STATIC_URL + item.url}\n                                title={item.title}\n                                score={3}\n                                loadPriority={loadPiority === i ? \"true\" : \"false\"}\n                            />\n                        )\n                    })}\n                </Slider>\n            </Box>\n            <Slider asNavFor={slider.nav1} ref={(slider) => (slider2 = slider)} {...descSetting}>\n                {slideData.map((item, key) => {\n                    return (\n                        <div key={key}>\n                            <Typography variant=\"h6\" align=\"center\" gutterBottom onContextMenu={(e)=> handleRightClick(e, t(item?.localtitle?.removeHtmlTag()))}>\n                                {t(item?.localtitle?.removeHtmlTag())}\n                            </Typography>\n                            <Typography variant=\"body1\" align=\"center\" gutterBottom onContextMenu={(e)=> handleRightClick(e, t(item?.localdesc?.removeHtmlTag()))}>\n                                {t(item?.localdesc?.removeHtmlTag())}\n                            </Typography>\n                            <Typography variant=\"body1\" align=\"center\" gutterBottom>\n                                {item.cta && renderButton(item.cta)}\n                            </Typography>\n                        </div>\n                    )\n                })}\n            </Slider>\n            <Menu\n                open={openContextMenu}\n                onClose={() => setOpenContextMenu(false)}\n                anchorReference=\"anchorPosition\"\n                anchorPosition={mouseY !== null && mouseX !== null ? { top: mouseY, left: mouseX } : undefined}\n            >\n                <MenuItem onClick={()=> onHandleCopyText()}>{t(\"str_copy\")}</MenuItem>\n            </Menu>\n        </React.Fragment>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}