{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/History/index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useState } from 'react';\nimport { useSelector, connect } from 'react-redux';\nimport { setToState, updateState } from 'state/actions';\nimport { Container, Paper } from '@material-ui/core';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Box from '@material-ui/core/Box';\nimport RoomReservations from '../Reservations/RoomReservations';\nimport EventReservations from '../Reservations/EventReservations';\nimport BonusHistory from '../Transactions/BonusHistory';\nimport Router, { useRouter } from 'next/router';\nimport { ZERO } from 'model/globals';\nimport GuestComments from \"../GuestComments/GuestComments\";\n\nconst TabPanel = props => {\n  const {\n    children,\n    value,\n    hashCode,\n    index\n  } = props,\n        other = _objectWithoutProperties(props, [\"children\", \"value\", \"hashCode\", \"index\"]);\n\n  return __jsx(\"div\", _extends({\n    role: \"tabpanel\",\n    hidden: value !== hashCode,\n    id: `scrollable-auto-tabpanel-${index}`,\n    \"aria-labelledby\": `scrollable-auto-tab-${index}`\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }), value === hashCode && __jsx(Paper, {\n    square: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 36\n    }\n  }, children));\n};\n\nconst a11yProps = index => {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`\n  };\n};\n\nconst History = props => {\n  const {\n    state,\n    setToState\n  } = props;\n  const router = useRouter();\n  const {\n    t\n  } = useTranslation();\n  const loginfo = useSelector(state => state.orest.currentUser && state.orest.currentUser.loginfo);\n  const isClient = loginfo.roletype === '6500310';\n  const historyTabMenu = [{\n    code: 'RESERVATION',\n    title: 'str_reservation',\n    hashCode: 'reservation'\n  }, {\n    code: 'EVENTS',\n    title: 'str_events',\n    hashCode: 'events'\n  }, {\n    code: 'BONUS',\n    title: 'str_bonus',\n    hashCode: 'bonus'\n  }];\n\n  if (!isClient) {\n    historyTabMenu.push({\n      code: 'COMMENTS',\n      title: 'str_comments',\n      hashCode: 'comments'\n    });\n  }\n\n  const tabPanelHashCode = router.query.tab;\n  const {\n    0: historyTabsHashCode,\n    1: setHistoryTabsHashCode\n  } = useState(historyTabMenu.findIndex(menu => menu.hashCode === tabPanelHashCode) > -1 ? tabPanelHashCode : historyTabMenu[ZERO].hashCode);\n\n  const handleGuestHistoryPanelTabChange = (event, newValue) => {\n    if (historyTabsHashCode !== newValue) {\n      setHistoryTabsHashCode(newValue);\n\n      if (tabPanelHashCode) {\n        /* Router.push({\n             pathname: router.pathname,\n             query: {\n                 menu: router.query.menu,\n                 tab: newValue,\n             },\n         })*/\n      }\n    }\n  };\n\n  const renderEventComponent = historyItem => {\n    let component;\n\n    switch (historyItem.code) {\n      case 'RESERVATION':\n        component = __jsx(RoomReservations, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 29\n          }\n        });\n        break;\n\n      case 'EVENTS':\n        component = __jsx(EventReservations, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }\n        });\n        break;\n\n      case 'BONUS':\n        component = __jsx(BonusHistory, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }\n        });\n        break;\n\n      case 'COMMENTS':\n        component = __jsx(GuestComments, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }\n        });\n        break;\n    }\n\n    return component;\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, __jsx(Container, {\n    maxWidth: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, __jsx(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, __jsx(Tabs, {\n    value: historyTabsHashCode,\n    onChange: handleGuestHistoryPanelTabChange,\n    indicatorColor: \"primary\",\n    textColor: \"primary\",\n    variant: \"scrollable\",\n    scrollButtons: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, historyTabMenu.map((item, i) => __jsx(Tab, _extends({\n    label: t(item.title),\n    value: item.hashCode\n  }, a11yProps(i), {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }))))), historyTabMenu.map((item, i) => __jsx(TabPanel, {\n    value: historyTabsHashCode,\n    hashCode: item.hashCode,\n    index: i,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, __jsx(Box, {\n    p: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, renderEventComponent(item))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(History);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/History/index.js"],"names":["React","useState","useSelector","connect","setToState","updateState","Container","Paper","useTranslation","AppBar","Tabs","Tab","Box","RoomReservations","EventReservations","BonusHistory","Router","useRouter","ZERO","GuestComments","TabPanel","props","children","value","hashCode","index","other","a11yProps","id","History","state","router","t","loginfo","orest","currentUser","isClient","roletype","historyTabMenu","code","title","push","tabPanelHashCode","query","tab","historyTabsHashCode","setHistoryTabsHashCode","findIndex","menu","handleGuestHistoryPanelTabChange","event","newValue","renderEventComponent","historyItem","component","map","item","i","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAAQC,WAAR,EAAqBC,OAArB,QAAoC,aAApC;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,eAAxC;AACA,SAASC,SAAT,EAAoBC,KAApB,QAAiC,mBAAjC;AACA,OAAOC,cAAP,MAA2B,uCAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,gBAAP,MAA6B,kCAA7B;AACA,OAAOC,iBAAP,MAA8B,mCAA9B;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,MAAP,IAAiBC,SAAjB,QAAkC,aAAlC;AACA,SAASC,IAAT,QAAqB,eAArB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AACxB,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAAiDJ,KAAvD;AAAA,QAA6CK,KAA7C,4BAAuDL,KAAvD;;AAEA,SACI;AACI,IAAA,IAAI,EAAC,UADT;AAEI,IAAA,MAAM,EAAEE,KAAK,KAAKC,QAFtB;AAGI,IAAA,EAAE,EAAG,4BAA2BC,KAAM,EAH1C;AAII,uBAAkB,uBAAsBA,KAAM;AAJlD,KAKQC,KALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOKH,KAAK,KAAKC,QAAV,IAAsB,MAAC,KAAD;AAAO,IAAA,MAAM,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAeF,QAAf,CAP3B,CADJ;AAWH,CAdD;;AAgBA,MAAMK,SAAS,GAAIF,KAAD,IAAW;AACzB,SAAO;AACHG,IAAAA,EAAE,EAAG,uBAAsBH,KAAM,EAD9B;AAEH,qBAAkB,4BAA2BA,KAAM;AAFhD,GAAP;AAIH,CALD;;AAOA,MAAMI,OAAO,GAAIR,KAAD,IAAW;AACvB,QAAM;AAAES,IAAAA,KAAF;AAAS1B,IAAAA;AAAT,MAAwBiB,KAA9B;AACA,QAAMU,MAAM,GAAGd,SAAS,EAAxB;AACA,QAAM;AAAEe,IAAAA;AAAF,MAAQxB,cAAc,EAA5B;AAEA,QAAMyB,OAAO,GAAG/B,WAAW,CAAE4B,KAAD,IAAWA,KAAK,CAACI,KAAN,CAAYC,WAAZ,IAA2BL,KAAK,CAACI,KAAN,CAAYC,WAAZ,CAAwBF,OAA/D,CAA3B;AACA,QAAMG,QAAQ,GAAGH,OAAO,CAACI,QAAR,KAAqB,SAAtC;AAEA,QAAMC,cAAc,GAAG,CACnB;AACIC,IAAAA,IAAI,EAAE,aADV;AAEIC,IAAAA,KAAK,EAAE,iBAFX;AAGIhB,IAAAA,QAAQ,EAAE;AAHd,GADmB,EAMnB;AACIe,IAAAA,IAAI,EAAE,QADV;AAEIC,IAAAA,KAAK,EAAE,YAFX;AAGIhB,IAAAA,QAAQ,EAAE;AAHd,GANmB,EAWnB;AACIe,IAAAA,IAAI,EAAE,OADV;AAEIC,IAAAA,KAAK,EAAE,WAFX;AAGIhB,IAAAA,QAAQ,EAAE;AAHd,GAXmB,CAAvB;;AAiBA,MAAG,CAACY,QAAJ,EAAc;AACVE,IAAAA,cAAc,CAACG,IAAf,CAAoB;AAChBF,MAAAA,IAAI,EAAE,UADU;AAEhBC,MAAAA,KAAK,EAAE,cAFS;AAGhBhB,MAAAA,QAAQ,EAAE;AAHM,KAApB;AAKH;;AAED,QAAMkB,gBAAgB,GAAGX,MAAM,CAACY,KAAP,CAAaC,GAAtC;AACA,QAAM;AAAA,OAACC,mBAAD;AAAA,OAAsBC;AAAtB,MAAgD7C,QAAQ,CAC1DqC,cAAc,CAACS,SAAf,CAA0BC,IAAD,IAAUA,IAAI,CAACxB,QAAL,KAAkBkB,gBAArD,IAAyE,CAAC,CAA1E,GACMA,gBADN,GAEMJ,cAAc,CAACpB,IAAD,CAAd,CAAqBM,QAH+B,CAA9D;;AAMA,QAAMyB,gCAAgC,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAC1D,QAAIN,mBAAmB,KAAKM,QAA5B,EAAsC;AAClCL,MAAAA,sBAAsB,CAACK,QAAD,CAAtB;;AACA,UAAIT,gBAAJ,EAAsB;AACnB;AACf;AACA;AACA;AACA;AACA;AACA;AACa;AACJ;AACJ,GAbD;;AAeA,QAAMU,oBAAoB,GAAIC,WAAD,IAAiB;AAC1C,QAAIC,SAAJ;;AACA,YAAQD,WAAW,CAACd,IAApB;AACI,WAAK,aAAL;AACIe,QAAAA,SAAS,GAAG,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAZ;AACA;;AACJ,WAAK,QAAL;AACIA,QAAAA,SAAS,GAAG,MAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAZ;AACA;;AACJ,WAAK,OAAL;AACIA,QAAAA,SAAS,GAAG,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAZ;AACA;;AACJ,WAAK,UAAL;AACIA,QAAAA,SAAS,GAAG,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAZ;AACA;AAZR;;AAeA,WAAOA,SAAP;AACH,GAlBD;;AAoBA,SACI,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,SAAD;AAAW,IAAA,QAAQ,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,QAAjB;AAA0B,IAAA,KAAK,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AACI,IAAA,KAAK,EAAET,mBADX;AAEI,IAAA,QAAQ,EAAEI,gCAFd;AAGI,IAAA,cAAc,EAAC,SAHnB;AAII,IAAA,SAAS,EAAC,SAJd;AAKI,IAAA,OAAO,EAAC,YALZ;AAMI,IAAA,aAAa,EAAC,MANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQKX,cAAc,CAACiB,GAAf,CAAmB,CAACC,IAAD,EAAOC,CAAP,KAChB,MAAC,GAAD;AAAK,IAAA,KAAK,EAAEzB,CAAC,CAACwB,IAAI,CAAChB,KAAN,CAAb;AAA2B,IAAA,KAAK,EAAEgB,IAAI,CAAChC;AAAvC,KAAqDG,SAAS,CAAC8B,CAAD,CAA9D;AAAmE,IAAA,GAAG,EAAEA,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADH,CARL,CADJ,CADJ,EAeKnB,cAAc,CAACiB,GAAf,CAAmB,CAACC,IAAD,EAAOC,CAAP,KAChB,MAAC,QAAD;AAAU,IAAA,KAAK,EAAEZ,mBAAjB;AAAsC,IAAA,QAAQ,EAAEW,IAAI,CAAChC,QAArD;AAA+D,IAAA,KAAK,EAAEiC,CAAtE;AAAyE,IAAA,GAAG,EAAEA,CAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,GAAD;AAAK,IAAA,CAAC,EAAE,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYL,oBAAoB,CAACI,IAAD,CAAhC,CADJ,CADH,CAfL,CADJ,CADJ;AAyBH,CApGD;;AAsGA,MAAME,eAAe,GAAI5B,KAAD,IAAW;AAC/B,SAAO;AACHA,IAAAA,KAAK,EAAEA,KAAK,CAAC6B,WAAN,CAAkBC;AADtB,GAAP;AAGH,CAJD;;AAMA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;AACtCzD,EAAAA,WAAW,EAAE,CAAC0D,SAAD,EAAYC,SAAZ,EAAuBzC,KAAvB,KAAiCuC,QAAQ,CAACzD,WAAW,CAAC0D,SAAD,EAAYC,SAAZ,EAAuBzC,KAAvB,CAAZ,CADhB;AAEtCnB,EAAAA,UAAU,EAAE,CAAC2D,SAAD,EAAYC,SAAZ,EAAuBzC,KAAvB,KAAiCuC,QAAQ,CAAC1D,UAAU,CAAC2D,SAAD,EAAYC,SAAZ,EAAuBzC,KAAvB,CAAX;AAFf,CAAf,CAA3B;;AAKA,eAAepB,OAAO,CAACuD,eAAD,EAAkBG,kBAAlB,CAAP,CAA6ChC,OAA7C,CAAf","sourcesContent":["import React, { useState } from 'react'\nimport {useSelector, connect } from 'react-redux'\nimport { setToState, updateState } from 'state/actions'\nimport { Container, Paper } from '@material-ui/core'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport AppBar from '@material-ui/core/AppBar'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Box from '@material-ui/core/Box'\nimport RoomReservations from '../Reservations/RoomReservations'\nimport EventReservations from '../Reservations/EventReservations'\nimport BonusHistory from '../Transactions/BonusHistory'\nimport Router, { useRouter } from 'next/router'\nimport { ZERO } from 'model/globals'\nimport GuestComments from \"../GuestComments/GuestComments\";\n\nconst TabPanel = (props) => {\n    const { children, value, hashCode, index, ...other } = props\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== hashCode}\n            id={`scrollable-auto-tabpanel-${index}`}\n            aria-labelledby={`scrollable-auto-tab-${index}`}\n            {...other}\n        >\n            {value === hashCode && <Paper square>{children}</Paper>}\n        </div>\n    )\n}\n\nconst a11yProps = (index) => {\n    return {\n        id: `scrollable-auto-tab-${index}`,\n        'aria-controls': `scrollable-auto-tabpanel-${index}`,\n    }\n}\n\nconst History = (props) => {\n    const { state, setToState } = props\n    const router = useRouter()\n    const { t } = useTranslation()\n\n    const loginfo = useSelector((state) => state.orest.currentUser && state.orest.currentUser.loginfo)\n    const isClient = loginfo.roletype === '6500310'\n\n    const historyTabMenu = [\n        {\n            code: 'RESERVATION',\n            title: 'str_reservation',\n            hashCode: 'reservation',\n        },\n        {\n            code: 'EVENTS',\n            title: 'str_events',\n            hashCode: 'events',\n        },\n        {\n            code: 'BONUS',\n            title: 'str_bonus',\n            hashCode: 'bonus',\n        },\n    ]\n    if(!isClient) {\n        historyTabMenu.push({\n            code: 'COMMENTS',\n            title: 'str_comments',\n            hashCode: 'comments',\n        })\n    }\n\n    const tabPanelHashCode = router.query.tab\n    const [historyTabsHashCode, setHistoryTabsHashCode] = useState(\n        historyTabMenu.findIndex((menu) => menu.hashCode === tabPanelHashCode) > -1\n            ? tabPanelHashCode\n            : historyTabMenu[ZERO].hashCode\n    )\n\n    const handleGuestHistoryPanelTabChange = (event, newValue) => {\n        if (historyTabsHashCode !== newValue) {\n            setHistoryTabsHashCode(newValue)\n            if (tabPanelHashCode) {\n               /* Router.push({\n                    pathname: router.pathname,\n                    query: {\n                        menu: router.query.menu,\n                        tab: newValue,\n                    },\n                })*/\n            }\n        }\n    }\n\n    const renderEventComponent = (historyItem) => {\n        let component\n        switch (historyItem.code) {\n            case 'RESERVATION':\n                component = <RoomReservations />\n                break\n            case 'EVENTS':\n                component = <EventReservations />\n                break\n            case 'BONUS':\n                component = <BonusHistory />\n                break\n            case 'COMMENTS':\n                component = <GuestComments />\n                break\n        }\n\n        return component\n    }\n\n    return (\n        <React.Fragment>\n            <Container maxWidth=\"lg\">\n                <AppBar position=\"static\" color=\"default\">\n                    <Tabs\n                        value={historyTabsHashCode}\n                        onChange={handleGuestHistoryPanelTabChange}\n                        indicatorColor=\"primary\"\n                        textColor=\"primary\"\n                        variant=\"scrollable\"\n                        scrollButtons=\"auto\"\n                    >\n                        {historyTabMenu.map((item, i) => (\n                            <Tab label={t(item.title)} value={item.hashCode} {...a11yProps(i)} key={i} />\n                        ))}\n                    </Tabs>\n                </AppBar>\n                {historyTabMenu.map((item, i) => (\n                    <TabPanel value={historyTabsHashCode} hashCode={item.hashCode} index={i} key={i}>\n                        <Box p={3}>{renderEventComponent(item)}</Box>\n                    </TabPanel>\n                ))}\n            </Container>\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(History)\n"]},"metadata":{},"sourceType":"module"}