{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/booking/components/RoomListItem.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { ListItem, Typography, Icon, Chip, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { setToState as _setToState } from 'state/actions';\nimport { connect } from 'react-redux';\nimport WebCmsGlobal from 'components/webcms-global';\nimport ProgressIconButton from './ProgressIconButton';\nimport { useSnackbar } from 'notistack';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport { formatMoney } from 'model/orest/constants';\nimport TagManager from '@webcms-globals/tag-manager';\nimport * as global from '@webcms-globals';\nvar useStyles = makeStyles(function () {\n  return {\n    infoChip: {\n      marginRight: 5,\n      backgroundColor: '#ffffff',\n      borderRadius: 0,\n      boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    infoPriceChip: {\n      backgroundColor: '#ffffff',\n      borderRadius: 0,\n      marginLeft: 5,\n      boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    listItemContainer: {\n      boxShadow: 'inset 0 0 1px 1px #f3f3f3'\n    },\n    listItemRoot: {\n      paddingTop: 0,\n      paddingBottom: 0,\n      marginTop: 10,\n      marginBottom: 10\n    },\n    listItemParent: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      width: '100%',\n      textAlign: 'center',\n      padding: 0,\n      boxShadow: '0 0 0 1px #d2d2d26b'\n    },\n    listItemBox: {\n      flexGrow: 11,\n      textAlign: 'start',\n      padding: 10\n    },\n    listItemAction: {\n      flexGrow: 1,\n      padding: '1px 10px 0px 0px',\n      '& button[aria-label=\"close\"]:not([disabled])': {\n        color: '#a6a6a6',\n        '-webkit-transition': 'color 0.4s',\n        '-ms-transition': 'color 0.4s',\n        transition: 'color 0.4s'\n      },\n      \"&:hover\": {\n        '& button[aria-label=\"close\"]:not([disabled])': {\n          color: '#4d4d4d',\n          '-webkit-transition': 'color 0.4s',\n          '-ms-transition': 'color 0.4s',\n          transition: 'color 0.4s'\n        }\n      }\n    }\n  };\n});\n\nvar RoomListItem = function RoomListItem(props) {\n  _s();\n\n  var classes = useStyles();\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      WEBCMS_DATA = _useContext.WEBCMS_DATA;\n\n  var state = props.state,\n      setToState = props.setToState,\n      roomtypeId = props.roomtypeId,\n      roomName = props.roomName,\n      checkin = props.checkin,\n      checkout = props.checkout,\n      pax = props.pax,\n      child = props.child,\n      night = props.night,\n      price = props.price,\n      pricecurr = props.pricecurr,\n      gid = props.gid,\n      reservno = props.reservno;\n\n  var _useState = useState(false),\n      isRoomDelete = _useState[0],\n      setIsRoomDelete = _useState[1];\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  useEffect(function () {\n    return function () {\n      return setIsRoomDelete(false);\n    };\n  }, []);\n\n  var handleRemoveRoom = function handleRemoveRoom(gid, reservno) {\n    setToState('ibe', ['bookingIsDisable'], true);\n    setIsRoomDelete(true);\n    return axios({\n      url: GENERAL_SETTINGS.BASE_URL + 'api/ors/room/delete',\n      method: 'post',\n      params: {\n        gid: gid,\n        reservno: reservno\n      }\n    }).then(function (deleteRoomResponse) {\n      var roomResponse = deleteRoomResponse.data;\n\n      if (roomResponse.status) {\n        var selectedRooms = state.selectedRooms;\n        var roomIndex = selectedRooms.findIndex(function (item) {\n          return item.gid === String(gid);\n        });\n\n        if (roomIndex > -1) {\n          var _WEBCMS_DATA$assets, _WEBCMS_DATA$assets$m;\n\n          var newRoomData = state.selectedRooms;\n          newRoomData.splice(roomIndex, 1);\n          setToState('ibe', ['selectedRooms'], newRoomData);\n          setToState('ibe', ['bookingIsDisable'], false);\n          setIsRoomDelete(false);\n          enqueueSnackbar(t('str_deleteRoomSuccess'), {\n            variant: 'success',\n            autoHideDuration: 3000\n          });\n\n          if (WEBCMS_DATA !== null && WEBCMS_DATA !== void 0 && (_WEBCMS_DATA$assets = WEBCMS_DATA.assets) !== null && _WEBCMS_DATA$assets !== void 0 && (_WEBCMS_DATA$assets$m = _WEBCMS_DATA$assets.meta) !== null && _WEBCMS_DATA$assets$m !== void 0 && _WEBCMS_DATA$assets$m.googleTag) {\n            var _WEBCMS_DATA$assets2, _WEBCMS_DATA$assets2$;\n\n            TagManager.booking.setRemoveRoom({\n              eventLabel: 'Room Delete',\n              hotelName: WEBCMS_DATA === null || WEBCMS_DATA === void 0 ? void 0 : (_WEBCMS_DATA$assets2 = WEBCMS_DATA.assets) === null || _WEBCMS_DATA$assets2 === void 0 ? void 0 : (_WEBCMS_DATA$assets2$ = _WEBCMS_DATA$assets2.meta) === null || _WEBCMS_DATA$assets2$ === void 0 ? void 0 : _WEBCMS_DATA$assets2$.title,\n              hotelId: GENERAL_SETTINGS.HOTELREFNO,\n              ciDate: checkin,\n              coDate: checkout,\n              adult: pax,\n              child: child,\n              currencyCode: pricecurr,\n              removeToCartData: {\n                reservNo: reservno,\n                id: roomtypeId,\n                name: roomName,\n                price: global.helper.formatPrice(price),\n                qty: 1,\n                category: 'Room'\n              }\n            });\n          }\n        }\n\n        if (selectedRooms.length === 0) {\n          setToState('ibe', ['bookingActiveStep'], 0);\n        }\n      } else {\n        setIsRoomDelete(false);\n        setToState('ibe', ['bookingIsDisable'], false);\n        enqueueSnackbar(t('str_deleteRoomError'), {\n          variant: 'warning',\n          autoHideDuration: 3000\n        });\n      }\n    });\n  };\n\n  return __jsx(ListItem, {\n    alignItems: \"flex-start\",\n    button: true,\n    classes: {\n      container: classes.listItemContainer,\n      root: classes.listItemRoot,\n      button: classes.litemItemButton\n    },\n    disableGutters: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.listItemParent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: classes.listItemBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    className: classes.inline,\n    color: \"textPrimary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, roomName), __jsx(Typography, {\n    style: {\n      padding: '2px 0 10px 0'\n    },\n    variant: \"body2\",\n    className: classes.inline,\n    color: \"textSecondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, moment(checkin, 'YYYY-MM-DD').format('dd, MMM DD, YYYY'), \" - \", moment(checkout, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: pax,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 39\n      }\n    }, \"person\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }), __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: child,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 39\n      }\n    }, \"face\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }), __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: night,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 39\n      }\n    }, \"nights_stay\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }), ' x ', __jsx(Chip, {\n    className: classes.infoPriceChip,\n    color: \"default\",\n    size: \"small\",\n    avatar: __jsx(Avatar, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }\n    }, getSymbolFromCurrency(pricecurr) || ''),\n    label: formatMoney(price),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 25\n    }\n  }))), __jsx(\"div\", {\n    className: classes.listItemAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, __jsx(ProgressIconButton, {\n    edge: \"end\",\n    ariaLabel: \"close\",\n    isLoading: isRoomDelete,\n    onClick: function onClick() {\n      return !state.bookingIsDisable && handleRemoveRoom(gid, reservno);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, __jsx(Icon, {\n    fontSize: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, \"close\")))));\n};\n\n_s(RoomListItem, \"hmNPy1Lz4TfiqON1hXv0ai1rssk=\", false, function () {\n  return [useStyles, useSnackbar, useTranslation];\n});\n\n_c = RoomListItem;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomListItem);\n\nvar _c;\n\n$RefreshReg$(_c, \"RoomListItem\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/booking/components/RoomListItem.js"],"names":["React","useContext","useEffect","useState","useRef","axios","moment","ListItem","Typography","Icon","Chip","Avatar","makeStyles","setToState","connect","WebCmsGlobal","ProgressIconButton","useSnackbar","useTranslation","getSymbolFromCurrency","formatMoney","TagManager","global","useStyles","infoChip","marginRight","backgroundColor","borderRadius","boxShadow","infoPriceChip","marginLeft","listItemContainer","listItemRoot","paddingTop","paddingBottom","marginTop","marginBottom","listItemParent","display","alignItems","width","textAlign","padding","listItemBox","flexGrow","listItemAction","color","transition","RoomListItem","props","classes","GENERAL_SETTINGS","WEBCMS_DATA","state","roomtypeId","roomName","checkin","checkout","pax","child","night","price","pricecurr","gid","reservno","isRoomDelete","setIsRoomDelete","enqueueSnackbar","t","handleRemoveRoom","url","BASE_URL","method","params","then","deleteRoomResponse","roomResponse","data","status","selectedRooms","roomIndex","findIndex","item","String","newRoomData","splice","variant","autoHideDuration","assets","meta","googleTag","booking","setRemoveRoom","eventLabel","hotelName","title","hotelId","HOTELREFNO","ciDate","coDate","adult","currencyCode","removeToCartData","reservNo","id","name","helper","formatPrice","qty","category","length","container","root","button","litemItemButton","inline","format","bookingIsDisable","mapStateToProps","formReducer","ibe","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState, useRef } from 'react'\nimport axios from 'axios'\nimport moment from 'moment'\nimport {\n    ListItem,\n    Typography,\n    Icon,\n    Chip,\n    Avatar\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { setToState } from 'state/actions'\nimport { connect } from 'react-redux'\nimport WebCmsGlobal from 'components/webcms-global'\nimport ProgressIconButton from './ProgressIconButton'\nimport { useSnackbar } from 'notistack'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport { formatMoney } from 'model/orest/constants'\nimport TagManager from '@webcms-globals/tag-manager'\nimport * as global from '@webcms-globals'\n\nconst useStyles = makeStyles(() => ({\n    infoChip: {\n        marginRight: 5,\n        backgroundColor: '#ffffff',\n        borderRadius: 0,\n        boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    infoPriceChip: {\n        backgroundColor: '#ffffff',\n        borderRadius: 0,\n        marginLeft: 5,\n        boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    listItemContainer: {\n        boxShadow: 'inset 0 0 1px 1px #f3f3f3',\n    },\n    listItemRoot: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        marginTop: 10,\n        marginBottom: 10,\n    },\n    listItemParent: {\n        display: 'flex',\n        alignItems: 'flex-start',\n        width: '100%',\n        textAlign: 'center',\n        padding: 0,\n        boxShadow: '0 0 0 1px #d2d2d26b'\n    },\n    listItemBox:{\n      flexGrow: 11,\n      textAlign: 'start',\n      padding: 10\n    },\n    listItemAction:{\n        flexGrow: 1,\n        padding: '1px 10px 0px 0px',\n        '& button[aria-label=\"close\"]:not([disabled])': {\n            color: '#a6a6a6',\n            '-webkit-transition': 'color 0.4s',\n            '-ms-transition': 'color 0.4s',\n            transition: 'color 0.4s',\n        },\n        \"&:hover\": {\n            '& button[aria-label=\"close\"]:not([disabled])': {\n                color: '#4d4d4d',\n                '-webkit-transition': 'color 0.4s',\n                '-ms-transition': 'color 0.4s',\n                transition: 'color 0.4s',\n            },\n        }\n    },\n}))\n\nconst RoomListItem = (props) =>{\n    const classes = useStyles()\n    const { GENERAL_SETTINGS, WEBCMS_DATA } = useContext(WebCmsGlobal)\n    const { state, setToState, roomtypeId, roomName, checkin, checkout, pax, child, night, price, pricecurr, gid, reservno } = props\n    const [ isRoomDelete, setIsRoomDelete ] = useState(false)\n    const { enqueueSnackbar } = useSnackbar()\n    const { t } = useTranslation()\n\n    useEffect(() => {\n        return () => setIsRoomDelete(false);\n    }, [])\n\n    const handleRemoveRoom = (gid, reservno) => {\n        setToState('ibe', ['bookingIsDisable'], true)\n        setIsRoomDelete(true)\n        return axios({\n            url: GENERAL_SETTINGS.BASE_URL + 'api/ors/room/delete',\n            method: 'post',\n            params: {\n                gid: gid,\n                reservno: reservno\n            },\n        }).then((deleteRoomResponse) => {\n            const roomResponse = deleteRoomResponse.data\n            if (roomResponse.status) {\n                let selectedRooms = state.selectedRooms\n                const roomIndex = selectedRooms.findIndex((item) => item.gid === String(gid))\n                if (roomIndex > -1) {\n                    let newRoomData = state.selectedRooms\n                    newRoomData.splice(roomIndex, 1)\n                    setToState('ibe', ['selectedRooms'], newRoomData)\n                    setToState('ibe', ['bookingIsDisable'], false)\n                    setIsRoomDelete(false)\n                    enqueueSnackbar(t('str_deleteRoomSuccess'), { variant: 'success', autoHideDuration: 3000 })\n\n                    if(WEBCMS_DATA?.assets?.meta?.googleTag){\n                        TagManager.booking.setRemoveRoom({\n                            eventLabel: 'Room Delete',\n                            hotelName: WEBCMS_DATA?.assets?.meta?.title,\n                            hotelId: GENERAL_SETTINGS.HOTELREFNO,\n                            ciDate: checkin,\n                            coDate: checkout,\n                            adult: pax,\n                            child: child,\n                            currencyCode: pricecurr,\n                            removeToCartData: {\n                                reservNo: reservno,\n                                id: roomtypeId,\n                                name: roomName,\n                                price: global.helper.formatPrice(price),\n                                qty: 1,\n                                category: 'Room',\n                            }\n                        })\n                    }\n\n                }\n\n                if (selectedRooms.length === 0) {\n                    setToState('ibe', ['bookingActiveStep'], 0)\n                }\n            }else{\n                setIsRoomDelete(false)\n                setToState('ibe', ['bookingIsDisable'], false)\n                enqueueSnackbar(t('str_deleteRoomError'), { variant: 'warning', autoHideDuration: 3000 })\n            }\n        })\n    }\n\n    return (\n        <ListItem alignItems=\"flex-start\" button classes={{ container: classes.listItemContainer, root: classes.listItemRoot, button: classes.litemItemButton }} disableGutters>\n            <div className={classes.listItemParent}>\n                <div className={classes.listItemBox}>\n                    <Typography variant=\"body1\" className={classes.inline} color=\"textPrimary\">\n                        {roomName}\n                    </Typography>\n                    <Typography\n                        style={{\n                            padding: '2px 0 10px 0'\n                        }}\n                        variant=\"body2\"\n                        className={classes.inline}\n                        color=\"textSecondary\"\n                    >\n                        {moment(checkin, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - {moment(checkout, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')}\n                    </Typography>\n                    <span>\n                            <Chip\n                                size=\"small\"\n                                color=\"default\"\n                                className={classes.infoChip}\n                                label={pax}\n                                icon={<Icon fontSize=\"small\">person</Icon>}\n                            />\n                            <Chip\n                                size=\"small\"\n                                color=\"default\"\n                                className={classes.infoChip}\n                                label={child}\n                                icon={<Icon fontSize=\"small\">face</Icon>}\n                            />\n                            <Chip\n                                size=\"small\"\n                                color=\"default\"\n                                className={classes.infoChip}\n                                label={night}\n                                icon={<Icon fontSize=\"small\">nights_stay</Icon>}\n                            />\n                        {' x '}\n                        <Chip\n                            className={classes.infoPriceChip}\n                            color=\"default\"\n                            size=\"small\"\n                            avatar={<Avatar>{getSymbolFromCurrency(pricecurr) || ''}</Avatar>}\n                            label={formatMoney(price)}\n                        />\n                        </span>\n                </div>\n                <div className={classes.listItemAction}>\n                    <ProgressIconButton edge=\"end\" ariaLabel=\"close\" isLoading={isRoomDelete} onClick={()=> !state.bookingIsDisable && handleRemoveRoom(gid, reservno)}>\n                        <Icon fontSize=\"small\">close</Icon>\n                    </ProgressIconButton>\n                </div>\n            </div>\n        </ListItem>\n    )\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomListItem)\n"]},"metadata":{},"sourceType":"module"}