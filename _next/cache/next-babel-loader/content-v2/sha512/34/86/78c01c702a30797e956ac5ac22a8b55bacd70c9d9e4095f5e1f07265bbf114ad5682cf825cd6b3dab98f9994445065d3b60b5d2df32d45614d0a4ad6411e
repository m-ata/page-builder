{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/survey/surveytree/options/SpinEdit.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { SURVEY_INPUT_VARIANT } from '../../../../assets/const';\nimport useSurveyAction from '../../../../model/survey/useSurveyAction';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport styles from '../../style/SurveyOptions.style';\nimport SurveyTooltip from 'components/survey/helper/SurveyTooltip';\nconst useStyles = makeStyles(styles); //TODO - ask what is this for and improve component\n\nexport default function SpinEditOption(props) {\n  const {\n    option,\n    optionTyp\n  } = props; //style\n\n  const classes = useStyles(); //redux\n\n  const {\n    setSurveyAnswerMulti,\n    deleteSurveyAnswer\n  } = useSurveyAction();\n  const surveyTrans = useSelector(state => state.survey.trans);\n  const surveyIsValid = useSelector(state => state.survey.isValid);\n  const oldAnswer = useSelector(state => state.survey.answers[surveyTrans] && state.survey.answers[surveyTrans][option.parentid] && state.survey.answers[surveyTrans][option.parentid][option.id]); //state\n\n  const {\n    0: optionValue,\n    1: setOptionValue\n  } = useState(oldAnswer ? oldAnswer.valueint : '');\n\n  const handleClickIncrement = () => {\n    const value = Number(optionValue) + 1;\n    setOptionValue(value);\n    setValueToRedux(value);\n  };\n\n  const handleClickDecrement = () => {\n    const value = Number(optionValue) - 1;\n    setOptionValue(value);\n    setValueToRedux(value);\n  };\n\n  const handleChangeTextField = e => {\n    const value = e.target.value === '' ? '' : parseInt(e.target.value) || optionValue;\n    setOptionValue(value);\n    setValueToRedux(value);\n  };\n\n  const setValueToRedux = value => {\n    if (value !== '') {\n      setSurveyAnswerMulti(surveyTrans, option.parentid, option.id, {\n        typ: optionTyp,\n        parentid: option.parentid,\n        valueint: value\n      });\n    } else {\n      deleteSurveyAnswer(surveyTrans, option.parentid, option.id);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: classes.optionContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(SurveyTooltip, {\n    title: option && option.note || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, __jsx(TextField, {\n    onChange: handleChangeTextField,\n    label: option.langwordtxt || option.description,\n    value: optionValue,\n    variant: SURVEY_INPUT_VARIANT,\n    fullWidth: true,\n    disabled: surveyIsValid,\n    className: classes.textField,\n    inputProps: {\n      style: {\n        textAlign: 'center'\n      }\n    },\n    InputProps: {\n      startAdornment: __jsx(IconButton, {\n        disabled: surveyIsValid,\n        size: 'medium',\n        onClick: handleClickDecrement,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }\n      }, __jsx(RemoveIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 33\n        }\n      })),\n      endAdornment: __jsx(IconButton, {\n        disabled: surveyIsValid,\n        size: 'medium',\n        onClick: handleClickIncrement,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }\n      }, __jsx(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 33\n        }\n      })),\n      classes: {\n        input: classes.textFieldInput\n      }\n    },\n    InputLabelProps: {\n      className: classes.textFieldLabel\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/survey/surveytree/options/SpinEdit.js"],"names":["React","useState","TextField","IconButton","AddIcon","RemoveIcon","SURVEY_INPUT_VARIANT","useSurveyAction","useSelector","makeStyles","styles","SurveyTooltip","useStyles","SpinEditOption","props","option","optionTyp","classes","setSurveyAnswerMulti","deleteSurveyAnswer","surveyTrans","state","survey","trans","surveyIsValid","isValid","oldAnswer","answers","parentid","id","optionValue","setOptionValue","valueint","handleClickIncrement","value","Number","setValueToRedux","handleClickDecrement","handleChangeTextField","e","target","parseInt","typ","optionContainer","note","langwordtxt","description","textField","style","textAlign","startAdornment","endAdornment","input","textFieldInput","className","textFieldLabel"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport IconButton from '@material-ui/core/IconButton'\nimport AddIcon from '@material-ui/icons/Add'\nimport RemoveIcon from '@material-ui/icons/Remove'\nimport { SURVEY_INPUT_VARIANT } from '../../../../assets/const'\nimport useSurveyAction from '../../../../model/survey/useSurveyAction'\nimport { useSelector } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from '../../style/SurveyOptions.style'\nimport SurveyTooltip from 'components/survey/helper/SurveyTooltip'\n\nconst useStyles = makeStyles(styles)\n\n//TODO - ask what is this for and improve component\nexport default function SpinEditOption(props) {\n    const { option, optionTyp } = props\n\n    //style\n    const classes = useStyles()\n\n    //redux\n    const { setSurveyAnswerMulti, deleteSurveyAnswer } = useSurveyAction()\n    const surveyTrans = useSelector((state) => state.survey.trans)\n    const surveyIsValid = useSelector((state) => state.survey.isValid)\n    const oldAnswer = useSelector(\n        (state) =>\n            state.survey.answers[surveyTrans] &&\n            state.survey.answers[surveyTrans][option.parentid] &&\n            state.survey.answers[surveyTrans][option.parentid][option.id],\n    )\n\n    //state\n    const [optionValue, setOptionValue] = useState(oldAnswer ? oldAnswer.valueint : '')\n\n    const handleClickIncrement = () => {\n        const value = Number(optionValue) + 1\n\n        setOptionValue(value)\n        setValueToRedux(value)\n    }\n\n    const handleClickDecrement = () => {\n        const value = Number(optionValue) - 1\n\n        setOptionValue(value)\n        setValueToRedux(value)\n    }\n\n    const handleChangeTextField = (e) => {\n        const value = e.target.value === '' ? '' : parseInt(e.target.value) || optionValue\n\n        setOptionValue(value)\n        setValueToRedux(value)\n    }\n\n    const setValueToRedux = (value) => {\n        if (value !== '') {\n            setSurveyAnswerMulti(surveyTrans, option.parentid, option.id, {\n                typ: optionTyp,\n                parentid: option.parentid,\n                valueint: value,\n            })\n        } else {\n            deleteSurveyAnswer(surveyTrans, option.parentid, option.id)\n        }\n    }\n\n    return (\n        <div className={classes.optionContainer}>\n            <SurveyTooltip title={option && option.note || ''}>\n                <TextField\n                    onChange={handleChangeTextField}\n                    label={option.langwordtxt || option.description}\n                    value={optionValue}\n                    variant={SURVEY_INPUT_VARIANT}\n                    fullWidth\n                    disabled={surveyIsValid}\n                    className={classes.textField}\n                    inputProps={{ style: { textAlign: 'center' } }}\n                    InputProps={{\n                        startAdornment: (\n                            <IconButton disabled={surveyIsValid} size={'medium'} onClick={handleClickDecrement}>\n                                <RemoveIcon/>\n                            </IconButton>\n                        ),\n                        endAdornment: (\n                            <IconButton disabled={surveyIsValid} size={'medium'} onClick={handleClickIncrement}>\n                                <AddIcon/>\n                            </IconButton>\n                        ),\n                        classes: { input: classes.textFieldInput },\n                    }}\n                    InputLabelProps={{ className: classes.textFieldLabel }}\n                />\n            </SurveyTooltip>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}