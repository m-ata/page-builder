{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/model/google/components/GoogleLogin/GoogleLogin.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport GoogleButton from '../../../../components/cloud-wiki/GoogleButton/GoogleButton';\nimport useGoogle from '../../useGoogle';\nimport { useSelector } from 'react-redux';\nimport useNotifications from '../../../notification/useNotifications';\n\nfunction GoogleLogin() {\n  _s();\n\n  var _currentUser$loginfo;\n\n  // REDUX\n  var _useNotifications = useNotifications(),\n      showSuccess = _useNotifications.showSuccess;\n\n  var _useGoogle = useGoogle(),\n      setGoogleUserInfo = _useGoogle.setGoogleUserInfo,\n      deleteGoogleUserInfo = _useGoogle.deleteGoogleUserInfo,\n      deleteGoogleAuthInfo = _useGoogle.deleteGoogleAuthInfo,\n      setGoogleIsInitializing = _useGoogle.setGoogleIsInitializing,\n      setGoogleIsInitialized = _useGoogle.setGoogleIsInitialized;\n\n  var isGoogleLoggedIn = useSelector(function (state) {\n    return state.google.currentUser !== null;\n  });\n  var currentUser = useSelector(function (state) {\n    return state.google.currentUser !== null ? state.google.currentUser : null;\n  });\n  var auth = useSelector(function (state) {\n    return state.google.authInfo !== null ? state.google.authInfo : null;\n  }); //HOOKS STATE\n\n  var _useState = useState(false),\n      isSignedIn = _useState[0],\n      setIsSignedIn = _useState[1];\n\n  useEffect(function () {}, []);\n\n  var handleSignIn = function handleSignIn() {\n    if (auth) {\n      setGoogleIsInitializing(true);\n      auth.signIn().then(function (res) {\n        var currentUser = {\n          auth: {\n            token_type: res.getAuthResponse().token_type,\n            access_token: res.getAuthResponse().access_token,\n            scope: res.getAuthResponse().scope,\n            login_hint: res.getAuthResponse().login_hint,\n            expires_in: res.getAuthResponse().expires_in,\n            id_token: res.getAuthResponse().id_token,\n            session_state: res.getAuthResponse().session_state,\n            first_issued_at: res.getAuthResponse().first_issued_at,\n            expires_at: res.getAuthResponse().expires_at,\n            idpId: res.getAuthResponse().idpId\n          },\n          loginfo: {\n            id: res.getBasicProfile().getId(),\n            fullName: res.getBasicProfile().getName(0),\n            email: res.getBasicProfile().getEmail(),\n            profilePicture: res.getBasicProfile().getImageUrl()\n          }\n        };\n        setGoogleUserInfo(currentUser);\n        setIsSignedIn(true);\n        setGoogleIsInitialized(true);\n        var userName = res.getBasicProfile().getName(0) || 'User';\n        showSuccess('Welcome ' + userName);\n        setGoogleIsInitializing(false);\n      });\n    }\n  };\n\n  var handleSignOut = function handleSignOut() {\n    setGoogleIsInitializing(true);\n    auth.signOut().then(function () {\n      setIsSignedIn(false);\n      deleteGoogleUserInfo();\n      setGoogleIsInitialized(false);\n      setGoogleIsInitializing(false);\n      showSuccess('Signout Success');\n    });\n  };\n\n  return __jsx(React.Fragment, null, isGoogleLoggedIn ? __jsx(GoogleButton, {\n    handleClick: handleSignOut,\n    label: \"Sign Out From \".concat(currentUser === null ? 'Google' : currentUser === null || currentUser === void 0 ? void 0 : (_currentUser$loginfo = currentUser.loginfo) === null || _currentUser$loginfo === void 0 ? void 0 : _currentUser$loginfo.fullName),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }) : __jsx(GoogleButton, {\n    handleClick: handleSignIn,\n    label: \"Sign In With Google\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }));\n}\n\n_s(GoogleLogin, \"26rWDprxasIlo0TQjceLwXjCRo0=\", false, function () {\n  return [useNotifications, useGoogle, useSelector, useSelector, useSelector];\n});\n\n_c = GoogleLogin;\nexport default GoogleLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleLogin\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/model/google/components/GoogleLogin/GoogleLogin.js"],"names":["React","useEffect","useState","GoogleButton","useGoogle","useSelector","useNotifications","GoogleLogin","showSuccess","setGoogleUserInfo","deleteGoogleUserInfo","deleteGoogleAuthInfo","setGoogleIsInitializing","setGoogleIsInitialized","isGoogleLoggedIn","state","google","currentUser","auth","authInfo","isSignedIn","setIsSignedIn","handleSignIn","signIn","then","res","token_type","getAuthResponse","access_token","scope","login_hint","expires_in","id_token","session_state","first_issued_at","expires_at","idpId","loginfo","id","getBasicProfile","getId","fullName","getName","email","getEmail","profilePicture","getImageUrl","userName","handleSignOut","signOut"],"mappings":"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","sourcesContent":["import React, {\n    useEffect,\n    useState\n} from 'react';\nimport GoogleButton from '../../../../components/cloud-wiki/GoogleButton/GoogleButton';\nimport useGoogle from '../../useGoogle';\nimport {useSelector} from 'react-redux';\nimport useNotifications from '../../../notification/useNotifications';\n\n\nfunction GoogleLogin(){\n    // REDUX\n    const {showSuccess} = useNotifications();\n    const {setGoogleUserInfo, deleteGoogleUserInfo, deleteGoogleAuthInfo, setGoogleIsInitializing, setGoogleIsInitialized} = useGoogle();\n    const isGoogleLoggedIn = useSelector(state => state.google.currentUser !== null);\n    const currentUser = useSelector(state => state.google.currentUser !== null ? state.google.currentUser : null );\n    const auth = useSelector(state => state.google.authInfo !== null ? state.google.authInfo : null)\n    \n    //HOOKS STATE\n    const [isSignedIn, setIsSignedIn] = useState(false);\n    \n    useEffect(() => {\n    },[])\n    \n    const handleSignIn = () => {\n        if (auth) {\n            setGoogleIsInitializing(true);\n            auth.signIn().then(res => {\n                const currentUser = {\n                    auth: {\n                        token_type: res.getAuthResponse().token_type,\n                        access_token: res.getAuthResponse().access_token,\n                        scope: res.getAuthResponse().scope,\n                        login_hint: res.getAuthResponse().login_hint,\n                        expires_in: res.getAuthResponse().expires_in,\n                        id_token: res.getAuthResponse().id_token,\n                        session_state: res.getAuthResponse().session_state,\n                        first_issued_at: res.getAuthResponse().first_issued_at,\n                        expires_at: res.getAuthResponse().expires_at,\n                        idpId: res.getAuthResponse().idpId,\n                    },\n                    loginfo: {\n                        id: res.getBasicProfile().getId(),\n                        fullName: res.getBasicProfile().getName(0),\n                        email: res.getBasicProfile().getEmail(),\n                        profilePicture: res.getBasicProfile().getImageUrl()\n                    }\n\n                }\n                setGoogleUserInfo(currentUser);\n                setIsSignedIn(true);\n                setGoogleIsInitialized(true);\n                const userName = res.getBasicProfile().getName(0) || 'User';\n                showSuccess('Welcome ' + userName);\n                setGoogleIsInitializing(false);\n\n            });\n        }\n    }\n    \n    const handleSignOut = () => {\n        setGoogleIsInitializing(true);\n        auth.signOut().then(() => {\n            setIsSignedIn(false);\n            deleteGoogleUserInfo();\n            setGoogleIsInitialized(false);\n            setGoogleIsInitializing(false);\n            showSuccess('Signout Success');\n        });\n    };\n    \n    return(\n        <>\n            { isGoogleLoggedIn ?\n                <GoogleButton\n                    handleClick={handleSignOut}\n                    label={`Sign Out From ${currentUser === null ? 'Google' :  currentUser?.loginfo?.fullName}`}\n                />\n                :\n                <GoogleButton\n                    handleClick={handleSignIn}\n                    label={`Sign In With Google`}\n                />\n            }\n        </>\n    );\n\n    \n}\n\nexport default GoogleLogin;"]},"metadata":{},"sourceType":"module"}