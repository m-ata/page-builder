{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/booking/components/RoomListItem.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { ListItem, Typography, Icon, Chip, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { setToState } from 'state/actions';\nimport { connect } from 'react-redux';\nimport WebCmsGlobal from 'components/webcms-global';\nimport ProgressIconButton from './ProgressIconButton';\nimport { useSnackbar } from 'notistack';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport { formatMoney } from 'model/orest/constants';\nimport TagManager from '@webcms-globals/tag-manager';\nimport * as global from '@webcms-globals';\nimport { useRouter } from 'next/router';\nconst useStyles = makeStyles(() => ({\n  infoChip: {\n    marginRight: 5,\n    backgroundColor: '#ffffff',\n    borderRadius: 0,\n    boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n  },\n  infoPriceChip: {\n    backgroundColor: '#ffffff',\n    borderRadius: 0,\n    marginLeft: 5,\n    boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n  },\n  listItemContainer: {\n    boxShadow: 'inset 0 0 1px 1px #f3f3f3'\n  },\n  listItemRoot: {\n    paddingTop: 0,\n    paddingBottom: 0,\n    marginTop: 10,\n    marginBottom: 10\n  },\n  listItemParent: {\n    display: 'flex',\n    alignItems: 'flex-start',\n    width: '100%',\n    textAlign: 'center',\n    padding: 0,\n    boxShadow: '0 0 0 1px #d2d2d26b'\n  },\n  listItemBox: {\n    flexGrow: 11,\n    textAlign: 'start',\n    padding: 10\n  },\n  listItemAction: {\n    flexGrow: 1,\n    padding: '1px 10px 0px 0px',\n    '& button[aria-label=\"close\"]:not([disabled])': {\n      color: '#a6a6a6',\n      '-webkit-transition': 'color 0.4s',\n      '-ms-transition': 'color 0.4s',\n      transition: 'color 0.4s'\n    },\n    \"&:hover\": {\n      '& button[aria-label=\"close\"]:not([disabled])': {\n        color: '#4d4d4d',\n        '-webkit-transition': 'color 0.4s',\n        '-ms-transition': 'color 0.4s',\n        transition: 'color 0.4s'\n      }\n    }\n  }\n}));\n\nconst RoomListItem = props => {\n  const classes = useStyles(),\n        {\n    GENERAL_SETTINGS,\n    WEBCMS_DATA\n  } = useContext(WebCmsGlobal),\n        {\n    state,\n    setToState,\n    roomtypeId,\n    roomName,\n    checkin,\n    checkout,\n    pax,\n    child,\n    night,\n    price,\n    pricecurr,\n    gid,\n    reservno\n  } = props,\n        {\n    0: isRoomDelete,\n    1: setIsRoomDelete\n  } = useState(false),\n        {\n    enqueueSnackbar\n  } = useSnackbar(),\n        {\n    t\n  } = useTranslation(),\n        router = useRouter();\n  useEffect(() => {\n    return () => setIsRoomDelete(false);\n  }, []);\n\n  const handleRemoveRoom = (gid, reservno) => {\n    setToState('ibe', ['bookingIsDisable'], true);\n    setIsRoomDelete(true);\n    return axios({\n      url: GENERAL_SETTINGS.BASE_URL + 'api/ors/room/delete',\n      method: 'post',\n      params: {\n        gid: gid,\n        reservno: reservno\n      }\n    }).then(deleteRoomResponse => {\n      const roomResponse = deleteRoomResponse.data;\n\n      if (roomResponse.status) {\n        let selectedRooms = state.selectedRooms;\n        const roomIndex = selectedRooms.findIndex(item => item.gid === String(gid));\n\n        if (roomIndex > -1) {\n          var _WEBCMS_DATA$assets, _WEBCMS_DATA$assets$m;\n\n          let newRoomData = state.selectedRooms;\n          newRoomData.splice(roomIndex, 1);\n          setToState('ibe', ['selectedRooms'], newRoomData);\n          setToState('ibe', ['bookingIsDisable'], false);\n          setIsRoomDelete(false);\n          enqueueSnackbar(t('str_deleteRoomSuccess'), {\n            variant: 'success',\n            autoHideDuration: 3000\n          });\n\n          if (WEBCMS_DATA !== null && WEBCMS_DATA !== void 0 && (_WEBCMS_DATA$assets = WEBCMS_DATA.assets) !== null && _WEBCMS_DATA$assets !== void 0 && (_WEBCMS_DATA$assets$m = _WEBCMS_DATA$assets.meta) !== null && _WEBCMS_DATA$assets$m !== void 0 && _WEBCMS_DATA$assets$m.googleTag) {\n            var _WEBCMS_DATA$assets2, _WEBCMS_DATA$assets2$;\n\n            TagManager.booking.setRemoveRoom({\n              eventLabel: 'Remove to Cart',\n              hotelName: WEBCMS_DATA === null || WEBCMS_DATA === void 0 ? void 0 : (_WEBCMS_DATA$assets2 = WEBCMS_DATA.assets) === null || _WEBCMS_DATA$assets2 === void 0 ? void 0 : (_WEBCMS_DATA$assets2$ = _WEBCMS_DATA$assets2.meta) === null || _WEBCMS_DATA$assets2$ === void 0 ? void 0 : _WEBCMS_DATA$assets2$.title,\n              hotelId: GENERAL_SETTINGS.HOTELREFNO,\n              ciDate: checkin,\n              coDate: checkout,\n              adult: pax,\n              child: child,\n              currencyCode: pricecurr,\n              removeToCartData: {\n                reservNo: reservno,\n                id: roomtypeId,\n                name: roomName,\n                price: global.helper.formatPrice(price),\n                qty: 1,\n                category: 'Room'\n              }\n            });\n          }\n        }\n\n        if (selectedRooms.length === 0) {\n          router.push({\n            pathname: '/booking/rooms',\n            query: router.query\n          });\n        }\n      } else {\n        setIsRoomDelete(false);\n        setToState('ibe', ['bookingIsDisable'], false);\n        enqueueSnackbar(t('str_deleteRoomError'), {\n          variant: 'warning',\n          autoHideDuration: 3000\n        });\n      }\n    });\n  };\n\n  return __jsx(ListItem, {\n    alignItems: \"flex-start\",\n    button: true,\n    classes: {\n      container: classes.listItemContainer,\n      root: classes.listItemRoot,\n      button: classes.litemItemButton\n    },\n    disableGutters: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.listItemParent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: classes.listItemBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    className: classes.inline,\n    color: \"textPrimary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, roomName), __jsx(Typography, {\n    style: {\n      padding: '2px 0 10px 0'\n    },\n    variant: \"body2\",\n    className: classes.inline,\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, moment(checkin, 'YYYY-MM-DD').format('dd, MMM DD, YYYY'), \" - \", moment(checkout, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: pax,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 39\n      }\n    }, \"person\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }), __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: child,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 39\n      }\n    }, \"face\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }), __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: night,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 39\n      }\n    }, \"nights_stay\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  }), ' x ', __jsx(Chip, {\n    className: classes.infoPriceChip,\n    color: \"default\",\n    size: \"small\",\n    avatar: __jsx(Avatar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 37\n      }\n    }, getSymbolFromCurrency(pricecurr) || ''),\n    label: formatMoney(price),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  }))), __jsx(\"div\", {\n    className: classes.listItemAction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, __jsx(ProgressIconButton, {\n    edge: \"end\",\n    ariaLabel: \"close\",\n    isLoading: isRoomDelete,\n    onClick: () => !state.bookingIsDisable && handleRemoveRoom(gid, reservno),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, __jsx(Icon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, \"close\")))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomListItem);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/booking/components/RoomListItem.js"],"names":["React","useContext","useEffect","useState","useRef","axios","moment","ListItem","Typography","Icon","Chip","Avatar","makeStyles","setToState","connect","WebCmsGlobal","ProgressIconButton","useSnackbar","useTranslation","getSymbolFromCurrency","formatMoney","TagManager","global","useRouter","useStyles","infoChip","marginRight","backgroundColor","borderRadius","boxShadow","infoPriceChip","marginLeft","listItemContainer","listItemRoot","paddingTop","paddingBottom","marginTop","marginBottom","listItemParent","display","alignItems","width","textAlign","padding","listItemBox","flexGrow","listItemAction","color","transition","RoomListItem","props","classes","GENERAL_SETTINGS","WEBCMS_DATA","state","roomtypeId","roomName","checkin","checkout","pax","child","night","price","pricecurr","gid","reservno","isRoomDelete","setIsRoomDelete","enqueueSnackbar","t","router","handleRemoveRoom","url","BASE_URL","method","params","then","deleteRoomResponse","roomResponse","data","status","selectedRooms","roomIndex","findIndex","item","String","newRoomData","splice","variant","autoHideDuration","assets","meta","googleTag","booking","setRemoveRoom","eventLabel","hotelName","title","hotelId","HOTELREFNO","ciDate","coDate","adult","currencyCode","removeToCartData","reservNo","id","name","helper","formatPrice","qty","category","length","push","pathname","query","container","root","button","litemItemButton","inline","format","bookingIsDisable","mapStateToProps","formReducer","ibe","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState, useRef } from 'react'\nimport axios from 'axios'\nimport moment from 'moment'\nimport {\n    ListItem,\n    Typography,\n    Icon,\n    Chip,\n    Avatar\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { setToState } from 'state/actions'\nimport { connect } from 'react-redux'\nimport WebCmsGlobal from 'components/webcms-global'\nimport ProgressIconButton from './ProgressIconButton'\nimport { useSnackbar } from 'notistack'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport { formatMoney } from 'model/orest/constants'\nimport TagManager from '@webcms-globals/tag-manager'\nimport * as global from '@webcms-globals'\nimport { useRouter } from 'next/router'\n\nconst useStyles = makeStyles(() => ({\n    infoChip: {\n        marginRight: 5,\n        backgroundColor: '#ffffff',\n        borderRadius: 0,\n        boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    infoPriceChip: {\n        backgroundColor: '#ffffff',\n        borderRadius: 0,\n        marginLeft: 5,\n        boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    listItemContainer: {\n        boxShadow: 'inset 0 0 1px 1px #f3f3f3',\n    },\n    listItemRoot: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        marginTop: 10,\n        marginBottom: 10,\n    },\n    listItemParent: {\n        display: 'flex',\n        alignItems: 'flex-start',\n        width: '100%',\n        textAlign: 'center',\n        padding: 0,\n        boxShadow: '0 0 0 1px #d2d2d26b'\n    },\n    listItemBox:{\n      flexGrow: 11,\n      textAlign: 'start',\n      padding: 10\n    },\n    listItemAction:{\n        flexGrow: 1,\n        padding: '1px 10px 0px 0px',\n        '& button[aria-label=\"close\"]:not([disabled])': {\n            color: '#a6a6a6',\n            '-webkit-transition': 'color 0.4s',\n            '-ms-transition': 'color 0.4s',\n            transition: 'color 0.4s',\n        },\n        \"&:hover\": {\n            '& button[aria-label=\"close\"]:not([disabled])': {\n                color: '#4d4d4d',\n                '-webkit-transition': 'color 0.4s',\n                '-ms-transition': 'color 0.4s',\n                transition: 'color 0.4s',\n            },\n        }\n    },\n}))\n\nconst RoomListItem = (props) =>{\n    const classes = useStyles()\n        , { GENERAL_SETTINGS, WEBCMS_DATA } = useContext(WebCmsGlobal)\n        , { state, setToState, roomtypeId, roomName, checkin, checkout, pax, child, night, price, pricecurr, gid, reservno } = props\n        , [ isRoomDelete, setIsRoomDelete ] = useState(false)\n        , { enqueueSnackbar } = useSnackbar()\n        , { t } = useTranslation()\n        , router = useRouter()\n\n    useEffect(() => {\n        return () => setIsRoomDelete(false);\n    }, [])\n\n    const handleRemoveRoom = (gid, reservno) => {\n        setToState('ibe', ['bookingIsDisable'], true)\n        setIsRoomDelete(true)\n        return axios({\n            url: GENERAL_SETTINGS.BASE_URL + 'api/ors/room/delete',\n            method: 'post',\n            params: {\n                gid: gid,\n                reservno: reservno\n            },\n        }).then((deleteRoomResponse) => {\n            const roomResponse = deleteRoomResponse.data\n            if (roomResponse.status) {\n                let selectedRooms = state.selectedRooms\n                const roomIndex = selectedRooms.findIndex((item) => item.gid === String(gid))\n                if (roomIndex > -1) {\n                    let newRoomData = state.selectedRooms\n                    newRoomData.splice(roomIndex, 1)\n                    setToState('ibe', ['selectedRooms'], newRoomData)\n                    setToState('ibe', ['bookingIsDisable'], false)\n                    setIsRoomDelete(false)\n                    enqueueSnackbar(t('str_deleteRoomSuccess'), { variant: 'success', autoHideDuration: 3000 })\n\n                    if(WEBCMS_DATA?.assets?.meta?.googleTag){\n                        TagManager.booking.setRemoveRoom({\n                            eventLabel: 'Remove to Cart',\n                            hotelName: WEBCMS_DATA?.assets?.meta?.title,\n                            hotelId: GENERAL_SETTINGS.HOTELREFNO,\n                            ciDate: checkin,\n                            coDate: checkout,\n                            adult: pax,\n                            child: child,\n                            currencyCode: pricecurr,\n                            removeToCartData: {\n                                reservNo: reservno,\n                                id: roomtypeId,\n                                name: roomName,\n                                price: global.helper.formatPrice(price),\n                                qty: 1,\n                                category: 'Room',\n                            }\n                        })\n                    }\n\n                }\n\n                if (selectedRooms.length === 0) {\n                    router.push ({\n                        pathname: '/booking/rooms',\n                        query: router.query\n                    })\n                }\n            }else{\n                setIsRoomDelete(false)\n                setToState('ibe', ['bookingIsDisable'], false)\n                enqueueSnackbar(t('str_deleteRoomError'), { variant: 'warning', autoHideDuration: 3000 })\n            }\n        })\n    }\n\n    return (\n        <ListItem alignItems=\"flex-start\" button classes={{ container: classes.listItemContainer, root: classes.listItemRoot, button: classes.litemItemButton }} disableGutters>\n            <div className={classes.listItemParent}>\n                <div className={classes.listItemBox}>\n                    <Typography variant=\"body1\" className={classes.inline} color=\"textPrimary\">\n                        {roomName}\n                    </Typography>\n                    <Typography\n                        style={{\n                            padding: '2px 0 10px 0'\n                        }}\n                        variant=\"body2\"\n                        className={classes.inline}\n                        color=\"textSecondary\"\n                    >\n                        {moment(checkin, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - {moment(checkout, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')}\n                    </Typography>\n                    <span>\n                            <Chip\n                                size=\"small\"\n                                color=\"default\"\n                                className={classes.infoChip}\n                                label={pax}\n                                icon={<Icon fontSize=\"small\">person</Icon>}\n                            />\n                            <Chip\n                                size=\"small\"\n                                color=\"default\"\n                                className={classes.infoChip}\n                                label={child}\n                                icon={<Icon fontSize=\"small\">face</Icon>}\n                            />\n                            <Chip\n                                size=\"small\"\n                                color=\"default\"\n                                className={classes.infoChip}\n                                label={night}\n                                icon={<Icon fontSize=\"small\">nights_stay</Icon>}\n                            />\n                        {' x '}\n                        <Chip\n                            className={classes.infoPriceChip}\n                            color=\"default\"\n                            size=\"small\"\n                            avatar={<Avatar>{getSymbolFromCurrency(pricecurr) || ''}</Avatar>}\n                            label={formatMoney(price)}\n                        />\n                        </span>\n                </div>\n                <div className={classes.listItemAction}>\n                    <ProgressIconButton edge=\"end\" ariaLabel=\"close\" isLoading={isRoomDelete} onClick={()=> !state.bookingIsDisable && handleRemoveRoom(gid, reservno)}>\n                        <Icon fontSize=\"small\">close</Icon>\n                    </ProgressIconButton>\n                </div>\n            </div>\n        </ListItem>\n    )\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomListItem)\n"]},"metadata":{},"sourceType":"module"}