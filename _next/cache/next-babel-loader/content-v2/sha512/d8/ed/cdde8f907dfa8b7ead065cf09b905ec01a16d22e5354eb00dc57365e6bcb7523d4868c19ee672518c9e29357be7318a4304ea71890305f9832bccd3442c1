{"ast":null,"code":"import _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/Offers/OfferCardDialog.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { setToState as _setToState, updateState as _updateState } from 'state/actions';\nimport axios from 'axios';\nimport Slider from 'react-slick';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { getHyperlinkParser, stdTimeFormat } from 'model/orest/constants';\nimport WebCmsGlobal from 'components/webcms-global';\nimport { FALSE, NULL, ZERO } from 'model/globals';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport LoadingSpinner from 'components/LoadingSpinner';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Button';\nvar useStyles = makeStyles(function (theme) {\n  var _h, _sliderImgBox;\n\n  return {\n    dialogTitle: {\n      '& h2': (_h = {}, _defineProperty(_h, theme.breakpoints.only('md'), {\n        fontSize: 15\n      }), _defineProperty(_h, theme.breakpoints.only('sm'), {\n        fontSize: 14\n      }), _defineProperty(_h, theme.breakpoints.only('xs'), {\n        fontSize: 13\n      }), _h)\n    },\n    sliderImgBox: (_sliderImgBox = {\n      width: '100%',\n      height: 340\n    }, _defineProperty(_sliderImgBox, theme.breakpoints.only('xs'), {\n      height: 180\n    }), _defineProperty(_sliderImgBox, \"backgroundRepeat\", 'no-repeat'), _defineProperty(_sliderImgBox, \"backgroundSize\", '100% 100%'), _sliderImgBox),\n    button: {\n      textAlign: 'center',\n      '& a': {\n        background: '#fffbfb',\n        padding: 10,\n        textAlign: 'center',\n        color: theme.palette.primary.main,\n        border: \"1px solid \".concat(theme.palette.primary.main),\n        fontSize: '0.875rem',\n        minWidth: 64,\n        boxSizing: 'border-box',\n        transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n        fontWeight: 500,\n        lineHeight: 1.75,\n        borderRadius: 4,\n        letterSpacing: '0.02857em',\n        textTransform: 'uppercase'\n      }\n    }\n  };\n});\n\nvar OfferCardDialog = function OfferCardDialog(props) {\n  _s();\n\n  var _itemSlideData$, _itemSlideData$2, _itemSlideData$3, _itemSlideData$4;\n\n  var state = props.state,\n      sliderID = props.sliderID,\n      open = props.open,\n      onClose = props.onClose;\n\n  var _useState = useState(false),\n      itemSlideData = _useState[0],\n      setItemSlideData = _useState[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var classes = useStyles();\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS;\n\n  var loginfo = useSelector(function (state) {\n    return state.orest.currentUser && state.orest.currentUser.loginfo;\n  });\n  var clientParams = {};\n  clientParams.hotelrefno = loginfo && loginfo.hotelrefno || GENERAL_SETTINGS.HOTELREFNO;\n  useEffect(function () {\n    var active = true;\n\n    if (active && open && itemSlideData === FALSE) {\n      if (GENERAL_SETTINGS.ISCHAIN && state.changeHotelRefno !== false) {\n        clientParams.ischain = true;\n        clientParams.chainid = state.changeHotelRefno;\n        clientParams.hotelrefno = GENERAL_SETTINGS.HOTELREFNO;\n      } else {\n        clientParams.ischain = false;\n        clientParams.chainid = false;\n      }\n\n      axios({\n        url: GENERAL_SETTINGS.BASE_URL + 'api/hotel/content/slider',\n        method: 'post',\n        params: Object.assign({\n          sliderid: sliderID\n        }, clientParams)\n      }).then(function (sliderResponse) {\n        if (active) {\n          var sliderData = sliderResponse.data;\n\n          if (sliderData.success && sliderData.data.length > 0) {\n            setItemSlideData(sliderData.data);\n          } else {\n            setItemSlideData(null);\n          }\n        }\n      });\n    }\n\n    return function () {\n      active = false;\n    };\n  }, [sliderID]);\n\n  var handleCloseDialog = function handleCloseDialog() {\n    onClose(false);\n    setItemSlideData(false);\n  };\n\n  var settings = {\n    dots: true,\n    infinite: true,\n    lazyLoad: true,\n    speed: 500,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    centerMode: true,\n    swipeToSlide: true,\n    touchMove: true\n  };\n\n  var renderButton = function renderButton(cta) {\n    if (cta) {\n      var _link$text;\n\n      var link = getHyperlinkParser(cta);\n\n      if (link === false) {\n        return;\n      }\n\n      var href = link.href;\n      var text = (link === null || link === void 0 ? void 0 : (_link$text = link.text) === null || _link$text === void 0 ? void 0 : _link$text.replace(/ /g, '')) || '';\n      var host = window.location.host;\n      var isExternalLink = false;\n\n      if (href.includes('http') && !href.includes(host)) {\n        isExternalLink = true;\n      }\n\n      if (!isExternalLink) {\n        return __jsx(Link, {\n          id: \"slick-button\",\n          variant: \"outlined\",\n          color: \"primary\",\n          href: href,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }\n        }, t(text));\n      }\n\n      return __jsx(Link, {\n        id: \"slick-button\",\n        variant: \"outlined\",\n        color: \"primary\",\n        target: \"_blank\",\n        href: href,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }\n      }, t(text));\n    } else {\n      return;\n    }\n  };\n\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, __jsx(Dialog, {\n    fullWidth: true,\n    maxWidth: \"md\",\n    open: open,\n    onClose: function onClose() {\n      return handleCloseDialog();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, __jsx(DialogTitle, {\n    className: classes.dialogTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, itemSlideData && ((_itemSlideData$ = itemSlideData[0]) === null || _itemSlideData$ === void 0 ? void 0 : _itemSlideData$.slidertitle) || itemSlideData && ((_itemSlideData$2 = itemSlideData[0]) === null || _itemSlideData$2 === void 0 ? void 0 : _itemSlideData$2.title) || '-'), __jsx(DialogContent, {\n    dividers: true,\n    style: {\n      overflow: 'overlay',\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, itemSlideData === FALSE ? __jsx(Box, {\n    p: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, __jsx(LoadingSpinner, {\n    size: 40,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  })) : itemSlideData === NULL ? __jsx(Box, {\n    p: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    align: \"center\",\n    gutterBottom: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, t('str_noDefaultRecord'))) : __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 29\n    }\n  }, __jsx(Box, {\n    p: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 33\n    }\n  }, __jsx(Slider, _extends({}, settings, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 37\n    }\n  }), itemSlideData && itemSlideData.map(function (item, i) {\n    return __jsx(Box, {\n      key: i,\n      p: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 49\n      }\n    }, __jsx(\"div\", {\n      className: classes.sliderImgBox,\n      style: {\n        backgroundImage: \"url(\".concat(GENERAL_SETTINGS.STATIC_URL + item.fileurl, \")\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 53\n      }\n    }));\n  })))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 29\n    }\n  }, __jsx(Typography, {\n    variant: \"body2\",\n    style: {\n      padding: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 33\n    }\n  }, t(((_itemSlideData$3 = itemSlideData[0]) === null || _itemSlideData$3 === void 0 ? void 0 : _itemSlideData$3.sliderdesc) || ((_itemSlideData$4 = itemSlideData[0]) === null || _itemSlideData$4 === void 0 ? void 0 : _itemSlideData$4.description)))), itemSlideData && itemSlideData[0] && itemSlideData[0].slidercta && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    style: {\n      padding: 10,\n      textAlign: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 33\n    }\n  }, itemSlideData && itemSlideData[0] && renderButton(itemSlideData[0].slidercta)))), __jsx(DialogActions, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleCloseDialog();\n    },\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, t('str_close')))));\n};\n\n_s(OfferCardDialog, \"fK8nR2JrSdt7atpKZtpiaSVBsxo=\", false, function () {\n  return [useTranslation, useStyles, useSelector];\n});\n\n_c = OfferCardDialog;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateState: function updateState(stateType, stateName, value) {\n      return dispatch(_updateState(stateType, stateName, value));\n    },\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferCardDialog);\n\nvar _c;\n\n$RefreshReg$(_c, \"OfferCardDialog\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/Offers/OfferCardDialog.js"],"names":["React","useEffect","useState","useContext","connect","useSelector","setToState","updateState","axios","Slider","Typography","Box","DialogTitle","DialogContent","DialogActions","Dialog","Button","Grid","getHyperlinkParser","stdTimeFormat","WebCmsGlobal","FALSE","NULL","ZERO","useTranslation","LoadingSpinner","makeStyles","Link","useStyles","theme","dialogTitle","breakpoints","only","fontSize","sliderImgBox","width","height","button","textAlign","background","padding","color","palette","primary","main","border","minWidth","boxSizing","transition","fontWeight","lineHeight","borderRadius","letterSpacing","textTransform","OfferCardDialog","props","state","sliderID","open","onClose","itemSlideData","setItemSlideData","t","classes","GENERAL_SETTINGS","loginfo","orest","currentUser","clientParams","hotelrefno","HOTELREFNO","active","ISCHAIN","changeHotelRefno","ischain","chainid","url","BASE_URL","method","params","Object","assign","sliderid","then","sliderResponse","sliderData","data","success","length","handleCloseDialog","settings","dots","infinite","lazyLoad","speed","slidesToShow","slidesToScroll","centerMode","swipeToSlide","touchMove","renderButton","cta","link","href","text","replace","host","window","location","isExternalLink","includes","slidertitle","title","overflow","map","item","i","backgroundImage","STATIC_URL","fileurl","sliderdesc","description","slidercta","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\nimport { connect, useSelector } from 'react-redux'\nimport { setToState, updateState } from 'state/actions'\nimport axios from 'axios'\nimport Slider from 'react-slick'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport Dialog from '@material-ui/core/Dialog'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport { getHyperlinkParser, stdTimeFormat } from 'model/orest/constants'\nimport WebCmsGlobal from 'components/webcms-global'\nimport { FALSE, NULL, ZERO } from 'model/globals'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport LoadingSpinner from 'components/LoadingSpinner'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Link from '@material-ui/core/Button'\n\nconst useStyles = makeStyles((theme) => ({\n    dialogTitle: {\n        '& h2': {\n            [theme.breakpoints.only('md')]: {\n                fontSize: 15,\n            },\n            [theme.breakpoints.only('sm')]: {\n                fontSize: 14,\n            },\n            [theme.breakpoints.only('xs')]: {\n                fontSize: 13,\n            },\n        },\n    },\n    sliderImgBox: {\n        width: '100%',\n        height: 340,\n        [theme.breakpoints.only('xs')]: {\n            height: 180,\n        },\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: '100% 100%',\n    },\n    button: {\n        textAlign: 'center',\n        '& a': {\n            background: '#fffbfb',\n            padding: 10,\n            textAlign: 'center',\n            color: theme.palette.primary.main,\n            border: `1px solid ${theme.palette.primary.main}`,\n            fontSize: '0.875rem',\n            minWidth: 64,\n            boxSizing: 'border-box',\n            transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n            fontWeight: 500,\n            lineHeight: 1.75,\n            borderRadius: 4,\n            letterSpacing: '0.02857em',\n            textTransform: 'uppercase'\n        },\n    },\n}))\n\nconst OfferCardDialog = (props) => {\n    const { state, sliderID, open, onClose } = props\n\n    const [itemSlideData, setItemSlideData] = useState(false)\n    const { t } = useTranslation()\n    const classes = useStyles()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n\n    const loginfo = useSelector((state) => state.orest.currentUser && state.orest.currentUser.loginfo)\n\n    let clientParams = {}\n    clientParams.hotelrefno = loginfo && loginfo.hotelrefno || GENERAL_SETTINGS.HOTELREFNO\n\n    useEffect(() => {\n        let active = true\n        if (active && open && itemSlideData === FALSE) {\n\n            if (GENERAL_SETTINGS.ISCHAIN && state.changeHotelRefno !== false) {\n                clientParams.ischain = true\n                clientParams.chainid = state.changeHotelRefno\n                clientParams.hotelrefno = GENERAL_SETTINGS.HOTELREFNO\n\n            } else {\n                clientParams.ischain = false\n                clientParams.chainid = false\n            }\n\n            axios({\n                url: GENERAL_SETTINGS.BASE_URL + 'api/hotel/content/slider',\n                method: 'post',\n                params:  Object.assign({\n                    sliderid: sliderID,\n                }, clientParams),\n            }).then((sliderResponse) => {\n                if (active) {\n                    const sliderData = sliderResponse.data\n                    if (sliderData.success && sliderData.data.length > 0) {\n                        setItemSlideData(sliderData.data)\n                    } else {\n                        setItemSlideData(null)\n                    }\n                }\n            })\n        }\n\n        return () => {\n            active = false\n        }\n    }, [sliderID])\n\n    const handleCloseDialog = () => {\n        onClose(false)\n        setItemSlideData(false)\n    }\n\n    const settings = {\n        dots: true,\n        infinite: true,\n        lazyLoad: true,\n        speed: 500,\n        slidesToShow: 1,\n        slidesToScroll: 1,\n        centerMode: true,\n        swipeToSlide: true,\n        touchMove: true,\n    }\n\n    const renderButton = (cta) => {\n        if (cta) {\n            let link = getHyperlinkParser(cta)\n\n            if(link === false){\n                return\n            }\n\n            let href = link.href\n            let text = link?.text?.replace(/ /g,'') || ''\n            let host = window.location.host\n\n            let isExternalLink = false\n            if(href.includes('http') && !href.includes(host)){\n                isExternalLink = true\n            }\n\n            if(!isExternalLink){\n                return (\n                    <Link id=\"slick-button\"  variant=\"outlined\" color=\"primary\" href={href}>\n                        {t(text)}\n                    </Link>\n                )\n            }\n\n            return (\n                <Link id=\"slick-button\"  variant=\"outlined\" color=\"primary\" target=\"_blank\" href={href}>\n                    {t(text)}\n                </Link>\n            )\n        } else {\n            return\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <Dialog fullWidth maxWidth=\"md\" open={open} onClose={() => handleCloseDialog()}>\n                <DialogTitle className={classes.dialogTitle}>{itemSlideData && itemSlideData[0]?.slidertitle || itemSlideData && itemSlideData[0]?.title || '-'}</DialogTitle>\n                <DialogContent dividers style={{overflow: 'overlay', width: '100%'}}>\n                    {itemSlideData === FALSE ? (\n                        <Box p={3}>\n                            <LoadingSpinner size={40} />\n                        </Box>\n                    ) : itemSlideData === NULL ? (\n                        <Box p={3}>\n                            <Typography variant=\"h6\" align=\"center\" gutterBottom>\n                                {t('str_noDefaultRecord')}\n                            </Typography>\n                        </Box>\n                    ) : (\n                        <Grid container spacing={1}>\n                            <Grid item xs={12}>\n                                <Box p={1}>\n                                    <Slider {...settings}>\n                                        {itemSlideData && itemSlideData.map((item, i) => {\n                                            return (\n                                                <Box key={i} p={1}>\n                                                    <div className={classes.sliderImgBox} style={{backgroundImage:`url(${GENERAL_SETTINGS.STATIC_URL + item.fileurl})`}}></div>\n                                                </Box>\n                                            )\n                                        })}\n                                    </Slider>\n                                </Box>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Typography variant=\"body2\" style={{padding: 10}}>\n                                    {t(itemSlideData[0]?.sliderdesc || itemSlideData[0]?.description)}\n                                </Typography>\n                            </Grid>\n                            {itemSlideData && itemSlideData[0] && itemSlideData[0].slidercta && (\n                                <Grid item xs={12} style={{ padding: 10, textAlign: 'center' }}>\n                                    {itemSlideData && itemSlideData[0] && renderButton(itemSlideData[0].slidercta)}\n                                </Grid>\n                            )}\n                        </Grid>\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleCloseDialog()} color=\"primary\">\n                        {t('str_close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferCardDialog)\n"]},"metadata":{},"sourceType":"module"}