{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/video/AddVideo.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext, useState } from 'react';\nimport { Grid, Paper, Typography, Fab } from '@material-ui/core';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { COLORS } from '../../../../constants';\nimport { DropzoneDialog } from \"material-ui-dropzone\";\nimport { Upload } from \"@webcms/orest\";\nimport { isErrorMsg } from \"../../../../../../../model/orest/constants\";\nimport useTranslation from \"../../../../../../../lib/translations/hooks/useTranslation\";\nimport WebCmsGlobal from \"../../../../../../webcms-global\";\nimport { useRouter } from \"next/router\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport ReactPlayer from 'react-player';\nimport LoadingSpinner from '../../../../../../LoadingSpinner';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    card: {\n      maxWidth: 345\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%'\n    }\n  },\n  submit: {\n    marginRight: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    borderRadius: 20,\n    marginTop: theme.spacing(1),\n    float: 'right'\n  },\n  fabBtn: {\n    marginBottom: theme.spacing(1),\n    marginLeft: theme.spacing(1)\n  },\n  disableEvent: {\n    pointerEvents: 'none',\n    opacity: 0.5\n  },\n  paperBlock: {\n    height: 245,\n    border: `2px solid ${COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary}`,\n    overflow: 'auto',\n    position: 'relative'\n  },\n  card: {\n    height: 245,\n    width: 392,\n    cursor: 'pointer'\n  },\n  heading: {\n    marginTop: theme.spacing(1),\n    marginLeft: theme.spacing(2),\n    fontWeight: 'bold',\n    fontSize: 15\n  },\n  textField: {\n    paddingRight: theme.spacing(1)\n  },\n  alignText: {\n    textAlign: 'right',\n    color: 'red'\n  },\n  emptyDiv: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 245\n  }\n}));\n\nconst AddVideo = props => {\n  const {\n    handleSectionComponent\n  } = props;\n  const {\n    0: localState,\n    1: setLocalState\n  } = useState({\n    videoFile: null,\n    isOpenDialog: false,\n    isRequestSend: false\n  });\n  const {\n    videoFile,\n    isOpenDialog,\n    isRequestSend\n  } = localState;\n  const classes = useStyles(); //context\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    GENERAL_SETTINGS,\n    token\n  } = useContext(WebCmsGlobal);\n  const router = useRouter();\n  const companyId = router.query.companyID;\n  const authToken = token || router.query.authToken;\n  const state = useSelector(state => {\n    var _state$formReducer;\n\n    return state === null || state === void 0 ? void 0 : (_state$formReducer = state.formReducer) === null || _state$formReducer === void 0 ? void 0 : _state$formReducer.pageBuilder;\n  });\n\n  const handleVideoFileUpload = file => {\n    setLocalState(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      isOpenDialog: false,\n      isRequestSend: true\n    }));\n    Upload({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      token: authToken,\n      params: {\n        masterid: state.hotelMid,\n        orsactive: true,\n        hotelrefno: Number(companyId),\n        quality: \"0.1F\"\n      },\n      files: file\n    }).then(r => {\n      if (r.status === 200) {\n        let url = r.data.data.url.replace('/var/otello', '').replace('/public', '');\n        setLocalState(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          videoFile: GENERAL_SETTINGS.STATIC_URL + url,\n          isRequestSend: false\n        }));\n        handleSectionComponent({\n          service: \"hcmitemvideo\",\n          type: \"video\",\n          url: url\n        });\n        toast.success(t('str_haveBeenUploadedMsg'), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      } else {\n        const error = isErrorMsg(r);\n        toast.error(t(error.errMsg), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    });\n  };\n\n  if (isRequestSend) {\n    return __jsx(LoadingSpinner, {\n      size: 50,\n      style: {\n        color: COLORS.secondary\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, __jsx(Paper, {\n    className: classes.paperBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, videoFile ? __jsx(ReactPlayer, {\n    url: videoFile,\n    width: \"100%\",\n    height: \"100%\",\n    controls: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }) : __jsx(Typography, {\n    component: 'div',\n    className: classes.emptyDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, __jsx(Fab, {\n    onClick: () => setLocalState(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      isOpenDialog: true\n    })),\n    variant: \"extended\",\n    size: \"small\",\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    className: classes.fabBtn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  }, __jsx(CloudUploadIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 37\n    }\n  }), \"UPLOAD\"))))), __jsx(DropzoneDialog, {\n    open: isOpenDialog,\n    onSave: handleVideoFileUpload,\n    acceptedFiles: ['video/mp4'],\n    showPreviews: true,\n    filesLimit: 3,\n    maxFileSize: 5000000,\n    onClose: () => setLocalState(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      isOpenDialog: false\n    })),\n    submitButtonText: t('str_save'),\n    cancelButtonText: t('str_cancel'),\n    dialogTitle: t('str_uploadAFile'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default AddVideo;","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/video/AddVideo.js"],"names":["React","useContext","useState","Grid","Paper","Typography","Fab","CloudUploadIcon","makeStyles","COLORS","DropzoneDialog","Upload","isErrorMsg","useTranslation","WebCmsGlobal","useRouter","useSelector","toast","ReactPlayer","LoadingSpinner","useStyles","theme","root","card","maxWidth","media","height","paddingTop","submit","marginRight","spacing","marginBottom","borderRadius","marginTop","float","fabBtn","marginLeft","disableEvent","pointerEvents","opacity","paperBlock","border","secondary","overflow","position","width","cursor","heading","fontWeight","fontSize","textField","paddingRight","alignText","textAlign","color","emptyDiv","display","alignItems","justifyContent","AddVideo","props","handleSectionComponent","localState","setLocalState","videoFile","isOpenDialog","isRequestSend","classes","t","GENERAL_SETTINGS","token","router","companyId","query","companyID","authToken","state","formReducer","pageBuilder","handleVideoFileUpload","file","prevState","apiUrl","OREST_URL","params","masterid","hotelMid","orsactive","hotelrefno","Number","quality","files","then","r","status","url","data","replace","STATIC_URL","service","type","success","POSITION","TOP_RIGHT","error","errMsg"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\nimport { Grid, Paper, Typography, Fab } from '@material-ui/core'\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {COLORS} from '../../../../constants'\nimport {DropzoneDialog} from \"material-ui-dropzone\";\nimport {Upload} from \"@webcms/orest\";\nimport {isErrorMsg} from \"../../../../../../../model/orest/constants\";\nimport useTranslation from \"../../../../../../../lib/translations/hooks/useTranslation\";\nimport WebCmsGlobal from \"../../../../../../webcms-global\";\nimport {useRouter} from \"next/router\";\nimport {useSelector} from \"react-redux\";\nimport {toast} from \"react-toastify\";\nimport ReactPlayer from 'react-player';\nimport LoadingSpinner from '../../../../../../LoadingSpinner'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        card: {\n            maxWidth: 345,\n        },\n        media: {\n            height: 0,\n            paddingTop: '56.25%',\n        },\n    },\n    submit: {\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        borderRadius: 20,\n        marginTop: theme.spacing(1),\n        float: 'right',\n    },\n    fabBtn: {\n        marginBottom: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n    },\n    disableEvent: {\n        pointerEvents: 'none',\n        opacity: 0.5,\n    },\n    paperBlock: {\n        height: 245,\n        border: `2px solid ${COLORS?.secondary}`,\n        overflow: 'auto',\n        position: 'relative',\n    },\n    card: {\n        height: 245,\n        width: 392,\n        cursor: 'pointer',\n    },\n    heading: {\n        marginTop: theme.spacing(1),\n        marginLeft: theme.spacing(2),\n        fontWeight: 'bold',\n        fontSize: 15,\n    },\n    textField: {\n        paddingRight: theme.spacing(1),\n    },\n    alignText: {\n        textAlign: 'right',\n        color: 'red',\n    },\n    emptyDiv: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: 245\n    },\n}))\n\nconst AddVideo = (props) => {\n    const { handleSectionComponent } = props;\n    const [localState, setLocalState] = useState({\n        videoFile: null,\n        isOpenDialog: false,\n        isRequestSend: false\n    });\n\n    const { videoFile, isOpenDialog, isRequestSend } = localState\n\n    const classes = useStyles();\n    //context\n    const { t } = useTranslation();\n    const { GENERAL_SETTINGS, token } = useContext(WebCmsGlobal);\n    const router = useRouter();\n    const companyId = router.query.companyID;\n    const authToken = token || router.query.authToken;\n    const state = useSelector(state => state?.formReducer?.pageBuilder);\n\n    const handleVideoFileUpload = (file) => {\n        setLocalState(prevState => ({...prevState, isOpenDialog: false, isRequestSend: true}));\n        Upload({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            token: authToken,\n            params: {\n                masterid: state.hotelMid,\n                orsactive: true,\n                hotelrefno: Number(companyId),\n                quality:\"0.1F\"\n            },\n            files: file,\n        }).then((r) => {\n            if (r.status === 200) {\n                let url = r.data.data.url.replace('/var/otello', '').replace('/public', '');\n                setLocalState(prevState => ({...prevState, videoFile: GENERAL_SETTINGS.STATIC_URL + url, isRequestSend: false}));\n                handleSectionComponent({\n                    service: \"hcmitemvideo\",\n                    type: \"video\",\n                    url: url,\n                });\n                toast.success(t('str_haveBeenUploadedMsg'), {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n            } else {\n                const error = isErrorMsg(r);\n                toast.error(t(error.errMsg), {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n            }\n        })\n    }\n\n    if (isRequestSend) {\n        return <LoadingSpinner size={50} style={{color: COLORS.secondary}} />\n    }\n\n    return (\n        <React.Fragment>\n            <Grid container>\n                {\n                    <Grid item xs={12}>\n                    <Paper className={classes.paperBlock}>\n                        {videoFile ? (\n                            <ReactPlayer url={videoFile} width=\"100%\" height=\"100%\" controls={true} />\n                        ) : (\n                            <Typography component={'div'} className={classes.emptyDiv}>\n                                <Fab\n                                    onClick={() => setLocalState(prevState => ({...prevState, isOpenDialog: true}))}\n                                    variant=\"extended\"\n                                    size=\"small\"\n                                    color=\"primary\"\n                                    aria-label=\"add\"\n                                    className={classes.fabBtn}\n                                >\n                                    <CloudUploadIcon />\n                                    UPLOAD\n                                </Fab>\n                            </Typography>\n                        )}\n                    </Paper>\n                </Grid>\n                }\n            </Grid>\n            <DropzoneDialog\n                open={isOpenDialog}\n                onSave={handleVideoFileUpload}\n                acceptedFiles={[\n                    'video/mp4',\n                ]}\n                showPreviews={true}\n                filesLimit={3}\n                maxFileSize={5000000}\n                onClose={() => setLocalState(prevState => ({...prevState, isOpenDialog: false}))}\n                submitButtonText={t('str_save')}\n                cancelButtonText={t('str_cancel')}\n                dialogTitle={t('str_uploadAFile')}\n            />\n        </React.Fragment>\n    )\n}\nexport default AddVideo\n"]},"metadata":{},"sourceType":"module"}