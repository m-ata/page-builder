{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/paragraph/EditParagrapgh.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { connect } from \"react-redux\";\nimport dynamic from 'next/dynamic';\nimport Container from '@material-ui/core/Container'; // import FroalaEditor from 'react-froala-wysiwyg' dynamic;\n\nvar FroalaEditor = dynamic(_c = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var values;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Promise.all([import('react-froala-wysiwyg'), import('froala-editor/js/plugins.pkgd.min'), import('froala-editor/js/froala_editor.min'), import('froala-editor/js/froala_editor.pkgd.min')]);\n\n          case 2:\n            values = _context.sent;\n            return _context.abrupt(\"return\", values[0]);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function _c() {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  loading: function loading() {\n    return __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 24\n      }\n    }, \"LOADING!!!\");\n  },\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-froala-wysiwyg'), require.resolveWeak('froala-editor/js/plugins.pkgd.min'), require.resolveWeak('froala-editor/js/froala_editor.min'), require.resolveWeak('froala-editor/js/froala_editor.pkgd.min')];\n    },\n    modules: ['react-froala-wysiwyg', 'froala-editor/js/plugins.pkgd.min', 'froala-editor/js/froala_editor.min', 'froala-editor/js/froala_editor.pkgd.min']\n  }\n});\n_c2 = FroalaEditor;\nimport { ViewList } from '@webcms/orest';\nimport { OREST_ENDPOINT } from '../../../../../../../model/orest/constants';\nimport { useRouter } from 'next/router';\nimport WebCmsGlobal from '../../../../../../webcms-global';\nimport { Checkbox, FormControlLabel } from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { froalaConfig } from \"../../../../constants\";\n\nvar EditParagraph = function EditParagraph(props) {\n  _s();\n\n  var paragraphComponent = props.paragraphComponent,\n      handleCmponent = props.handleCmponent,\n      state = props.state,\n      otherLangParagraph = props.otherLangParagraph,\n      handleDisable = props.handleDisable;\n\n  var _useState = useState(''),\n      model = _useState[0],\n      setModel = _useState[1];\n\n  var _useState2 = useState(false),\n      useBgColor = _useState2[0],\n      setUseBgColor = _useState2[1];\n\n  var config = froalaConfig;\n  var router = useRouter();\n  var companyId = router.query.companyID;\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      token = _useContext.token;\n\n  var authToken = token || router.query.authToken;\n  useEffect(function () {\n    if (paragraphComponent !== null && paragraphComponent !== void 0 && paragraphComponent.gid) {\n      ViewList({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n        token: authToken,\n        params: {\n          query: \"gid:\".concat(paragraphComponent.gid),\n          hotelrefno: Number(companyId)\n        }\n      }).then(function (res) {\n        if (res.status === 200 && res.data.data.length > 0) {\n          if (state.langCode === state.defaultLang) {\n            setModel(res.data.data[0].itemtext);\n          } else {\n            setModel(otherLangParagraph.text);\n          }\n        }\n      });\n    }\n\n    (paragraphComponent === null || paragraphComponent === void 0 ? void 0 : paragraphComponent.useBgColor) && setUseBgColor(paragraphComponent.useBgColor);\n  }, [paragraphComponent, otherLangParagraph]);\n  useEffect(function () {\n    model ? handleDisable(false) : handleDisable(true);\n\n    if (state.langCode === state.defaultLang) {\n      handleCmponent({\n        service: model,\n        type: paragraphComponent.type,\n        gid: paragraphComponent.gid,\n        width: paragraphComponent.width,\n        id: paragraphComponent.id,\n        useBgColor: useBgColor\n      });\n    } else {\n      handleCmponent({\n        text: model\n      });\n    }\n  }, [model, useBgColor]);\n\n  var handleModelChange = function handleModelChange(model) {\n    setModel(model);\n  };\n\n  return __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    component: 'div',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, __jsx(FormControlLabel, {\n    control: __jsx(Checkbox, {\n      checked: useBgColor,\n      onChange: function onChange() {\n        return setUseBgColor(!useBgColor);\n      },\n      name: \"background-color\",\n      color: \"primary\",\n      style: {\n        \"float\": 'right'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }),\n    label: \"Background Color\",\n    disabled: (state === null || state === void 0 ? void 0 : state.langCode) !== (state === null || state === void 0 ? void 0 : state.defaultLang),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  })), __jsx(FroalaEditor, {\n    tag: \"textarea\",\n    config: config,\n    model: model,\n    onModelChange: handleModelChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }));\n};\n\n_s(EditParagraph, \"Acj1bYAyuAhHOMl1MLVK55usvyI=\", false, function () {\n  return [useRouter];\n});\n\n_c3 = EditParagraph;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.pageBuilder\n  };\n};\n\nexport default connect(mapStateToProps)(EditParagraph);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"FroalaEditor$dynamic\");\n$RefreshReg$(_c2, \"FroalaEditor\");\n$RefreshReg$(_c3, \"EditParagraph\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/paragraph/EditParagrapgh.js"],"names":["React","useContext","useEffect","useState","connect","dynamic","Container","FroalaEditor","Promise","all","values","loading","ssr","ViewList","OREST_ENDPOINT","useRouter","WebCmsGlobal","Checkbox","FormControlLabel","Typography","froalaConfig","EditParagraph","props","paragraphComponent","handleCmponent","state","otherLangParagraph","handleDisable","model","setModel","useBgColor","setUseBgColor","config","router","companyId","query","companyID","GENERAL_SETTINGS","token","authToken","gid","apiUrl","OREST_URL","endpoint","HCMITEMTXTPAR","params","hotelrefno","Number","then","res","status","data","length","langCode","defaultLang","itemtext","text","service","type","width","id","handleModelChange","mapStateToProps","formReducer","pageBuilder"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport {connect} from \"react-redux\";\nimport dynamic from 'next/dynamic'\nimport Container from '@material-ui/core/Container'\n\n// import FroalaEditor from 'react-froala-wysiwyg' dynamic;\nconst FroalaEditor = dynamic(\n    async () => {\n        const values = await Promise.all([\n            import('react-froala-wysiwyg'),\n            import('froala-editor/js/plugins.pkgd.min'),\n            import('froala-editor/js/froala_editor.min'),\n            import('froala-editor/js/froala_editor.pkgd.min'),\n        ])\n        return values[0]\n    },\n    {\n        loading: () => <p>LOADING!!!</p>,\n        ssr: false,\n    }\n);\n\nimport { ViewList } from '@webcms/orest'\nimport { OREST_ENDPOINT } from '../../../../../../../model/orest/constants'\nimport { useRouter } from 'next/router'\nimport WebCmsGlobal from '../../../../../../webcms-global'\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {froalaConfig} from \"../../../../constants\";\n\nconst EditParagraph = (props) => {\n\n    const { paragraphComponent, handleCmponent, state, otherLangParagraph, handleDisable } = props\n\n    const [model, setModel] = useState('');\n    const [useBgColor, setUseBgColor] = useState(false);\n    const config = froalaConfig;\n\n    const router = useRouter();\n    const companyId = router.query.companyID;\n    const { GENERAL_SETTINGS, token } = useContext(WebCmsGlobal);\n    const authToken = token || router.query.authToken;\n\n    useEffect(() => {\n        if (paragraphComponent?.gid) {\n            ViewList({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n                token: authToken,\n                params: {\n                    query: `gid:${paragraphComponent.gid}`,\n                    hotelrefno: Number(companyId),\n                },\n            }).then((res) => {\n                if (res.status === 200 && res.data.data.length > 0) {\n                    if (state.langCode === state.defaultLang) {\n                        setModel(res.data.data[0].itemtext)\n                    } else {\n                        setModel(otherLangParagraph.text);\n                    }\n\n                }\n            })\n        }\n        paragraphComponent?.useBgColor && setUseBgColor(paragraphComponent.useBgColor);\n    }, [paragraphComponent, otherLangParagraph]);\n\n    useEffect(() => {\n        model ? handleDisable(false) : handleDisable(true);\n        if (state.langCode === state.defaultLang) {\n            handleCmponent({\n                service: model,\n                type: paragraphComponent.type,\n                gid: paragraphComponent.gid,\n                width: paragraphComponent.width,\n                id: paragraphComponent.id,\n                useBgColor: useBgColor\n            });\n        } else {\n            handleCmponent({\n                text: model\n            })\n        }\n    }, [model, useBgColor]);\n\n    const handleModelChange = (model) => {\n        setModel(model)\n    }\n\n    return (\n        <Container>\n            <Typography component={'div'}>\n                <FormControlLabel\n                    control={\n                        <Checkbox\n                            checked={useBgColor}\n                            onChange={() => setUseBgColor(!useBgColor)}\n                            name=\"background-color\"\n                            color=\"primary\"\n                            style={{float: 'right'}}\n                        />\n                    }\n                    label=\"Background Color\"\n                    disabled={state?.langCode !== state?.defaultLang}\n                />\n            </Typography>\n            <FroalaEditor\n                tag=\"textarea\"\n                config={config}\n                model={model}\n                onModelChange={handleModelChange}\n            />\n        </Container>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        state: state.formReducer.pageBuilder\n    }\n};\n\nexport default connect(mapStateToProps)(EditParagraph)\n"]},"metadata":{},"sourceType":"module"}