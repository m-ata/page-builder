{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/booking/Confirmation.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Box, Button, Divider, Grid, Paper, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport RoomSummary from './components/RoomSummary';\nimport * as global from '@webcms-globals';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport SaveIcon from '@material-ui/icons/Save';\nimport TagManager from '@webcms-globals/tag-manager';\nimport WebCmsGlobal from 'components/webcms-global';\nimport Alert from '@material-ui/lab/Alert';\nimport moment from 'moment';\nconst useStyles = makeStyles(() => ({\n  root: {\n    marginTop: 16,\n    padding: '20px 10px 20px 10px',\n    background: '#F5F5F5'\n  },\n  buttonRoot: {\n    marginTop: 16,\n    background: '#F5F5F5'\n  },\n  thankYouIcon: {\n    display: 'block',\n    color: '#4CAF50',\n    fontSize: 60,\n    margin: '0 auto'\n  },\n  shareButtons: {\n    marginTop: 14,\n    \"@media print\": {\n      display: 'none'\n    }\n  },\n  noPrint: {\n    display: 'inline',\n    \"@media print\": {\n      display: 'none'\n    }\n  },\n  listTitle: {\n    fontWeight: 'bold'\n  }\n}));\n\nconst SummaryBox = props => {\n  const {\n    title,\n    children\n  } = props;\n  const classes = useStyles();\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, title), __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    className: classes.bottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, __jsx(Paper, {\n    square: true,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, __jsx(Box, {\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }, children)))));\n};\n\nconst Confirmation = props => {\n  const {\n    state\n  } = props;\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation();\n  const {\n    GENERAL_SETTINGS,\n    WEBCMS_DATA\n  } = useContext(WebCmsGlobal);\n  useEffect(() => {\n    var _WEBCMS_DATA$assets, _WEBCMS_DATA$assets$m;\n\n    let isEffect = true;\n\n    if (isEffect && WEBCMS_DATA !== null && WEBCMS_DATA !== void 0 && (_WEBCMS_DATA$assets = WEBCMS_DATA.assets) !== null && _WEBCMS_DATA$assets !== void 0 && (_WEBCMS_DATA$assets$m = _WEBCMS_DATA$assets.meta) !== null && _WEBCMS_DATA$assets$m !== void 0 && _WEBCMS_DATA$assets$m.googleTag) {\n      var _WEBCMS_DATA$assets2, _WEBCMS_DATA$assets2$, _WEBCMS_DATA$assets3, _WEBCMS_DATA$assets3$;\n\n      TagManager.page.setChange({\n        hotelName: WEBCMS_DATA === null || WEBCMS_DATA === void 0 ? void 0 : (_WEBCMS_DATA$assets2 = WEBCMS_DATA.assets) === null || _WEBCMS_DATA$assets2 === void 0 ? void 0 : (_WEBCMS_DATA$assets2$ = _WEBCMS_DATA$assets2.meta) === null || _WEBCMS_DATA$assets2$ === void 0 ? void 0 : _WEBCMS_DATA$assets2$.title,\n        hotelId: GENERAL_SETTINGS.HOTELREFNO,\n        pageTitle: window.document.title,\n        pagePath: location.href,\n        pageStep: 'Confirmation'\n      });\n      TagManager.booking.setPurchaseRoom({\n        eventLabel: 'Room Sold',\n        hotelName: WEBCMS_DATA === null || WEBCMS_DATA === void 0 ? void 0 : (_WEBCMS_DATA$assets3 = WEBCMS_DATA.assets) === null || _WEBCMS_DATA$assets3 === void 0 ? void 0 : (_WEBCMS_DATA$assets3$ = _WEBCMS_DATA$assets3.meta) === null || _WEBCMS_DATA$assets3$ === void 0 ? void 0 : _WEBCMS_DATA$assets3$.title,\n        hotelId: GENERAL_SETTINGS.HOTELREFNO,\n        masterReservNo: state.bookingConfirmReservno,\n        revenue: global.helper.formatPrice(reservationInfo().totalPrice),\n        purchaseData: state.selectedRooms\n      });\n    }\n\n    return () => {\n      isEffect = false;\n    };\n  }, []);\n\n  const reservationInfo = () => {\n    let totalPrice = 0,\n        currencySymbol = null,\n        currencyCode = null;\n    state.selectedRooms.map(item => {\n      if (!Boolean(currencySymbol) || !Boolean(currencyCode)) {\n        currencySymbol = getSymbolFromCurrency(item.pricecurr);\n        currencyCode = item.pricecurr;\n      }\n\n      totalPrice = totalPrice + item.totalprice;\n    });\n\n    if (state.flyTransferInfo) {\n      totalPrice = totalPrice + state.flyTransferInfo.priceInfo.res;\n    }\n\n    if (state.flyTransferReturnInfo) {\n      totalPrice = totalPrice + state.flyTransferReturnInfo.priceInfo.res;\n    }\n\n    return {\n      totalPrice: totalPrice,\n      currencyCode: currencyCode,\n      currencySymbol: currencySymbol\n    };\n  };\n\n  const printButton = () => {\n    const oldValue = document.title;\n    document.title = `#${state.bookingConfirmReservno} - ${oldValue}`;\n    window.print();\n    document.title = oldValue;\n  };\n\n  const showIbanNo = state.selectedPaymentIbanId ? state.hotelPaymentType.bankiban.filter(item => String(item.id) === String(state.selectedPaymentIbanId)) : null;\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, __jsx(Paper, {\n    variant: \"outlined\",\n    square: true,\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(CheckCircleOutlineIcon, {\n    className: classes.thankYouIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }), __jsx(Typography, {\n    variant: \"h6\",\n    align: \"center\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, t('str_thankForRes')), __jsx(Typography, {\n    variant: \"body2\",\n    align: \"center\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, state.bookingConfirmIsGroup ? t('str_groupResNo') : t('str_yourReservationNo'), \" #\", state.bookingConfirmReservno, \". \", __jsx(\"div\", {\n    className: classes.noPrint,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 135\n    }\n  }, \" \", t('str_mailPrintMsg')))), __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    className: classes.shareButtons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    variant: \"body2\",\n    align: \"center\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, t('str_toSaveOrPrintTheDetailsAsPdf'), \",\", ` `, __jsx(Button, {\n    size: \"small\",\n    onClick: () => printButton(),\n    disableElevation: true,\n    variant: \"outlined\",\n    color: \"primary\",\n    className: classes.button,\n    startIcon: __jsx(SaveIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 40\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, t('str_clickHere'))))), __jsx(Paper, {\n    variant: \"outlined\",\n    square: true,\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, __jsx(Box, {\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    sm: 12,\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, t('str_roomDetails')), __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }, state.selectedRooms && state.selectedRooms.length > 0 && state.selectedRooms.map((item, i) => __jsx(Grid, {\n    item: true,\n    xs: 12,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 37\n    }\n  }, __jsx(RoomSummary, {\n    roomName: item.roomtypename,\n    checkin: item.checkin,\n    checkout: item.checkout,\n    pax: item.totalpax,\n    child: item.totalchd,\n    night: item.totalnight,\n    price: item.totalprice,\n    pricecurr: item.pricecurr,\n    gid: item.gid,\n    thumbnail: item.thumbnail,\n    guestList: item.guestList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 41\n    }\n  }))))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  }, __jsx(SummaryBox, {\n    title: t('str_paymentMethod'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }, t(state.selectedPaymentType.description), showIbanNo ? __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    gutterBottom: true,\n    className: classes.listTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 45\n    }\n  }, t('str_bankName')), __jsx(Typography, {\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 45\n    }\n  }, showIbanNo && showIbanNo[0].bankname)), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    gutterBottom: true,\n    className: classes.listTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 45\n    }\n  }, t('str_bankBranch')), __jsx(Typography, {\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 45\n    }\n  }, showIbanNo && showIbanNo[0].bankbranch)), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    gutterBottom: true,\n    className: classes.listTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 45\n    }\n  }, t('str_bankCurrency')), __jsx(Typography, {\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 45\n    }\n  }, showIbanNo && showIbanNo[0].currencycode)), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    gutterBottom: true,\n    className: classes.listTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 45\n    }\n  }, t('str_bankIban')), __jsx(Typography, {\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 45\n    }\n  }, showIbanNo && showIbanNo[0].iban))) : null), state.hotelBankIbanWarnMsg ? __jsx(Alert, {\n    severity: \"info\",\n    variant: \"outlined\",\n    style: {\n      marginTop: 10,\n      padding: 5,\n      paddingRight: 15,\n      background: '#ffffff',\n      textAlign: 'justify'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 33\n    }\n  }, state.hotelBankIbanWarnMsg) : null), state.flyTransferInfo || state.flyTransferReturnInfo ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    item: true,\n    sm: 12,\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 33\n    }\n  }, __jsx(SummaryBox, {\n    title: t('str_transfer'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    style: {\n      marginTop: 10,\n      paddingBottom: 10\n    },\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 41\n    }\n  }, state.flyTransferInfo ? __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    gutterBottom: true,\n    className: classes.listTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 53\n    }\n  }, t('str_arrivalTransfer')), __jsx(Typography, {\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 53\n    }\n  }, moment(state.flyTransferInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY'), \" - \", moment(state.flyTransferInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")), __jsx(\"span\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      right: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 53\n    }\n  }, getSymbolFromCurrency(state.flyTransferInfo.priceInfo.pricecurr), \" \", global.helper.formatPrice(state.flyTransferInfo.priceInfo.res))) : null, state.flyTransferReturnInfo ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 49\n    }\n  }, __jsx(Divider, {\n    orientation: \"vertical\",\n    flexItem: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 53\n    }\n  }), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 53\n    }\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    gutterBottom: true,\n    className: classes.listTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 57\n    }\n  }, t('str_departureTransfer')), __jsx(Typography, {\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 57\n    }\n  }, moment(state.flyTransferReturnInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY'), \" - \", moment(state.flyTransferReturnInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")), __jsx(\"span\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      right: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 57\n    }\n  }, getSymbolFromCurrency(state.flyTransferReturnInfo.priceInfo.pricecurr), \" \", global.helper.formatPrice(state.flyTransferReturnInfo.priceInfo.res)))) : null)))) : null, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 25\n    }\n  }, __jsx(Divider, {\n    variant: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 29\n    }\n  }), __jsx(Box, {\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 29\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    align: \"right\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 33\n    }\n  }, t('str_total'), \": \", global.helper.formatPrice(reservationInfo().totalPrice), \" \", reservationInfo().currencySymbol)))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nexport default connect(mapStateToProps, null)(Confirmation);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/booking/Confirmation.js"],"names":["React","useContext","useEffect","connect","Box","Button","Divider","Grid","Paper","Typography","makeStyles","useTranslation","CheckCircleOutlineIcon","RoomSummary","global","getSymbolFromCurrency","SaveIcon","TagManager","WebCmsGlobal","Alert","moment","useStyles","root","marginTop","padding","background","buttonRoot","thankYouIcon","display","color","fontSize","margin","shareButtons","noPrint","listTitle","fontWeight","SummaryBox","props","title","children","classes","bottom","Confirmation","state","t","GENERAL_SETTINGS","WEBCMS_DATA","isEffect","assets","meta","googleTag","page","setChange","hotelName","hotelId","HOTELREFNO","pageTitle","window","document","pagePath","location","href","pageStep","booking","setPurchaseRoom","eventLabel","masterReservNo","bookingConfirmReservno","revenue","helper","formatPrice","reservationInfo","totalPrice","purchaseData","selectedRooms","currencySymbol","currencyCode","map","item","Boolean","pricecurr","totalprice","flyTransferInfo","priceInfo","res","flyTransferReturnInfo","printButton","oldValue","print","showIbanNo","selectedPaymentIbanId","hotelPaymentType","bankiban","filter","String","id","bookingConfirmIsGroup","button","length","i","roomtypename","checkin","checkout","totalpax","totalchd","totalnight","gid","thumbnail","guestList","selectedPaymentType","description","bankname","bankbranch","currencycode","iban","hotelBankIbanWarnMsg","paddingRight","textAlign","paddingBottom","position","flydate","format","flytime","top","right","mapStateToProps","formReducer","ibe"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { Box, Button, Divider, Grid, Paper, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline'\nimport RoomSummary from './components/RoomSummary'\nimport * as global from '@webcms-globals'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport SaveIcon from '@material-ui/icons/Save'\nimport TagManager from '@webcms-globals/tag-manager'\nimport WebCmsGlobal from 'components/webcms-global'\nimport Alert from '@material-ui/lab/Alert'\nimport moment from 'moment'\n\nconst useStyles = makeStyles(() => ({\n    root: {\n        marginTop: 16,\n        padding: '20px 10px 20px 10px',\n        background: '#F5F5F5',\n    },\n    buttonRoot: {\n        marginTop: 16,\n        background: '#F5F5F5'\n    },\n    thankYouIcon: {\n        display: 'block',\n        color: '#4CAF50',\n        fontSize: 60,\n        margin: '0 auto'\n    },\n    shareButtons: {\n         marginTop: 14,\n        \"@media print\": {\n            display: 'none'\n        }\n    },\n    noPrint: {\n        display: 'inline',\n        \"@media print\": {\n            display: 'none'\n        }\n    },\n    listTitle: {\n        fontWeight: 'bold'\n    }\n}))\n\nconst SummaryBox = (props) => {\n    const { title, children } = props\n    const classes = useStyles()\n    return (\n        <React.Fragment>\n            <Typography variant=\"h6\" gutterBottom>{title}</Typography>\n            <Grid container spacing={1} className={classes.bottom}>\n                <Grid item xs={12}>\n                    <Paper square variant=\"outlined\">\n                        <Box p={2}>\n                            {children}\n                        </Box>\n                    </Paper>\n                </Grid>\n            </Grid>\n        </React.Fragment>\n    )\n}\n\nconst Confirmation = (props) => {\n\n    const { state } = props\n    const classes = useStyles()\n    const { t } = useTranslation()\n    const { GENERAL_SETTINGS, WEBCMS_DATA } = useContext(WebCmsGlobal)\n\n    useEffect(() => {\n        let isEffect = true\n\n        if (isEffect && WEBCMS_DATA?.assets?.meta?.googleTag) {\n            TagManager.page.setChange({\n                hotelName: WEBCMS_DATA?.assets?.meta?.title,\n                hotelId: GENERAL_SETTINGS.HOTELREFNO,\n                pageTitle: window.document.title,\n                pagePath: location.href,\n                pageStep: 'Confirmation',\n            })\n\n            TagManager.booking.setPurchaseRoom({\n                eventLabel: 'Room Sold',\n                hotelName: WEBCMS_DATA?.assets?.meta?.title,\n                hotelId: GENERAL_SETTINGS.HOTELREFNO,\n                masterReservNo: state.bookingConfirmReservno,\n                revenue: global.helper.formatPrice(reservationInfo().totalPrice),\n                purchaseData: state.selectedRooms,\n            })\n        }\n\n        return () => {\n            isEffect = false\n        }\n    }, [])\n\n    const reservationInfo = () => {\n        let totalPrice = 0, currencySymbol = null, currencyCode = null\n\n        state.selectedRooms.map((item) => {\n            if (!Boolean(currencySymbol) || !Boolean(currencyCode)) {\n                currencySymbol = getSymbolFromCurrency(item.pricecurr)\n                currencyCode = item.pricecurr\n            }\n            totalPrice = totalPrice + item.totalprice\n        })\n\n        if(state.flyTransferInfo){\n            totalPrice = totalPrice + state.flyTransferInfo.priceInfo.res\n        }\n\n        if(state.flyTransferReturnInfo){\n            totalPrice = totalPrice + state.flyTransferReturnInfo.priceInfo.res\n        }\n\n        return {\n            totalPrice: totalPrice,\n            currencyCode: currencyCode,\n            currencySymbol: currencySymbol,\n        }\n    }\n\n    const printButton = () => {\n        const oldValue = document.title\n        document.title = `#${state.bookingConfirmReservno} - ${oldValue}`\n        window.print()\n        document.title = oldValue\n    }\n\n    const showIbanNo = state.selectedPaymentIbanId ? state.hotelPaymentType.bankiban.filter(item => String(item.id) === String(state.selectedPaymentIbanId)) : null\n\n    return (\n        <React.Fragment>\n            <Paper variant=\"outlined\" square className={classes.root}>\n                <CheckCircleOutlineIcon className={classes.thankYouIcon}/>\n                <Typography variant=\"h6\" align=\"center\" gutterBottom>\n                    {t('str_thankForRes')}\n                </Typography>\n                <Typography variant=\"body2\" align=\"center\" gutterBottom>\n                    {state.bookingConfirmIsGroup ? t('str_groupResNo') : t('str_yourReservationNo')} #{state.bookingConfirmReservno}. <div className={classes.noPrint}> {t('str_mailPrintMsg')}</div>\n                </Typography>\n            </Paper>\n            <Grid container spacing={3} direction=\"row\" justify=\"flex-end\" alignItems=\"center\" className={classes.shareButtons}>\n                <Grid item>\n                    <Typography variant=\"body2\" align=\"center\" gutterBottom>\n                        {t('str_toSaveOrPrintTheDetailsAsPdf')},{` `}\n                        <Button\n                            size=\"small\"\n                            onClick={()=> printButton()}\n                            disableElevation\n                            variant=\"outlined\"\n                            color=\"primary\"\n                            className={classes.button}\n                            startIcon={<SaveIcon />}\n                        >\n                            {t('str_clickHere')}\n                        </Button>\n                    </Typography>\n                </Grid>\n            </Grid>\n            <Paper variant=\"outlined\" square className={classes.root}>\n                <Box p={2}>\n                    <Grid container spacing={3}>\n                        <Grid item sm={12} md={8}>\n                            <Typography variant=\"h6\" gutterBottom>\n                                {t('str_roomDetails')}\n                            </Typography>\n                            <Grid container spacing={1}>\n                                {state.selectedRooms && state.selectedRooms.length > 0 && state.selectedRooms.map((item, i) => (\n                                    <Grid item xs={12} key={i}>\n                                        <RoomSummary\n                                            roomName={item.roomtypename}\n                                            checkin={item.checkin}\n                                            checkout={item.checkout}\n                                            pax={item.totalpax}\n                                            child={item.totalchd}\n                                            night={item.totalnight}\n                                            price={item.totalprice}\n                                            pricecurr={item.pricecurr}\n                                            gid={item.gid}\n                                            thumbnail={item.thumbnail}\n                                            guestList={item.guestList}\n                                        />\n                                    </Grid>\n                                ))}\n                            </Grid>\n                        </Grid>\n                        <Grid item xs={12} md={4}>\n                            <SummaryBox title={t('str_paymentMethod')}>\n                                {t(state.selectedPaymentType.description)}\n                                {showIbanNo ? (\n                                    <Grid container spacing={1} style={{marginTop: 10}}>\n                                        <Grid item xs={4}>\n                                            <Typography variant='subtitle2' gutterBottom className={classes.listTitle}>\n                                                {t('str_bankName')}\n                                            </Typography>\n                                            <Typography variant='body2' gutterBottom>\n                                                {showIbanNo && showIbanNo[0].bankname}\n                                            </Typography>\n                                        </Grid>\n                                        <Grid item xs={4}>\n                                            <Typography variant='subtitle2' gutterBottom className={classes.listTitle}>\n                                                {t('str_bankBranch')}\n                                            </Typography>\n                                            <Typography variant='body2' gutterBottom>\n                                                {showIbanNo && showIbanNo[0].bankbranch}\n                                            </Typography>\n                                        </Grid>\n                                        <Grid item xs={4}>\n                                            <Typography variant='subtitle2' gutterBottom className={classes.listTitle}>\n                                                {t('str_bankCurrency')}\n                                            </Typography>\n                                            <Typography variant='body2' gutterBottom>\n                                                {showIbanNo && showIbanNo[0].currencycode}\n                                            </Typography>\n                                        </Grid>\n                                        <Grid item xs={12}>\n                                            <Typography variant='subtitle2' gutterBottom className={classes.listTitle}>\n                                                {t('str_bankIban')}\n                                            </Typography>\n                                            <Typography variant='body2' gutterBottom>\n                                                {showIbanNo && showIbanNo[0].iban}\n                                            </Typography>\n                                        </Grid>\n                                    </Grid>\n                                ): null}\n                            </SummaryBox>\n                            {state.hotelBankIbanWarnMsg ?\n                                <Alert severity=\"info\" variant=\"outlined\" style={{ marginTop: 10, padding: 5, paddingRight: 15, background: '#ffffff', textAlign: 'justify' }}>\n                                    {state.hotelBankIbanWarnMsg}\n                                </Alert> : null\n                            }\n                        </Grid>\n                        {(state.flyTransferInfo || state.flyTransferReturnInfo) ? (\n                            <React.Fragment>\n                                <Grid item sm={12} md={8}>\n                                    <SummaryBox title={t('str_transfer')}>\n                                        <Grid container spacing={1} style={{marginTop: 10, paddingBottom: 10}} justify=\"space-between\">\n                                            {state.flyTransferInfo ? (\n                                                <Grid item xs={12} sm={5} style={{position: 'relative'}}>\n                                                    <Typography variant='subtitle2' gutterBottom className={classes.listTitle}>\n                                                        {t('str_arrivalTransfer')}\n                                                    </Typography>\n                                                    <Typography variant='body2' gutterBottom>\n                                                        {moment(state.flyTransferInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - {moment(state.flyTransferInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")}\n                                                    </Typography>\n                                                    <span style={{position: 'absolute', top: 0, right: 20}}>\n                                                {getSymbolFromCurrency(state.flyTransferInfo.priceInfo.pricecurr)} {global.helper.formatPrice(state.flyTransferInfo.priceInfo.res)}\n                                            </span>\n                                                </Grid>\n                                            ): null}\n                                            {state.flyTransferReturnInfo ? (\n                                                <React.Fragment>\n                                                    <Divider orientation=\"vertical\" flexItem />\n                                                    <Grid item xs={12} sm={5} style={{position: 'relative'}}>\n                                                        <Typography variant='subtitle2' gutterBottom className={classes.listTitle}>\n                                                            {t('str_departureTransfer')}\n                                                        </Typography>\n                                                        <Typography variant='body2' gutterBottom>\n                                                            {moment(state.flyTransferReturnInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - {moment(state.flyTransferReturnInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")}\n                                                        </Typography>\n                                                        <span style={{position: 'absolute', top: 0, right: 20}}>\n                                                    {getSymbolFromCurrency(state.flyTransferReturnInfo.priceInfo.pricecurr)} {global.helper.formatPrice(state.flyTransferReturnInfo.priceInfo.res)}\n                                                </span>\n                                                    </Grid>\n                                                </React.Fragment>\n                                            ): null}\n                                        </Grid>\n                                    </SummaryBox>\n                                </Grid>\n                            </React.Fragment>\n                        ): null}\n                        <Grid item xs={12}>\n                            <Divider variant=\"middle\" />\n                            <Box p={2}>\n                                <Typography variant=\"h6\" align=\"right\" gutterBottom>\n                                    {t('str_total')}: {global.helper.formatPrice(reservationInfo().totalPrice)} {reservationInfo().currencySymbol}\n                                </Typography>\n                            </Box>\n                        </Grid>\n                    </Grid>\n                </Box>\n            </Paper>\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nexport default connect(mapStateToProps, null)(Confirmation)\n"]},"metadata":{},"sourceType":"module"}