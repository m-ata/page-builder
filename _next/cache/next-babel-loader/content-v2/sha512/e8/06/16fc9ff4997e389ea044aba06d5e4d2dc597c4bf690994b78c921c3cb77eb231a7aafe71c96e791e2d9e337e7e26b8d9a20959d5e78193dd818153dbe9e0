{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/Details/ClientBase.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport * as global from '@webcms-globals';\nimport { helper } from '@webcms-globals';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SelectAutoComplete from '@webcms-ui/core/select-autocomplete';\nimport FileUploadAndShow from '@webcms-ui/core/file-upload-and-show';\nimport SignerPad from '@webcms-ui/core/signer-pad';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport WebCmsGlobal from 'components/webcms-global';\nimport stylesTabPanel from '../style/TabPanel.style';\nimport { required } from 'state/utils/form';\nimport { emailValidation, mobileTelNoFormat, OREST_ENDPOINT, TRANSTYPES } from 'model/orest/constants';\nimport PhoneInput from '@webcms-ui/core/phone-input';\nimport TabHeader from 'components/layout/components/TabHeader';\nimport { Button, Grid, Icon, TextField } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { DatePicker, LocalizationProvider } from '@material-ui/pickers';\nimport moment from 'moment';\nimport MomentAdapter from '@date-io/moment';\nimport { fieldGroupAccordions, fieldGroups, otherGuestMandatoryFields, primaryGuestMandatoryFields } from './clientInitialState';\nimport RoomSelection from './RoomSelection';\nimport CheckInConfirmation from './CheckInConfirmation';\nimport OtherGuests from './OtherGuests';\nimport { Insert, List, Patch, UseOrest, ViewList } from '@webcms/orest';\nimport { useSnackbar } from 'notistack';\nimport FrameCheckbox from '@webcms-ui/core/frame-checkbox';\nimport { sendGuestChangeNotifyMail } from '../Base/helper';\nimport { useOrestAction } from 'model/orest';\nimport { fieldOptions, fieldTypes } from 'constants/form-elements';\nimport { employeeFieldGroups, employeeMandatoryFields } from 'components/emp-portal/employeeInitialState';\nimport LoadingSpinner from 'components/LoadingSpinner';\nimport { useRouter } from 'next/router';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nconst useStylesTabPanel = makeStyles(stylesTabPanel());\n\nconst ClientBase = ({\n  isPrimaryGuest,\n  useClientInitialState,\n  setUseClientInitialState,\n  useClientOrestState,\n  useClientReservation,\n  usePrimaryClientReservation,\n  isEmpPortal\n}) => {\n  const router = useRouter();\n  const {\n    t\n  } = useTranslation();\n  const classesTabPanel = useStylesTabPanel();\n  const {\n    GENERAL_SETTINGS,\n    locale\n  } = useContext(WebCmsGlobal);\n  const fieldGroupArray = isEmpPortal ? employeeFieldGroups : fieldGroups;\n  const useHotelWorkDateTime = useSelector(state => {\n    var _state$orest, _state$orest$state;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$state = _state$orest.state) === null || _state$orest$state === void 0 ? void 0 : _state$orest$state.hotelWorkDateTime) || false;\n  });\n  const useToken = useSelector(state => {\n    var _state$orest2, _state$orest2$current;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest2 = state.orest) === null || _state$orest2 === void 0 ? void 0 : (_state$orest2$current = _state$orest2.currentUser) === null || _state$orest2$current === void 0 ? void 0 : _state$orest2$current.auth.access_token) || false;\n  });\n  const useOtherGuestResname = useSelector(state => {\n    var _state$orest3, _state$orest3$current;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest3 = state.orest) === null || _state$orest3 === void 0 ? void 0 : (_state$orest3$current = _state$orest3.currentUser) === null || _state$orest3$current === void 0 ? void 0 : _state$orest3$current.otherGuestResname) || false;\n  });\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    setOrestState\n  } = useOrestAction(); //For Component\n\n  const {\n    0: isInitialStateLoad,\n    1: setIsInitialStateLoad\n  } = useState(false);\n  const {\n    0: isUpdating,\n    1: setIsUpdating\n  } = useState(true);\n  const {\n    0: isCheckinConfirmationDialog,\n    1: setIsCheckinConfirmationDialog\n  } = useState(false);\n  const {\n    0: isRoomSelectionDialog,\n    1: setIsRoomSelectionDialog\n  } = useState(false);\n  const {\n    0: isOtherGuestsDialog,\n    1: setIsOtherGuestsDialog\n  } = useState(false);\n  const {\n    0: usePrivacyTransactions,\n    1: setUsePrivacyTransactions\n  } = useState({\n    datapolicy: {\n      value: isPrimaryGuest && !useOtherGuestResname,\n      isRequired: true,\n      isUpdate: false\n    },\n    pref: {\n      value: isPrimaryGuest && !useOtherGuestResname,\n      isRequired: true,\n      isUpdate: false\n    }\n  });\n  useEffect(() => {\n    let isEffect = true;\n\n    if (isEffect && useClientOrestState && !isInitialStateLoad) {\n      const newClientInitialState = helper.objectMapper(useClientInitialState, useClientOrestState, getMandatoryFields(GENERAL_SETTINGS.hotelSettings.ci_reqflds));\n      setUseClientInitialState(newClientInitialState);\n      setIsInitialStateLoad(true);\n      setIsUpdating(false);\n    }\n\n    return () => {\n      isEffect = false;\n    };\n  }, [useClientOrestState]);\n  useEffect(() => {\n    var _GENERAL_SETTINGS$hot;\n\n    let isEffect = true;\n\n    if (isEffect && isInitialStateLoad && GENERAL_SETTINGS !== null && GENERAL_SETTINGS !== void 0 && (_GENERAL_SETTINGS$hot = GENERAL_SETTINGS.hotelSettings) !== null && _GENERAL_SETTINGS$hot !== void 0 && _GENERAL_SETTINGS$hot.ci_reqsign && (useClientReservation || useOtherGuestResname)) {\n      setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n        [useClientInitialState.signature.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.signature.key]), {}, {\n          isRequired: true\n        })\n      }));\n    }\n\n    return () => {\n      isEffect = false;\n    };\n  }, [isInitialStateLoad]);\n\n  const getEmOrTelFieldCheck = useMandatoryFields => {\n    var _GENERAL_SETTINGS$hot2;\n\n    if (GENERAL_SETTINGS !== null && GENERAL_SETTINGS !== void 0 && (_GENERAL_SETTINGS$hot2 = GENERAL_SETTINGS.hotelSettings) !== null && _GENERAL_SETTINGS$hot2 !== void 0 && _GENERAL_SETTINGS$hot2.profile_emortelok) {\n      var _router$query, _router$query2, _router$query3, _router$query4, _router$query5, _router$query6;\n\n      if ((router !== null && router !== void 0 && (_router$query = router.query) !== null && _router$query !== void 0 && _router$query.telno || router !== null && router !== void 0 && (_router$query2 = router.query) !== null && _router$query2 !== void 0 && _router$query2.mobile) && !(router !== null && router !== void 0 && (_router$query3 = router.query) !== null && _router$query3 !== void 0 && _router$query3.email)) {\n        const itemIndex = useMandatoryFields.indexOf('email');\n\n        if (itemIndex >= 0) {\n          useMandatoryFields.splice(itemIndex, 1);\n        }\n      } else if (router !== null && router !== void 0 && (_router$query4 = router.query) !== null && _router$query4 !== void 0 && _router$query4.email && !(router !== null && router !== void 0 && (_router$query5 = router.query) !== null && _router$query5 !== void 0 && _router$query5.telno) && !(router !== null && router !== void 0 && (_router$query6 = router.query) !== null && _router$query6 !== void 0 && _router$query6.mobile)) {\n        const itemIndex = useMandatoryFields.indexOf('mobiletel');\n\n        if (itemIndex >= 0) {\n          useMandatoryFields.splice(itemIndex, 1);\n        }\n      }\n    }\n\n    return useMandatoryFields;\n  };\n\n  const getMandatoryFields = settMandatoryFields => {\n    var _GENERAL_SETTINGS$hot3;\n\n    let defaultMandatoryFields = !isPrimaryGuest || useOtherGuestResname ? otherGuestMandatoryFields : isEmpPortal ? employeeMandatoryFields : primaryGuestMandatoryFields;\n\n    if (GENERAL_SETTINGS !== null && GENERAL_SETTINGS !== void 0 && (_GENERAL_SETTINGS$hot3 = GENERAL_SETTINGS.hotelSettings) !== null && _GENERAL_SETTINGS$hot3 !== void 0 && _GENERAL_SETTINGS$hot3.reg_birthdate) {\n      defaultMandatoryFields.push(useClientInitialState.birthdate.key);\n    }\n\n    if (settMandatoryFields) {\n      const getCiReqFlds = helper.makeArrayWithComma(settMandatoryFields);\n\n      if (Array.isArray(getCiReqFlds)) {\n        defaultMandatoryFields = [...new Set([...defaultMandatoryFields, ...getCiReqFlds])];\n        return getEmOrTelFieldCheck(defaultMandatoryFields);\n      } else {\n        return getEmOrTelFieldCheck(defaultMandatoryFields);\n      }\n    } else {\n      return getEmOrTelFieldCheck(defaultMandatoryFields);\n    }\n  };\n\n  const createClientLoginId = clientId => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'client/loginid',\n      method: 'PUT',\n      token: useToken,\n      params: {\n        id: clientId,\n        pref: true,\n        datapolicy: true,\n        force: true\n      }\n    }).then(clientLoginIdResponse => {\n      var _clientLoginIdRespons;\n\n      return !!(clientLoginIdResponse.status === 200 && clientLoginIdResponse !== null && clientLoginIdResponse !== void 0 && (_clientLoginIdRespons = clientLoginIdResponse.data) !== null && _clientLoginIdRespons !== void 0 && _clientLoginIdRespons.data);\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const clientPatch = (clientData, clientGid) => {\n    return Patch({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: isEmpPortal ? OREST_ENDPOINT.EMPLOYEE : OREST_ENDPOINT.CLIENT,\n      token: useToken,\n      gid: clientGid,\n      params: {\n        hotelrefno: useClientOrestState.hotelrefno\n      },\n      data: clientData\n    }).then(clientPatchResponse => {\n      var _clientPatchResponse$;\n\n      if (clientPatchResponse.status === 200 && clientPatchResponse !== null && clientPatchResponse !== void 0 && (_clientPatchResponse$ = clientPatchResponse.data) !== null && _clientPatchResponse$ !== void 0 && _clientPatchResponse$.data) {\n        return clientPatchResponse.data.data;\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const clientView = clientPatch => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: isEmpPortal ? 'employee/view/get' : 'client/view/get',\n      token: useToken,\n      params: {\n        gid: clientPatch.gid,\n        allhotels: true\n      }\n    }).then(clientViewGetResponse => {\n      var _clientViewGetRespons;\n\n      if (clientViewGetResponse.status === 200 && clientViewGetResponse !== null && clientViewGetResponse !== void 0 && (_clientViewGetRespons = clientViewGetResponse.data) !== null && _clientViewGetRespons !== void 0 && _clientViewGetRespons.data) {\n        return clientViewGetResponse.data.data;\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const clientInfoUpdate = async (clientData, clientGid) => {\n    const isClientPatch = await clientPatch(clientData, clientGid);\n\n    if (isClientPatch && isPrimaryGuest) {\n      return await clientView(isClientPatch);\n    } else return !!isClientPatch;\n  };\n\n  const getOnChangeValue = (type, value, isRequired) => {\n    switch (type) {\n      case fieldTypes.date:\n        const newValue = moment(value).format(OREST_ENDPOINT.DATEFORMAT);\n        return {\n          value: newValue,\n          isError: newValue === 'Invalid date',\n          errorText: newValue === 'Invalid date' ? `*${t('str_invalidDate')}` : false,\n          isRequired: isRequired\n        };\n\n      default:\n        return {\n          value: value,\n          isError: isRequired && !!required(value),\n          errorText: isRequired && !!required(value),\n          isRequired: isRequired\n        };\n    }\n  };\n\n  const handleOnChangeCallBack = (key, useData) => {\n    var _useData$value;\n\n    switch (key) {\n      case useClientInitialState.maritalstatus.key:\n        const isVisible = !!(useData !== null && useData !== void 0 && useData.value && (useData === null || useData === void 0 ? void 0 : useData.value[useClientInitialState.maritalstatus.defValKey]) === TRANSTYPES.MARRIED);\n        setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n          [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n            value: useData.value,\n            isError: useData.isError,\n            isRequired: useData.isRequired,\n            errorText: useData.errorText\n          }),\n          [useClientInitialState.weddingdate.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.weddingdate.key]), {}, {\n            isVisible: isVisible\n          })\n        }));\n        return true;\n\n      case useClientInitialState.nationid.key:\n        const isActive = !!(useData !== null && useData !== void 0 && useData.value && useData !== null && useData !== void 0 && (_useData$value = useData.value) !== null && _useData$value !== void 0 && _useData$value.reqtrid);\n        setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n          [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n            value: useData.value,\n            isError: useData.isError,\n            isRequired: useData.isRequired,\n            errorText: useData.errorText\n          }),\n          [useClientInitialState.tridno.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.tridno.key]), {}, {\n            isVisible: isActive,\n            isRequired: isActive && useClientInitialState.nationid.isRequired\n          }),\n          [useClientInitialState.healthcode.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.healthcode.key]), {}, {\n            isVisible: isActive,\n            isRequired: isActive && GENERAL_SETTINGS.hotelSettings.reg_healthcode\n          }),\n          [useClientInitialState.idtypeid.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.idtypeid.key]), {}, {\n            isVisible: !isActive,\n            isRequired: !isActive && useClientInitialState.nationid.isRequired\n          }),\n          [useClientInitialState.idno.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.idno.key]), {}, {\n            isVisible: !isActive,\n            isRequired: !isActive && useClientInitialState.nationid.isRequired\n          })\n        }));\n        return true;\n\n      case useClientInitialState.email.key:\n        setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n          [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n            value: useData.value,\n            isError: useData.isError,\n            errorText: useData.errorText\n          }),\n          [useClientInitialState.mobiletel.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.mobiletel.key]), {}, {\n            isError: false,\n            errorText: '',\n            isRequired: !useOtherGuestResname && GENERAL_SETTINGS.hotelSettings.profile_emortelok ? !useData.value : useClientInitialState.mobiletel.isRequired\n          })\n        }));\n        return true;\n\n      case useClientInitialState.mobiletel.key:\n        setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n          [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n            value: useData.value,\n            isError: useData.isError,\n            errorText: useData.errorText\n          }),\n          [useClientInitialState.email.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.email.key]), {}, {\n            isError: false,\n            errorText: '',\n            isRequired: !useOtherGuestResname && GENERAL_SETTINGS.hotelSettings.profile_emortelok ? !useData.value : useClientInitialState.email.isRequired\n          })\n        }));\n        return true;\n\n      default:\n        return false;\n    }\n  };\n\n  const handleOnChange = (key, value, type = 'text') => {\n    const useData = getOnChangeValue(type, value, useClientInitialState[key].isRequired);\n    const isCallback = handleOnChangeCallBack(key, useData);\n\n    if (!isCallback) {\n      setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n        [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n          value: useData.value,\n          isError: useData.isError,\n          isRequired: useData.isRequired,\n          errorText: useData.errorText\n        })\n      }));\n    }\n  };\n\n  const getFormComponent = field => {\n    switch (field.type) {\n      case fieldTypes.trid:\n      case fieldTypes.email:\n      case fieldTypes.text:\n        return __jsx(TextField, {\n          id: field.key,\n          name: field.key,\n          label: t(field.label),\n          required: field.isRequired,\n          disabled: isUpdating,\n          fullWidth: fieldOptions.fullWidth.textField,\n          size: fieldOptions.size.textField,\n          variant: fieldOptions.variant.textField,\n          value: field.value,\n          onChange: e => handleOnChange(field.key, e.target.value),\n          error: field.isError,\n          helperText: field.isError && field.errorText,\n          onBlur: field.isVerifyRequired ? () => handleOnVerify(field.key, field.value, field.type) : undefined,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 21\n          }\n        });\n\n      case fieldTypes.select:\n        return __jsx(SelectAutoComplete, {\n          required: field.isRequired,\n          label: t(field.label),\n          isInitialStateLoad: isInitialStateLoad,\n          disabled: isUpdating,\n          id: field.key,\n          name: field.key,\n          selectApi: field.selectApi,\n          value: field.value,\n          error: field.isError,\n          variant: fieldOptions.variant.textField,\n          onCallback: newValue => handleOnChange(field.key, newValue),\n          onChange: newValue => handleOnChange(field.key, newValue),\n          optionLabel: field.optionLabel,\n          optionKey: field.optionKey,\n          defValKey: field.defValKey,\n          defValue: field.defValKey && field.value || false,\n          trgValKey: field.trgValKey,\n          trgQueryKey: field.trgQueryKey,\n          trgValue: field.trgValue && useClientInitialState[field.trgValue].value || false,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 21\n          }\n        });\n\n      case fieldTypes.tel:\n        return __jsx(PhoneInput, {\n          defaultCountry: locale === 'en' ? 'us' : locale,\n          preferredCountries: ['it', 'ie', 'de', 'fr', 'es', 'gb'],\n          regions: ['america', 'europe', 'asia', 'oceania', 'africa'],\n          id: field.key,\n          name: field.key,\n          label: t(field.label),\n          required: field.isRequired,\n          disabled: isUpdating,\n          fullWidth: fieldOptions.fullWidth.textField,\n          size: fieldOptions.size.textField,\n          variant: fieldOptions.variant.textField,\n          value: field.value,\n          onChange: newValue => handleOnChange(field.key, newValue),\n          error: field.isError,\n          helperText: field.isError && field.errorText,\n          onBlur: field.isVerifyRequired ? () => handleOnVerify(field.key, field.value, field.type) : undefined,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 21\n          }\n        });\n\n      case fieldTypes.date:\n        return __jsx(LocalizationProvider, {\n          dateLibInstance: moment,\n          dateAdapter: MomentAdapter,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 21\n          }\n        }, __jsx(DatePicker, {\n          required: field.isRequired,\n          allowKeyboardControl: true,\n          disabled: isUpdating,\n          autoOk: true,\n          id: field.key,\n          name: field.key,\n          label: t(field.label),\n          inputFormat: fieldOptions.dateFormatForView,\n          disableFuture: true,\n          openTo: 'date',\n          views: ['year', 'month', 'date'],\n          value: field.value || moment(),\n          onChange: newValue => handleOnChange(field.key, newValue, field.type),\n          renderInput: props => {\n            return __jsx(TextField, _extends({}, props, {\n              fullWidth: fieldOptions.fullWidth.textField,\n              size: fieldOptions.size.textField,\n              variant: fieldOptions.variant.textField,\n              required: field.isRequired,\n              error: field.isError,\n              helperText: field.isError && field.errorText,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 37\n              }\n            }));\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 25\n          }\n        }));\n\n      case fieldTypes.upload:\n        return __jsx(FileUploadAndShow, {\n          id: field.key,\n          name: field.key,\n          label: t(field.label),\n          required: field.isRequired,\n          disabled: !useClientOrestState || isUpdating || !useClientOrestState.id,\n          fullWidth: fieldOptions.fullWidth.textField,\n          size: fieldOptions.size.textField,\n          variant: fieldOptions.variant.textField,\n          error: field.isError,\n          helperText: field.isError && field.errorText,\n          optionKey: field.optionKey,\n          defValKey: field.defValKey,\n          defValue: field.defValKey && useClientOrestState[field.defValKey],\n          trgQueryKey: field.defValKey && useClientOrestState[field.trgQueryKey],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 21\n          }\n        });\n\n      case fieldTypes.sign:\n        return __jsx(SignerPad, {\n          id: field.key,\n          name: field.key,\n          label: t(field.label),\n          required: field.isRequired,\n          disabled: isUpdating,\n          fullWidth: fieldOptions.fullWidth.textField,\n          size: fieldOptions.size.textField,\n          variant: fieldOptions.variant.textField,\n          error: field.isError,\n          helperText: field.isError && field.errorText,\n          optionLabel: field.optionLabel,\n          optionKey: field.optionKey,\n          defValKey: field.defValKey,\n          defValue: field.defValKey && useOtherGuestResname ? useOtherGuestResname[field.defValKey] : useClientReservation[field.defValKey],\n          trgQueryKey: field.defValKey && useOtherGuestResname ? useOtherGuestResname[field.trgQueryKey] : useClientReservation[field.trgQueryKey],\n          onUpdateCallBack: () => {\n            setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n              [useClientInitialState.signature.key]: _objectSpread(_objectSpread({}, useClientInitialState[useClientInitialState.signature.key]), {}, {\n                isError: false,\n                errorText: ''\n              })\n            }));\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 21\n          }\n        });\n\n      default:\n        return;\n    }\n  };\n\n  const handleOnVerify = (key, value, type) => {\n    switch (type) {\n      case fieldTypes.email:\n        isEmailExists(key, value);\n        break;\n\n      case fieldTypes.tel:\n        isPhoneExists(key, value);\n        break;\n\n      case fieldTypes.trid:\n        isTrIdValid(key, value);\n        break;\n\n      default:\n        return false;\n    }\n  };\n\n  const isCheckInDay = () => {\n    return !useOtherGuestResname && useClientReservation && useHotelWorkDateTime.workdate === useClientReservation.checkin;\n  };\n\n  const isRoomSelectionPossible = () => {\n    return !useOtherGuestResname && useClientReservation && useClientReservation.canroom && !useClientReservation.roomno && GENERAL_SETTINGS.hotelSettings.roomno;\n  };\n\n  const isReservationStatusAccepted = () => {\n    const acceptedStatus = ['A', 'I'];\n    return !useOtherGuestResname && usePrimaryClientReservation && acceptedStatus.includes(usePrimaryClientReservation.status);\n  };\n\n  const isCheckInPossible = () => {\n    if (useClientReservation && !useClientReservation.canroom && GENERAL_SETTINGS.hotelSettings.roomno) {\n      return false;\n    }\n\n    return !useOtherGuestResname && useClientReservation && useClientReservation.canci && isCheckInDay() && GENERAL_SETTINGS.hotelSettings.ci_enable;\n  };\n\n  const isEmailExists = (key, val) => {\n    if (val) {\n      if (emailValidation(val)) {\n        setIsUpdating(true);\n        UseOrest({\n          apiUrl: GENERAL_SETTINGS.OREST_URL,\n          endpoint: 'client/email/exists',\n          token: useToken,\n          params: {\n            email: val,\n            allhotels: true\n          }\n        }).then(response => {\n          var _response$data, _response$data$data;\n\n          if (response.status === 200 && response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && (_response$data$data = _response$data.data) !== null && _response$data$data !== void 0 && _response$data$data.res) {\n            if ((useClientOrestState === null || useClientOrestState === void 0 ? void 0 : useClientOrestState.id) !== response.data.data.id) {\n              setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n                [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n                  isError: true,\n                  errorText: t('str_emailAlreadyExist')\n                })\n              }));\n            }\n\n            setIsUpdating(false);\n            return true;\n          } else {\n            setIsUpdating(false);\n            return false;\n          }\n        }).catch(() => {\n          setIsUpdating(false);\n          return false;\n        });\n      } else {\n        setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n          [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n            isError: true,\n            errorText: t('str_invalidEmail')\n          })\n        }));\n      }\n    }\n  };\n\n  const isPhoneExists = (key, val) => {\n    if (String(val).length > 5) {\n      setIsUpdating(true);\n      UseOrest({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: 'client/phone/exists',\n        token: useToken,\n        params: {\n          tel: mobileTelNoFormat(val),\n          allhotels: true\n        }\n      }).then(response => {\n        var _response$data2, _response$data2$data;\n\n        if (response.status === 200 && response !== null && response !== void 0 && (_response$data2 = response.data) !== null && _response$data2 !== void 0 && (_response$data2$data = _response$data2.data) !== null && _response$data2$data !== void 0 && _response$data2$data.res) {\n          if ((useClientOrestState === null || useClientOrestState === void 0 ? void 0 : useClientOrestState.id) !== response.data.data.id) {\n            setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n              [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n                isError: true,\n                errorText: t('str_mobileAlreadyExist')\n              })\n            }));\n          }\n\n          setIsUpdating(false);\n          return true;\n        } else {\n          setIsUpdating(false);\n          return false;\n        }\n      }).catch(() => {\n        setIsUpdating(false);\n        return false;\n      });\n    }\n  };\n\n  const isTrIdValid = (key, val) => {\n    if (val) {\n      setIsUpdating(true);\n      UseOrest({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: 'tools/validate/tridno',\n        token: useToken,\n        params: {\n          idno: val,\n          allhotels: true\n        }\n      }).then(response => {\n        var _response$data3, _response$data3$data;\n\n        if (response.status === 200 && response !== null && response !== void 0 && (_response$data3 = response.data) !== null && _response$data3 !== void 0 && (_response$data3$data = _response$data3.data) !== null && _response$data3$data !== void 0 && _response$data3$data.res) {\n          setIsUpdating(false);\n          return true;\n        } else {\n          setUseClientInitialState(_objectSpread(_objectSpread({}, useClientInitialState), {}, {\n            [key]: _objectSpread(_objectSpread({}, useClientInitialState[key]), {}, {\n              isError: true,\n              errorText: t('str_pleaseEnterAValidTRIdNo')\n            })\n          }));\n          setIsUpdating(false);\n          return false;\n        }\n      }).catch(() => {\n        setIsUpdating(false);\n        return false;\n      });\n    }\n  };\n\n  const getNotecatDataself = hotelrefno => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'notecat/dataself',\n      token: useToken,\n      params: {\n        hotelrefno: hotelrefno\n      }\n    }).then(response => {\n      if (response.status === 200 && response.data && response.data.data.res) {\n        return response.data.data.res;\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const getNotetypeData = hotelrefno => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'notetype/data',\n      token: useToken,\n      params: {\n        hotelrefno: hotelrefno\n      }\n    }).then(response => {\n      if (response.status === 200 && response.data && response.data.data.res) {\n        return response.data.data.res;\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const defNoteData = hotelrefno => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'ranote/def',\n      token: useToken,\n      params: {\n        hotelrefno: hotelrefno\n      }\n    }).then(response => {\n      if (response.status === 200 && response.data && response.data.data) {\n        return response.data.data;\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const setNoteData = (data, hotelrefno) => {\n    return Insert({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'ranote',\n      token: useToken,\n      params: {\n        hotelrefno: hotelrefno\n      },\n      data\n    }).then(response => {\n      return response.status === 200 && response.data && response.data.data;\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const handleRequestProfileInfoChange = async clientDataDifferences => {\n    let noteValue = '';\n    clientDataDifferences.map(item => noteValue += `${item.label}: ${item.oldval} >>> ${item.newval};;;`);\n    const noteCatDataselfId = await getNotecatDataself(useClientOrestState.hotelrefno);\n    const noteTypeDataId = await getNotetypeData(useClientOrestState.hotelrefno);\n    let getDefaultNote = await defNoteData(useClientOrestState.hotelrefno);\n    getDefaultNote.notecatid = noteCatDataselfId;\n    getDefaultNote.notetypeid = noteTypeDataId;\n    getDefaultNote.note = noteValue;\n    getDefaultNote.masterid = useClientOrestState.mid;\n    return await setNoteData(getDefaultNote, useClientOrestState.hotelrefno);\n  };\n\n  const isSignatureAvailable = async (code, mid) => {\n    return List({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.RAFILE,\n      token: useToken,\n      params: {\n        query: `code::${code},masterid::${mid}`,\n        limit: 1,\n        allhotels: true\n      }\n    }).then(rafileListResponse => {\n      var _rafileListResponse$d;\n\n      return rafileListResponse.status === 200 && (rafileListResponse === null || rafileListResponse === void 0 ? void 0 : (_rafileListResponse$d = rafileListResponse.data) === null || _rafileListResponse$d === void 0 ? void 0 : _rafileListResponse$d.data.length) > 0;\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const sendHotelNotifyMail = async changes => {\n    return await sendGuestChangeNotifyMail(isPrimaryGuest ? !(useClientReservation !== null && useClientReservation !== void 0 && useClientReservation.gid) : true, 'client', 'upd', useClientOrestState.id, isPrimaryGuest ? (useClientReservation === null || useClientReservation === void 0 ? void 0 : useClientReservation.gid) || useClientOrestState.gid : useClientOrestState.gid, {\n      roomno: isReservationStatusAccepted() && (usePrimaryClientReservation === null || usePrimaryClientReservation === void 0 ? void 0 : usePrimaryClientReservation.roomno) || '',\n      clientname: useClientOrestState.clientname || '',\n      reservno: isReservationStatusAccepted() && (usePrimaryClientReservation === null || usePrimaryClientReservation === void 0 ? void 0 : usePrimaryClientReservation.reservno) || '',\n      changes: JSON.stringify({\n        changeItems: changes\n      })\n    }, isPrimaryGuest ? (useClientReservation === null || useClientReservation === void 0 ? void 0 : useClientReservation.hotelrefno) || GENERAL_SETTINGS.HOTELREFNO : GENERAL_SETTINGS.HOTELREFNO);\n  };\n\n  const primaryGuestRequiredFieldCheck = async () => {\n    if (!usePrivacyTransactions.datapolicy.value || !usePrivacyTransactions.pref.value) {\n      enqueueSnackbar(t('str_pleaseCheckMandatoryFields'), {\n        variant: 'warning'\n      });\n      setIsUpdating(false);\n      return false;\n    }\n\n    let isRequiredFieldMistake = false;\n\n    const newUseClientInitialState = _objectSpread({}, useClientInitialState);\n\n    for (let key of Object.keys(newUseClientInitialState)) {\n      const getField = newUseClientInitialState[key];\n\n      if (getField.isBase && getField.isRequired && !getField.value || getField.isError) {\n        isRequiredFieldMistake = true;\n        newUseClientInitialState[key].isError = true;\n      }\n    }\n\n    if (useClientInitialState.signature.isRequired) {\n      const signatureAvailable = await isSignatureAvailable(useClientInitialState.signature.optionKey, useOtherGuestResname ? useOtherGuestResname[useClientInitialState.signature.defValKey] : useClientReservation[useClientInitialState.signature.defValKey]);\n\n      if (!signatureAvailable) {\n        isRequiredFieldMistake = true;\n        newUseClientInitialState[useClientInitialState.signature.key].isError = true;\n      }\n    }\n\n    if (isRequiredFieldMistake) {\n      enqueueSnackbar(t('str_pleaseCheckMandatoryFields'), {\n        variant: 'warning'\n      });\n      setUseClientInitialState(newUseClientInitialState);\n      setIsUpdating(false);\n      return false;\n    }\n\n    return true;\n  };\n\n  const getOtherGuestsClientIdList = reservno => {\n    return ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.RESNAME,\n      token: useToken,\n      params: {\n        query: `reservno:${reservno}`,\n        allhotels: true\n      }\n    }).then(resnameResponse => {\n      var _resnameResponse$data, _resnameResponse$data2;\n\n      if (resnameResponse.status === 200 && resnameResponse !== null && resnameResponse !== void 0 && (_resnameResponse$data = resnameResponse.data) !== null && _resnameResponse$data !== void 0 && _resnameResponse$data.data && (resnameResponse === null || resnameResponse === void 0 ? void 0 : (_resnameResponse$data2 = resnameResponse.data) === null || _resnameResponse$data2 === void 0 ? void 0 : _resnameResponse$data2.data.length) > 0) {\n        return resnameResponse.data.data.map(resname => resname.clientid);\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const getOtherGuestsClientList = otherGuestsClientIdList => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'client/view/list/get/id',\n      method: 'POST',\n      token: useToken,\n      params: {\n        allhotels: true\n      },\n      data: otherGuestsClientIdList\n    }).then(clientViewListGetIdResponse => {\n      var _clientViewListGetIdR;\n\n      if (clientViewListGetIdResponse.status === 200 && clientViewListGetIdResponse !== null && clientViewListGetIdResponse !== void 0 && (_clientViewListGetIdR = clientViewListGetIdResponse.data) !== null && _clientViewListGetIdR !== void 0 && _clientViewListGetIdR.data) {\n        return clientViewListGetIdResponse.data.data;\n      } else {\n        return false;\n      }\n    }).catch(() => {\n      return false;\n    });\n  };\n\n  const otherGuestRequiredFieldCheck = async numberOfOtherGuest => {\n    const otherGuestsClientIdList = await getOtherGuestsClientIdList(useClientReservation.reservno);\n    const otherGuestsClientList = await getOtherGuestsClientList(otherGuestsClientIdList);\n\n    if (GENERAL_SETTINGS.hotelSettings.ci_chkallcards && otherGuestsClientList && otherGuestsClientList.length !== numberOfOtherGuest) {\n      enqueueSnackbar(t('str_otherGuestsInformationIsMandatoryPleaseCheckOtherGuestInformationAndFillInTheRequiredFields'), {\n        variant: 'warning'\n      });\n      setIsOtherGuestsDialog(true);\n      return false;\n    }\n\n    let isRequiredFieldMistake = false;\n    otherGuestsClientList.map(otherGuest => {\n      if (!otherGuest.firstname || !otherGuest.lastname || !otherGuest.birthdate || !otherGuest.nationid || !otherGuest.idno && !otherGuest.tridno) {\n        isRequiredFieldMistake = true;\n      }\n    });\n\n    if (GENERAL_SETTINGS.hotelSettings.ci_chkallcards && isRequiredFieldMistake) {\n      enqueueSnackbar(t('str_otherGuestsInformationIsMandatoryPleaseCheckOtherGuestInformationAndFillInTheRequiredFields'), {\n        variant: 'warning'\n      });\n      setIsOtherGuestsDialog(true);\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleClientUpdate = async (showNotificationMessages = true) => {\n    setIsUpdating(true);\n    const getPrimaryGuestRequiredFieldCheck = await primaryGuestRequiredFieldCheck();\n\n    if (!getPrimaryGuestRequiredFieldCheck) {\n      return false;\n    }\n\n    const newClientData = helper.objectValueEqualizer({\n      obj1: useClientInitialState\n    });\n    const newClientDataDifferences = helper.objectDifferences({\n      obj1: newClientData,\n      obj2: useClientOrestState,\n      labelKeys: useClientInitialState,\n      translate: t,\n      langcode: GENERAL_SETTINGS.hotelLocalLangGCode\n    });\n\n    if (newClientDataDifferences.length > 0 || usePrivacyTransactions.pref.isUpdate || usePrivacyTransactions.datapolicy.isUpdate) {\n      if (GENERAL_SETTINGS.hotelSettings.profile_update || isEmpPortal) {\n        const isClientInfoUpdate = await clientInfoUpdate(newClientData, useClientOrestState.gid);\n\n        if (!isEmpPortal) {\n          if (useOtherGuestResname) {\n            await createClientLoginId(useClientOrestState.id);\n          }\n\n          if (useClientOrestState && useClientOrestState !== null && useClientOrestState !== void 0 && useClientOrestState.id) {\n            await sendHotelNotifyMail(newClientDataDifferences);\n          }\n        }\n\n        setUsePrivacyTransactions(_objectSpread(_objectSpread({}, usePrivacyTransactions), {}, {\n          datapolicy: _objectSpread(_objectSpread({}, usePrivacyTransactions.datapolicy), {}, {\n            isUpdate: false\n          }),\n          pref: _objectSpread(_objectSpread({}, usePrivacyTransactions.pref), {}, {\n            isUpdate: false\n          })\n        }));\n\n        if (isClientInfoUpdate) {\n          if (isPrimaryGuest) {\n            setOrestState([isEmpPortal ? 'emp' : 'client'], isClientInfoUpdate);\n          }\n\n          if (showNotificationMessages) {\n            enqueueSnackbar(t('str_clientInfoUpdateSuccess'), {\n              variant: 'success'\n            });\n          }\n\n          setIsUpdating(false);\n          return true;\n        } else {\n          if (showNotificationMessages) {\n            enqueueSnackbar(t('str_unexpectedProblem'), {\n              variant: 'warning'\n            });\n          }\n\n          setIsUpdating(false);\n          return false;\n        }\n      } else {\n        if (useClientOrestState && useClientOrestState.mid) {\n          const isRequestProfileInfoSave = await handleRequestProfileInfoChange(newClientDataDifferences);\n          await sendHotelNotifyMail(newClientDataDifferences);\n          setUsePrivacyTransactions(_objectSpread(_objectSpread({}, usePrivacyTransactions), {}, {\n            datapolicy: _objectSpread(_objectSpread({}, usePrivacyTransactions.datapolicy), {}, {\n              isUpdate: false\n            }),\n            pref: _objectSpread(_objectSpread({}, usePrivacyTransactions.pref), {}, {\n              isUpdate: false\n            })\n          }));\n\n          if (isRequestProfileInfoSave) {\n            if (showNotificationMessages) {\n              enqueueSnackbar(t('str_contactMailSendMsg'), {\n                variant: 'success'\n              });\n            }\n\n            setIsUpdating(false);\n            return true;\n          } else {\n            if (showNotificationMessages) {\n              enqueueSnackbar(t('str_unexpectedProblem'), {\n                variant: 'warning'\n              });\n            }\n\n            setIsUpdating(false);\n            return false;\n          }\n        } else {\n          enqueueSnackbar(t('str_clientRecordNotFound'), {\n            variant: 'warning'\n          });\n          setIsUpdating(false);\n          return true;\n        }\n      }\n    } else {\n      if (showNotificationMessages) {\n        enqueueSnackbar(t('str_noChangesYet'), {\n          variant: 'warning'\n        });\n      }\n\n      setIsUpdating(false);\n      return false;\n    }\n  };\n\n  const getNumberOfOtherGuest = useClientReservation => {\n    return Number(useClientReservation.totalpax + useClientReservation.totalchd - 1);\n  };\n\n  const handleCheckinConfirmationDialog = async () => {\n    if (isRoomSelectionPossible() && GENERAL_SETTINGS.hotelSettings.roomno) {\n      setIsRoomSelectionDialog(true);\n      enqueueSnackbar(t('str_youMustChooseARoomBeforeCheckIn'), {\n        variant: 'warning'\n      });\n      return false;\n    }\n\n    const numberOfOtherGuest = getNumberOfOtherGuest(useClientReservation);\n\n    if (numberOfOtherGuest > 0) {\n      const getPrimaryGuestRequiredFieldCheck = await primaryGuestRequiredFieldCheck();\n\n      if (!getPrimaryGuestRequiredFieldCheck) {\n        return false;\n      }\n\n      const getOtherGuestRequiredFieldCheck = await otherGuestRequiredFieldCheck(numberOfOtherGuest);\n\n      if (!getOtherGuestRequiredFieldCheck) {\n        return false;\n      }\n    }\n\n    await handleClientUpdate(false);\n    setIsCheckinConfirmationDialog(true);\n    return true;\n  };\n\n  const {\n    0: fieldGroupAccordionExpanded,\n    1: setFieldGroupAccordionExpanded\n  } = useState(false);\n\n  const handleFieldGroupAccordionChange = panel => (event, newExpanded) => {\n    setFieldGroupAccordionExpanded(newExpanded ? panel : false);\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 989,\n      columnNumber: 9\n    }\n  }, isPrimaryGuest && (isRoomSelectionPossible() || isReservationStatusAccepted()) ? __jsx(Grid, {\n    className: classesTabPanel.gridContainerToolbar,\n    container: true,\n    spacing: 1,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 991,\n      columnNumber: 17\n    }\n  }, isRoomSelectionPossible() ? __jsx(Grid, {\n    item: true,\n    style: {\n      marginRight: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 993,\n      columnNumber: 25\n    }\n  }, __jsx(Alert, {\n    style: {\n      padding: '0px 10px'\n    },\n    severity: \"info\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 994,\n      columnNumber: 29\n    }\n  }, isRoomSelectionPossible() && t('str_youMustChooseARoomBeforeCheckIn'))) : null, isRoomSelectionPossible() ? __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1000,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    className: classesTabPanel.proceedButton,\n    startIcon: __jsx(Icon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 44\n      }\n    }, \"meeting_room\"),\n    variant: \"outlined\",\n    disableElevation: true,\n    size: fieldOptions.size.button,\n    onClick: () => setIsRoomSelectionDialog(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1001,\n      columnNumber: 29\n    }\n  }, t('str_selectRoomToStay')), __jsx(RoomSelection, {\n    confirmClassName: classesTabPanel.proceedButton,\n    open: isRoomSelectionDialog,\n    onClose: () => setIsRoomSelectionDialog(false),\n    useClientOrestState: useClientOrestState,\n    useClientReservation: useClientReservation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1011,\n      columnNumber: 29\n    }\n  })) : null, isReservationStatusAccepted() && getNumberOfOtherGuest(useClientReservation) > 0 ? __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1020,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    startIcon: __jsx(Icon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1022,\n        columnNumber: 44\n      }\n    }, \"people\"),\n    variant: \"outlined\",\n    color: \"primary\",\n    disableElevation: true,\n    size: fieldOptions.size.button,\n    onClick: () => setIsOtherGuestsDialog(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1021,\n      columnNumber: 29\n    }\n  }, t('str_otherGuests')), __jsx(OtherGuests, {\n    confirmClassName: classesTabPanel.proceedButton,\n    open: isOtherGuestsDialog,\n    onClose: () => setIsOtherGuestsDialog(false),\n    useClientOrestState: useClientOrestState,\n    useClientReservation: useClientReservation,\n    otherGuestRequiredFieldCheck: otherGuestRequiredFieldCheck,\n    isCheckInPossible: isCheckInPossible(),\n    onCallBackCheckInButton: () => handleCheckinConfirmationDialog(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1031,\n      columnNumber: 29\n    }\n  })) : null) : null, fieldGroupAccordions.map((fieldGroupAccordion, i) => {\n    return __jsx(Accordion, {\n      key: i,\n      expanded: fieldGroupAccordion.defExpand || fieldGroupAccordion.key === fieldGroupAccordionExpanded,\n      onChange: handleFieldGroupAccordionChange(fieldGroupAccordion.key),\n      style: {\n        marginLeft: 8,\n        marginRight: 8\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1046,\n        columnNumber: 21\n      }\n    }, fieldGroupAccordion.label !== '' ? __jsx(AccordionSummary, {\n      style: {\n        borderBottom: '1px solid #ebebeba3'\n      },\n      expandIcon: !fieldGroupAccordion.defExpand ? __jsx(ExpandMoreIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 78\n        }\n      }) : null,\n      \"aria-controls\": `${fieldGroupAccordion.key}-content`,\n      id: `${fieldGroupAccordion.key}-header`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1056,\n        columnNumber: 29\n      }\n    }, __jsx(Typography, {\n      style: {\n        textAlign: 'left',\n        fontSize: 20,\n        fontWeight: 300,\n        color: '#2F3434',\n        lineHeight: 1.2,\n        paddingTop: 3\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1064,\n        columnNumber: 33\n      }\n    }, t(fieldGroupAccordion.label))) : null, __jsx(AccordionDetails, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1075,\n        columnNumber: 25\n      }\n    }, __jsx(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1076,\n        columnNumber: 29\n      }\n    }, fieldGroupArray.filter(fieldGroup => fieldGroup.accordionKey === fieldGroupAccordion.key).map((fieldGroup, keyIndex) => {\n      return __jsx(React.Fragment, {\n        key: keyIndex,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1079,\n          columnNumber: 41\n        }\n      }, fieldGroup.labelShow ? __jsx(TabHeader, {\n        title: t(fieldGroup.label),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1080,\n          columnNumber: 69\n        }\n      }) : null, __jsx(Grid, {\n        className: classesTabPanel.gridContainer,\n        container: true,\n        spacing: 2,\n        direction: \"row\",\n        justify: \"flex-start\",\n        alignItems: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1081,\n          columnNumber: 45\n        }\n      }, Object.keys(useClientInitialState).map((fieldItem, keyIndex) => {\n        const useField = useClientInitialState[fieldItem];\n        const useRequired = fieldGroup.key === useField.groupKey && useField.isVisible;\n\n        if (!useClientReservation && useRequired && !useField.isResRequired || useClientReservation && useRequired) {\n          return __jsx(Grid, {\n            item: true,\n            xs: useField.gridBreakpoints.xs,\n            sm: useField.gridBreakpoints.sm,\n            md: useField.gridBreakpoints.md,\n            key: keyIndex,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 61\n            }\n          }, getFormComponent(useField));\n        }\n      })));\n    }))));\n  }), __jsx(Grid, {\n    className: classesTabPanel.gridContainer,\n    container: true,\n    spacing: 1,\n    direction: \"row\",\n    justify: \"flex-start\",\n    alignItems: \"center\",\n    style: {\n      marginTop: 20,\n      marginLeft: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1102,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1103,\n      columnNumber: 17\n    }\n  }, __jsx(FrameCheckbox, {\n    disabled: isUpdating,\n    required: usePrivacyTransactions.datapolicy.isRequired,\n    value: usePrivacyTransactions.datapolicy.value,\n    title: \"str_privacyAndPersonalDataProtectionPolicies\",\n    linkText: \"str_iAcceptDataPolicy\",\n    linkTextADesc: \"str_privacyAndPersonalDataProtectionPolicies\",\n    iframePageUrl: GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strDataPolicy}?iframe=true`,\n    isCheck: e => setUsePrivacyTransactions(_objectSpread(_objectSpread({}, usePrivacyTransactions), {}, {\n      datapolicy: _objectSpread(_objectSpread({}, usePrivacyTransactions.datapolicy), {}, {\n        value: e,\n        isUpdate: true\n      })\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1104,\n      columnNumber: 21\n    }\n  })), !isEmpPortal && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1116,\n      columnNumber: 21\n    }\n  }, __jsx(FrameCheckbox, {\n    disabled: isUpdating,\n    required: usePrivacyTransactions.pref.isRequired,\n    value: usePrivacyTransactions.pref.value,\n    title: \"str_hygieneAndTravelPolicies\",\n    linkText: \"str_iAcceptTravelPolicy\",\n    linkTextADesc: \"str_hygieneAndTravelPolicies\",\n    ifamePageUrl: GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strTravelPolicy}?iframe=true`,\n    isCheck: e => setUsePrivacyTransactions(_objectSpread(_objectSpread({}, usePrivacyTransactions), {}, {\n      pref: _objectSpread(_objectSpread({}, usePrivacyTransactions.pref), {}, {\n        value: e,\n        isUpdate: true\n      })\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1117,\n      columnNumber: 25\n    }\n  }))), __jsx(Grid, {\n    className: classesTabPanel.gridContainerToolbar,\n    container: true,\n    spacing: 2,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1130,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1131,\n      columnNumber: 17\n    }\n  }, isPrimaryGuest && isCheckInPossible() ? __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1133,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    disabled: isUpdating || !isCheckInDay(),\n    className: classesTabPanel.proceedButton,\n    startIcon: __jsx(Icon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1137,\n        columnNumber: 44\n      }\n    }, \"done\"),\n    variant: \"outlined\",\n    disableElevation: true,\n    size: fieldOptions.size.button,\n    onClick: () => handleCheckinConfirmationDialog(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1134,\n      columnNumber: 29\n    }\n  }, t('str_proceedToCheckin')), __jsx(CheckInConfirmation, {\n    confirmClassName: classesTabPanel.proceedButton,\n    open: isCheckinConfirmationDialog,\n    onClose: () => setIsCheckinConfirmationDialog(false),\n    useClientOrestState: useClientOrestState,\n    useClientReservation: useClientReservation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1145,\n      columnNumber: 29\n    }\n  })) : __jsx(Button, {\n    disabled: isUpdating,\n    variant: \"contained\",\n    color: \"primary\",\n    disableElevation: true,\n    size: fieldOptions.size.button,\n    onClick: () => handleClientUpdate(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1152,\n      columnNumber: 35\n    }\n  }, __jsx(\"span\", {\n    style: {\n      paddingRight: '4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1152,\n      columnNumber: 187\n    }\n  }, isUpdating && __jsx(LoadingSpinner, {\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1152,\n      columnNumber: 238\n    }\n  })), t('str_update')))));\n};\n\nexport default ClientBase;","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/Details/ClientBase.js"],"names":["React","useContext","useEffect","useState","useSelector","global","helper","makeStyles","SelectAutoComplete","FileUploadAndShow","SignerPad","useTranslation","WebCmsGlobal","stylesTabPanel","required","emailValidation","mobileTelNoFormat","OREST_ENDPOINT","TRANSTYPES","PhoneInput","TabHeader","Button","Grid","Icon","TextField","Alert","DatePicker","LocalizationProvider","moment","MomentAdapter","fieldGroupAccordions","fieldGroups","otherGuestMandatoryFields","primaryGuestMandatoryFields","RoomSelection","CheckInConfirmation","OtherGuests","Insert","List","Patch","UseOrest","ViewList","useSnackbar","FrameCheckbox","sendGuestChangeNotifyMail","useOrestAction","fieldOptions","fieldTypes","employeeFieldGroups","employeeMandatoryFields","LoadingSpinner","useRouter","Accordion","AccordionSummary","AccordionDetails","Typography","ExpandMoreIcon","useStylesTabPanel","ClientBase","isPrimaryGuest","useClientInitialState","setUseClientInitialState","useClientOrestState","useClientReservation","usePrimaryClientReservation","isEmpPortal","router","t","classesTabPanel","GENERAL_SETTINGS","locale","fieldGroupArray","useHotelWorkDateTime","state","orest","hotelWorkDateTime","useToken","currentUser","auth","access_token","useOtherGuestResname","otherGuestResname","enqueueSnackbar","setOrestState","isInitialStateLoad","setIsInitialStateLoad","isUpdating","setIsUpdating","isCheckinConfirmationDialog","setIsCheckinConfirmationDialog","isRoomSelectionDialog","setIsRoomSelectionDialog","isOtherGuestsDialog","setIsOtherGuestsDialog","usePrivacyTransactions","setUsePrivacyTransactions","datapolicy","value","isRequired","isUpdate","pref","isEffect","newClientInitialState","objectMapper","getMandatoryFields","hotelSettings","ci_reqflds","ci_reqsign","signature","key","getEmOrTelFieldCheck","useMandatoryFields","profile_emortelok","query","telno","mobile","email","itemIndex","indexOf","splice","settMandatoryFields","defaultMandatoryFields","reg_birthdate","push","birthdate","getCiReqFlds","makeArrayWithComma","Array","isArray","Set","createClientLoginId","clientId","apiUrl","OREST_URL","endpoint","method","token","params","id","force","then","clientLoginIdResponse","status","data","catch","clientPatch","clientData","clientGid","EMPLOYEE","CLIENT","gid","hotelrefno","clientPatchResponse","clientView","allhotels","clientViewGetResponse","clientInfoUpdate","isClientPatch","getOnChangeValue","type","date","newValue","format","DATEFORMAT","isError","errorText","handleOnChangeCallBack","useData","maritalstatus","isVisible","defValKey","MARRIED","weddingdate","nationid","isActive","reqtrid","tridno","healthcode","reg_healthcode","idtypeid","idno","mobiletel","handleOnChange","isCallback","getFormComponent","field","trid","text","label","fullWidth","textField","size","variant","e","target","isVerifyRequired","handleOnVerify","undefined","select","selectApi","optionLabel","optionKey","trgValKey","trgQueryKey","trgValue","tel","dateFormatForView","props","upload","sign","isEmailExists","isPhoneExists","isTrIdValid","isCheckInDay","workdate","checkin","isRoomSelectionPossible","canroom","roomno","isReservationStatusAccepted","acceptedStatus","includes","isCheckInPossible","canci","ci_enable","val","response","res","String","length","getNotecatDataself","getNotetypeData","defNoteData","setNoteData","handleRequestProfileInfoChange","clientDataDifferences","noteValue","map","item","oldval","newval","noteCatDataselfId","noteTypeDataId","getDefaultNote","notecatid","notetypeid","note","masterid","mid","isSignatureAvailable","code","RAFILE","limit","rafileListResponse","sendHotelNotifyMail","changes","clientname","reservno","JSON","stringify","changeItems","HOTELREFNO","primaryGuestRequiredFieldCheck","isRequiredFieldMistake","newUseClientInitialState","Object","keys","getField","isBase","signatureAvailable","getOtherGuestsClientIdList","RESNAME","resnameResponse","resname","clientid","getOtherGuestsClientList","otherGuestsClientIdList","clientViewListGetIdResponse","otherGuestRequiredFieldCheck","numberOfOtherGuest","otherGuestsClientList","ci_chkallcards","otherGuest","firstname","lastname","handleClientUpdate","showNotificationMessages","getPrimaryGuestRequiredFieldCheck","newClientData","objectValueEqualizer","obj1","newClientDataDifferences","objectDifferences","obj2","labelKeys","translate","langcode","hotelLocalLangGCode","profile_update","isClientInfoUpdate","isRequestProfileInfoSave","getNumberOfOtherGuest","Number","totalpax","totalchd","handleCheckinConfirmationDialog","getOtherGuestRequiredFieldCheck","fieldGroupAccordionExpanded","setFieldGroupAccordionExpanded","handleFieldGroupAccordionChange","panel","event","newExpanded","gridContainerToolbar","marginRight","padding","proceedButton","button","fieldGroupAccordion","i","defExpand","marginLeft","borderBottom","textAlign","fontSize","fontWeight","color","lineHeight","paddingTop","filter","fieldGroup","accordionKey","keyIndex","labelShow","gridContainer","fieldItem","useField","useRequired","groupKey","isResRequired","gridBreakpoints","xs","sm","md","marginTop","BASE_URL","common","strDefShortLangCode","guestWeb","strDataPolicy","strTravelPolicy","paddingRight"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAO,KAAKC,MAAZ,MAAwB,iBAAxB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AACA,OAAOC,iBAAP,MAA8B,sCAA9B;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,cAAP,MAA2B,uCAA3B;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,eAAT,EAA0BC,iBAA1B,EAA6CC,cAA7C,EAA6DC,UAA7D,QAA+E,uBAA/E;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,SAAP,MAAsB,wCAAtB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,IAAvB,EAA6BC,SAA7B,QAA8C,mBAA9C;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAASC,UAAT,EAAqBC,oBAArB,QAAiD,sBAAjD;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,oBAAT,EAA+BC,WAA/B,EAA4CC,yBAA5C,EAAuEC,2BAAvE,QAA0G,sBAA1G;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,KAAvB,EAA8BC,QAA9B,EAAwCC,QAAxC,QAAwD,eAAxD;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,SAASC,yBAAT,QAA0C,gBAA1C;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,yBAAzC;AACA,SAASC,mBAAT,EAA8BC,uBAA9B,QAA6D,4CAA7D;AACA,OAAOC,cAAP,MAA2B,2BAA3B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AAGA,MAAMC,iBAAiB,GAAGlD,UAAU,CAACM,cAAc,EAAf,CAApC;;AAEA,MAAM6C,UAAU,GAAG,CAAC;AAAEC,EAAAA,cAAF;AAAkBC,EAAAA,qBAAlB;AAAyCC,EAAAA,wBAAzC;AAAmEC,EAAAA,mBAAnE;AAAwFC,EAAAA,oBAAxF;AAA8GC,EAAAA,2BAA9G;AAA2IC,EAAAA;AAA3I,CAAD,KAA6J;AAC5K,QAAMC,MAAM,GAAGf,SAAS,EAAxB;AACA,QAAM;AAAEgB,IAAAA;AAAF,MAAQxD,cAAc,EAA5B;AACA,QAAMyD,eAAe,GAAGX,iBAAiB,EAAzC;AACA,QAAM;AAAEY,IAAAA,gBAAF;AAAoBC,IAAAA;AAApB,MAA+BrE,UAAU,CAACW,YAAD,CAA/C;AACA,QAAM2D,eAAe,GAAGN,WAAW,GAAGjB,mBAAH,GAAyBjB,WAA5D;AAEA,QAAMyC,oBAAoB,GAAGpE,WAAW,CAAEqE,KAAD;AAAA;;AAAA,WAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,4BAAAA,KAAK,CAAEC,KAAP,oFAAcD,KAAd,0EAAqBE,iBAArB,KAA0C,KAArD;AAAA,GAAD,CAAxC;AACA,QAAMC,QAAQ,GAAGxE,WAAW,CAAEqE,KAAD;AAAA;;AAAA,WAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,6BAAAA,KAAK,CAAEC,KAAP,yFAAcG,WAAd,gFAA2BC,IAA3B,CAAgCC,YAAhC,KAAgD,KAA3D;AAAA,GAAD,CAA5B;AACA,QAAMC,oBAAoB,GAAG5E,WAAW,CAAEqE,KAAD;AAAA;;AAAA,WAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,6BAAAA,KAAK,CAAEC,KAAP,yFAAcG,WAAd,gFAA2BI,iBAA3B,KAAgD,KAA3D;AAAA,GAAD,CAAxC;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAsBxC,WAAW,EAAvC;AACA,QAAM;AAAEyC,IAAAA;AAAF,MAAoBtC,cAAc,EAAxC,CAX4K,CAa5K;;AACA,QAAM;AAAA,OAACuC,kBAAD;AAAA,OAAqBC;AAArB,MAA8ClF,QAAQ,CAAC,KAAD,CAA5D;AACA,QAAM;AAAA,OAACmF,UAAD;AAAA,OAAaC;AAAb,MAA8BpF,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM;AAAA,OAACqF,2BAAD;AAAA,OAA8BC;AAA9B,MAAgEtF,QAAQ,CAAC,KAAD,CAA9E;AACA,QAAM;AAAA,OAACuF,qBAAD;AAAA,OAAwBC;AAAxB,MAAoDxF,QAAQ,CAAC,KAAD,CAAlE;AACA,QAAM;AAAA,OAACyF,mBAAD;AAAA,OAAsBC;AAAtB,MAAgD1F,QAAQ,CAAC,KAAD,CAA9D;AACA,QAAM;AAAA,OAAC2F,sBAAD;AAAA,OAAyBC;AAAzB,MAAsD5F,QAAQ,CAAC;AACjE6F,IAAAA,UAAU,EAAE;AACRC,MAAAA,KAAK,EAAEtC,cAAc,IAAI,CAACqB,oBADlB;AAERkB,MAAAA,UAAU,EAAE,IAFJ;AAGRC,MAAAA,QAAQ,EAAE;AAHF,KADqD;AAMjEC,IAAAA,IAAI,EAAE;AACFH,MAAAA,KAAK,EAAEtC,cAAc,IAAI,CAACqB,oBADxB;AAEFkB,MAAAA,UAAU,EAAE,IAFV;AAGFC,MAAAA,QAAQ,EAAE;AAHR;AAN2D,GAAD,CAApE;AAaAjG,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAImG,QAAQ,GAAG,IAAf;;AACA,QAAIA,QAAQ,IAAIvC,mBAAZ,IAAmC,CAACsB,kBAAxC,EAA4D;AACxD,YAAMkB,qBAAqB,GAAGhG,MAAM,CAACiG,YAAP,CAAoB3C,qBAApB,EAA2CE,mBAA3C,EAAgE0C,kBAAkB,CAACnC,gBAAgB,CAACoC,aAAjB,CAA+BC,UAAhC,CAAlF,CAA9B;AACA7C,MAAAA,wBAAwB,CAACyC,qBAAD,CAAxB;AACAjB,MAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAE,MAAAA,aAAa,CAAC,KAAD,CAAb;AACH;;AAED,WAAO,MAAM;AACTc,MAAAA,QAAQ,GAAG,KAAX;AACH,KAFD;AAGH,GAZQ,EAYN,CAACvC,mBAAD,CAZM,CAAT;AAcA5D,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACZ,QAAImG,QAAQ,GAAG,IAAf;;AAEA,QAAIA,QAAQ,IAAIjB,kBAAZ,IAAkCf,gBAAlC,aAAkCA,gBAAlC,wCAAkCA,gBAAgB,CAAEoC,aAApD,kDAAkC,sBAAiCE,UAAnE,KAAkF5C,oBAAoB,IAAIiB,oBAA1G,CAAJ,EAAqI;AACjInB,MAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,SAACA,qBAAqB,CAACgD,SAAtB,CAAgCC,GAAjC,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACgD,SAAtB,CAAgCC,GAAjC,CAD5B;AAEIX,UAAAA,UAAU,EAAE;AAFhB;AAFoB,SAAxB;AAOH;;AAED,WAAO,MAAM;AACTG,MAAAA,QAAQ,GAAG,KAAX;AACH,KAFD;AAGH,GAhBQ,EAgBN,CAACjB,kBAAD,CAhBM,CAAT;;AAkBA,QAAM0B,oBAAoB,GAAIC,kBAAD,IAAwB;AAAA;;AACjD,QAAI1C,gBAAJ,aAAIA,gBAAJ,yCAAIA,gBAAgB,CAAEoC,aAAtB,mDAAI,uBAAiCO,iBAArC,EAAwD;AAAA;;AACpD,UAAI,CAAC9C,MAAM,SAAN,IAAAA,MAAM,WAAN,qBAAAA,MAAM,CAAE+C,KAAR,wDAAeC,KAAf,IAAwBhD,MAAxB,aAAwBA,MAAxB,iCAAwBA,MAAM,CAAE+C,KAAhC,2CAAwB,eAAeE,MAAxC,KAAmD,EAACjD,MAAD,aAACA,MAAD,iCAACA,MAAM,CAAE+C,KAAT,2CAAC,eAAeG,KAAhB,CAAvD,EAA8E;AAC1E,cAAMC,SAAS,GAAGN,kBAAkB,CAACO,OAAnB,CAA2B,OAA3B,CAAlB;;AACA,YAAID,SAAS,IAAI,CAAjB,EAAoB;AAChBN,UAAAA,kBAAkB,CAACQ,MAAnB,CAA0BF,SAA1B,EAAqC,CAArC;AACH;AACJ,OALD,MAKO,IAAInD,MAAM,SAAN,IAAAA,MAAM,WAAN,sBAAAA,MAAM,CAAE+C,KAAR,0DAAeG,KAAf,IAAyB,EAAClD,MAAD,aAACA,MAAD,iCAACA,MAAM,CAAE+C,KAAT,2CAAC,eAAeC,KAAhB,KAAyB,EAAChD,MAAD,aAACA,MAAD,iCAACA,MAAM,CAAE+C,KAAT,2CAAC,eAAeE,MAAhB,CAAtD,EAA+E;AAClF,cAAME,SAAS,GAAGN,kBAAkB,CAACO,OAAnB,CAA2B,WAA3B,CAAlB;;AACA,YAAID,SAAS,IAAI,CAAjB,EAAoB;AAChBN,UAAAA,kBAAkB,CAACQ,MAAnB,CAA0BF,SAA1B,EAAqC,CAArC;AACH;AACJ;AACJ;;AAED,WAAON,kBAAP;AACH,GAhBD;;AAkBA,QAAMP,kBAAkB,GAAIgB,mBAAD,IAAyB;AAAA;;AAChD,QAAIC,sBAAsB,GAAG,CAAC9D,cAAD,IAAmBqB,oBAAnB,GAA0ChD,yBAA1C,GAAsEiC,WAAW,GAAGhB,uBAAH,GAA6BhB,2BAA3I;;AACA,QAAIoC,gBAAJ,aAAIA,gBAAJ,yCAAIA,gBAAgB,CAAEoC,aAAtB,mDAAI,uBAAiCiB,aAArC,EAAoD;AAChDD,MAAAA,sBAAsB,CAACE,IAAvB,CAA4B/D,qBAAqB,CAACgE,SAAtB,CAAgCf,GAA5D;AACH;;AAED,QAAIW,mBAAJ,EAAyB;AACrB,YAAMK,YAAY,GAAGvH,MAAM,CAACwH,kBAAP,CAA0BN,mBAA1B,CAArB;;AACA,UAAIO,KAAK,CAACC,OAAN,CAAcH,YAAd,CAAJ,EAAiC;AAC7BJ,QAAAA,sBAAsB,GAAG,CAAC,GAAG,IAAIQ,GAAJ,CAAQ,CAAC,GAAGR,sBAAJ,EAA4B,GAAGI,YAA/B,CAAR,CAAJ,CAAzB;AACA,eAAOf,oBAAoB,CAACW,sBAAD,CAA3B;AACH,OAHD,MAGO;AACH,eAAOX,oBAAoB,CAACW,sBAAD,CAA3B;AACH;AACJ,KARD,MAQO;AACH,aAAOX,oBAAoB,CAACW,sBAAD,CAA3B;AACH;AACJ,GAjBD;;AAmBA,QAAMS,mBAAmB,GAAIC,QAAD,IAAc;AACtC,WAAO3F,QAAQ,CAAC;AACZ4F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAE,gBAFE;AAGZC,MAAAA,MAAM,EAAE,KAHI;AAIZC,MAAAA,KAAK,EAAE5D,QAJK;AAKZ6D,MAAAA,MAAM,EAAE;AACJC,QAAAA,EAAE,EAAEP,QADA;AAEJ/B,QAAAA,IAAI,EAAE,IAFF;AAGJJ,QAAAA,UAAU,EAAE,IAHR;AAIJ2C,QAAAA,KAAK,EAAE;AAJH;AALI,KAAD,CAAR,CAWJC,IAXI,CAWEC,qBAAD,IAA2B;AAAA;;AAC/B,aAAO,CAAC,EAAEA,qBAAqB,CAACC,MAAtB,KAAiC,GAAjC,IAAwCD,qBAAxC,aAAwCA,qBAAxC,wCAAwCA,qBAAqB,CAAEE,IAA/D,kDAAwC,sBAA6BA,IAAvE,CAAR;AACH,KAbM,EAaJC,KAbI,CAaE,MAAM;AACX,aAAO,KAAP;AACH,KAfM,CAAP;AAgBH,GAjBD;;AAmBA,QAAMC,WAAW,GAAG,CAACC,UAAD,EAAaC,SAAb,KAA2B;AAC3C,WAAO5G,KAAK,CAAC;AACT6F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADhB;AAETC,MAAAA,QAAQ,EAAErE,WAAW,GAAGhD,cAAc,CAACmI,QAAlB,GAA8BnI,cAAc,CAACoI,MAFzD;AAGTb,MAAAA,KAAK,EAAE5D,QAHE;AAIT0E,MAAAA,GAAG,EAAEH,SAJI;AAKTV,MAAAA,MAAM,EAAE;AACJc,QAAAA,UAAU,EAAEzF,mBAAmB,CAACyF;AAD5B,OALC;AAQTR,MAAAA,IAAI,EAAEG;AARG,KAAD,CAAL,CASJN,IATI,CASEY,mBAAD,IAAyB;AAAA;;AAC7B,UAAIA,mBAAmB,CAACV,MAApB,KAA+B,GAA/B,IAAsCU,mBAAtC,aAAsCA,mBAAtC,wCAAsCA,mBAAmB,CAAET,IAA3D,kDAAsC,sBAA2BA,IAArE,EAA2E;AACvE,eAAOS,mBAAmB,CAACT,IAApB,CAAyBA,IAAhC;AACH,OAFD,MAEK;AACD,eAAO,KAAP;AACH;AACJ,KAfM,EAeJC,KAfI,CAeE,MAAM;AACX,aAAO,KAAP;AACH,KAjBM,CAAP;AAkBH,GAnBD;;AAqBA,QAAMS,UAAU,GAAIR,WAAD,IAAiB;AAChC,WAAOzG,QAAQ,CAAC;AACZ4F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAErE,WAAW,GAAG,mBAAH,GAAyB,iBAFlC;AAGZuE,MAAAA,KAAK,EAAE5D,QAHK;AAIZ6D,MAAAA,MAAM,EAAE;AACJa,QAAAA,GAAG,EAAEL,WAAW,CAACK,GADb;AAEJI,QAAAA,SAAS,EAAE;AAFP;AAJI,KAAD,CAAR,CAQJd,IARI,CAQEe,qBAAD,IAA2B;AAAA;;AAC/B,UAAIA,qBAAqB,CAACb,MAAtB,KAAiC,GAAjC,IAAwCa,qBAAxC,aAAwCA,qBAAxC,wCAAwCA,qBAAqB,CAAEZ,IAA/D,kDAAwC,sBAA6BA,IAAzE,EAA+E;AAC3E,eAAOY,qBAAqB,CAACZ,IAAtB,CAA2BA,IAAlC;AACH,OAFD,MAEK;AACD,eAAO,KAAP;AACH;AACJ,KAdM,EAcJC,KAdI,CAcE,MAAM;AACX,aAAO,KAAP;AACH,KAhBM,CAAP;AAiBH,GAlBD;;AAoBA,QAAMY,gBAAgB,GAAG,OAAOV,UAAP,EAAmBC,SAAnB,KAAiC;AACtD,UAAMU,aAAa,GAAG,MAAMZ,WAAW,CAACC,UAAD,EAAaC,SAAb,CAAvC;;AACA,QAAGU,aAAa,IAAIlG,cAApB,EAAmC;AAC/B,aAAO,MAAM8F,UAAU,CAACI,aAAD,CAAvB;AACH,KAFD,MAEM,OAAO,CAAC,CAACA,aAAT;AACT,GALD;;AAOA,QAAMC,gBAAgB,GAAG,CAACC,IAAD,EAAO9D,KAAP,EAAcC,UAAd,KAA6B;AAClD,YAAQ6D,IAAR;AACI,WAAKhH,UAAU,CAACiH,IAAhB;AACI,cAAMC,QAAQ,GAAGrI,MAAM,CAACqE,KAAD,CAAN,CAAciE,MAAd,CAAqBjJ,cAAc,CAACkJ,UAApC,CAAjB;AACA,eAAO;AACHlE,UAAAA,KAAK,EAAEgE,QADJ;AAEHG,UAAAA,OAAO,EAAEH,QAAQ,KAAK,cAFnB;AAGHI,UAAAA,SAAS,EAAEJ,QAAQ,KAAK,cAAb,GAA+B,IAAG9F,CAAC,CAAC,iBAAD,CAAoB,EAAvD,GAA2D,KAHnE;AAIH+B,UAAAA,UAAU,EAAEA;AAJT,SAAP;;AAMJ;AACI,eAAO;AACHD,UAAAA,KAAK,EAAEA,KADJ;AAEHmE,UAAAA,OAAO,EAAElE,UAAU,IAAI,CAAC,CAACpF,QAAQ,CAACmF,KAAD,CAF9B;AAGHoE,UAAAA,SAAS,EAAEnE,UAAU,IAAI,CAAC,CAACpF,QAAQ,CAACmF,KAAD,CAHhC;AAIHC,UAAAA,UAAU,EAAEA;AAJT,SAAP;AAVR;AAiBH,GAlBD;;AAoBA,QAAMoE,sBAAsB,GAAG,CAACzD,GAAD,EAAM0D,OAAN,KAAkB;AAAA;;AAC7C,YAAQ1D,GAAR;AACI,WAAKjD,qBAAqB,CAAC4G,aAAtB,CAAoC3D,GAAzC;AACI,cAAM4D,SAAS,GAAG,CAAC,EAAEF,OAAO,SAAP,IAAAA,OAAO,WAAP,IAAAA,OAAO,CAAEtE,KAAT,IAAkB,CAAAsE,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEtE,KAAT,CAAerC,qBAAqB,CAAC4G,aAAtB,CAAoCE,SAAnD,OAAkExJ,UAAU,CAACyJ,OAAjG,CAAnB;AACA9G,QAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,WAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIZ,YAAAA,KAAK,EAAEsE,OAAO,CAACtE,KAFnB;AAGImE,YAAAA,OAAO,EAAEG,OAAO,CAACH,OAHrB;AAIIlE,YAAAA,UAAU,EAAEqE,OAAO,CAACrE,UAJxB;AAKImE,YAAAA,SAAS,EAAEE,OAAO,CAACF;AALvB,YAFoB;AASpB,WAACzG,qBAAqB,CAACgH,WAAtB,CAAkC/D,GAAnC,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACgH,WAAtB,CAAkC/D,GAAnC,CAD5B;AAEI4D,YAAAA,SAAS,EAAEA;AAFf;AAToB,WAAxB;AAcD,eAAO,IAAP;;AACH,WAAK7G,qBAAqB,CAACiH,QAAtB,CAA+BhE,GAApC;AACI,cAAMiE,QAAQ,GAAG,CAAC,EAAEP,OAAO,SAAP,IAAAA,OAAO,WAAP,IAAAA,OAAO,CAAEtE,KAAT,IAAkBsE,OAAlB,aAAkBA,OAAlB,iCAAkBA,OAAO,CAAEtE,KAA3B,2CAAkB,eAAgB8E,OAApC,CAAlB;AACAlH,QAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,WAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIZ,YAAAA,KAAK,EAAEsE,OAAO,CAACtE,KAFnB;AAGImE,YAAAA,OAAO,EAAEG,OAAO,CAACH,OAHrB;AAIIlE,YAAAA,UAAU,EAAEqE,OAAO,CAACrE,UAJxB;AAKImE,YAAAA,SAAS,EAAEE,OAAO,CAACF;AALvB,YAFoB;AASpB,WAACzG,qBAAqB,CAACoH,MAAtB,CAA6BnE,GAA9B,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACoH,MAAtB,CAA6BnE,GAA9B,CAD5B;AAEI4D,YAAAA,SAAS,EAAEK,QAFf;AAGI5E,YAAAA,UAAU,EAAE4E,QAAQ,IAAIlH,qBAAqB,CAACiH,QAAtB,CAA+B3E;AAH3D,YAToB;AAcpB,WAACtC,qBAAqB,CAACqH,UAAtB,CAAiCpE,GAAlC,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACqH,UAAtB,CAAiCpE,GAAlC,CAD5B;AAEI4D,YAAAA,SAAS,EAAEK,QAFf;AAGI5E,YAAAA,UAAU,EAAE4E,QAAQ,IAAIzG,gBAAgB,CAACoC,aAAjB,CAA+ByE;AAH3D,YAdoB;AAmBpB,WAACtH,qBAAqB,CAACuH,QAAtB,CAA+BtE,GAAhC,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACuH,QAAtB,CAA+BtE,GAAhC,CAD5B;AAEI4D,YAAAA,SAAS,EAAE,CAACK,QAFhB;AAGI5E,YAAAA,UAAU,EAAE,CAAC4E,QAAD,IAAalH,qBAAqB,CAACiH,QAAtB,CAA+B3E;AAH5D,YAnBoB;AAwBpB,WAACtC,qBAAqB,CAACwH,IAAtB,CAA2BvE,GAA5B,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACwH,IAAtB,CAA2BvE,GAA5B,CAD5B;AAEI4D,YAAAA,SAAS,EAAE,CAACK,QAFhB;AAGI5E,YAAAA,UAAU,EAAE,CAAC4E,QAAD,IAAalH,qBAAqB,CAACiH,QAAtB,CAA+B3E;AAH5D;AAxBoB,WAAxB;AA8BA,eAAO,IAAP;;AACJ,WAAKtC,qBAAqB,CAACwD,KAAtB,CAA4BP,GAAjC;AACIhD,QAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,WAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIZ,YAAAA,KAAK,EAAEsE,OAAO,CAACtE,KAFnB;AAGImE,YAAAA,OAAO,EAAEG,OAAO,CAACH,OAHrB;AAIIC,YAAAA,SAAS,EAAEE,OAAO,CAACF;AAJvB,YAFoB;AAQpB,WAACzG,qBAAqB,CAACyH,SAAtB,CAAgCxE,GAAjC,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACyH,SAAtB,CAAgCxE,GAAjC,CAD5B;AAEIuD,YAAAA,OAAO,EAAE,KAFb;AAGIC,YAAAA,SAAS,EAAE,EAHf;AAIInE,YAAAA,UAAU,EAAE,CAAClB,oBAAD,IAAyBX,gBAAgB,CAACoC,aAAjB,CAA+BO,iBAAxD,GAA4E,CAACuD,OAAO,CAACtE,KAArF,GAA6FrC,qBAAqB,CAACyH,SAAtB,CAAgCnF;AAJ7I;AARoB,WAAxB;AAeA,eAAO,IAAP;;AACJ,WAAKtC,qBAAqB,CAACyH,SAAtB,CAAgCxE,GAArC;AACIhD,QAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,WAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIZ,YAAAA,KAAK,EAAEsE,OAAO,CAACtE,KAFnB;AAGImE,YAAAA,OAAO,EAAEG,OAAO,CAACH,OAHrB;AAIIC,YAAAA,SAAS,EAAEE,OAAO,CAACF;AAJvB,YAFoB;AAQpB,WAACzG,qBAAqB,CAACwD,KAAtB,CAA4BP,GAA7B,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACwD,KAAtB,CAA4BP,GAA7B,CAD5B;AAEIuD,YAAAA,OAAO,EAAE,KAFb;AAGIC,YAAAA,SAAS,EAAE,EAHf;AAIInE,YAAAA,UAAU,EAAE,CAAClB,oBAAD,IAAyBX,gBAAgB,CAACoC,aAAjB,CAA+BO,iBAAxD,GAA4E,CAACuD,OAAO,CAACtE,KAArF,GAA6FrC,qBAAqB,CAACwD,KAAtB,CAA4BlB;AAJzI;AARoB,WAAxB;AAeA,eAAO,IAAP;;AACJ;AACI,eAAO,KAAP;AAtFR;AAwFH,GAzFD;;AA2FA,QAAMoF,cAAc,GAAG,CAACzE,GAAD,EAAMZ,KAAN,EAAa8D,IAAI,GAAG,MAApB,KAA+B;AAClD,UAAMQ,OAAO,GAAGT,gBAAgB,CAACC,IAAD,EAAO9D,KAAP,EAAcrC,qBAAqB,CAACiD,GAAD,CAArB,CAA2BX,UAAzC,CAAhC;AACA,UAAMqF,UAAU,GAAGjB,sBAAsB,CAACzD,GAAD,EAAM0D,OAAN,CAAzC;;AACA,QAAG,CAACgB,UAAJ,EAAe;AACX1H,MAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,SAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIZ,UAAAA,KAAK,EAAEsE,OAAO,CAACtE,KAFnB;AAGImE,UAAAA,OAAO,EAAEG,OAAO,CAACH,OAHrB;AAIIlE,UAAAA,UAAU,EAAEqE,OAAO,CAACrE,UAJxB;AAKImE,UAAAA,SAAS,EAAEE,OAAO,CAACF;AALvB;AAFoB,SAAxB;AAUH;AACJ,GAfD;;AAiBA,QAAMmB,gBAAgB,GAAIC,KAAD,IAAW;AAChC,YAAQA,KAAK,CAAC1B,IAAd;AACI,WAAKhH,UAAU,CAAC2I,IAAhB;AACA,WAAK3I,UAAU,CAACqE,KAAhB;AACA,WAAKrE,UAAU,CAAC4I,IAAhB;AACI,eACI,MAAC,SAAD;AACI,UAAA,EAAE,EAAEF,KAAK,CAAC5E,GADd;AAEI,UAAA,IAAI,EAAE4E,KAAK,CAAC5E,GAFhB;AAGI,UAAA,KAAK,EAAE1C,CAAC,CAACsH,KAAK,CAACG,KAAP,CAHZ;AAII,UAAA,QAAQ,EAAEH,KAAK,CAACvF,UAJpB;AAKI,UAAA,QAAQ,EAAEZ,UALd;AAMI,UAAA,SAAS,EAAExC,YAAY,CAAC+I,SAAb,CAAuBC,SANtC;AAOI,UAAA,IAAI,EAAEhJ,YAAY,CAACiJ,IAAb,CAAkBD,SAP5B;AAQI,UAAA,OAAO,EAAEhJ,YAAY,CAACkJ,OAAb,CAAqBF,SARlC;AASI,UAAA,KAAK,EAAEL,KAAK,CAACxF,KATjB;AAUI,UAAA,QAAQ,EAAGgG,CAAD,IAAOX,cAAc,CAACG,KAAK,CAAC5E,GAAP,EAAYoF,CAAC,CAACC,MAAF,CAASjG,KAArB,CAVnC;AAWI,UAAA,KAAK,EAAEwF,KAAK,CAACrB,OAXjB;AAYI,UAAA,UAAU,EAAEqB,KAAK,CAACrB,OAAN,IAAiBqB,KAAK,CAACpB,SAZvC;AAaI,UAAA,MAAM,EAAEoB,KAAK,CAACU,gBAAN,GAAyB,MAAMC,cAAc,CAACX,KAAK,CAAC5E,GAAP,EAAY4E,KAAK,CAACxF,KAAlB,EAAyBwF,KAAK,CAAC1B,IAA/B,CAA7C,GAAoFsC,SAbhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;;AAiBJ,WAAKtJ,UAAU,CAACuJ,MAAhB;AACI,eACI,MAAC,kBAAD;AACI,UAAA,QAAQ,EAAEb,KAAK,CAACvF,UADpB;AAEI,UAAA,KAAK,EAAE/B,CAAC,CAACsH,KAAK,CAACG,KAAP,CAFZ;AAGI,UAAA,kBAAkB,EAAExG,kBAHxB;AAII,UAAA,QAAQ,EAAEE,UAJd;AAKI,UAAA,EAAE,EAAEmG,KAAK,CAAC5E,GALd;AAMI,UAAA,IAAI,EAAE4E,KAAK,CAAC5E,GANhB;AAOI,UAAA,SAAS,EAAE4E,KAAK,CAACc,SAPrB;AAQI,UAAA,KAAK,EAAEd,KAAK,CAACxF,KARjB;AASI,UAAA,KAAK,EAAEwF,KAAK,CAACrB,OATjB;AAUI,UAAA,OAAO,EAAEtH,YAAY,CAACkJ,OAAb,CAAqBF,SAVlC;AAWI,UAAA,UAAU,EAAG7B,QAAD,IAAcqB,cAAc,CAACG,KAAK,CAAC5E,GAAP,EAAYoD,QAAZ,CAX5C;AAYI,UAAA,QAAQ,EAAGA,QAAD,IAAcqB,cAAc,CAACG,KAAK,CAAC5E,GAAP,EAAYoD,QAAZ,CAZ1C;AAaI,UAAA,WAAW,EAAEwB,KAAK,CAACe,WAbvB;AAcI,UAAA,SAAS,EAAEf,KAAK,CAACgB,SAdrB;AAeI,UAAA,SAAS,EAAEhB,KAAK,CAACf,SAfrB;AAgBI,UAAA,QAAQ,EAAEe,KAAK,CAACf,SAAN,IAAmBe,KAAK,CAACxF,KAAzB,IAAkC,KAhBhD;AAiBI,UAAA,SAAS,EAAEwF,KAAK,CAACiB,SAjBrB;AAkBI,UAAA,WAAW,EAAEjB,KAAK,CAACkB,WAlBvB;AAmBI,UAAA,QAAQ,EAAElB,KAAK,CAACmB,QAAN,IAAkBhJ,qBAAqB,CAAC6H,KAAK,CAACmB,QAAP,CAArB,CAAsC3G,KAAxD,IAAiE,KAnB/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;;AAuBJ,WAAKlD,UAAU,CAAC8J,GAAhB;AACI,eACI,MAAC,UAAD;AACI,UAAA,cAAc,EAAEvI,MAAM,KAAK,IAAX,GAAkB,IAAlB,GAAwBA,MAD5C;AAEI,UAAA,kBAAkB,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,CAFxB;AAGI,UAAA,OAAO,EAAE,CAAC,SAAD,EAAY,QAAZ,EAAsB,MAAtB,EAA8B,SAA9B,EAAyC,QAAzC,CAHb;AAII,UAAA,EAAE,EAAEmH,KAAK,CAAC5E,GAJd;AAKI,UAAA,IAAI,EAAE4E,KAAK,CAAC5E,GALhB;AAMI,UAAA,KAAK,EAAE1C,CAAC,CAACsH,KAAK,CAACG,KAAP,CANZ;AAOI,UAAA,QAAQ,EAAEH,KAAK,CAACvF,UAPpB;AAQI,UAAA,QAAQ,EAAEZ,UARd;AASI,UAAA,SAAS,EAAExC,YAAY,CAAC+I,SAAb,CAAuBC,SATtC;AAUI,UAAA,IAAI,EAAEhJ,YAAY,CAACiJ,IAAb,CAAkBD,SAV5B;AAWI,UAAA,OAAO,EAAEhJ,YAAY,CAACkJ,OAAb,CAAqBF,SAXlC;AAYI,UAAA,KAAK,EAAEL,KAAK,CAACxF,KAZjB;AAaI,UAAA,QAAQ,EAAGgE,QAAD,IAAcqB,cAAc,CAACG,KAAK,CAAC5E,GAAP,EAAYoD,QAAZ,CAb1C;AAcI,UAAA,KAAK,EAAEwB,KAAK,CAACrB,OAdjB;AAeI,UAAA,UAAU,EAAEqB,KAAK,CAACrB,OAAN,IAAiBqB,KAAK,CAACpB,SAfvC;AAgBI,UAAA,MAAM,EAAEoB,KAAK,CAACU,gBAAN,GAAyB,MAAMC,cAAc,CAACX,KAAK,CAAC5E,GAAP,EAAY4E,KAAK,CAACxF,KAAlB,EAAyBwF,KAAK,CAAC1B,IAA/B,CAA7C,GAAoFsC,SAhBhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;;AAoBJ,WAAKtJ,UAAU,CAACiH,IAAhB;AACI,eACI,MAAC,oBAAD;AAAsB,UAAA,eAAe,EAAEpI,MAAvC;AAA+C,UAAA,WAAW,EAAEC,aAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,MAAC,UAAD;AACI,UAAA,QAAQ,EAAE4J,KAAK,CAACvF,UADpB;AAEI,UAAA,oBAAoB,MAFxB;AAGI,UAAA,QAAQ,EAAEZ,UAHd;AAII,UAAA,MAAM,MAJV;AAKI,UAAA,EAAE,EAAEmG,KAAK,CAAC5E,GALd;AAMI,UAAA,IAAI,EAAE4E,KAAK,CAAC5E,GANhB;AAOI,UAAA,KAAK,EAAE1C,CAAC,CAACsH,KAAK,CAACG,KAAP,CAPZ;AAQI,UAAA,WAAW,EAAE9I,YAAY,CAACgK,iBAR9B;AASI,UAAA,aAAa,MATjB;AAUI,UAAA,MAAM,EAAE,MAVZ;AAWI,UAAA,KAAK,EAAE,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,CAXX;AAYI,UAAA,KAAK,EAAErB,KAAK,CAACxF,KAAN,IAAerE,MAAM,EAZhC;AAaI,UAAA,QAAQ,EAAGqI,QAAD,IAAcqB,cAAc,CAACG,KAAK,CAAC5E,GAAP,EAAYoD,QAAZ,EAAsBwB,KAAK,CAAC1B,IAA5B,CAb1C;AAcI,UAAA,WAAW,EAAGgD,KAAD,IAAW;AACpB,mBACI,MAAC,SAAD,eACQA,KADR;AAEI,cAAA,SAAS,EAAEjK,YAAY,CAAC+I,SAAb,CAAuBC,SAFtC;AAGI,cAAA,IAAI,EAAEhJ,YAAY,CAACiJ,IAAb,CAAkBD,SAH5B;AAII,cAAA,OAAO,EAAEhJ,YAAY,CAACkJ,OAAb,CAAqBF,SAJlC;AAKI,cAAA,QAAQ,EAAEL,KAAK,CAACvF,UALpB;AAMI,cAAA,KAAK,EAAEuF,KAAK,CAACrB,OANjB;AAOI,cAAA,UAAU,EAAEqB,KAAK,CAACrB,OAAN,IAAiBqB,KAAK,CAACpB,SAPvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ;AAWH,WA1BL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADJ;;AAgCJ,WAAKtH,UAAU,CAACiK,MAAhB;AACI,eACI,MAAC,iBAAD;AACI,UAAA,EAAE,EAAEvB,KAAK,CAAC5E,GADd;AAEI,UAAA,IAAI,EAAE4E,KAAK,CAAC5E,GAFhB;AAGI,UAAA,KAAK,EAAE1C,CAAC,CAACsH,KAAK,CAACG,KAAP,CAHZ;AAII,UAAA,QAAQ,EAAEH,KAAK,CAACvF,UAJpB;AAKI,UAAA,QAAQ,EAAE,CAACpC,mBAAD,IAAwBwB,UAAxB,IAAsC,CAACxB,mBAAmB,CAAC4E,EALzE;AAMI,UAAA,SAAS,EAAE5F,YAAY,CAAC+I,SAAb,CAAuBC,SANtC;AAOI,UAAA,IAAI,EAAEhJ,YAAY,CAACiJ,IAAb,CAAkBD,SAP5B;AAQI,UAAA,OAAO,EAAEhJ,YAAY,CAACkJ,OAAb,CAAqBF,SARlC;AASI,UAAA,KAAK,EAAEL,KAAK,CAACrB,OATjB;AAUI,UAAA,UAAU,EAAEqB,KAAK,CAACrB,OAAN,IAAiBqB,KAAK,CAACpB,SAVvC;AAWI,UAAA,SAAS,EAAEoB,KAAK,CAACgB,SAXrB;AAYI,UAAA,SAAS,EAAEhB,KAAK,CAACf,SAZrB;AAaI,UAAA,QAAQ,EAAEe,KAAK,CAACf,SAAN,IAAmB5G,mBAAmB,CAAC2H,KAAK,CAACf,SAAP,CAbpD;AAcI,UAAA,WAAW,EAAEe,KAAK,CAACf,SAAN,IAAmB5G,mBAAmB,CAAC2H,KAAK,CAACkB,WAAP,CAdvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;;AAkBJ,WAAK5J,UAAU,CAACkK,IAAhB;AACI,eACI,MAAC,SAAD;AACI,UAAA,EAAE,EAAExB,KAAK,CAAC5E,GADd;AAEI,UAAA,IAAI,EAAE4E,KAAK,CAAC5E,GAFhB;AAGI,UAAA,KAAK,EAAE1C,CAAC,CAACsH,KAAK,CAACG,KAAP,CAHZ;AAII,UAAA,QAAQ,EAAEH,KAAK,CAACvF,UAJpB;AAKI,UAAA,QAAQ,EAAEZ,UALd;AAMI,UAAA,SAAS,EAAExC,YAAY,CAAC+I,SAAb,CAAuBC,SANtC;AAOI,UAAA,IAAI,EAAEhJ,YAAY,CAACiJ,IAAb,CAAkBD,SAP5B;AAQI,UAAA,OAAO,EAAEhJ,YAAY,CAACkJ,OAAb,CAAqBF,SARlC;AASI,UAAA,KAAK,EAAEL,KAAK,CAACrB,OATjB;AAUI,UAAA,UAAU,EAAEqB,KAAK,CAACrB,OAAN,IAAiBqB,KAAK,CAACpB,SAVvC;AAWI,UAAA,WAAW,EAAEoB,KAAK,CAACe,WAXvB;AAYI,UAAA,SAAS,EAAEf,KAAK,CAACgB,SAZrB;AAaI,UAAA,SAAS,EAAEhB,KAAK,CAACf,SAbrB;AAcI,UAAA,QAAQ,EAAEe,KAAK,CAACf,SAAN,IAAmB1F,oBAAnB,GAA0CA,oBAAoB,CAACyG,KAAK,CAACf,SAAP,CAA9D,GAAkF3G,oBAAoB,CAAC0H,KAAK,CAACf,SAAP,CAdpH;AAeI,UAAA,WAAW,EAAEe,KAAK,CAACf,SAAN,IAAmB1F,oBAAnB,GAA0CA,oBAAoB,CAACyG,KAAK,CAACkB,WAAP,CAA9D,GAAoF5I,oBAAoB,CAAC0H,KAAK,CAACkB,WAAP,CAfzH;AAgBI,UAAA,gBAAgB,EAAE,MAAK;AACnB9I,YAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,eAACA,qBAAqB,CAACgD,SAAtB,CAAgCC,GAAjC,mCACOjD,qBAAqB,CAACA,qBAAqB,CAACgD,SAAtB,CAAgCC,GAAjC,CAD5B;AAEIuD,gBAAAA,OAAO,EAAE,KAFb;AAGIC,gBAAAA,SAAS,EAAE;AAHf;AAFoB,eAAxB;AAQH,WAzBL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;;AA6BJ;AACI;AArJR;AAuJH,GAxJD;;AA0JA,QAAM+B,cAAc,GAAG,CAACvF,GAAD,EAAMZ,KAAN,EAAa8D,IAAb,KAAsB;AACzC,YAAQA,IAAR;AACI,WAAKhH,UAAU,CAACqE,KAAhB;AACI8F,QAAAA,aAAa,CAACrG,GAAD,EAAMZ,KAAN,CAAb;AACA;;AACJ,WAAKlD,UAAU,CAAC8J,GAAhB;AACIM,QAAAA,aAAa,CAACtG,GAAD,EAAMZ,KAAN,CAAb;AACA;;AACJ,WAAKlD,UAAU,CAAC2I,IAAhB;AACI0B,QAAAA,WAAW,CAACvG,GAAD,EAAMZ,KAAN,CAAX;AACA;;AACJ;AACI,eAAO,KAAP;AAXR;AAaH,GAdD;;AAgBA,QAAMoH,YAAY,GAAG,MAAK;AACtB,WAAO,CAACrI,oBAAD,IAAyBjB,oBAAzB,IAAiDS,oBAAoB,CAAC8I,QAArB,KAAkCvJ,oBAAoB,CAACwJ,OAA/G;AACH,GAFD;;AAIA,QAAMC,uBAAuB,GAAG,MAAM;AAClC,WAAO,CAACxI,oBAAD,IAAyBjB,oBAAzB,IAAiDA,oBAAoB,CAAC0J,OAAtE,IAAiF,CAAC1J,oBAAoB,CAAC2J,MAAvG,IAAiHrJ,gBAAgB,CAACoC,aAAjB,CAA+BiH,MAAvJ;AACH,GAFD;;AAIA,QAAMC,2BAA2B,GAAG,MAAM;AACtC,UAAMC,cAAc,GAAG,CAAC,GAAD,EAAM,GAAN,CAAvB;AACA,WAAO,CAAC5I,oBAAD,IAAyBhB,2BAAzB,IAAwD4J,cAAc,CAACC,QAAf,CAAwB7J,2BAA2B,CAAC8E,MAApD,CAA/D;AACH,GAHD;;AAKA,QAAMgF,iBAAiB,GAAG,MAAM;AAC5B,QAAG/J,oBAAoB,IAAI,CAACA,oBAAoB,CAAC0J,OAA9C,IAAyDpJ,gBAAgB,CAACoC,aAAjB,CAA+BiH,MAA3F,EAAkG;AAC9F,aAAO,KAAP;AACH;;AACD,WAAO,CAAC1I,oBAAD,IAAyBjB,oBAAzB,IAAiDA,oBAAoB,CAACgK,KAAtE,IAA+EV,YAAY,EAA3F,IAAiGhJ,gBAAgB,CAACoC,aAAjB,CAA+BuH,SAAvI;AACH,GALD;;AAOA,QAAMd,aAAa,GAAG,CAACrG,GAAD,EAAMoH,GAAN,KAAc;AAChC,QAAIA,GAAJ,EAAS;AACL,UAAGlN,eAAe,CAACkN,GAAD,CAAlB,EAAwB;AACpB1I,QAAAA,aAAa,CAAC,IAAD,CAAb;AACA/C,QAAAA,QAAQ,CAAC;AACL4F,UAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADpB;AAELC,UAAAA,QAAQ,EAAE,qBAFL;AAGLE,UAAAA,KAAK,EAAE5D,QAHF;AAIL6D,UAAAA,MAAM,EAAE;AACJrB,YAAAA,KAAK,EAAE6G,GADH;AAEJvE,YAAAA,SAAS,EAAE;AAFP;AAJH,SAAD,CAAR,CAQGd,IARH,CAQSsF,QAAD,IAAc;AAAA;;AAClB,cAAIA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAA3B,aAA2BA,QAA3B,iCAA2BA,QAAQ,CAAEnF,IAArC,kEAA2B,eAAgBA,IAA3C,gDAA2B,oBAAsBoF,GAArD,EAA0D;AACtD,gBAAI,CAAArK,mBAAmB,SAAnB,IAAAA,mBAAmB,WAAnB,YAAAA,mBAAmB,CAAE4E,EAArB,MAA4BwF,QAAQ,CAACnF,IAAT,CAAcA,IAAd,CAAmBL,EAAnD,EAAuD;AACnD7E,cAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,iBAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIuD,kBAAAA,OAAO,EAAE,IAFb;AAGIC,kBAAAA,SAAS,EAAElG,CAAC,CAAC,uBAAD;AAHhB;AAFoB,iBAAxB;AAQH;;AACDoB,YAAAA,aAAa,CAAC,KAAD,CAAb;AACA,mBAAO,IAAP;AACH,WAbD,MAaO;AACHA,YAAAA,aAAa,CAAC,KAAD,CAAb;AACA,mBAAO,KAAP;AACH;AACJ,SA1BD,EA0BGyD,KA1BH,CA0BS,MAAM;AACXzD,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,KAAP;AACH,SA7BD;AA8BH,OAhCD,MAgCK;AACD1B,QAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,WAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIuD,YAAAA,OAAO,EAAE,IAFb;AAGIC,YAAAA,SAAS,EAAElG,CAAC,CAAC,kBAAD;AAHhB;AAFoB,WAAxB;AAQH;AACJ;AACJ,GA7CD;;AA+CA,QAAMgJ,aAAa,GAAG,CAACtG,GAAD,EAAMoH,GAAN,KAAc;AAChC,QAAGG,MAAM,CAACH,GAAD,CAAN,CAAYI,MAAZ,GAAqB,CAAxB,EAA0B;AACtB9I,MAAAA,aAAa,CAAC,IAAD,CAAb;AACA/C,MAAAA,QAAQ,CAAC;AACL4F,QAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADpB;AAELC,QAAAA,QAAQ,EAAE,qBAFL;AAGLE,QAAAA,KAAK,EAAE5D,QAHF;AAIL6D,QAAAA,MAAM,EAAE;AACJoE,UAAAA,GAAG,EAAE7L,iBAAiB,CAACiN,GAAD,CADlB;AAEJvE,UAAAA,SAAS,EAAE;AAFP;AAJH,OAAD,CAAR,CAQGd,IARH,CAQSsF,QAAD,IAAc;AAAA;;AAClB,YAAIA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAA3B,aAA2BA,QAA3B,kCAA2BA,QAAQ,CAAEnF,IAArC,oEAA2B,gBAAgBA,IAA3C,iDAA2B,qBAAsBoF,GAArD,EAA0D;AACtD,cAAG,CAAArK,mBAAmB,SAAnB,IAAAA,mBAAmB,WAAnB,YAAAA,mBAAmB,CAAE4E,EAArB,MAA4BwF,QAAQ,CAACnF,IAAT,CAAcA,IAAd,CAAmBL,EAAlD,EAAqD;AACjD7E,YAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,eAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIuD,gBAAAA,OAAO,EAAE,IAFb;AAGIC,gBAAAA,SAAS,EAAElG,CAAC,CAAC,wBAAD;AAHhB;AAFoB,eAAxB;AAQH;;AACDoB,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,IAAP;AACH,SAbD,MAaO;AACHA,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,KAAP;AACH;AACJ,OA1BD,EA0BGyD,KA1BH,CA0BS,MAAM;AACXzD,QAAAA,aAAa,CAAC,KAAD,CAAb;AACA,eAAO,KAAP;AACH,OA7BD;AA8BH;AACJ,GAlCD;;AAoCA,QAAM6H,WAAW,GAAG,CAACvG,GAAD,EAAMoH,GAAN,KAAc;AAC9B,QAAGA,GAAH,EAAO;AACH1I,MAAAA,aAAa,CAAC,IAAD,CAAb;AACA/C,MAAAA,QAAQ,CAAC;AACL4F,QAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADpB;AAELC,QAAAA,QAAQ,EAAE,uBAFL;AAGLE,QAAAA,KAAK,EAAE5D,QAHF;AAIL6D,QAAAA,MAAM,EAAE;AACJ2C,UAAAA,IAAI,EAAE6C,GADF;AAEJvE,UAAAA,SAAS,EAAE;AAFP;AAJH,OAAD,CAAR,CAQGd,IARH,CAQSsF,QAAD,IAAc;AAAA;;AAClB,YAAIA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAA3B,aAA2BA,QAA3B,kCAA2BA,QAAQ,CAAEnF,IAArC,oEAA2B,gBAAgBA,IAA3C,iDAA2B,qBAAsBoF,GAArD,EAA0D;AACtD5I,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,IAAP;AACH,SAHD,MAGO;AACH1B,UAAAA,wBAAwB,iCACjBD,qBADiB;AAEpB,aAACiD,GAAD,mCACOjD,qBAAqB,CAACiD,GAAD,CAD5B;AAEIuD,cAAAA,OAAO,EAAE,IAFb;AAGIC,cAAAA,SAAS,EAAElG,CAAC,CAAC,6BAAD;AAHhB;AAFoB,aAAxB;AAQAoB,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,KAAP;AACH;AACJ,OAxBD,EAwBGyD,KAxBH,CAwBS,MAAM;AACXzD,QAAAA,aAAa,CAAC,KAAD,CAAb;AACA,eAAO,KAAP;AACH,OA3BD;AA4BH;AACJ,GAhCD;;AAkCA,QAAM+I,kBAAkB,GAAI/E,UAAD,IAAgB;AACvC,WAAO/G,QAAQ,CAAC;AACZ4F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAE,kBAFE;AAGZE,MAAAA,KAAK,EAAE5D,QAHK;AAIZ6D,MAAAA,MAAM,EAAE;AACJc,QAAAA,UAAU,EAAEA;AADR;AAJI,KAAD,CAAR,CAOJX,IAPI,CAOEsF,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAAQ,CAACnF,IAApC,IAA4CmF,QAAQ,CAACnF,IAAT,CAAcA,IAAd,CAAmBoF,GAAnE,EAAwE;AACpE,eAAOD,QAAQ,CAACnF,IAAT,CAAcA,IAAd,CAAmBoF,GAA1B;AACH,OAFD,MAEO;AACH,eAAO,KAAP;AACH;AACJ,KAbM,EAaJnF,KAbI,CAaE,MAAM;AACX,aAAO,KAAP;AACH,KAfM,CAAP;AAgBH,GAjBD;;AAmBA,QAAMuF,eAAe,GAAIhF,UAAD,IAAgB;AACpC,WAAO/G,QAAQ,CAAC;AACZ4F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAE,eAFE;AAGZE,MAAAA,KAAK,EAAE5D,QAHK;AAIZ6D,MAAAA,MAAM,EAAE;AACJc,QAAAA,UAAU,EAAEA;AADR;AAJI,KAAD,CAAR,CAOJX,IAPI,CAOEsF,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAAQ,CAACnF,IAApC,IAA4CmF,QAAQ,CAACnF,IAAT,CAAcA,IAAd,CAAmBoF,GAAnE,EAAwE;AACpE,eAAOD,QAAQ,CAACnF,IAAT,CAAcA,IAAd,CAAmBoF,GAA1B;AACH,OAFD,MAEO;AACH,eAAO,KAAP;AACH;AACJ,KAbM,EAaJnF,KAbI,CAaE,MAAM;AACX,aAAO,KAAP;AACH,KAfM,CAAP;AAgBH,GAjBD;;AAmBA,QAAMwF,WAAW,GAAIjF,UAAD,IAAgB;AAChC,WAAO/G,QAAQ,CAAC;AACZ4F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAE,YAFE;AAGZE,MAAAA,KAAK,EAAE5D,QAHK;AAIZ6D,MAAAA,MAAM,EAAE;AACJc,QAAAA,UAAU,EAAEA;AADR;AAJI,KAAD,CAAR,CAOJX,IAPI,CAOEsF,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAAQ,CAACnF,IAApC,IAA4CmF,QAAQ,CAACnF,IAAT,CAAcA,IAA9D,EAAoE;AAChE,eAAOmF,QAAQ,CAACnF,IAAT,CAAcA,IAArB;AACH,OAFD,MAEO;AACH,eAAO,KAAP;AACH;AACJ,KAbM,EAaJC,KAbI,CAaE,MAAM;AACX,aAAO,KAAP;AACH,KAfM,CAAP;AAgBH,GAjBD;;AAmBA,QAAMyF,WAAW,GAAG,CAAC1F,IAAD,EAAOQ,UAAP,KAAsB;AACtC,WAAOlH,MAAM,CAAC;AACV+F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADf;AAEVC,MAAAA,QAAQ,EAAE,QAFA;AAGVE,MAAAA,KAAK,EAAE5D,QAHG;AAIV6D,MAAAA,MAAM,EAAE;AACJc,QAAAA,UAAU,EAAEA;AADR,OAJE;AAOVR,MAAAA;AAPU,KAAD,CAAN,CAQJH,IARI,CAQEsF,QAAD,IAAc;AAClB,aAAOA,QAAQ,CAACpF,MAAT,KAAoB,GAApB,IAA2BoF,QAAQ,CAACnF,IAApC,IAA4CmF,QAAQ,CAACnF,IAAT,CAAcA,IAAjE;AACH,KAVM,EAUJC,KAVI,CAUE,MAAM;AACX,aAAO,KAAP;AACH,KAZM,CAAP;AAaH,GAdD;;AAgBA,QAAM0F,8BAA8B,GAAG,MAAOC,qBAAP,IAAiC;AACpE,QAAIC,SAAS,GAAG,EAAhB;AACAD,IAAAA,qBAAqB,CAACE,GAAtB,CAA2BC,IAAD,IAAUF,SAAS,IAAK,GAAEE,IAAI,CAAClD,KAAM,KAAIkD,IAAI,CAACC,MAAO,QAAOD,IAAI,CAACE,MAAO,KAAlG;AAEA,UAAMC,iBAAiB,GAAG,MAAMX,kBAAkB,CAACxK,mBAAmB,CAACyF,UAArB,CAAlD;AACA,UAAM2F,cAAc,GAAG,MAAMX,eAAe,CAACzK,mBAAmB,CAACyF,UAArB,CAA5C;AAEA,QAAI4F,cAAc,GAAG,MAAMX,WAAW,CAAC1K,mBAAmB,CAACyF,UAArB,CAAtC;AACA4F,IAAAA,cAAc,CAACC,SAAf,GAA2BH,iBAA3B;AACAE,IAAAA,cAAc,CAACE,UAAf,GAA4BH,cAA5B;AACAC,IAAAA,cAAc,CAACG,IAAf,GAAsBV,SAAtB;AACAO,IAAAA,cAAc,CAACI,QAAf,GAA0BzL,mBAAmB,CAAC0L,GAA9C;AAEA,WAAO,MAAMf,WAAW,CAACU,cAAD,EAAiBrL,mBAAmB,CAACyF,UAArC,CAAxB;AACH,GAdD;;AAgBA,QAAMkG,oBAAoB,GAAG,OAAOC,IAAP,EAAaF,GAAb,KAAqB;AAC9C,WAAOlN,IAAI,CAAC;AACR8F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADjB;AAERC,MAAAA,QAAQ,EAAErH,cAAc,CAAC0O,MAFjB;AAGRnH,MAAAA,KAAK,EAAE5D,QAHC;AAIR6D,MAAAA,MAAM,EAAE;AACJxB,QAAAA,KAAK,EAAG,SAAQyI,IAAK,cAAaF,GAAI,EADlC;AAEJI,QAAAA,KAAK,EAAE,CAFH;AAGJlG,QAAAA,SAAS,EAAE;AAHP;AAJA,KAAD,CAAJ,CASJd,IATI,CASEiH,kBAAD,IAAwB;AAAA;;AAC5B,aAAOA,kBAAkB,CAAC/G,MAAnB,KAA8B,GAA9B,IAAqC,CAAA+G,kBAAkB,SAAlB,IAAAA,kBAAkB,WAAlB,qCAAAA,kBAAkB,CAAE9G,IAApB,gFAA0BA,IAA1B,CAA+BsF,MAA/B,IAAwC,CAApF;AACH,KAXM,EAWJrF,KAXI,CAWE,MAAM;AACX,aAAO,KAAP;AACH,KAbM,CAAP;AAcH,GAfD;;AAiBA,QAAM8G,mBAAmB,GAAG,MAAOC,OAAP,IAAmB;AAC3C,WAAO,MAAMnN,yBAAyB,CAClCe,cAAc,GAAG,EAACI,oBAAD,aAACA,oBAAD,eAACA,oBAAoB,CAAEuF,GAAvB,CAAH,GAAgC,IADZ,EAElC,QAFkC,EAGlC,KAHkC,EAIlCxF,mBAAmB,CAAC4E,EAJc,EAKlC/E,cAAc,GAAG,CAAAI,oBAAoB,SAApB,IAAAA,oBAAoB,WAApB,YAAAA,oBAAoB,CAAEuF,GAAtB,KAA6BxF,mBAAmB,CAACwF,GAApD,GAA0DxF,mBAAmB,CAACwF,GAL1D,EAMlC;AACIoE,MAAAA,MAAM,EAAEC,2BAA2B,OAAM3J,2BAAN,aAAMA,2BAAN,uBAAMA,2BAA2B,CAAE0J,MAAnC,CAA3B,IAAwE,EADpF;AAEIsC,MAAAA,UAAU,EAAElM,mBAAmB,CAACkM,UAApB,IAAkC,EAFlD;AAGIC,MAAAA,QAAQ,EAAEtC,2BAA2B,OAAM3J,2BAAN,aAAMA,2BAAN,uBAAMA,2BAA2B,CAAEiM,QAAnC,CAA3B,IAA0E,EAHxF;AAIIF,MAAAA,OAAO,EAAEG,IAAI,CAACC,SAAL,CAAe;AAAEC,QAAAA,WAAW,EAAEL;AAAf,OAAf;AAJb,KANkC,EAYlCpM,cAAc,GAAG,CAAAI,oBAAoB,SAApB,IAAAA,oBAAoB,WAApB,YAAAA,oBAAoB,CAAEwF,UAAtB,KAAoClF,gBAAgB,CAACgM,UAAxD,GAAqEhM,gBAAgB,CAACgM,UAZlE,CAAtC;AAcH,GAfD;;AAiBA,QAAMC,8BAA8B,GAAG,YAAY;AAC/C,QAAG,CAACxK,sBAAsB,CAACE,UAAvB,CAAkCC,KAAnC,IAA4C,CAACH,sBAAsB,CAACM,IAAvB,CAA4BH,KAA5E,EAAkF;AAC9Ef,MAAAA,eAAe,CAACf,CAAC,CAAC,gCAAD,CAAF,EAAsC;AAAE6H,QAAAA,OAAO,EAAE;AAAX,OAAtC,CAAf;AACAzG,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,aAAO,KAAP;AACH;;AAED,QAAIgL,sBAAsB,GAAG,KAA7B;;AACA,UAAMC,wBAAwB,qBAAO5M,qBAAP,CAA9B;;AAEA,SAAK,IAAIiD,GAAT,IAAgB4J,MAAM,CAACC,IAAP,CAAYF,wBAAZ,CAAhB,EAAuD;AACnD,YAAMG,QAAQ,GAAGH,wBAAwB,CAAC3J,GAAD,CAAzC;;AACA,UAAI8J,QAAQ,CAACC,MAAT,IAAmBD,QAAQ,CAACzK,UAA5B,IAA0C,CAACyK,QAAQ,CAAC1K,KAApD,IAA6D0K,QAAQ,CAACvG,OAA1E,EAAmF;AAC/EmG,QAAAA,sBAAsB,GAAG,IAAzB;AACAC,QAAAA,wBAAwB,CAAC3J,GAAD,CAAxB,CAA8BuD,OAA9B,GAAwC,IAAxC;AACH;AACJ;;AAED,QAAIxG,qBAAqB,CAACgD,SAAtB,CAAgCV,UAApC,EAAgD;AAC5C,YAAM2K,kBAAkB,GAAG,MAAMpB,oBAAoB,CAAC7L,qBAAqB,CAACgD,SAAtB,CAAgC6F,SAAjC,EAA6CzH,oBAAoB,GAAGA,oBAAoB,CAACpB,qBAAqB,CAACgD,SAAtB,CAAgC8D,SAAjC,CAAvB,GAAqE3G,oBAAoB,CAACH,qBAAqB,CAACgD,SAAtB,CAAgC8D,SAAjC,CAA1J,CAArD;;AACA,UAAI,CAACmG,kBAAL,EAAyB;AACrBN,QAAAA,sBAAsB,GAAG,IAAzB;AACAC,QAAAA,wBAAwB,CAAC5M,qBAAqB,CAACgD,SAAtB,CAAgCC,GAAjC,CAAxB,CAA8DuD,OAA9D,GAAwE,IAAxE;AACH;AACJ;;AAED,QAAGmG,sBAAH,EAA0B;AACtBrL,MAAAA,eAAe,CAACf,CAAC,CAAC,gCAAD,CAAF,EAAsC;AAAE6H,QAAAA,OAAO,EAAE;AAAX,OAAtC,CAAf;AACAnI,MAAAA,wBAAwB,CAAC2M,wBAAD,CAAxB;AACAjL,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,aAAO,KAAP;AACH;;AAED,WAAO,IAAP;AACH,GAlCD;;AAoCA,QAAMuL,0BAA0B,GAAIb,QAAD,IAAc;AAC7C,WAAOxN,QAAQ,CAAC;AACZ2F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAErH,cAAc,CAAC8P,OAFb;AAGZvI,MAAAA,KAAK,EAAE5D,QAHK;AAIZ6D,MAAAA,MAAM,EAAE;AACJxB,QAAAA,KAAK,EAAG,YAAWgJ,QAAS,EADxB;AAEJvG,QAAAA,SAAS,EAAE;AAFP;AAJI,KAAD,CAAR,CAQJd,IARI,CAQEoI,eAAD,IAAqB;AAAA;;AACzB,UAAIA,eAAe,CAAClI,MAAhB,KAA2B,GAA3B,IAAkCkI,eAAlC,aAAkCA,eAAlC,wCAAkCA,eAAe,CAAEjI,IAAnD,kDAAkC,sBAAuBA,IAAzD,IAAiE,CAAAiI,eAAe,SAAf,IAAAA,eAAe,WAAf,sCAAAA,eAAe,CAAEjI,IAAjB,kFAAuBA,IAAvB,CAA4BsF,MAA5B,IAAqC,CAA1G,EAA6G;AACzG,eAAO2C,eAAe,CAACjI,IAAhB,CAAqBA,IAArB,CAA0B8F,GAA1B,CAA+BoC,OAAD,IAAaA,OAAO,CAACC,QAAnD,CAAP;AACH,OAFD,MAEO;AACH,eAAO,KAAP;AACH;AACJ,KAdM,EAcJlI,KAdI,CAcE,MAAM;AACX,aAAO,KAAP;AACH,KAhBM,CAAP;AAiBH,GAlBD;;AAoBA,QAAMmI,wBAAwB,GAAIC,uBAAD,IAA6B;AAC1D,WAAO5O,QAAQ,CAAC;AACZ4F,MAAAA,MAAM,EAAE/D,gBAAgB,CAACgE,SADb;AAEZC,MAAAA,QAAQ,EAAE,yBAFE;AAGZC,MAAAA,MAAM,EAAE,MAHI;AAIZC,MAAAA,KAAK,EAAE5D,QAJK;AAKZ6D,MAAAA,MAAM,EAAE;AACJiB,QAAAA,SAAS,EAAE;AADP,OALI;AAQZX,MAAAA,IAAI,EAAEqI;AARM,KAAD,CAAR,CASJxI,IATI,CASEyI,2BAAD,IAAiC;AAAA;;AACrC,UAAIA,2BAA2B,CAACvI,MAA5B,KAAuC,GAAvC,IAA8CuI,2BAA9C,aAA8CA,2BAA9C,wCAA8CA,2BAA2B,CAAEtI,IAA3E,kDAA8C,sBAAmCA,IAArF,EAA2F;AACvF,eAAOsI,2BAA2B,CAACtI,IAA5B,CAAiCA,IAAxC;AACH,OAFD,MAEO;AACH,eAAO,KAAP;AACH;AACJ,KAfM,EAeJC,KAfI,CAeE,MAAM;AACX,aAAO,KAAP;AACH,KAjBM,CAAP;AAkBH,GAnBD;;AAqBA,QAAMsI,4BAA4B,GAAG,MAAOC,kBAAP,IAA8B;AAC/D,UAAMH,uBAAuB,GAAG,MAAMN,0BAA0B,CAAC/M,oBAAoB,CAACkM,QAAtB,CAAhE;AACA,UAAMuB,qBAAqB,GAAG,MAAML,wBAAwB,CAACC,uBAAD,CAA5D;;AAEA,QAAI/M,gBAAgB,CAACoC,aAAjB,CAA+BgL,cAA/B,IAAiDD,qBAAjD,IAA0EA,qBAAqB,CAACnD,MAAtB,KAAiCkD,kBAA/G,EAAmI;AAC/HrM,MAAAA,eAAe,CAACf,CAAC,CAAC,iGAAD,CAAF,EAAuG;AAAE6H,QAAAA,OAAO,EAAE;AAAX,OAAvG,CAAf;AACAnG,MAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACA,aAAO,KAAP;AACH;;AAED,QAAI0K,sBAAsB,GAAG,KAA7B;AACAiB,IAAAA,qBAAqB,CAAC3C,GAAtB,CAA2B6C,UAAD,IAAgB;AACtC,UAAI,CAACA,UAAU,CAACC,SAAZ,IAAyB,CAACD,UAAU,CAACE,QAArC,IAAiD,CAACF,UAAU,CAAC9J,SAA7D,IAA0E,CAAC8J,UAAU,CAAC7G,QAAtF,IAAkG,CAAC6G,UAAU,CAACtG,IAAZ,IAAoB,CAACsG,UAAU,CAAC1G,MAAtI,EAA8I;AAC1IuF,QAAAA,sBAAsB,GAAG,IAAzB;AACH;AACJ,KAJD;;AAMA,QAAIlM,gBAAgB,CAACoC,aAAjB,CAA+BgL,cAA/B,IAAiDlB,sBAArD,EAA6E;AACzErL,MAAAA,eAAe,CAACf,CAAC,CAAC,iGAAD,CAAF,EAAuG;AAAE6H,QAAAA,OAAO,EAAE;AAAX,OAAvG,CAAf;AACAnG,MAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACA,aAAO,KAAP;AACH;;AAED,WAAO,IAAP;AACH,GAxBD;;AA0BA,QAAMgM,kBAAkB,GAAG,OAAOC,wBAAwB,GAAG,IAAlC,KAA2C;AAClEvM,IAAAA,aAAa,CAAC,IAAD,CAAb;AAEA,UAAMwM,iCAAiC,GAAG,MAAMzB,8BAA8B,EAA9E;;AACA,QAAG,CAACyB,iCAAJ,EAAsC;AAClC,aAAO,KAAP;AACH;;AAED,UAAMC,aAAa,GAAG1R,MAAM,CAAC2R,oBAAP,CAA4B;AAAEC,MAAAA,IAAI,EAAEtO;AAAR,KAA5B,CAAtB;AACA,UAAMuO,wBAAwB,GAAG7R,MAAM,CAAC8R,iBAAP,CAAyB;AAAEF,MAAAA,IAAI,EAAEF,aAAR;AAAuBK,MAAAA,IAAI,EAAEvO,mBAA7B;AAAkDwO,MAAAA,SAAS,EAAE1O,qBAA7D;AAAoF2O,MAAAA,SAAS,EAAEpO,CAA/F;AAAkGqO,MAAAA,QAAQ,EAAEnO,gBAAgB,CAACoO;AAA7H,KAAzB,CAAjC;;AAEA,QAAGN,wBAAwB,CAAC9D,MAAzB,GAAkC,CAAlC,IAAuCvI,sBAAsB,CAACM,IAAvB,CAA4BD,QAAnE,IAA+EL,sBAAsB,CAACE,UAAvB,CAAkCG,QAApH,EAA8H;AAC1H,UAAI9B,gBAAgB,CAACoC,aAAjB,CAA+BiM,cAA/B,IAAiDzO,WAArD,EAAkE;AAC9D,cAAM0O,kBAAkB,GAAG,MAAM/I,gBAAgB,CAACoI,aAAD,EAAgBlO,mBAAmB,CAACwF,GAApC,CAAjD;;AACA,YAAG,CAACrF,WAAJ,EAAiB;AACb,cAAIe,oBAAJ,EAA0B;AACtB,kBAAMkD,mBAAmB,CAACpE,mBAAmB,CAAC4E,EAArB,CAAzB;AACH;;AACD,cAAG5E,mBAAmB,IAAIA,mBAAJ,aAAIA,mBAAJ,eAAIA,mBAAmB,CAAE4E,EAA/C,EAAkD;AAC9C,kBAAMoH,mBAAmB,CAACqC,wBAAD,CAAzB;AACH;AACJ;;AACDpM,QAAAA,yBAAyB,iCAClBD,sBADkB;AAErBE,UAAAA,UAAU,kCAAOF,sBAAsB,CAACE,UAA9B;AAA0CG,YAAAA,QAAQ,EAAE;AAApD,YAFW;AAGrBC,UAAAA,IAAI,kCAAON,sBAAsB,CAACM,IAA9B;AAAoCD,YAAAA,QAAQ,EAAE;AAA9C;AAHiB,WAAzB;;AAKA,YAAIwM,kBAAJ,EAAwB;AACpB,cAAIhP,cAAJ,EAAoB;AAChBwB,YAAAA,aAAa,CAAC,CAAClB,WAAW,GAAG,KAAH,GAAW,QAAvB,CAAD,EAAmC0O,kBAAnC,CAAb;AACH;;AACD,cAAGb,wBAAH,EAA4B;AACxB5M,YAAAA,eAAe,CAACf,CAAC,CAAC,6BAAD,CAAF,EAAmC;AAAE6H,cAAAA,OAAO,EAAE;AAAX,aAAnC,CAAf;AACH;;AACDzG,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,IAAP;AACH,SATD,MASO;AACH,cAAGuM,wBAAH,EAA4B;AACxB5M,YAAAA,eAAe,CAACf,CAAC,CAAC,uBAAD,CAAF,EAA6B;AAAE6H,cAAAA,OAAO,EAAE;AAAX,aAA7B,CAAf;AACH;;AACDzG,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,KAAP;AACH;AACJ,OA/BD,MA+BO;AACH,YAAGzB,mBAAmB,IAAIA,mBAAmB,CAAC0L,GAA9C,EAAkD;AAC9C,gBAAMoD,wBAAwB,GAAG,MAAMlE,8BAA8B,CAACyD,wBAAD,CAArE;AACA,gBAAMrC,mBAAmB,CAACqC,wBAAD,CAAzB;AACApM,UAAAA,yBAAyB,iCAClBD,sBADkB;AAErBE,YAAAA,UAAU,kCAAOF,sBAAsB,CAACE,UAA9B;AAA0CG,cAAAA,QAAQ,EAAE;AAApD,cAFW;AAGrBC,YAAAA,IAAI,kCAAON,sBAAsB,CAACM,IAA9B;AAAoCD,cAAAA,QAAQ,EAAE;AAA9C;AAHiB,aAAzB;;AAKA,cAAIyM,wBAAJ,EAA8B;AAC1B,gBAAGd,wBAAH,EAA4B;AACxB5M,cAAAA,eAAe,CAACf,CAAC,CAAC,wBAAD,CAAF,EAA8B;AAAE6H,gBAAAA,OAAO,EAAE;AAAX,eAA9B,CAAf;AACH;;AACDzG,YAAAA,aAAa,CAAC,KAAD,CAAb;AACA,mBAAO,IAAP;AACH,WAND,MAMO;AACH,gBAAGuM,wBAAH,EAA4B;AACxB5M,cAAAA,eAAe,CAACf,CAAC,CAAC,uBAAD,CAAF,EAA6B;AAAE6H,gBAAAA,OAAO,EAAE;AAAX,eAA7B,CAAf;AACH;;AACDzG,YAAAA,aAAa,CAAC,KAAD,CAAb;AACA,mBAAO,KAAP;AACH;AACJ,SArBD,MAqBO;AACHL,UAAAA,eAAe,CAACf,CAAC,CAAC,0BAAD,CAAF,EAAgC;AAAE6H,YAAAA,OAAO,EAAE;AAAX,WAAhC,CAAf;AACAzG,UAAAA,aAAa,CAAC,KAAD,CAAb;AACA,iBAAO,IAAP;AACH;AACJ;AACJ,KA5DD,MA4DK;AACD,UAAGuM,wBAAH,EAA4B;AACxB5M,QAAAA,eAAe,CAACf,CAAC,CAAC,kBAAD,CAAF,EAAwB;AAAE6H,UAAAA,OAAO,EAAE;AAAX,SAAxB,CAAf;AACH;;AACDzG,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,aAAO,KAAP;AACH;AACJ,GA9ED;;AAgFA,QAAMsN,qBAAqB,GAAI9O,oBAAD,IAA0B;AACpD,WAAO+O,MAAM,CAAE/O,oBAAoB,CAACgP,QAArB,GAAgChP,oBAAoB,CAACiP,QAAtD,GAAkE,CAAnE,CAAb;AACH,GAFD;;AAIA,QAAMC,+BAA+B,GAAG,YAAY;AAEhD,QAAGzF,uBAAuB,MAAMnJ,gBAAgB,CAACoC,aAAjB,CAA+BiH,MAA/D,EAAsE;AAClE/H,MAAAA,wBAAwB,CAAC,IAAD,CAAxB;AACAT,MAAAA,eAAe,CAACf,CAAC,CAAC,qCAAD,CAAF,EAA2C;AAAE6H,QAAAA,OAAO,EAAE;AAAX,OAA3C,CAAf;AACA,aAAO,KAAP;AACH;;AAED,UAAMuF,kBAAkB,GAAGsB,qBAAqB,CAAC9O,oBAAD,CAAhD;;AACA,QAAGwN,kBAAkB,GAAG,CAAxB,EAA0B;AACtB,YAAMQ,iCAAiC,GAAG,MAAMzB,8BAA8B,EAA9E;;AACA,UAAI,CAACyB,iCAAL,EAAwC;AACpC,eAAO,KAAP;AACH;;AAED,YAAMmB,+BAA+B,GAAG,MAAM5B,4BAA4B,CAACC,kBAAD,CAA1E;;AACA,UAAI,CAAC2B,+BAAL,EAAsC;AAClC,eAAO,KAAP;AACH;AACJ;;AAED,UAAMrB,kBAAkB,CAAC,KAAD,CAAxB;AACApM,IAAAA,8BAA8B,CAAC,IAAD,CAA9B;AACA,WAAO,IAAP;AACH,GAxBD;;AA0BA,QAAM;AAAA,OAAC0N,2BAAD;AAAA,OAA8BC;AAA9B,MAAgEjT,QAAQ,CAAC,KAAD,CAA9E;;AAEA,QAAMkT,+BAA+B,GAAIC,KAAD,IAAW,CAACC,KAAD,EAAQC,WAAR,KAAwB;AACvEJ,IAAAA,8BAA8B,CAACI,WAAW,GAAGF,KAAH,GAAW,KAAvB,CAA9B;AACH,GAFD;;AAIA,SACI,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK3P,cAAc,KAAK6J,uBAAuB,MAAMG,2BAA2B,EAA7D,CAAd,GACG,MAAC,IAAD;AAAM,IAAA,SAAS,EAAEvJ,eAAe,CAACqP,oBAAjC;AAAuD,IAAA,SAAS,MAAhE;AAAiE,IAAA,OAAO,EAAE,CAA1E;AAA6E,IAAA,SAAS,EAAC,KAAvF;AAA6F,IAAA,OAAO,EAAC,UAArG;AAAgH,IAAA,UAAU,EAAC,QAA3H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKjG,uBAAuB,KACpB,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,KAAK,EAAE;AAACkG,MAAAA,WAAW,EAAE;AAAd,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAd;AAAqC,IAAA,QAAQ,EAAC,MAA9C;AAAqD,IAAA,OAAO,EAAC,UAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKnG,uBAAuB,MAAMrJ,CAAC,CAAC,qCAAD,CADnC,CADJ,CADoB,GAMrB,IAPP,EAQKqJ,uBAAuB,KACpB,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AACI,IAAA,SAAS,EAAEpJ,eAAe,CAACwP,aAD/B;AAEI,IAAA,SAAS,EAAE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFf;AAGI,IAAA,OAAO,EAAC,UAHZ;AAII,IAAA,gBAAgB,MAJpB;AAKI,IAAA,IAAI,EAAE9Q,YAAY,CAACiJ,IAAb,CAAkB8H,MAL5B;AAMI,IAAA,OAAO,EAAE,MAAMlO,wBAAwB,CAAC,IAAD,CAN3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQKxB,CAAC,CAAC,sBAAD,CARN,CADJ,EAWI,MAAC,aAAD;AACI,IAAA,gBAAgB,EAAEC,eAAe,CAACwP,aADtC;AAEI,IAAA,IAAI,EAAElO,qBAFV;AAGI,IAAA,OAAO,EAAE,MAAKC,wBAAwB,CAAC,KAAD,CAH1C;AAII,IAAA,mBAAmB,EAAE7B,mBAJzB;AAKI,IAAA,oBAAoB,EAAEC,oBAL1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,CADoB,GAmBV,IA3BlB,EA4BM4J,2BAA2B,MAAMkF,qBAAqB,CAAC9O,oBAAD,CAArB,GAA8C,CAAhF,GACG,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AACI,IAAA,SAAS,EAAE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADf;AAEI,IAAA,OAAO,EAAC,UAFZ;AAGI,IAAA,KAAK,EAAC,SAHV;AAII,IAAA,gBAAgB,MAJpB;AAKI,IAAA,IAAI,EAAEjB,YAAY,CAACiJ,IAAb,CAAkB8H,MAL5B;AAMI,IAAA,OAAO,EAAE,MAAMhO,sBAAsB,CAAC,IAAD,CANzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQK1B,CAAC,CAAC,iBAAD,CARN,CADJ,EAWI,MAAC,WAAD;AACI,IAAA,gBAAgB,EAAEC,eAAe,CAACwP,aADtC;AAEI,IAAA,IAAI,EAAEhO,mBAFV;AAGI,IAAA,OAAO,EAAE,MAAKC,sBAAsB,CAAC,KAAD,CAHxC;AAII,IAAA,mBAAmB,EAAE/B,mBAJzB;AAKI,IAAA,oBAAoB,EAAEC,oBAL1B;AAMI,IAAA,4BAA4B,EAAEuN,4BANlC;AAOI,IAAA,iBAAiB,EAAExD,iBAAiB,EAPxC;AAQI,IAAA,uBAAuB,EAAE,MAAMmF,+BAA+B,EARlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,CADH,GAsBa,IAlDlB,CADH,GAoDa,IArDlB,EAuDKnR,oBAAoB,CAAC+M,GAArB,CAAyB,CAACiF,mBAAD,EAAsBC,CAAtB,KAA4B;AAClD,WACI,MAAC,SAAD;AACI,MAAA,GAAG,EAAEA,CADT;AAEI,MAAA,QAAQ,EAAED,mBAAmB,CAACE,SAApB,IAAiCF,mBAAmB,CAACjN,GAApB,KAA4BsM,2BAF3E;AAGI,MAAA,QAAQ,EAAEE,+BAA+B,CAACS,mBAAmB,CAACjN,GAArB,CAH7C;AAII,MAAA,KAAK,EAAE;AACHoN,QAAAA,UAAU,EAAE,CADT;AAEHP,QAAAA,WAAW,EAAE;AAFV,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASKI,mBAAmB,CAAClI,KAApB,KAA8B,EAA9B,GACG,MAAC,gBAAD;AACI,MAAA,KAAK,EAAE;AACHsI,QAAAA,YAAY,EAAE;AADX,OADX;AAII,MAAA,UAAU,EAAE,CAACJ,mBAAmB,CAACE,SAArB,GAAiC,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjC,GAAqD,IAJrE;AAKI,uBAAgB,GAAEF,mBAAmB,CAACjN,GAAI,UAL9C;AAMI,MAAA,EAAE,EAAG,GAAEiN,mBAAmB,CAACjN,GAAI,SANnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQI,MAAC,UAAD;AAAY,MAAA,KAAK,EAAE;AACfsN,QAAAA,SAAS,EAAE,MADI;AAEfC,QAAAA,QAAQ,EAAE,EAFK;AAGfC,QAAAA,UAAU,EAAE,GAHG;AAIfC,QAAAA,KAAK,EAAE,SAJQ;AAKfC,QAAAA,UAAU,EAAE,GALG;AAMfC,QAAAA,UAAU,EAAE;AANG,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQKrQ,CAAC,CAAC2P,mBAAmB,CAAClI,KAArB,CARN,CARJ,CADH,GAmByB,IA5B9B,EA6BI,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKrH,eAAe,CAACkQ,MAAhB,CAAuBC,UAAU,IAAIA,UAAU,CAACC,YAAX,KAA4Bb,mBAAmB,CAACjN,GAArF,EAA0FgI,GAA1F,CAA8F,CAAC6F,UAAD,EAAaE,QAAb,KAA0B;AACrH,aACI,MAAC,KAAD,CAAO,QAAP;AAAgB,QAAA,GAAG,EAAEA,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKF,UAAU,CAACG,SAAX,GAAuB,MAAC,SAAD;AAAW,QAAA,KAAK,EAAE1Q,CAAC,CAACuQ,UAAU,CAAC9I,KAAZ,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAvB,GAAmE,IADxE,EAEI,MAAC,IAAD;AAAM,QAAA,SAAS,EAAExH,eAAe,CAAC0Q,aAAjC;AAAgD,QAAA,SAAS,MAAzD;AAA0D,QAAA,OAAO,EAAE,CAAnE;AAAsE,QAAA,SAAS,EAAC,KAAhF;AAAsF,QAAA,OAAO,EAAC,YAA9F;AAA2G,QAAA,UAAU,EAAC,QAAtH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKrE,MAAM,CAACC,IAAP,CAAY9M,qBAAZ,EAAmCiL,GAAnC,CAAuC,CAACkG,SAAD,EAAYH,QAAZ,KAAyB;AAC7D,cAAMI,QAAQ,GAAGpR,qBAAqB,CAACmR,SAAD,CAAtC;AACA,cAAME,WAAW,GAAGP,UAAU,CAAC7N,GAAX,KAAmBmO,QAAQ,CAACE,QAA5B,IAAwCF,QAAQ,CAACvK,SAArE;;AACA,YAAI,CAAC1G,oBAAD,IAAyBkR,WAAzB,IAAwC,CAACD,QAAQ,CAACG,aAAlD,IAAmEpR,oBAAoB,IAAIkR,WAA/F,EAA4G;AACxG,iBACI,MAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAED,QAAQ,CAACI,eAAT,CAAyBC,EAAxC;AAA4C,YAAA,EAAE,EAAEL,QAAQ,CAACI,eAAT,CAAyBE,EAAzE;AAA6E,YAAA,EAAE,EAAEN,QAAQ,CAACI,eAAT,CAAyBG,EAA1G;AAA8G,YAAA,GAAG,EAAEX,QAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACKpJ,gBAAgB,CAACwJ,QAAD,CADrB,CADJ;AAKH;AACJ,OAVA,CADL,CAFJ,CADJ;AAkBH,KAnBA,CADL,CADJ,CA7BJ,CADJ;AAwDH,GAzDA,CAvDL,EAiHI,MAAC,IAAD;AAAM,IAAA,SAAS,EAAE5Q,eAAe,CAAC0Q,aAAjC;AAAgD,IAAA,SAAS,MAAzD;AAA0D,IAAA,OAAO,EAAE,CAAnE;AAAsE,IAAA,SAAS,EAAC,KAAhF;AAAsF,IAAA,OAAO,EAAC,YAA9F;AAA2G,IAAA,UAAU,EAAC,QAAtH;AAA+H,IAAA,KAAK,EAAE;AAACU,MAAAA,SAAS,EAAE,EAAZ;AAAgBvB,MAAAA,UAAU,EAAE;AAA5B,KAAtI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,aAAD;AACI,IAAA,QAAQ,EAAE3O,UADd;AAEI,IAAA,QAAQ,EAAEQ,sBAAsB,CAACE,UAAvB,CAAkCE,UAFhD;AAGI,IAAA,KAAK,EAAEJ,sBAAsB,CAACE,UAAvB,CAAkCC,KAH7C;AAII,IAAA,KAAK,EAAC,8CAJV;AAKI,IAAA,QAAQ,EAAC,uBALb;AAMI,IAAA,aAAa,EAAC,8CANlB;AAOI,IAAA,aAAa,EAAE5B,gBAAgB,CAACoR,QAAjB,GAA6B,QAAOnR,MAAM,IAAIjE,MAAM,CAACqV,MAAP,CAAcC,mBAAoB,IAAGtV,MAAM,CAACuV,QAAP,CAAgBC,aAAc,cAPpI;AAQI,IAAA,OAAO,EAAG5J,CAAD,IAAOlG,yBAAyB,iCAAKD,sBAAL;AAA6BE,MAAAA,UAAU,kCAAOF,sBAAsB,CAACE,UAA9B;AAA0CC,QAAAA,KAAK,EAAEgG,CAAjD;AAAoD9F,QAAAA,QAAQ,EAAE;AAA9D;AAAvC,OAR7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAaK,CAAClC,WAAD,IACG,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,aAAD;AACI,IAAA,QAAQ,EAAEqB,UADd;AAEI,IAAA,QAAQ,EAAEQ,sBAAsB,CAACM,IAAvB,CAA4BF,UAF1C;AAGI,IAAA,KAAK,EAAEJ,sBAAsB,CAACM,IAAvB,CAA4BH,KAHvC;AAII,IAAA,KAAK,EAAC,8BAJV;AAKI,IAAA,QAAQ,EAAC,yBALb;AAMI,IAAA,aAAa,EAAC,8BANlB;AAOI,IAAA,YAAY,EAAE5B,gBAAgB,CAACoR,QAAjB,GAA6B,QAAOnR,MAAM,IAAIjE,MAAM,CAACqV,MAAP,CAAcC,mBAAoB,IAAGtV,MAAM,CAACuV,QAAP,CAAgBE,eAAgB,cAPrI;AAQI,IAAA,OAAO,EAAG7J,CAAD,IAAOlG,yBAAyB,iCAAKD,sBAAL;AAA6BM,MAAAA,IAAI,kCAAON,sBAAsB,CAACM,IAA9B;AAAoCH,QAAAA,KAAK,EAAEgG,CAA3C;AAA8C9F,QAAAA,QAAQ,EAAE;AAAxD;AAAjC,OAR7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAdR,CAjHJ,EA6II,MAAC,IAAD;AAAM,IAAA,SAAS,EAAE/B,eAAe,CAACqP,oBAAjC;AAAuD,IAAA,SAAS,MAAhE;AAAiE,IAAA,OAAO,EAAE,CAA1E;AAA6E,IAAA,SAAS,EAAC,KAAvF;AAA6F,IAAA,OAAO,EAAC,UAArG;AAAgH,IAAA,UAAU,EAAC,QAA3H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK9P,cAAc,IAAImK,iBAAiB,EAAnC,GACG,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AACI,IAAA,QAAQ,EAAExI,UAAU,IAAI,CAAC+H,YAAY,EADzC;AAEI,IAAA,SAAS,EAAEjJ,eAAe,CAACwP,aAF/B;AAGI,IAAA,SAAS,EAAE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHf;AAII,IAAA,OAAO,EAAC,UAJZ;AAKI,IAAA,gBAAgB,MALpB;AAMI,IAAA,IAAI,EAAE9Q,YAAY,CAACiJ,IAAb,CAAkB8H,MAN5B;AAOI,IAAA,OAAO,EAAE,MAAMZ,+BAA+B,EAPlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASK9O,CAAC,CAAC,sBAAD,CATN,CADJ,EAYI,MAAC,mBAAD;AACI,IAAA,gBAAgB,EAAEC,eAAe,CAACwP,aADtC;AAEI,IAAA,IAAI,EAAEpO,2BAFV;AAGI,IAAA,OAAO,EAAE,MAAKC,8BAA8B,CAAC,KAAD,CAHhD;AAII,IAAA,mBAAmB,EAAE3B,mBAJzB;AAKI,IAAA,oBAAoB,EAAEC,oBAL1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,CADH,GAoBa,MAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEuB,UAAlB;AAA8B,IAAA,OAAO,EAAC,WAAtC;AAAkD,IAAA,KAAK,EAAC,SAAxD;AAAkE,IAAA,gBAAgB,MAAlF;AAAmF,IAAA,IAAI,EAAExC,YAAY,CAACiJ,IAAb,CAAkB8H,MAA3G;AAAmH,IAAA,OAAO,EAAE,MAAMhC,kBAAkB,EAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwJ;AAAM,IAAA,KAAK,EAAE;AAACkE,MAAAA,YAAY,EAAE;AAAf,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqCzQ,UAAU,IAAI,MAAC,cAAD;AAAgB,IAAA,IAAI,EAAE,EAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAnD,CAAxJ,EAA+OnB,CAAC,CAAC,YAAD,CAAhP,CArBlB,CADJ,CA7IJ,CADJ;AA0KH,CA3lCD;;AA6lCA,eAAeT,UAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport * as global from '@webcms-globals'\nimport { helper } from '@webcms-globals'\nimport { makeStyles } from '@material-ui/core/styles'\nimport SelectAutoComplete from '@webcms-ui/core/select-autocomplete'\nimport FileUploadAndShow from '@webcms-ui/core/file-upload-and-show'\nimport SignerPad from '@webcms-ui/core/signer-pad'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport WebCmsGlobal from 'components/webcms-global'\nimport stylesTabPanel from '../style/TabPanel.style'\nimport { required } from 'state/utils/form'\nimport { emailValidation, mobileTelNoFormat, OREST_ENDPOINT, TRANSTYPES } from 'model/orest/constants'\nimport PhoneInput from '@webcms-ui/core/phone-input'\nimport TabHeader from 'components/layout/components/TabHeader'\nimport { Button, Grid, Icon, TextField } from '@material-ui/core'\nimport Alert from '@material-ui/lab/Alert'\nimport { DatePicker, LocalizationProvider } from '@material-ui/pickers'\nimport moment from 'moment'\nimport MomentAdapter from '@date-io/moment'\nimport { fieldGroupAccordions, fieldGroups, otherGuestMandatoryFields, primaryGuestMandatoryFields } from './clientInitialState'\nimport RoomSelection from './RoomSelection'\nimport CheckInConfirmation from './CheckInConfirmation'\nimport OtherGuests from './OtherGuests'\nimport { Insert, List, Patch, UseOrest, ViewList } from '@webcms/orest'\nimport { useSnackbar } from 'notistack'\nimport FrameCheckbox from '@webcms-ui/core/frame-checkbox'\nimport { sendGuestChangeNotifyMail } from '../Base/helper'\nimport { useOrestAction } from 'model/orest'\nimport { fieldOptions, fieldTypes } from 'constants/form-elements'\nimport { employeeFieldGroups, employeeMandatoryFields } from 'components/emp-portal/employeeInitialState'\nimport LoadingSpinner from 'components/LoadingSpinner'\nimport { useRouter } from 'next/router'\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\nconst useStylesTabPanel = makeStyles(stylesTabPanel())\n\nconst ClientBase = ({ isPrimaryGuest, useClientInitialState, setUseClientInitialState, useClientOrestState, useClientReservation, usePrimaryClientReservation, isEmpPortal }) =>{\n    const router = useRouter()\n    const { t } = useTranslation()\n    const classesTabPanel = useStylesTabPanel()\n    const { GENERAL_SETTINGS, locale } = useContext(WebCmsGlobal)\n    const fieldGroupArray = isEmpPortal ? employeeFieldGroups : fieldGroups\n\n    const useHotelWorkDateTime = useSelector((state) => state?.orest?.state?.hotelWorkDateTime || false)\n    const useToken = useSelector((state) => state?.orest?.currentUser?.auth.access_token || false)\n    const useOtherGuestResname = useSelector((state) => state?.orest?.currentUser?.otherGuestResname || false)\n    const { enqueueSnackbar } = useSnackbar()\n    const { setOrestState } = useOrestAction()\n\n    //For Component\n    const [isInitialStateLoad, setIsInitialStateLoad] = useState(false)\n    const [isUpdating, setIsUpdating] = useState(true)\n    const [isCheckinConfirmationDialog, setIsCheckinConfirmationDialog] = useState(false)\n    const [isRoomSelectionDialog, setIsRoomSelectionDialog] = useState(false)\n    const [isOtherGuestsDialog, setIsOtherGuestsDialog] = useState(false)\n    const [usePrivacyTransactions, setUsePrivacyTransactions] = useState({\n        datapolicy: {\n            value: isPrimaryGuest && !useOtherGuestResname,\n            isRequired: true,\n            isUpdate: false\n        },\n        pref: {\n            value: isPrimaryGuest && !useOtherGuestResname,\n            isRequired: true,\n            isUpdate: false\n        },\n    })\n\n    useEffect(() => {\n        let isEffect = true\n        if (isEffect && useClientOrestState && !isInitialStateLoad) {\n            const newClientInitialState = helper.objectMapper(useClientInitialState, useClientOrestState, getMandatoryFields(GENERAL_SETTINGS.hotelSettings.ci_reqflds))\n            setUseClientInitialState(newClientInitialState)\n            setIsInitialStateLoad(true)\n            setIsUpdating(false)\n        }\n\n        return () => {\n            isEffect = false\n        }\n    }, [useClientOrestState])\n\n    useEffect(() => {\n        let isEffect = true\n\n        if (isEffect && isInitialStateLoad && GENERAL_SETTINGS?.hotelSettings?.ci_reqsign && (useClientReservation || useOtherGuestResname)) {\n            setUseClientInitialState({\n                ...useClientInitialState,\n                [useClientInitialState.signature.key]: {\n                    ...useClientInitialState[useClientInitialState.signature.key],\n                    isRequired: true\n                },\n            })\n        }\n\n        return () => {\n            isEffect = false\n        }\n    }, [isInitialStateLoad])\n\n    const getEmOrTelFieldCheck = (useMandatoryFields) => {\n        if (GENERAL_SETTINGS?.hotelSettings?.profile_emortelok) {\n            if ((router?.query?.telno || router?.query?.mobile) && !router?.query?.email) {\n                const itemIndex = useMandatoryFields.indexOf('email')\n                if (itemIndex >= 0) {\n                    useMandatoryFields.splice(itemIndex, 1)\n                }\n            } else if (router?.query?.email && (!router?.query?.telno && !router?.query?.mobile)) {\n                const itemIndex = useMandatoryFields.indexOf('mobiletel')\n                if (itemIndex >= 0) {\n                    useMandatoryFields.splice(itemIndex, 1)\n                }\n            }\n        }\n\n        return useMandatoryFields\n    }\n\n    const getMandatoryFields = (settMandatoryFields) => {\n        let defaultMandatoryFields = !isPrimaryGuest || useOtherGuestResname ? otherGuestMandatoryFields : isEmpPortal ? employeeMandatoryFields : primaryGuestMandatoryFields\n        if (GENERAL_SETTINGS?.hotelSettings?.reg_birthdate) {\n            defaultMandatoryFields.push(useClientInitialState.birthdate.key)\n        }\n\n        if (settMandatoryFields) {\n            const getCiReqFlds = helper.makeArrayWithComma(settMandatoryFields)\n            if (Array.isArray(getCiReqFlds)) {\n                defaultMandatoryFields = [...new Set([...defaultMandatoryFields, ...getCiReqFlds])]\n                return getEmOrTelFieldCheck(defaultMandatoryFields)\n            } else {\n                return getEmOrTelFieldCheck(defaultMandatoryFields)\n            }\n        } else {\n            return getEmOrTelFieldCheck(defaultMandatoryFields)\n        }\n    }\n\n    const createClientLoginId = (clientId) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'client/loginid',\n            method: 'PUT',\n            token: useToken,\n            params: {\n                id: clientId,\n                pref: true,\n                datapolicy: true,\n                force: true\n            }\n        }).then((clientLoginIdResponse) => {\n            return !!(clientLoginIdResponse.status === 200 && clientLoginIdResponse?.data?.data)\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const clientPatch = (clientData, clientGid) => {\n        return Patch({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: isEmpPortal ? OREST_ENDPOINT.EMPLOYEE :  OREST_ENDPOINT.CLIENT,\n            token: useToken,\n            gid: clientGid,\n            params: {\n                hotelrefno: useClientOrestState.hotelrefno\n            },\n            data: clientData,\n        }).then((clientPatchResponse) => {\n            if (clientPatchResponse.status === 200 && clientPatchResponse?.data?.data) {\n                return clientPatchResponse.data.data\n            }else{\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const clientView = (clientPatch) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: isEmpPortal ? 'employee/view/get' : 'client/view/get',\n            token: useToken,\n            params: {\n                gid: clientPatch.gid,\n                allhotels: true\n            },\n        }).then((clientViewGetResponse) => {\n            if (clientViewGetResponse.status === 200 && clientViewGetResponse?.data?.data) {\n                return clientViewGetResponse.data.data\n            }else{\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const clientInfoUpdate = async (clientData, clientGid) => {\n        const isClientPatch = await clientPatch(clientData, clientGid)\n        if(isClientPatch && isPrimaryGuest){\n            return await clientView(isClientPatch)\n        }else return !!isClientPatch\n    }\n\n    const getOnChangeValue = (type, value, isRequired) => {\n        switch (type) {\n            case fieldTypes.date:\n                const newValue = moment(value).format(OREST_ENDPOINT.DATEFORMAT)\n                return {\n                    value: newValue,\n                    isError: newValue === 'Invalid date',\n                    errorText: newValue === 'Invalid date' ? `*${t('str_invalidDate')}` : false,\n                    isRequired: isRequired\n                }\n            default:\n                return {\n                    value: value,\n                    isError: isRequired && !!required(value),\n                    errorText: isRequired && !!required(value),\n                    isRequired: isRequired\n                }\n        }\n    }\n\n    const handleOnChangeCallBack = (key, useData) => {\n        switch (key) {\n            case useClientInitialState.maritalstatus.key:\n                const isVisible = !!(useData?.value && useData?.value[useClientInitialState.maritalstatus.defValKey] === TRANSTYPES.MARRIED)\n                setUseClientInitialState({\n                    ...useClientInitialState,\n                    [key]: {\n                        ...useClientInitialState[key],\n                        value: useData.value,\n                        isError: useData.isError,\n                        isRequired: useData.isRequired,\n                        errorText: useData.errorText,\n                    },\n                    [useClientInitialState.weddingdate.key]: {\n                        ...useClientInitialState[useClientInitialState.weddingdate.key],\n                        isVisible: isVisible\n                    },\n                })\n               return true\n            case useClientInitialState.nationid.key:\n                const isActive = !!(useData?.value && useData?.value?.reqtrid)\n                setUseClientInitialState({\n                    ...useClientInitialState,\n                    [key]: {\n                        ...useClientInitialState[key],\n                        value: useData.value,\n                        isError: useData.isError,\n                        isRequired: useData.isRequired,\n                        errorText: useData.errorText,\n                    },\n                    [useClientInitialState.tridno.key]: {\n                        ...useClientInitialState[useClientInitialState.tridno.key],\n                        isVisible: isActive,\n                        isRequired: isActive && useClientInitialState.nationid.isRequired\n                    },\n                    [useClientInitialState.healthcode.key]: {\n                        ...useClientInitialState[useClientInitialState.healthcode.key],\n                        isVisible: isActive,\n                        isRequired: isActive && GENERAL_SETTINGS.hotelSettings.reg_healthcode\n                    },\n                    [useClientInitialState.idtypeid.key]: {\n                        ...useClientInitialState[useClientInitialState.idtypeid.key],\n                        isVisible: !isActive,\n                        isRequired: !isActive && useClientInitialState.nationid.isRequired\n                    },\n                    [useClientInitialState.idno.key]: {\n                        ...useClientInitialState[useClientInitialState.idno.key],\n                        isVisible: !isActive,\n                        isRequired: !isActive && useClientInitialState.nationid.isRequired\n                    }\n                })\n                return true\n            case useClientInitialState.email.key:\n                setUseClientInitialState({\n                    ...useClientInitialState,\n                    [key]: {\n                        ...useClientInitialState[key],\n                        value: useData.value,\n                        isError: useData.isError,\n                        errorText: useData.errorText\n                    },\n                    [useClientInitialState.mobiletel.key]: {\n                        ...useClientInitialState[useClientInitialState.mobiletel.key],\n                        isError: false,\n                        errorText: '',\n                        isRequired: !useOtherGuestResname && GENERAL_SETTINGS.hotelSettings.profile_emortelok ? !useData.value : useClientInitialState.mobiletel.isRequired,\n                    }\n                })\n                return true\n            case useClientInitialState.mobiletel.key:\n                setUseClientInitialState({\n                    ...useClientInitialState,\n                    [key]: {\n                        ...useClientInitialState[key],\n                        value: useData.value,\n                        isError: useData.isError,\n                        errorText: useData.errorText\n                    },\n                    [useClientInitialState.email.key]: {\n                        ...useClientInitialState[useClientInitialState.email.key],\n                        isError: false,\n                        errorText: '',\n                        isRequired: !useOtherGuestResname && GENERAL_SETTINGS.hotelSettings.profile_emortelok ? !useData.value : useClientInitialState.email.isRequired,\n                    }\n                })\n                return true\n            default:\n                return false\n        }\n    }\n\n    const handleOnChange = (key, value, type = 'text') => {\n        const useData = getOnChangeValue(type, value, useClientInitialState[key].isRequired)\n        const isCallback = handleOnChangeCallBack(key, useData)\n        if(!isCallback){\n            setUseClientInitialState({\n                ...useClientInitialState,\n                [key]: {\n                    ...useClientInitialState[key],\n                    value: useData.value,\n                    isError: useData.isError,\n                    isRequired: useData.isRequired,\n                    errorText: useData.errorText,\n                },\n            })\n        }\n    }\n\n    const getFormComponent = (field) => {\n        switch (field.type) {\n            case fieldTypes.trid:\n            case fieldTypes.email:\n            case fieldTypes.text:\n                return (\n                    <TextField\n                        id={field.key}\n                        name={field.key}\n                        label={t(field.label)}\n                        required={field.isRequired}\n                        disabled={isUpdating}\n                        fullWidth={fieldOptions.fullWidth.textField}\n                        size={fieldOptions.size.textField}\n                        variant={fieldOptions.variant.textField}\n                        value={field.value}\n                        onChange={(e) => handleOnChange(field.key, e.target.value)}\n                        error={field.isError}\n                        helperText={field.isError && field.errorText}\n                        onBlur={field.isVerifyRequired ? () => handleOnVerify(field.key, field.value, field.type) : undefined}\n                    />\n                )\n            case fieldTypes.select:\n                return (\n                    <SelectAutoComplete\n                        required={field.isRequired}\n                        label={t(field.label)}\n                        isInitialStateLoad={isInitialStateLoad}\n                        disabled={isUpdating}\n                        id={field.key}\n                        name={field.key}\n                        selectApi={field.selectApi}\n                        value={field.value}\n                        error={field.isError}\n                        variant={fieldOptions.variant.textField}\n                        onCallback={(newValue) => handleOnChange(field.key, newValue)}\n                        onChange={(newValue) => handleOnChange(field.key, newValue)}\n                        optionLabel={field.optionLabel}\n                        optionKey={field.optionKey}\n                        defValKey={field.defValKey}\n                        defValue={field.defValKey && field.value || false}\n                        trgValKey={field.trgValKey}\n                        trgQueryKey={field.trgQueryKey}\n                        trgValue={field.trgValue && useClientInitialState[field.trgValue].value || false}\n                    />\n                )\n            case fieldTypes.tel:\n                return (\n                    <PhoneInput\n                        defaultCountry={locale === 'en' ? 'us': locale}\n                        preferredCountries={['it', 'ie', 'de', 'fr', 'es', 'gb']}\n                        regions={['america', 'europe', 'asia', 'oceania', 'africa',]}\n                        id={field.key}\n                        name={field.key}\n                        label={t(field.label)}\n                        required={field.isRequired}\n                        disabled={isUpdating}\n                        fullWidth={fieldOptions.fullWidth.textField}\n                        size={fieldOptions.size.textField}\n                        variant={fieldOptions.variant.textField}\n                        value={field.value}\n                        onChange={(newValue) => handleOnChange(field.key, newValue)}\n                        error={field.isError}\n                        helperText={field.isError && field.errorText}\n                        onBlur={field.isVerifyRequired ? () => handleOnVerify(field.key, field.value, field.type) : undefined}\n                    />\n                )\n            case fieldTypes.date:\n                return (\n                    <LocalizationProvider dateLibInstance={moment} dateAdapter={MomentAdapter}>\n                        <DatePicker\n                            required={field.isRequired}\n                            allowKeyboardControl\n                            disabled={isUpdating}\n                            autoOk\n                            id={field.key}\n                            name={field.key}\n                            label={t(field.label)}\n                            inputFormat={fieldOptions.dateFormatForView}\n                            disableFuture\n                            openTo={'date'}\n                            views={['year', 'month', 'date']}\n                            value={field.value || moment()}\n                            onChange={(newValue) => handleOnChange(field.key, newValue, field.type)}\n                            renderInput={(props) => {\n                                return (\n                                    <TextField\n                                        {...props}\n                                        fullWidth={fieldOptions.fullWidth.textField}\n                                        size={fieldOptions.size.textField}\n                                        variant={fieldOptions.variant.textField}\n                                        required={field.isRequired}\n                                        error={field.isError}\n                                        helperText={field.isError && field.errorText}\n                                    />\n                                )\n                            }}\n                        />\n                    </LocalizationProvider>\n                )\n            case fieldTypes.upload:\n                return (\n                    <FileUploadAndShow\n                        id={field.key}\n                        name={field.key}\n                        label={t(field.label)}\n                        required={field.isRequired}\n                        disabled={!useClientOrestState || isUpdating || !useClientOrestState.id}\n                        fullWidth={fieldOptions.fullWidth.textField}\n                        size={fieldOptions.size.textField}\n                        variant={fieldOptions.variant.textField}\n                        error={field.isError}\n                        helperText={field.isError && field.errorText}\n                        optionKey={field.optionKey}\n                        defValKey={field.defValKey}\n                        defValue={field.defValKey && useClientOrestState[field.defValKey]}\n                        trgQueryKey={field.defValKey && useClientOrestState[field.trgQueryKey]}\n                    />\n                )\n            case fieldTypes.sign:\n                return(\n                    <SignerPad\n                        id={field.key}\n                        name={field.key}\n                        label={t(field.label)}\n                        required={field.isRequired}\n                        disabled={isUpdating}\n                        fullWidth={fieldOptions.fullWidth.textField}\n                        size={fieldOptions.size.textField}\n                        variant={fieldOptions.variant.textField}\n                        error={field.isError}\n                        helperText={field.isError && field.errorText}\n                        optionLabel={field.optionLabel}\n                        optionKey={field.optionKey}\n                        defValKey={field.defValKey}\n                        defValue={field.defValKey && useOtherGuestResname ? useOtherGuestResname[field.defValKey] : useClientReservation[field.defValKey]}\n                        trgQueryKey={field.defValKey && useOtherGuestResname ? useOtherGuestResname[field.trgQueryKey] : useClientReservation[field.trgQueryKey]}\n                        onUpdateCallBack={()=> {\n                            setUseClientInitialState({\n                                ...useClientInitialState,\n                                [useClientInitialState.signature.key]: {\n                                    ...useClientInitialState[useClientInitialState.signature.key],\n                                    isError: false,\n                                    errorText: ''\n                                },\n                            })\n                        }}\n                    />\n                )\n            default:\n                return\n        }\n    }\n\n    const handleOnVerify = (key, value, type) => {\n        switch (type) {\n            case fieldTypes.email:\n                isEmailExists(key, value)\n                break\n            case fieldTypes.tel:\n                isPhoneExists(key, value)\n                break\n            case fieldTypes.trid:\n                isTrIdValid(key, value)\n                break\n            default:\n                return false\n        }\n    }\n\n    const isCheckInDay = () =>{\n        return !useOtherGuestResname && useClientReservation && useHotelWorkDateTime.workdate === useClientReservation.checkin\n    }\n\n    const isRoomSelectionPossible = () => {\n        return !useOtherGuestResname && useClientReservation && useClientReservation.canroom && !useClientReservation.roomno && GENERAL_SETTINGS.hotelSettings.roomno\n    }\n\n    const isReservationStatusAccepted = () => {\n        const acceptedStatus = ['A', 'I']\n        return !useOtherGuestResname && usePrimaryClientReservation && acceptedStatus.includes(usePrimaryClientReservation.status)\n    }\n\n    const isCheckInPossible = () => {\n        if(useClientReservation && !useClientReservation.canroom && GENERAL_SETTINGS.hotelSettings.roomno){\n            return false\n        }\n        return !useOtherGuestResname && useClientReservation && useClientReservation.canci && isCheckInDay() && GENERAL_SETTINGS.hotelSettings.ci_enable\n    }\n\n    const isEmailExists = (key, val) => {\n        if (val) {\n            if(emailValidation(val)){\n                setIsUpdating(true)\n                UseOrest({\n                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                    endpoint: 'client/email/exists',\n                    token: useToken,\n                    params: {\n                        email: val,\n                        allhotels: true\n                    },\n                }).then((response) => {\n                    if (response.status === 200 && response?.data?.data?.res) {\n                        if (useClientOrestState?.id !== response.data.data.id) {\n                            setUseClientInitialState({\n                                ...useClientInitialState,\n                                [key]: {\n                                    ...useClientInitialState[key],\n                                    isError: true,\n                                    errorText: t('str_emailAlreadyExist'),\n                                },\n                            })\n                        }\n                        setIsUpdating(false)\n                        return true\n                    } else {\n                        setIsUpdating(false)\n                        return false\n                    }\n                }).catch(() => {\n                    setIsUpdating(false)\n                    return false\n                })\n            }else{\n                setUseClientInitialState({\n                    ...useClientInitialState,\n                    [key]: {\n                        ...useClientInitialState[key],\n                        isError: true,\n                        errorText: t('str_invalidEmail'),\n                    },\n                })\n            }\n        }\n    }\n\n    const isPhoneExists = (key, val) => {\n        if(String(val).length > 5){\n            setIsUpdating(true)\n            UseOrest({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: 'client/phone/exists',\n                token: useToken,\n                params: {\n                    tel: mobileTelNoFormat(val),\n                    allhotels: true\n                },\n            }).then((response) => {\n                if (response.status === 200 && response?.data?.data?.res) {\n                    if(useClientOrestState?.id !== response.data.data.id){\n                        setUseClientInitialState({\n                            ...useClientInitialState,\n                            [key]: {\n                                ...useClientInitialState[key],\n                                isError: true,\n                                errorText: t('str_mobileAlreadyExist'),\n                            },\n                        })\n                    }\n                    setIsUpdating(false)\n                    return true\n                } else {\n                    setIsUpdating(false)\n                    return false\n                }\n            }).catch(() => {\n                setIsUpdating(false)\n                return false\n            })\n        }\n    }\n\n    const isTrIdValid = (key, val) => {\n        if(val){\n            setIsUpdating(true)\n            UseOrest({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: 'tools/validate/tridno',\n                token: useToken,\n                params: {\n                    idno: val,\n                    allhotels: true\n                },\n            }).then((response) => {\n                if (response.status === 200 && response?.data?.data?.res) {\n                    setIsUpdating(false)\n                    return true\n                } else {\n                    setUseClientInitialState({\n                        ...useClientInitialState,\n                        [key]: {\n                            ...useClientInitialState[key],\n                            isError: true,\n                            errorText: t('str_pleaseEnterAValidTRIdNo'),\n                        },\n                    })\n                    setIsUpdating(false)\n                    return false\n                }\n            }).catch(() => {\n                setIsUpdating(false)\n                return false\n            })\n        }\n    }\n\n    const getNotecatDataself = (hotelrefno) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'notecat/dataself',\n            token: useToken,\n            params: {\n                hotelrefno: hotelrefno\n            }\n        }).then((response) => {\n            if (response.status === 200 && response.data && response.data.data.res) {\n                return response.data.data.res\n            } else {\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const getNotetypeData = (hotelrefno) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'notetype/data',\n            token: useToken,\n            params: {\n                hotelrefno: hotelrefno\n            }\n        }).then((response) => {\n            if (response.status === 200 && response.data && response.data.data.res) {\n                return response.data.data.res\n            } else {\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const defNoteData = (hotelrefno) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'ranote/def',\n            token: useToken,\n            params: {\n                hotelrefno: hotelrefno\n            }\n        }).then((response) => {\n            if (response.status === 200 && response.data && response.data.data) {\n                return response.data.data\n            } else {\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const setNoteData = (data, hotelrefno) => {\n        return Insert({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'ranote',\n            token: useToken,\n            params: {\n                hotelrefno: hotelrefno\n            },\n            data\n        }).then((response) => {\n            return response.status === 200 && response.data && response.data.data;\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const handleRequestProfileInfoChange = async (clientDataDifferences) => {\n        let noteValue = ''\n        clientDataDifferences.map((item) => noteValue += `${item.label}: ${item.oldval} >>> ${item.newval};;;`)\n\n        const noteCatDataselfId = await getNotecatDataself(useClientOrestState.hotelrefno)\n        const noteTypeDataId = await getNotetypeData(useClientOrestState.hotelrefno)\n\n        let getDefaultNote = await defNoteData(useClientOrestState.hotelrefno)\n        getDefaultNote.notecatid = noteCatDataselfId\n        getDefaultNote.notetypeid = noteTypeDataId\n        getDefaultNote.note = noteValue\n        getDefaultNote.masterid = useClientOrestState.mid\n\n        return await setNoteData(getDefaultNote, useClientOrestState.hotelrefno)\n    }\n\n    const isSignatureAvailable = async (code, mid) => {\n        return List({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RAFILE,\n            token: useToken,\n            params: {\n                query: `code::${code},masterid::${mid}`,\n                limit: 1,\n                allhotels: true,\n            },\n        }).then((rafileListResponse) => {\n            return rafileListResponse.status === 200 && rafileListResponse?.data?.data.length > 0\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const sendHotelNotifyMail = async (changes) => {\n        return await sendGuestChangeNotifyMail(\n            isPrimaryGuest ? !useClientReservation?.gid : true,\n            'client',\n            'upd',\n            useClientOrestState.id,\n            isPrimaryGuest ? useClientReservation?.gid || useClientOrestState.gid : useClientOrestState.gid,\n            {\n                roomno: isReservationStatusAccepted() && usePrimaryClientReservation?.roomno || '',\n                clientname: useClientOrestState.clientname || '',\n                reservno: isReservationStatusAccepted() && usePrimaryClientReservation?.reservno || '',\n                changes: JSON.stringify({ changeItems: changes }),\n            },\n            isPrimaryGuest ? useClientReservation?.hotelrefno || GENERAL_SETTINGS.HOTELREFNO : GENERAL_SETTINGS.HOTELREFNO,\n        )\n    }\n\n    const primaryGuestRequiredFieldCheck = async () => {\n        if(!usePrivacyTransactions.datapolicy.value || !usePrivacyTransactions.pref.value){\n            enqueueSnackbar(t('str_pleaseCheckMandatoryFields'), { variant: 'warning' })\n            setIsUpdating(false)\n            return false\n        }\n\n        let isRequiredFieldMistake = false\n        const newUseClientInitialState = {...useClientInitialState}\n\n        for (let key of Object.keys(newUseClientInitialState)) {\n            const getField = newUseClientInitialState[key]\n            if (getField.isBase && getField.isRequired && !getField.value || getField.isError) {\n                isRequiredFieldMistake = true\n                newUseClientInitialState[key].isError = true\n            }\n        }\n\n        if (useClientInitialState.signature.isRequired) {\n            const signatureAvailable = await isSignatureAvailable(useClientInitialState.signature.optionKey,  useOtherGuestResname ? useOtherGuestResname[useClientInitialState.signature.defValKey] : useClientReservation[useClientInitialState.signature.defValKey])\n            if (!signatureAvailable) {\n                isRequiredFieldMistake = true\n                newUseClientInitialState[useClientInitialState.signature.key].isError = true\n            }\n        }\n\n        if(isRequiredFieldMistake){\n            enqueueSnackbar(t('str_pleaseCheckMandatoryFields'), { variant: 'warning' })\n            setUseClientInitialState(newUseClientInitialState)\n            setIsUpdating(false)\n            return false\n        }\n\n        return true\n    }\n\n    const getOtherGuestsClientIdList = (reservno) => {\n        return ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RESNAME,\n            token: useToken,\n            params: {\n                query: `reservno:${reservno}`,\n                allhotels: true,\n            },\n        }).then((resnameResponse) => {\n            if (resnameResponse.status === 200 && resnameResponse?.data?.data && resnameResponse?.data?.data.length > 0) {\n                return resnameResponse.data.data.map((resname) => resname.clientid)\n            } else {\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const getOtherGuestsClientList = (otherGuestsClientIdList) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'client/view/list/get/id',\n            method: 'POST',\n            token: useToken,\n            params: {\n                allhotels: true,\n            },\n            data: otherGuestsClientIdList,\n        }).then((clientViewListGetIdResponse) => {\n            if (clientViewListGetIdResponse.status === 200 && clientViewListGetIdResponse?.data?.data) {\n                return clientViewListGetIdResponse.data.data\n            } else {\n                return false\n            }\n        }).catch(() => {\n            return false\n        })\n    }\n\n    const otherGuestRequiredFieldCheck = async (numberOfOtherGuest) => {\n        const otherGuestsClientIdList = await getOtherGuestsClientIdList(useClientReservation.reservno)\n        const otherGuestsClientList = await getOtherGuestsClientList(otherGuestsClientIdList)\n\n        if (GENERAL_SETTINGS.hotelSettings.ci_chkallcards && otherGuestsClientList && otherGuestsClientList.length !== numberOfOtherGuest) {\n            enqueueSnackbar(t('str_otherGuestsInformationIsMandatoryPleaseCheckOtherGuestInformationAndFillInTheRequiredFields'), { variant: 'warning' })\n            setIsOtherGuestsDialog(true)\n            return false\n        }\n\n        let isRequiredFieldMistake = false\n        otherGuestsClientList.map((otherGuest) => {\n            if (!otherGuest.firstname || !otherGuest.lastname || !otherGuest.birthdate || !otherGuest.nationid || !otherGuest.idno && !otherGuest.tridno) {\n                isRequiredFieldMistake = true\n            }\n        })\n\n        if (GENERAL_SETTINGS.hotelSettings.ci_chkallcards && isRequiredFieldMistake) {\n            enqueueSnackbar(t('str_otherGuestsInformationIsMandatoryPleaseCheckOtherGuestInformationAndFillInTheRequiredFields'), { variant: 'warning' })\n            setIsOtherGuestsDialog(true)\n            return false\n        }\n\n        return true\n    }\n\n    const handleClientUpdate = async (showNotificationMessages = true) => {\n        setIsUpdating(true)\n\n        const getPrimaryGuestRequiredFieldCheck = await primaryGuestRequiredFieldCheck()\n        if(!getPrimaryGuestRequiredFieldCheck){\n            return false\n        }\n\n        const newClientData = helper.objectValueEqualizer({ obj1: useClientInitialState })\n        const newClientDataDifferences = helper.objectDifferences({ obj1: newClientData, obj2: useClientOrestState, labelKeys: useClientInitialState, translate: t, langcode: GENERAL_SETTINGS.hotelLocalLangGCode })\n\n        if(newClientDataDifferences.length > 0 || usePrivacyTransactions.pref.isUpdate || usePrivacyTransactions.datapolicy.isUpdate) {\n            if (GENERAL_SETTINGS.hotelSettings.profile_update || isEmpPortal) {\n                const isClientInfoUpdate = await clientInfoUpdate(newClientData, useClientOrestState.gid)\n                if(!isEmpPortal) {\n                    if (useOtherGuestResname) {\n                        await createClientLoginId(useClientOrestState.id)\n                    }\n                    if(useClientOrestState && useClientOrestState?.id){\n                        await sendHotelNotifyMail(newClientDataDifferences)\n                    }\n                }\n                setUsePrivacyTransactions({\n                    ...usePrivacyTransactions,\n                    datapolicy: { ...usePrivacyTransactions.datapolicy, isUpdate: false },\n                    pref: { ...usePrivacyTransactions.pref, isUpdate: false }\n                })\n                if (isClientInfoUpdate) {\n                    if (isPrimaryGuest) {\n                        setOrestState([isEmpPortal ? 'emp' : 'client'], isClientInfoUpdate)\n                    }\n                    if(showNotificationMessages){\n                        enqueueSnackbar(t('str_clientInfoUpdateSuccess'), { variant: 'success' })\n                    }\n                    setIsUpdating(false)\n                    return true\n                } else {\n                    if(showNotificationMessages){\n                        enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'warning' })\n                    }\n                    setIsUpdating(false)\n                    return false\n                }\n            } else {\n                if(useClientOrestState && useClientOrestState.mid){\n                    const isRequestProfileInfoSave = await handleRequestProfileInfoChange(newClientDataDifferences)\n                    await sendHotelNotifyMail(newClientDataDifferences)\n                    setUsePrivacyTransactions({\n                        ...usePrivacyTransactions,\n                        datapolicy: { ...usePrivacyTransactions.datapolicy, isUpdate: false },\n                        pref: { ...usePrivacyTransactions.pref, isUpdate: false }\n                    })\n                    if (isRequestProfileInfoSave) {\n                        if(showNotificationMessages){\n                            enqueueSnackbar(t('str_contactMailSendMsg'), { variant: 'success' })\n                        }\n                        setIsUpdating(false)\n                        return true\n                    } else {\n                        if(showNotificationMessages){\n                            enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'warning' })\n                        }\n                        setIsUpdating(false)\n                        return false\n                    }\n                } else {\n                    enqueueSnackbar(t('str_clientRecordNotFound'), { variant: 'warning' })\n                    setIsUpdating(false)\n                    return true\n                }\n            }\n        }else{\n            if(showNotificationMessages){\n                enqueueSnackbar(t('str_noChangesYet'), { variant: 'warning' })\n            }\n            setIsUpdating(false)\n            return false\n        }\n    }\n\n    const getNumberOfOtherGuest = (useClientReservation) => {\n        return Number((useClientReservation.totalpax + useClientReservation.totalchd) - 1)\n    }\n\n    const handleCheckinConfirmationDialog = async () => {\n\n        if(isRoomSelectionPossible() && GENERAL_SETTINGS.hotelSettings.roomno){\n            setIsRoomSelectionDialog(true)\n            enqueueSnackbar(t('str_youMustChooseARoomBeforeCheckIn'), { variant: 'warning' })\n            return false\n        }\n\n        const numberOfOtherGuest = getNumberOfOtherGuest(useClientReservation)\n        if(numberOfOtherGuest > 0){\n            const getPrimaryGuestRequiredFieldCheck = await primaryGuestRequiredFieldCheck()\n            if (!getPrimaryGuestRequiredFieldCheck) {\n                return false\n            }\n\n            const getOtherGuestRequiredFieldCheck = await otherGuestRequiredFieldCheck(numberOfOtherGuest)\n            if (!getOtherGuestRequiredFieldCheck) {\n                return false\n            }\n        }\n\n        await handleClientUpdate(false)\n        setIsCheckinConfirmationDialog(true)\n        return true\n    }\n\n    const [fieldGroupAccordionExpanded, setFieldGroupAccordionExpanded] = useState(false)\n\n    const handleFieldGroupAccordionChange = (panel) => (event, newExpanded) => {\n        setFieldGroupAccordionExpanded(newExpanded ? panel : false)\n    }\n\n    return (\n        <React.Fragment>\n            {isPrimaryGuest && (isRoomSelectionPossible() || isReservationStatusAccepted()) ?\n                <Grid className={classesTabPanel.gridContainerToolbar} container spacing={1} direction='row' justify='flex-end' alignItems='center'>\n                    {isRoomSelectionPossible() ? (\n                        <Grid item style={{marginRight: 'auto'}}>\n                            <Alert style={{padding: '0px 10px'}} severity=\"info\" variant=\"outlined\">\n                                {isRoomSelectionPossible() && t('str_youMustChooseARoomBeforeCheckIn')}\n                            </Alert>\n                        </Grid>\n                    ): null}\n                    {isRoomSelectionPossible() ?\n                        <Grid item>\n                            <Button\n                                className={classesTabPanel.proceedButton}\n                                startIcon={<Icon>meeting_room</Icon>}\n                                variant='outlined'\n                                disableElevation\n                                size={fieldOptions.size.button}\n                                onClick={() => setIsRoomSelectionDialog(true)}\n                            >\n                                {t('str_selectRoomToStay')}\n                            </Button>\n                            <RoomSelection\n                                confirmClassName={classesTabPanel.proceedButton}\n                                open={isRoomSelectionDialog}\n                                onClose={()=> setIsRoomSelectionDialog(false)}\n                                useClientOrestState={useClientOrestState}\n                                useClientReservation={useClientReservation}\n                            />\n                        </Grid> : null}\n                    {(isReservationStatusAccepted() && getNumberOfOtherGuest(useClientReservation) > 0) ?\n                        <Grid item>\n                            <Button\n                                startIcon={<Icon>people</Icon>}\n                                variant='outlined'\n                                color='primary'\n                                disableElevation\n                                size={fieldOptions.size.button}\n                                onClick={() => setIsOtherGuestsDialog(true)}\n                            >\n                                {t('str_otherGuests')}\n                            </Button>\n                            <OtherGuests\n                                confirmClassName={classesTabPanel.proceedButton}\n                                open={isOtherGuestsDialog}\n                                onClose={()=> setIsOtherGuestsDialog(false)}\n                                useClientOrestState={useClientOrestState}\n                                useClientReservation={useClientReservation}\n                                otherGuestRequiredFieldCheck={otherGuestRequiredFieldCheck}\n                                isCheckInPossible={isCheckInPossible()}\n                                onCallBackCheckInButton={() => handleCheckinConfirmationDialog()}\n                            />\n                        </Grid> : null}\n                </Grid> : null\n            }\n            {fieldGroupAccordions.map((fieldGroupAccordion, i) => {\n                return (\n                    <Accordion\n                        key={i}\n                        expanded={fieldGroupAccordion.defExpand || fieldGroupAccordion.key === fieldGroupAccordionExpanded}\n                        onChange={handleFieldGroupAccordionChange(fieldGroupAccordion.key)}\n                        style={{\n                            marginLeft: 8,\n                            marginRight: 8\n                        }}\n                    >\n                        {fieldGroupAccordion.label !== '' ?\n                            <AccordionSummary\n                                style={{\n                                    borderBottom: '1px solid #ebebeba3'\n                                }}\n                                expandIcon={!fieldGroupAccordion.defExpand ? <ExpandMoreIcon />: null}\n                                aria-controls={`${fieldGroupAccordion.key}-content`}\n                                id={`${fieldGroupAccordion.key}-header`}\n                            >\n                                <Typography style={{\n                                    textAlign: 'left',\n                                    fontSize: 20,\n                                    fontWeight: 300,\n                                    color: '#2F3434',\n                                    lineHeight: 1.2,\n                                    paddingTop: 3,\n                                }}>\n                                    {t(fieldGroupAccordion.label)}\n                                </Typography>\n                            </AccordionSummary> : null}\n                        <AccordionDetails>\n                            <Grid item xs={12}>\n                                {fieldGroupArray.filter(fieldGroup => fieldGroup.accordionKey === fieldGroupAccordion.key).map((fieldGroup, keyIndex) => {\n                                    return (\n                                        <React.Fragment key={keyIndex}>\n                                            {fieldGroup.labelShow ? <TabHeader title={t(fieldGroup.label)} /> : null}\n                                            <Grid className={classesTabPanel.gridContainer} container spacing={2} direction='row' justify='flex-start' alignItems='center'>\n                                                {Object.keys(useClientInitialState).map((fieldItem, keyIndex) => {\n                                                    const useField = useClientInitialState[fieldItem]\n                                                    const useRequired = fieldGroup.key === useField.groupKey && useField.isVisible\n                                                    if (!useClientReservation && useRequired && !useField.isResRequired || useClientReservation && useRequired) {\n                                                        return (\n                                                            <Grid item xs={useField.gridBreakpoints.xs} sm={useField.gridBreakpoints.sm} md={useField.gridBreakpoints.md} key={keyIndex}>\n                                                                {getFormComponent(useField)}\n                                                            </Grid>\n                                                        )\n                                                    }\n                                                })}\n                                            </Grid>\n                                        </React.Fragment>\n                                    )\n                                })}\n                            </Grid>\n                        </AccordionDetails>\n                    </Accordion>\n                )\n            })}\n            <Grid className={classesTabPanel.gridContainer} container spacing={1} direction='row' justify='flex-start' alignItems='center' style={{marginTop: 20, marginLeft: 8}}>\n                <Grid item xs={12}>\n                    <FrameCheckbox\n                        disabled={isUpdating}\n                        required={usePrivacyTransactions.datapolicy.isRequired}\n                        value={usePrivacyTransactions.datapolicy.value}\n                        title=\"str_privacyAndPersonalDataProtectionPolicies\"\n                        linkText=\"str_iAcceptDataPolicy\"\n                        linkTextADesc=\"str_privacyAndPersonalDataProtectionPolicies\"\n                        iframePageUrl={GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strDataPolicy}?iframe=true`}\n                        isCheck={(e) => setUsePrivacyTransactions({...usePrivacyTransactions, datapolicy: { ...usePrivacyTransactions.datapolicy, value: e, isUpdate: true }})}\n                    />\n                </Grid>\n                {!isEmpPortal && (\n                    <Grid item xs={12}>\n                        <FrameCheckbox\n                            disabled={isUpdating}\n                            required={usePrivacyTransactions.pref.isRequired}\n                            value={usePrivacyTransactions.pref.value}\n                            title=\"str_hygieneAndTravelPolicies\"\n                            linkText=\"str_iAcceptTravelPolicy\"\n                            linkTextADesc=\"str_hygieneAndTravelPolicies\"\n                            ifamePageUrl={GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strTravelPolicy}?iframe=true`}\n                            isCheck={(e) => setUsePrivacyTransactions({...usePrivacyTransactions, pref: { ...usePrivacyTransactions.pref, value: e, isUpdate: true }})}\n                        />\n                    </Grid>\n                )}\n            </Grid>\n            <Grid className={classesTabPanel.gridContainerToolbar} container spacing={2} direction='row' justify='flex-end' alignItems='center'>\n                <Grid item>\n                    {isPrimaryGuest && isCheckInPossible() ?\n                        <Grid item>\n                            <Button\n                                disabled={isUpdating || !isCheckInDay()}\n                                className={classesTabPanel.proceedButton}\n                                startIcon={<Icon>done</Icon>}\n                                variant='outlined'\n                                disableElevation\n                                size={fieldOptions.size.button}\n                                onClick={() => handleCheckinConfirmationDialog()}\n                            >\n                                {t('str_proceedToCheckin')}\n                            </Button>\n                            <CheckInConfirmation\n                                confirmClassName={classesTabPanel.proceedButton}\n                                open={isCheckinConfirmationDialog}\n                                onClose={()=> setIsCheckinConfirmationDialog(false)}\n                                useClientOrestState={useClientOrestState}\n                                useClientReservation={useClientReservation}\n                            />\n                        </Grid> : <Button disabled={isUpdating} variant=\"contained\" color=\"primary\" disableElevation size={fieldOptions.size.button} onClick={() => handleClientUpdate()}><span style={{paddingRight: '4px'}}>{isUpdating && <LoadingSpinner size={18}/>}</span>{t('str_update')}</Button>\n                    }\n                </Grid>\n            </Grid>\n        </React.Fragment>\n    )\n}\n\nexport default ClientBase"]},"metadata":{},"sourceType":"module"}