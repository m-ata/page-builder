{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nvar _warn = _interopRequireDefault(require(\"./utils/warn\"));\n\nvar Snippets = {\n  tags: function tags(_ref) {\n    var id = _ref.id,\n        events = _ref.events,\n        dataLayer = _ref.dataLayer,\n        dataLayerName = _ref.dataLayerName,\n        preview = _ref.preview,\n        auth = _ref.auth;\n    var gtm_auth = \"&gtm_auth=\".concat(auth);\n    var gtm_preview = \"&gtm_preview=\".concat(preview);\n    if (!id) (0, _warn[\"default\"])('GTM Id is required');\n    var iframe = \"\\n      <iframe src=\\\"https://www.googletagmanager.com/ns.html?id=\".concat(id).concat(gtm_auth).concat(gtm_preview, \"&gtm_cookies_win=x\\\"\\n        height=\\\"0\\\" width=\\\"0\\\" style=\\\"display:none;visibility:hidden\\\" id=\\\"tag-manager\\\"></iframe>\");\n    var script = \"\\n      (function(w,d,s,l,i){w[l]=w[l]||[];\\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', \".concat(JSON.stringify(events).slice(1, -1), \"});\\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'\").concat(gtm_auth).concat(gtm_preview, \"&gtm_cookies_win=x';\\n        f.parentNode.insertBefore(j,f);\\n      })(window,document,'script','\").concat(dataLayerName, \"','\").concat(id, \"');\");\n    var dataLayerVar = this.dataLayer(dataLayer, dataLayerName);\n    return {\n      iframe: iframe,\n      script: script,\n      dataLayerVar: dataLayerVar\n    };\n  },\n  dataLayer: function dataLayer(_dataLayer, dataLayerName) {\n    return \"\\n      window.\".concat(dataLayerName, \" = window.\").concat(dataLayerName, \" || [];\\n      window.\").concat(dataLayerName, \".push(\").concat(JSON.stringify(_dataLayer), \")\");\n  }\n};\nmodule.exports = Snippets;","map":{"version":3,"sources":["/Users/mata/app-cloudweb/@webcms-globals/tag-manager/Snippets.js"],"names":["Snippets","tags","id","events","dataLayer","dataLayerName","preview","auth","gtm_auth","gtm_preview","iframe","script","JSON","stringify","slice","dataLayerVar","module","exports"],"mappings":";;;;AAAA;;AAEA,IAAMA,QAAQ,GAAG;AACbC,EAAAA,IAAI,EAAE,oBAAmE;AAAA,QAAvDC,EAAuD,QAAvDA,EAAuD;AAAA,QAAnDC,MAAmD,QAAnDA,MAAmD;AAAA,QAA3CC,SAA2C,QAA3CA,SAA2C;AAAA,QAAhCC,aAAgC,QAAhCA,aAAgC;AAAA,QAAjBC,OAAiB,QAAjBA,OAAiB;AAAA,QAARC,IAAQ,QAARA,IAAQ;AACrE,QAAMC,QAAQ,uBAAgBD,IAAhB,CAAd;AACA,QAAME,WAAW,0BAAmBH,OAAnB,CAAjB;AAEA,QAAI,CAACJ,EAAL,EAAS,sBAAK,oBAAL;AAET,QAAMQ,MAAM,+EAC6CR,EAD7C,SACkDM,QADlD,SAC6DC,WAD7D,iIAAZ;AAIA,QAAME,MAAM,+HAEmDC,IAAI,CAACC,SAAL,CAAeV,MAAf,EAAuBW,KAAvB,CAA6B,CAA7B,EAAgC,CAAC,CAAjC,CAFnD,gMAI6DN,QAJ7D,SAIwEC,WAJxE,+GAMiBJ,aANjB,gBAMoCH,EANpC,QAAZ;AAQA,QAAMa,YAAY,GAAG,KAAKX,SAAL,CAAeA,SAAf,EAA0BC,aAA1B,CAArB;AAEA,WAAO;AACHK,MAAAA,MAAM,EAANA,MADG;AAEHC,MAAAA,MAAM,EAANA,MAFG;AAGHI,MAAAA,YAAY,EAAZA;AAHG,KAAP;AAKH,GA1BY;AA2BbX,EAAAA,SAAS,EAAE,mBAAUA,UAAV,EAAqBC,aAArB,EAAoC;AAC3C,oCACOA,aADP,uBACiCA,aADjC,mCAEOA,aAFP,mBAE6BO,IAAI,CAACC,SAAL,CAAeT,UAAf,CAF7B;AAGH;AA/BY,CAAjB;AAkCAY,MAAM,CAACC,OAAP,GAAiBjB,QAAjB","sourcesContent":["import warn from './utils/warn'\n\nconst Snippets = {\n    tags: function ({ id, events, dataLayer, dataLayerName, preview, auth }) {\n        const gtm_auth = `&gtm_auth=${auth}`\n        const gtm_preview = `&gtm_preview=${preview}`\n\n        if (!id) warn('GTM Id is required')\n\n        const iframe = `\n      <iframe src=\"https://www.googletagmanager.com/ns.html?id=${id}${gtm_auth}${gtm_preview}&gtm_cookies_win=x\"\n        height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\" id=\"tag-manager\"></iframe>`\n\n        const script = `\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', ${JSON.stringify(events).slice(1, -1)}});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'${gtm_auth}${gtm_preview}&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','${dataLayerName}','${id}');`\n\n        const dataLayerVar = this.dataLayer(dataLayer, dataLayerName)\n\n        return {\n            iframe,\n            script,\n            dataLayerVar\n        }\n    },\n    dataLayer: function (dataLayer, dataLayerName) {\n        return `\n      window.${dataLayerName} = window.${dataLayerName} || [];\n      window.${dataLayerName}.push(${JSON.stringify(dataLayer)})`\n    }\n}\n\nmodule.exports = Snippets"]},"metadata":{},"sourceType":"script"}