{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/Client/Update.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useContext, useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport styles from 'components/guest/register/style/Register.style';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { DatePicker, LocalizationProvider } from '@material-ui/pickers';\nimport { UseOrest } from '@webcms/orest';\nimport MomentAdapter from '@date-io/moment';\nimport WebCmsGlobal from 'components/webcms-global';\nimport axios from 'axios';\nimport { OREST_ENDPOINT, REQUEST_METHOD_CONST } from 'model/orest/constants';\nimport moment from 'moment';\nimport { required, validateEmail } from 'state/utils/form';\nimport Button from '@material-ui/core/Button';\nimport GenderSelect from 'components/guest/register/selects/GenderSelect';\nimport NationSelect from 'components/guest/register/selects/NationSelect';\nimport CountrySelect from 'components/guest/register/selects/CountrySelect';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport FrameCheckbox from '@webcms-ui/core/frame-checkbox';\nimport * as global from '@webcms-globals';\nimport { LocaleContext } from 'lib/translations/context/LocaleContext';\nimport PhoneInput from '@webcms-ui/core/phone-input';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { useSnackbar } from 'notistack';\nimport { connect } from 'react-redux';\nimport { updateState } from 'state/actions';\nconst useStyles = makeStyles(styles);\nconst VARIANT = 'filled';\n\nconst Update = props => {\n  const classes = useStyles();\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    t\n  } = useTranslation();\n  const {\n    locale\n  } = useContext(LocaleContext);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    open,\n    auth,\n    logInfo,\n    locationName,\n    onCallback,\n    updateState\n  } = props;\n  const token = auth.access_token; //state\n\n  const {\n    0: isRegistering,\n    1: setIsRegistering\n  } = useState(false);\n  const {\n    0: clientInfoData,\n    1: setClientInfoData\n  } = useState(false);\n  const isReqField = locationName !== 'survey' ? true : false;\n  const {\n    0: client,\n    1: setClient\n  } = useState({\n    firstname: {\n      value: '',\n      isRequired: true,\n      isError: false,\n      errorText: ''\n    },\n    lastname: {\n      value: '',\n      isRequired: true,\n      isError: false,\n      errorText: ''\n    },\n    birthdate: {\n      value: '',\n      isRequired: true,\n      isError: false,\n      errorText: ''\n    },\n    gender: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    email: {\n      value: '',\n      isRequired: true,\n      isError: false,\n      errorText: ''\n    },\n    mobiletel: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    nationid: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    country: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    address1: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    city: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    zip: {\n      value: '',\n      isRequired: false,\n      isError: false,\n      errorText: ''\n    },\n    hasdatapolicy: {\n      value: false,\n      isRequired: true,\n      isError: false,\n      errorText: ''\n    },\n    haspref: {\n      value: false,\n      isRequired: isReqField,\n      isError: false,\n      errorText: ''\n    }\n  });\n  useEffect(() => {\n    updateState('guest', 'loginTo', 60);\n    UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'client/getbyid',\n      token,\n      params: {\n        key: logInfo.refid,\n        allhotels: true\n      }\n    }).then(clientResponse => {\n      if (clientResponse.status === 200 && clientResponse.data.count > 0) {\n        let clientResponseData = clientResponse.data.data;\n        setClientInfoData(clientResponseData);\n        clientResponseData.hasdatapolicy = logInfo.hasdatapolicy || false;\n        clientResponseData.haspref = logInfo.haspref || false;\n        let newClient = client;\n        Object.keys(newClient).forEach(key => {\n          const value = clientResponseData[key];\n\n          if (value) {\n            newClient = _objectSpread(_objectSpread({}, newClient), {}, {\n              [key]: _objectSpread(_objectSpread({}, newClient[key]), {}, {\n                value: value || ''\n              })\n            });\n          }\n        });\n        setClient(newClient);\n      }\n    });\n  }, []);\n\n  const handleChangeTextField = (event, type) => {\n    let key, value;\n\n    if (type === 'phone') {\n      key = 'mobiletel';\n      value = event.replace(/ /g, '');\n    } else {\n      event.preventDefault();\n      key = event.target.name;\n      value = event.target.value;\n    }\n\n    setClient(_objectSpread(_objectSpread({}, client), {}, {\n      [key]: _objectSpread(_objectSpread({}, client[key]), {}, {\n        value: value,\n        isError: client[key].isRequired && !!required(value),\n        errorText: client[key].isRequired && required(value)\n      })\n    }));\n  };\n\n  const handleChangeDatePicker = date => {\n    const dateValue = moment(date).format(OREST_ENDPOINT.DATEFORMAT);\n    setClient(_objectSpread(_objectSpread({}, client), {}, {\n      birthdate: _objectSpread(_objectSpread({}, client.birthdate), {}, {\n        value: dateValue,\n        isError: dateValue === 'Invalid date',\n        errorText: '*Invalid date'\n      })\n    }));\n  };\n\n  const handleChangeSelect = event => {\n    setClient(_objectSpread(_objectSpread({}, client), {}, {\n      [event.target.name]: _objectSpread(_objectSpread({}, client[event.target.name]), {}, {\n        value: event.target.value,\n        isError: client[event.target.name].isRequired && !!required(event.target.value),\n        errorText: client[event.target.name].isRequired && required(event.target.value)\n      })\n    }));\n  };\n\n  const handleClickDataPolicyButtons = isAccept => {\n    setClient(_objectSpread(_objectSpread({}, client), {}, {\n      hasdatapolicy: _objectSpread(_objectSpread({}, client.hasdatapolicy), {}, {\n        value: isAccept,\n        isError: client.hasdatapolicy.isRequired && !!required(isAccept),\n        errorText: client.hasdatapolicy.isRequired && required(isAccept)\n      })\n    }));\n  };\n\n  const handleClickTravelPolicyButtons = isAccept => {\n    setClient(_objectSpread(_objectSpread({}, client), {}, {\n      haspref: _objectSpread(_objectSpread({}, client.haspref), {}, {\n        value: isAccept,\n        isError: client.haspref.isRequired && !!required(isAccept),\n        errorText: client.haspref.isRequired && required(isAccept)\n      })\n    }));\n  };\n\n  const handleClickRegister = () => {\n    let isRequiredError = false;\n    let isEmailError = false;\n    const clientData = client;\n    Object.keys(clientData).forEach(function (key) {\n      if (clientData[key].isRequired) {\n        if (required(clientData[key].value)) {\n          clientData[key].isError = true;\n          clientData[key].errorText = '*Required';\n          isRequiredError = true;\n        }\n      }\n    });\n\n    if (validateEmail(client.email.value)) {\n      clientData.email.isError = true;\n      clientData.email.errorText = '*Invalid email address';\n      isEmailError = true;\n    }\n\n    setClient(_objectSpread({}, client));\n\n    if (!isEmailError && !isRequiredError) {\n      setIsRegistering(true);\n      axios({\n        url: GENERAL_SETTINGS.BASE_URL + 'api/ors/user/update',\n        method: REQUEST_METHOD_CONST.POST,\n        data: {\n          firstname: client.firstname.value,\n          lastname: client.lastname.value,\n          birthdate: client.birthdate.value,\n          gender: client.gender.value,\n          email: client.email.value,\n          mobiletel: client.mobiletel.value,\n          nationid: client.nationid.value,\n          country: client.country.value,\n          address1: client.address1.value,\n          city: client.city.value,\n          zip: client.zip.value,\n          hasdatapolicy: client.hasdatapolicy.value,\n          haspref: client.haspref.value,\n          refid: logInfo.refid,\n          refgid: clientInfoData.gid,\n          updatetoken: token,\n          location: locationName,\n          clienthotelrefno: clientInfoData.hotelrefno || logInfo.hoteltopid || logInfo.hotelpid || logInfo.hotelrefno,\n          hotelrefno: GENERAL_SETTINGS.HOTELREFNO\n        }\n      }).then(response => {\n        if (response.data && response.data.success) {\n          UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'info/login',\n            token: token,\n            method: REQUEST_METHOD_CONST.GET\n          }).then(infoLoginResponse => {\n            if (infoLoginResponse.data && infoLoginResponse.data.success) {\n              onCallback(auth, infoLoginResponse.data.data);\n              enqueueSnackbar(t('str_clientInfoUpdateSuccess'), {\n                variant: 'success'\n              });\n            }\n          });\n        } else {\n          var _response$data;\n\n          if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.msg) === 'client_duplicate_mail') {\n            setIsRegistering(false);\n            enqueueSnackbar(t('str_thisEmailAddressHasBeenUsedBefore'), {\n              variant: 'error'\n            });\n          } else {\n            enqueueSnackbar(t('str_unexpectedProblem'), {\n              variant: 'error'\n            });\n          }\n        }\n      });\n    } else {\n      setIsRegistering(false);\n      enqueueSnackbar(t('str_fillRequiredFields'), {\n        variant: 'error'\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: classes.registerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }\n  }, __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }, __jsx(Dialog, {\n    open: open,\n    \"aria-labelledby\": \"form-dialog-title\",\n    maxWidth: \"md\",\n    disableEscapeKeyDown: true,\n    disableBackdropClick: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }, __jsx(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 25\n    }\n  }, t('str_updateYourInformation')), __jsx(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    container: true,\n    className: classes.gridContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    className: classes.grid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 41\n    }\n  }, __jsx(TextField, {\n    id: \"firstname\",\n    name: \"firstname\",\n    label: t('str_firstName'),\n    required: client.firstname.isRequired,\n    fullWidth: true,\n    variant: VARIANT,\n    disabled: isRegistering,\n    value: client.firstname.value,\n    onChange: handleChangeTextField,\n    error: client.firstname.isError,\n    helperText: client.firstname.isError && client.firstname.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 45\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 41\n    }\n  }, __jsx(TextField, {\n    id: \"lastname\",\n    name: \"lastname\",\n    label: t('str_lastName'),\n    required: client.lastname.isRequired,\n    fullWidth: true,\n    variant: VARIANT,\n    disabled: isRegistering,\n    value: client.lastname.value,\n    onChange: handleChangeTextField,\n    error: client.lastname.isError,\n    helperText: client.lastname.isError && client.lastname.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 45\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 41\n    }\n  }, __jsx(TextField, {\n    id: \"email\",\n    name: \"email\",\n    label: t('str_email'),\n    required: client.email.isRequired,\n    fullWidth: true,\n    variant: VARIANT,\n    disabled: isRegistering,\n    value: client.email.value,\n    onChange: event => {\n      handleChangeTextField(event);\n    },\n    error: client.email.isError,\n    helperText: client.email.isError && client.email.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 45\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 41\n    }\n  }, __jsx(LocalizationProvider, {\n    dateLibInstance: moment,\n    dateAdapter: MomentAdapter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 45\n    }\n  }, __jsx(DatePicker, {\n    id: \"birthdate\",\n    name: \"birthdate\",\n    label: t('str_birthDate'),\n    value: client.birthdate.value,\n    inputFormat: \"DD/MM/YYYY\",\n    required: client.birthdate.isRequired,\n    disableFuture: true,\n    disabled: isRegistering,\n    onChange: handleChangeDatePicker,\n    renderInput: props => __jsx(TextField, _extends({}, props, {\n      fullWidth: true,\n      variant: VARIANT,\n      required: client.lastname.isRequired,\n      error: client.birthdate.isError,\n      helperText: client.birthdate.isError && client.birthdate.errorText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 77\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 49\n    }\n  }))), locationName !== \"survey\" && __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 49\n    }\n  }, __jsx(GenderSelect, {\n    id: \"gender\",\n    name: \"gender\",\n    inputLabel: t('str_gender'),\n    value: client.gender.value,\n    onChange: handleChangeSelect,\n    disabled: isRegistering,\n    variant: VARIANT,\n    error: client.gender.isError,\n    helperText: client.gender.isError && client.gender.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 49\n    }\n  }, __jsx(PhoneInput, {\n    defaultCountry: locale === 'en' ? 'us' : locale,\n    preferredCountries: ['it', 'ie', 'de', 'fr', 'es', 'gb'],\n    regions: ['america', 'europe', 'asia', 'oceania', 'africa'],\n    variant: VARIANT,\n    id: \"mobiletel\",\n    name: \"mobiletel\",\n    label: t('str_phone'),\n    fullWidth: true,\n    disabled: isRegistering,\n    value: client.mobiletel.value,\n    onChange: e => handleChangeTextField(e, 'phone'),\n    error: client.mobiletel.isError,\n    helperText: client.mobiletel.isError && client.mobiletel.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 49\n    }\n  }, __jsx(NationSelect, {\n    id: \"nationid\",\n    name: \"nationid\",\n    inputLabel: t('str_nationality'),\n    value: client.nationid.value,\n    onChange: handleChangeSelect,\n    disabled: isRegistering,\n    variant: VARIANT,\n    error: client.nationid.isError,\n    helperText: client.nationid.isError && client.nationid.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 49\n    }\n  }, __jsx(CountrySelect, {\n    id: \"country\",\n    name: \"country\",\n    inputLabel: t('str_country'),\n    value: client.country.value,\n    onChange: handleChangeSelect,\n    disabled: isRegistering,\n    variant: VARIANT,\n    error: client.country.isError,\n    helperText: client.country.isError && client.country.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    id: \"address1\",\n    name: \"address1\",\n    label: t('str_address'),\n    required: client.address1.isRequired,\n    fullWidth: true,\n    variant: VARIANT,\n    disabled: isRegistering,\n    value: client.address1.value,\n    onChange: handleChangeTextField,\n    error: client.address1.isError,\n    helperText: client.address1.isError && client.address1.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    id: \"city\",\n    name: \"city\",\n    label: t('str_city'),\n    required: client.city.isRequired,\n    fullWidth: true,\n    variant: VARIANT,\n    disabled: isRegistering,\n    value: client.city.value,\n    onChange: handleChangeTextField,\n    error: client.city.isError,\n    helperText: client.city.isError && client.city.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    id: \"zip\",\n    name: \"zip\",\n    label: t('str_zip'),\n    required: client.zip.isRequired,\n    fullWidth: true,\n    variant: VARIANT,\n    disabled: isRegistering,\n    value: client.zip.value,\n    onChange: handleChangeTextField,\n    error: client.zip.isError,\n    helperText: client.zip.isError && client.zip.errorText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 53\n    }\n  })))))), __jsx(Grid, {\n    container: true,\n    className: classes.gridContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    className: classes.grid,\n    style: {\n      margin: '12px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 41\n    }\n  }, __jsx(\"div\", {\n    style: {\n      paddingLeft: 18\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 45\n    }\n  }, __jsx(FrameCheckbox, {\n    required: true,\n    value: client.hasdatapolicy.value || false,\n    title: \"str_privacyAndPersonalDataProtectionPolicies\",\n    linkText: \"str_iAcceptDataPolicy\",\n    linkTextADesc: \"str_privacyAndPersonalDataProtectionPolicies\",\n    ifamePageUrl: GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strDataPolicy}?iframe=true`,\n    isCheck: e => handleClickDataPolicyButtons(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 49\n    }\n  }))), locationName !== \"survey\" && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 45\n    }\n  }, __jsx(\"div\", {\n    style: {\n      paddingLeft: 18\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 49\n    }\n  }, __jsx(FrameCheckbox, {\n    required: true,\n    value: client.haspref.value || false,\n    title: \"str_hygieneAndTravelPolicies\",\n    linkText: \"str_iAcceptTravelPolicy\",\n    linkTextADesc: \"str_hygieneAndTravelPolicies\",\n    ifamePageUrl: GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strTravelPolicy}?iframe=true`,\n    isCheck: e => handleClickTravelPolicyButtons(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 53\n    }\n  })))))), __jsx(Grid, {\n    container: true,\n    className: classes.gridContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    className: classes.grid,\n    justify: 'center',\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 41\n    }\n  }, __jsx(Button, {\n    onClick: () => handleClickRegister(),\n    disabled: isRegistering,\n    fullWidth: true,\n    variant: \"contained\",\n    className: classes.submit,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 45\n    }\n  }, t('str_update'))))))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Update);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/Client/Update.js"],"names":["React","useEffect","useContext","useState","Grid","TextField","styles","makeStyles","DatePicker","LocalizationProvider","UseOrest","MomentAdapter","WebCmsGlobal","axios","OREST_ENDPOINT","REQUEST_METHOD_CONST","moment","required","validateEmail","Button","GenderSelect","NationSelect","CountrySelect","useTranslation","FrameCheckbox","global","LocaleContext","PhoneInput","Dialog","DialogContent","DialogTitle","useSnackbar","connect","updateState","useStyles","VARIANT","Update","props","classes","GENERAL_SETTINGS","t","locale","enqueueSnackbar","open","auth","logInfo","locationName","onCallback","token","access_token","isRegistering","setIsRegistering","clientInfoData","setClientInfoData","isReqField","client","setClient","firstname","value","isRequired","isError","errorText","lastname","birthdate","gender","email","mobiletel","nationid","country","address1","city","zip","hasdatapolicy","haspref","apiUrl","OREST_URL","endpoint","params","key","refid","allhotels","then","clientResponse","status","data","count","clientResponseData","newClient","Object","keys","forEach","handleChangeTextField","event","type","replace","preventDefault","target","name","handleChangeDatePicker","date","dateValue","format","DATEFORMAT","handleChangeSelect","handleClickDataPolicyButtons","isAccept","handleClickTravelPolicyButtons","handleClickRegister","isRequiredError","isEmailError","clientData","url","BASE_URL","method","POST","refgid","gid","updatetoken","location","clienthotelrefno","hotelrefno","hoteltopid","hotelpid","HOTELREFNO","response","success","GET","infoLoginResponse","variant","msg","registerContainer","gridContainer","grid","e","margin","paddingLeft","common","strDefShortLangCode","guestWeb","strDataPolicy","strTravelPolicy","textAlign","submit","mapStateToProps","state","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from 'react'\nimport Grid from '@material-ui/core/Grid'\nimport TextField from '@material-ui/core/TextField'\nimport styles from 'components/guest/register/style/Register.style'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { DatePicker, LocalizationProvider } from '@material-ui/pickers'\nimport { UseOrest } from '@webcms/orest'\nimport MomentAdapter from '@date-io/moment'\nimport WebCmsGlobal from 'components/webcms-global'\nimport axios from 'axios'\nimport { OREST_ENDPOINT, REQUEST_METHOD_CONST, } from 'model/orest/constants'\nimport moment from 'moment'\nimport { required, validateEmail } from 'state/utils/form'\nimport Button from '@material-ui/core/Button'\nimport GenderSelect from 'components/guest/register/selects/GenderSelect'\nimport NationSelect from 'components/guest/register/selects/NationSelect'\nimport CountrySelect from 'components/guest/register/selects/CountrySelect'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport FrameCheckbox from '@webcms-ui/core/frame-checkbox'\nimport * as global from '@webcms-globals'\nimport { LocaleContext } from 'lib/translations/context/LocaleContext'\nimport PhoneInput from '@webcms-ui/core/phone-input'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport { useSnackbar } from 'notistack'\nimport { connect } from 'react-redux'\nimport { updateState } from 'state/actions'\n\nconst useStyles = makeStyles(styles)\nconst VARIANT = 'filled'\n\nconst Update = (props) =>{\n    const classes = useStyles()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n    const { t } = useTranslation()\n    const { locale } = useContext(LocaleContext)\n    const { enqueueSnackbar } = useSnackbar()\n\n    const { open, auth, logInfo, locationName, onCallback, updateState } = props\n    const token = auth.access_token\n\n    //state\n    const [isRegistering, setIsRegistering] = useState(false)\n    const [clientInfoData, setClientInfoData] = useState(false)\n    const isReqField = (locationName !== 'survey' ? true : false)\n    const [client, setClient] = useState({\n        firstname: { value: '', isRequired: true, isError: false, errorText: '' },\n        lastname: { value: '', isRequired: true, isError: false, errorText: '' },\n        birthdate: { value: '', isRequired: true, isError: false, errorText: '' },\n        gender: { value: '', isRequired: false, isError: false, errorText: '' },\n        email: { value: '', isRequired: true, isError: false, errorText: '' },\n        mobiletel: { value: '', isRequired: false, isError: false, errorText: '' },\n        nationid: { value: '', isRequired: false, isError: false, errorText: '' },\n        country: { value: '', isRequired: false, isError: false, errorText: '' },\n        address1: { value: '', isRequired: false, isError: false, errorText: '' },\n        city: { value: '', isRequired: false, isError: false, errorText: '' },\n        zip: { value: '', isRequired: false, isError: false, errorText: '' },\n        hasdatapolicy: { value: false, isRequired: true, isError: false, errorText: '' },\n        haspref: { value: false, isRequired: isReqField, isError: false, errorText: '' },\n    })\n\n    useEffect(() => {\n        updateState('guest', 'loginTo', 60)\n        UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'client/getbyid',\n            token,\n            params: {\n                key: logInfo.refid,\n                allhotels: true\n            },\n        }).then((clientResponse) => {\n            if (clientResponse.status === 200 && clientResponse.data.count > 0) {\n                let clientResponseData = clientResponse.data.data\n                setClientInfoData(clientResponseData)\n                clientResponseData.hasdatapolicy = logInfo.hasdatapolicy || false\n                clientResponseData.haspref = logInfo.haspref || false\n\n                let newClient = client\n                Object.keys(newClient).forEach((key) => {\n                    const value = clientResponseData[key]\n                    if (value) {\n                        newClient = {\n                            ...newClient,\n                            [key]: {\n                                ...newClient[key],\n                                value: value || '',\n                            },\n                        }\n                    }\n                })\n\n                setClient(newClient)\n            }\n        })\n    }, [])\n\n    const handleChangeTextField = (event, type) => {\n\n        let key, value\n        if (type === 'phone') {\n            key = 'mobiletel'\n            value = event.replace(/ /g, '')\n        } else {\n            event.preventDefault()\n            key = event.target.name\n            value = event.target.value\n        }\n\n        setClient({\n            ...client,\n            [key]: {\n                ...client[key],\n                value: value,\n                isError: client[key].isRequired && !!required(value),\n                errorText: client[key].isRequired && required(value),\n            },\n        })\n    }\n\n    const handleChangeDatePicker = (date) => {\n        const dateValue = moment(date).format(OREST_ENDPOINT.DATEFORMAT)\n        setClient({\n            ...client,\n            birthdate: {\n                ...client.birthdate,\n                value: dateValue,\n                isError: dateValue === 'Invalid date',\n                errorText: '*Invalid date',\n            },\n        })\n    }\n\n    const handleChangeSelect = (event) => {\n        setClient({\n            ...client,\n            [event.target.name]: {\n                ...client[event.target.name],\n                value: event.target.value,\n                isError: client[event.target.name].isRequired && !!required(event.target.value),\n                errorText: client[event.target.name].isRequired && required(event.target.value),\n            },\n        })\n    }\n\n    const handleClickDataPolicyButtons = (isAccept) => {\n        setClient({\n            ...client,\n            hasdatapolicy: {\n                ...client.hasdatapolicy,\n                value: isAccept,\n                isError: client.hasdatapolicy.isRequired && !!required(isAccept),\n                errorText: client.hasdatapolicy.isRequired && required(isAccept),\n            },\n        })\n    }\n\n    const handleClickTravelPolicyButtons = (isAccept) => {\n        setClient({\n            ...client,\n            haspref: {\n                ...client.haspref,\n                value: isAccept,\n                isError: client.haspref.isRequired && !!required(isAccept),\n                errorText: client.haspref.isRequired && required(isAccept),\n            },\n        })\n    }\n\n    const handleClickRegister = () => {\n        let isRequiredError = false\n        let isEmailError = false\n        const clientData = client\n\n        Object.keys(clientData).forEach(function(key) {\n            if (clientData[key].isRequired) {\n                if (required(clientData[key].value)) {\n                    clientData[key].isError = true\n                    clientData[key].errorText = '*Required'\n                    isRequiredError = true\n                }\n            }\n        })\n\n        if (validateEmail(client.email.value)) {\n            clientData.email.isError = true\n            clientData.email.errorText = '*Invalid email address'\n            isEmailError = true\n        }\n\n        setClient({ ...client })\n        if (!isEmailError && !isRequiredError) {\n            setIsRegistering(true)\n            axios({\n                url: GENERAL_SETTINGS.BASE_URL + 'api/ors/user/update',\n                method: REQUEST_METHOD_CONST.POST,\n                data: {\n                    firstname: client.firstname.value,\n                    lastname: client.lastname.value,\n                    birthdate: client.birthdate.value,\n                    gender: client.gender.value,\n                    email: client.email.value,\n                    mobiletel: client.mobiletel.value,\n                    nationid: client.nationid.value,\n                    country: client.country.value,\n                    address1: client.address1.value,\n                    city: client.city.value,\n                    zip: client.zip.value,\n                    hasdatapolicy: client.hasdatapolicy.value,\n                    haspref: client.haspref.value,\n                    refid: logInfo.refid,\n                    refgid: clientInfoData.gid,\n                    updatetoken: token,\n                    location: locationName,\n                    clienthotelrefno: clientInfoData.hotelrefno || logInfo.hoteltopid || logInfo.hotelpid || logInfo.hotelrefno,\n                    hotelrefno: GENERAL_SETTINGS.HOTELREFNO\n                },\n            }).then((response) => {\n                if (response.data && response.data.success) {\n                    UseOrest({\n                        apiUrl: GENERAL_SETTINGS.OREST_URL,\n                        endpoint: 'info/login',\n                        token: token,\n                        method: REQUEST_METHOD_CONST.GET,\n                    }).then((infoLoginResponse) => {\n                        if (infoLoginResponse.data && infoLoginResponse.data.success) {\n                            onCallback(auth, infoLoginResponse.data.data)\n                            enqueueSnackbar(t('str_clientInfoUpdateSuccess'), { variant: 'success' })\n                        }\n                    })\n                } else {\n                    if(response?.data?.msg === 'client_duplicate_mail'){\n                        setIsRegistering(false)\n                        enqueueSnackbar(t('str_thisEmailAddressHasBeenUsedBefore'), { variant: 'error' })\n                    }else{\n                        enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'error' })\n                    }\n                }\n            })\n        } else {\n            setIsRegistering(false)\n            enqueueSnackbar(t('str_fillRequiredFields'), { variant: 'error' })\n        }\n    }\n\n    return (\n        <div className={classes.registerContainer}>\n                <React.Fragment>\n                    <Dialog open={open} aria-labelledby=\"form-dialog-title\" maxWidth=\"md\" disableEscapeKeyDown disableBackdropClick>\n                        <DialogTitle id=\"form-dialog-title\">{t('str_updateYourInformation')}</DialogTitle>\n                        <DialogContent dividers={true}>\n                            <Grid container className={classes.gridContainer}>\n                                <Grid item xs={12}>\n                                    <Grid container spacing={3} className={classes.grid}>\n                                        <Grid item xs={12} sm={6}>\n                                            <TextField\n                                                id=\"firstname\"\n                                                name=\"firstname\"\n                                                label={t('str_firstName')}\n                                                required={client.firstname.isRequired}\n                                                fullWidth\n                                                variant={VARIANT}\n                                                disabled={isRegistering}\n                                                value={client.firstname.value}\n                                                onChange={handleChangeTextField}\n                                                error={client.firstname.isError}\n                                                helperText={client.firstname.isError && client.firstname.errorText}\n                                            />\n                                        </Grid>\n                                        <Grid item xs={12} sm={6}>\n                                            <TextField\n                                                id=\"lastname\"\n                                                name=\"lastname\"\n                                                label={t('str_lastName')}\n                                                required={client.lastname.isRequired}\n                                                fullWidth\n                                                variant={VARIANT}\n                                                disabled={isRegistering}\n                                                value={client.lastname.value}\n                                                onChange={handleChangeTextField}\n                                                error={client.lastname.isError}\n                                                helperText={client.lastname.isError && client.lastname.errorText}\n                                            />\n                                        </Grid>\n                                        <Grid item xs={12} sm={6}>\n                                            <TextField\n                                                id=\"email\"\n                                                name=\"email\"\n                                                label={t('str_email')}\n                                                required={client.email.isRequired}\n                                                fullWidth\n                                                variant={VARIANT}\n                                                disabled={isRegistering}\n                                                value={client.email.value}\n                                                onChange={(event) => {\n                                                    handleChangeTextField(event)\n                                                }}\n                                                error={client.email.isError}\n                                                helperText={client.email.isError && client.email.errorText}\n                                            />\n                                        </Grid>\n                                        <Grid item xs={12} md={6}>\n                                            <LocalizationProvider dateLibInstance={moment} dateAdapter={MomentAdapter}>\n                                                <DatePicker\n                                                    id=\"birthdate\"\n                                                    name=\"birthdate\"\n                                                    label={t('str_birthDate')}\n                                                    value={client.birthdate.value}\n                                                    inputFormat=\"DD/MM/YYYY\"\n                                                    required={client.birthdate.isRequired}\n                                                    disableFuture\n                                                    disabled={isRegistering}\n                                                    onChange={handleChangeDatePicker}\n                                                    renderInput={(props) => <TextField {...props} fullWidth variant={VARIANT} required={client.lastname.isRequired} error={client.birthdate.isError} helperText={client.birthdate.isError && client.birthdate.errorText}/>}\n                                                />\n                                            </LocalizationProvider>\n                                        </Grid>\n                                        {locationName !== \"survey\" && (\n                                            <React.Fragment>\n                                                <Grid item xs={12} sm={6}>\n                                                    <GenderSelect\n                                                        id=\"gender\"\n                                                        name=\"gender\"\n                                                        inputLabel={t('str_gender')}\n                                                        value={client.gender.value}\n                                                        onChange={handleChangeSelect}\n                                                        disabled={isRegistering}\n                                                        variant={VARIANT}\n                                                        error={client.gender.isError}\n                                                        helperText={client.gender.isError && client.gender.errorText}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <PhoneInput\n                                                        defaultCountry={locale === 'en' ? 'us': locale}\n                                                        preferredCountries={[\n                                                            'it',\n                                                            'ie',\n                                                            'de',\n                                                            'fr',\n                                                            'es',\n                                                            'gb',\n                                                        ]}\n                                                        regions={[\n                                                            'america',\n                                                            'europe',\n                                                            'asia',\n                                                            'oceania',\n                                                            'africa',\n                                                        ]}\n                                                        variant={VARIANT}\n                                                        id=\"mobiletel\"\n                                                        name=\"mobiletel\"\n                                                        label={t('str_phone')}\n                                                        fullWidth\n                                                        disabled={isRegistering}\n                                                        value={client.mobiletel.value}\n                                                        onChange={e => handleChangeTextField(e, 'phone')}\n                                                        error={client.mobiletel.isError}\n                                                        helperText={client.mobiletel.isError && client.mobiletel.errorText}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <NationSelect\n                                                        id=\"nationid\"\n                                                        name=\"nationid\"\n                                                        inputLabel={t('str_nationality')}\n                                                        value={client.nationid.value}\n                                                        onChange={handleChangeSelect}\n                                                        disabled={isRegistering}\n                                                        variant={VARIANT}\n                                                        error={client.nationid.isError}\n                                                        helperText={client.nationid.isError && client.nationid.errorText}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <CountrySelect\n                                                        id=\"country\"\n                                                        name=\"country\"\n                                                        inputLabel={t('str_country')}\n                                                        value={client.country.value}\n                                                        onChange={handleChangeSelect}\n                                                        disabled={isRegistering}\n                                                        variant={VARIANT}\n                                                        error={client.country.isError}\n                                                        helperText={client.country.isError && client.country.errorText}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <TextField\n                                                        id=\"address1\"\n                                                        name=\"address1\"\n                                                        label={t('str_address')}\n                                                        required={client.address1.isRequired}\n                                                        fullWidth\n                                                        variant={VARIANT}\n                                                        disabled={isRegistering}\n                                                        value={client.address1.value}\n                                                        onChange={handleChangeTextField}\n                                                        error={client.address1.isError}\n                                                        helperText={client.address1.isError && client.address1.errorText}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <TextField\n                                                        id=\"city\"\n                                                        name=\"city\"\n                                                        label={t('str_city')}\n                                                        required={client.city.isRequired}\n                                                        fullWidth\n                                                        variant={VARIANT}\n                                                        disabled={isRegistering}\n                                                        value={client.city.value}\n                                                        onChange={handleChangeTextField}\n                                                        error={client.city.isError}\n                                                        helperText={client.city.isError && client.city.errorText}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={6}>\n                                                    <TextField\n                                                        id=\"zip\"\n                                                        name=\"zip\"\n                                                        label={t('str_zip')}\n                                                        required={client.zip.isRequired}\n                                                        fullWidth\n                                                        variant={VARIANT}\n                                                        disabled={isRegistering}\n                                                        value={client.zip.value}\n                                                        onChange={handleChangeTextField}\n                                                        error={client.zip.isError}\n                                                        helperText={client.zip.isError && client.zip.errorText}\n                                                    />\n                                                </Grid>\n                                            </React.Fragment>\n                                        )}\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                            <Grid container className={classes.gridContainer}>\n                                <Grid item xs={12}>\n                                    <Grid container className={classes.grid} style={{ margin: '12px 0' }}>\n                                        <Grid item xs={12}>\n                                            <div style={{ paddingLeft: 18 }}>\n                                                <FrameCheckbox\n                                                    required={true}\n                                                    value={client.hasdatapolicy.value || false}\n                                                    title=\"str_privacyAndPersonalDataProtectionPolicies\"\n                                                    linkText=\"str_iAcceptDataPolicy\"\n                                                    linkTextADesc=\"str_privacyAndPersonalDataProtectionPolicies\"\n                                                    ifamePageUrl={GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strDataPolicy}?iframe=true`}\n                                                    isCheck={(e) => handleClickDataPolicyButtons(e)}\n                                                />\n                                            </div>\n                                        </Grid>\n                                        {locationName !== \"survey\" && (\n                                            <Grid item xs={12}>\n                                                <div style={{ paddingLeft: 18 }}>\n                                                    <FrameCheckbox\n                                                        required={true}\n                                                        value={client.haspref.value || false}\n                                                        title=\"str_hygieneAndTravelPolicies\"\n                                                        linkText=\"str_iAcceptTravelPolicy\"\n                                                        linkTextADesc=\"str_hygieneAndTravelPolicies\"\n                                                        ifamePageUrl={GENERAL_SETTINGS.BASE_URL + `info/${locale || global.common.strDefShortLangCode}/${global.guestWeb.strTravelPolicy}?iframe=true`}\n                                                        isCheck={(e) => handleClickTravelPolicyButtons(e)}\n                                                    />\n                                                </div>\n                                            </Grid>\n                                        )}\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                            <Grid container className={classes.gridContainer}>\n                                <Grid item xs={12}>\n                                    <Grid\n                                        container\n                                        spacing={3}\n                                        className={classes.grid}\n                                        justify={'center'}\n                                        style={{ textAlign: 'center' }}\n                                    >\n                                        <Grid item xs={12}>\n                                            <Button\n                                                onClick={()=> handleClickRegister()}\n                                                disabled={isRegistering}\n                                                fullWidth\n                                                variant=\"contained\"\n                                                className={classes.submit}\n                                                color=\"primary\"\n                                            >\n                                                {t('str_update')}\n                                            </Button>\n                                        </Grid>\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                        </DialogContent>\n                    </Dialog>\n                </React.Fragment>\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Update)\n"]},"metadata":{},"sourceType":"module"}