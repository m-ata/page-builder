{"ast":null,"code":"\"use strict\";\n\nvar _warn = _interopRequireDefault(require(\"./utils/warn\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Snippets = {\n  tags: function ({\n    id,\n    events,\n    dataLayer,\n    dataLayerName,\n    preview,\n    auth\n  }) {\n    const gtm_auth = `&gtm_auth=${auth}`;\n    const gtm_preview = `&gtm_preview=${preview}`;\n    if (!id) (0, _warn.default)('GTM Id is required');\n    const iframe = `\n      <iframe src=\"https://www.googletagmanager.com/ns.html?id=${id}${gtm_auth}${gtm_preview}&gtm_cookies_win=x\"\n        height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\" id=\"tag-manager\"></iframe>`;\n    const script = `\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', ${JSON.stringify(events).slice(1, -1)}});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'${gtm_auth}${gtm_preview}&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','${dataLayerName}','${id}');`;\n    const dataLayerVar = this.dataLayer(dataLayer, dataLayerName);\n    return {\n      iframe,\n      script,\n      dataLayerVar\n    };\n  },\n  dataLayer: function (dataLayer, dataLayerName) {\n    return `\n      window.${dataLayerName} = window.${dataLayerName} || [];\n      window.${dataLayerName}.push(${JSON.stringify(dataLayer)})`;\n  }\n};\nmodule.exports = Snippets;","map":{"version":3,"sources":["/Users/mata/app-cloudweb/@webcms-globals/tag-manager/Snippets.js"],"names":["Snippets","tags","id","events","dataLayer","dataLayerName","preview","auth","gtm_auth","gtm_preview","iframe","script","JSON","stringify","slice","dataLayerVar","module","exports"],"mappings":";;AAAA;;;;AAEA,MAAMA,QAAQ,GAAG;AACbC,EAAAA,IAAI,EAAE,UAAU;AAAEC,IAAAA,EAAF;AAAMC,IAAAA,MAAN;AAAcC,IAAAA,SAAd;AAAyBC,IAAAA,aAAzB;AAAwCC,IAAAA,OAAxC;AAAiDC,IAAAA;AAAjD,GAAV,EAAmE;AACrE,UAAMC,QAAQ,GAAI,aAAYD,IAAK,EAAnC;AACA,UAAME,WAAW,GAAI,gBAAeH,OAAQ,EAA5C;AAEA,QAAI,CAACJ,EAAL,EAAS,mBAAK,oBAAL;AAET,UAAMQ,MAAM,GAAI;AACxB,iEAAiER,EAAG,GAAEM,QAAS,GAAEC,WAAY;AAC7F,+FAFQ;AAIA,UAAME,MAAM,GAAI;AACxB;AACA,uEAAuEC,IAAI,CAACC,SAAL,CAAeV,MAAf,EAAuBW,KAAvB,CAA6B,CAA7B,EAAgC,CAAC,CAAjC,CAAoC;AAC3G;AACA,iFAAiFN,QAAS,GAAEC,WAAY;AACxG;AACA,qCAAqCJ,aAAc,MAAKH,EAAG,KANnD;AAQA,UAAMa,YAAY,GAAG,KAAKX,SAAL,CAAeA,SAAf,EAA0BC,aAA1B,CAArB;AAEA,WAAO;AACHK,MAAAA,MADG;AAEHC,MAAAA,MAFG;AAGHI,MAAAA;AAHG,KAAP;AAKH,GA1BY;AA2BbX,EAAAA,SAAS,EAAE,UAAUA,SAAV,EAAqBC,aAArB,EAAoC;AAC3C,WAAQ;AAChB,eAAeA,aAAc,aAAYA,aAAc;AACvD,eAAeA,aAAc,SAAQO,IAAI,CAACC,SAAL,CAAeT,SAAf,CAA0B,GAFvD;AAGH;AA/BY,CAAjB;AAkCAY,MAAM,CAACC,OAAP,GAAiBjB,QAAjB","sourcesContent":["import warn from './utils/warn'\n\nconst Snippets = {\n    tags: function ({ id, events, dataLayer, dataLayerName, preview, auth }) {\n        const gtm_auth = `&gtm_auth=${auth}`\n        const gtm_preview = `&gtm_preview=${preview}`\n\n        if (!id) warn('GTM Id is required')\n\n        const iframe = `\n      <iframe src=\"https://www.googletagmanager.com/ns.html?id=${id}${gtm_auth}${gtm_preview}&gtm_cookies_win=x\"\n        height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\" id=\"tag-manager\"></iframe>`\n\n        const script = `\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', ${JSON.stringify(events).slice(1, -1)}});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'${gtm_auth}${gtm_preview}&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','${dataLayerName}','${id}');`\n\n        const dataLayerVar = this.dataLayer(dataLayer, dataLayerName)\n\n        return {\n            iframe,\n            script,\n            dataLayerVar\n        }\n    },\n    dataLayer: function (dataLayer, dataLayerName) {\n        return `\n      window.${dataLayerName} = window.${dataLayerName} || [];\n      window.${dataLayerName}.push(${JSON.stringify(dataLayer)})`\n    }\n}\n\nmodule.exports = Snippets"]},"metadata":{},"sourceType":"script"}