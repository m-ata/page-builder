{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/booking/components/ReservationCart.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useRef } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { IconButton, Grid, Typography, Button, Icon, Box, Badge, Divider } from '@material-ui/core';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { setToState } from 'state/actions';\nimport { connect } from 'react-redux';\nimport RoomListItem from './RoomListItem';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport * as global from '@webcms-globals';\nimport moment from 'moment';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ProgressIconButton from './ProgressIconButton';\nimport { bookingStepCodes } from 'components/booking/commons';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    [theme.breakpoints.down('md')]: {\n      position: 'fixed',\n      background: '#fff',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%',\n      display: 'none'\n    }\n  },\n  listRoot: {\n    flexGrow: 1\n  },\n  bottomMenu: {\n    display: 'none',\n    [theme.breakpoints.down('md')]: {\n      display: 'block',\n      position: 'fixed',\n      left: 0,\n      bottom: 0,\n      zIndex: 3,\n      width: '100%',\n      padding: 15,\n      background: '#f5f5f5',\n      boxShadow: '0 -1px 5px 0px #00000047'\n    }\n  },\n  wrapper: {\n    margin: 'auto',\n    background: theme.palette.background.paper,\n    boxShadow: '0 0 0 1px #d2d2d26b'\n  },\n  title: {\n    fontWeight: 'bold'\n  },\n  description: {\n    display: '-webkit-box',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    '-webkit-line-clamp': 2,\n    '-webkit-box-orient': 'vertical',\n    letterSpacing: 0\n  },\n  thumbnail: {\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    width: '100%',\n    height: '100%',\n    minHeight: 222,\n    borderRadius: 0\n  },\n  rightColumn: {\n    padding: 16\n  },\n  attributeList: {\n    display: 'inline-flex',\n    padding: 0\n  },\n  attributeItem: {\n    position: 'relative',\n    listStyleType: 'none',\n    padding: '15px',\n    borderRight: '1px solid #d2d2d26b',\n    '&:last-child': {\n      borderRight: 'none'\n    }\n  },\n  attributeIcon: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    '-ms-transform': 'translate(-50%, -50%)',\n    transform: 'translate(-50%, -50%)'\n  },\n  actionsContainer: {\n    display: 'flex',\n    alignItems: 'flex-end',\n    '& > div': {\n      textAlign: 'right'\n    }\n  },\n  addRoomTitle: {\n    paddingRight: 6\n  },\n  addRoomButton: {\n    padding: 6\n  },\n  deleteRoomButton: {\n    padding: 6\n  },\n  addRoomTotal: {\n    padding: 10,\n    width: 50\n  },\n  listItem: {\n    marginTop: 8,\n    marginBottom: 8,\n    padding: theme.spacing(1, 0)\n  },\n  total: {\n    fontWeight: 700\n  },\n  otherSummary: {\n    boxShadow: '0 0 0 1px #d2d2d26b',\n    padding: 10,\n    marginBottom: 20\n  },\n  openReservationCard: {\n    display: 'block!important',\n    zIndex: 4\n  },\n  continueButton: {\n    display: 'block'\n  },\n  closeContinueButton: {\n    display: 'none!important'\n  },\n  reservationSummary: {\n    display: 'inline-block',\n    marginTop: 7\n  },\n  closeReservationSummary: {\n    display: 'inline-block',\n    float: 'right',\n    [theme.breakpoints.up('md')]: {\n      visibility: 'hidden'\n    }\n  },\n  bottomMenuBadge: {\n    width: '100%'\n  },\n  buttonPadding: {\n    padding: 8\n  },\n  listItemAction: {\n    flexGrow: 1,\n    padding: '1px 10px 0px 0px',\n    position: 'absolute',\n    right: -7,\n    top: -12,\n    '& button[aria-label=\"close\"]:not([disabled])': {\n      color: '#a6a6a6',\n      '-webkit-transition': 'color 0.4s',\n      '-ms-transition': 'color 0.4s',\n      transition: 'color 0.4s'\n    },\n    \"&:hover\": {\n      '& button[aria-label=\"close\"]:not([disabled])': {\n        color: '#4d4d4d',\n        '-webkit-transition': 'color 0.4s',\n        '-ms-transition': 'color 0.4s',\n        transition: 'color 0.4s'\n      }\n    }\n  }\n}));\n\nconst ReservationCart = props => {\n  useEffect(() => window.addEventListener('scroll', () => handleScroll()), []);\n  const reservationCart = useRef(null);\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation();\n  const {\n    state,\n    setToState,\n    handleNextStep,\n    handleBackStep,\n    bookingActiveStep,\n    isDisabled\n  } = props;\n  const {\n    0: openReservationCart,\n    1: setOpenReservationCart\n  } = useState(false);\n\n  const handleScroll = () => {\n    const currentOffsetTop = reservationCart.current && reservationCart.current.getAttribute('lastOffsetTop') || reservationCart && reservationCart.current && reservationCart.current.offsetTop || false;\n\n    if (currentOffsetTop && window.pageYOffset > currentOffsetTop) {\n      if (reservationCart.current && !reservationCart.current.getAttribute('lastOffsetTop')) {\n        reservationCart.current.setAttribute('lastOffsetTop', reservationCart.current.offsetTop);\n      }\n\n      reservationCart.current.setAttribute('style', `position: fixed; top: 10px; width: ${reservationCart.current.offsetWidth}px;`);\n    } else {\n      if (reservationCart.current) {\n        reservationCart.current.removeAttribute('lastOffsetTop');\n        reservationCart.current.removeAttribute('style');\n      }\n    }\n  };\n\n  const settings = {\n    containerMaxWidth: 'lg',\n    containerSpacing: 0,\n    wrapper: {\n      elevation: 3,\n      square: true\n    },\n    leftColumn: {\n      xs: 12,\n      sm: 12,\n      md: 12,\n      lg: 4,\n      xl: 4\n    },\n    rightColumn: {\n      xs: 12,\n      sm: 12,\n      md: 12,\n      lg: 8,\n      xl: 8\n    }\n  };\n\n  const reservationInfo = () => {\n    let totalPrice = 0;\n    state.selectedRooms.map(item => {\n      totalPrice = totalPrice + item.totalprice;\n    });\n\n    if (state.flyTransferInfo) {\n      totalPrice = totalPrice + state.flyTransferInfo.priceInfo.res;\n    }\n\n    if (state.flyTransferReturnInfo) {\n      totalPrice = totalPrice + state.flyTransferReturnInfo.priceInfo.res;\n    }\n\n    return {\n      totalPrice: totalPrice\n    };\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.bottomMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 21\n    }\n  }, __jsx(Badge, {\n    color: \"secondary\",\n    variant: \"dot\",\n    className: classes.bottomMenuBadge,\n    invisible: !(state.selectedRooms && state.selectedRooms.length > 0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    disabled: isDisabled,\n    className: classes.buttonPadding,\n    variant: \"outlined\",\n    color: \"primary\",\n    disableElevation: true,\n    fullWidth: true,\n    onClick: () => setOpenReservationCart(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 29\n    }\n  }, t('str_yourStay'), \" (\", state.diffCurrency.use ? getSymbolFromCurrency(state.diffCurrency.use) : state.hotelBookingInfo.currencycode && getSymbolFromCurrency(state.hotelBookingInfo.currencycode), \" \", global.helper.formatPrice(reservationInfo().totalPrice), \")\"))), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    className: classes.buttonPadding,\n    color: \"primary\",\n    disableElevation: true,\n    fullWidth: true,\n    onClick: () => handleBackStep(),\n    disabled: isDisabled || state.isHandleContinue || !(state.selectedRooms && state.selectedRooms.length > 0),\n    startIcon: __jsx(ArrowBackIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 40\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 25\n    }\n  }, t('str_back'))), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    className: classes.buttonPadding,\n    variant: \"contained\",\n    color: \"primary\",\n    disableElevation: true,\n    fullWidth: true,\n    onClick: () => handleNextStep(),\n    disabled: isDisabled || !(state.isHandleContinue || state.selectedRooms && state.selectedRooms.length > 0),\n    endIcon: __jsx(ArrowForwardIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 38\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 25\n    }\n  }, t('str_continue'))))), __jsx(\"div\", {\n    className: clsx(classes.root, {\n      [classes.openReservationCard]: openReservationCart\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 13\n    }\n  }, __jsx(Box, {\n    p: 2,\n    className: classes.wrapper,\n    ref: reservationCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: settings.containerSpacing,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 25\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    className: classes.reservationSummary,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 29\n    }\n  }, t('str_yourStay')), __jsx(IconButton, {\n    edge: \"end\",\n    color: \"inherit\",\n    \"aria-label\": \"close\",\n    onClick: () => setOpenReservationCart(false),\n    className: classes.closeReservationSummary,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 29\n    }\n  }, __jsx(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 33\n    }\n  }, \"close\"))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 25\n    }\n  }, __jsx(List, {\n    className: classes.listRoot,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 29\n    }\n  }, state.selectedRooms && state.selectedRooms.length > 0 && state.selectedRooms.map((item, i) => __jsx(RoomListItem, {\n    key: i,\n    roomtypeId: item.roomtypeid,\n    roomName: item.roomtypename,\n    checkin: item.checkin,\n    checkout: item.checkout,\n    pax: item.totalpax,\n    child: item.totalchd,\n    night: item.totalnight,\n    price: item.totalprice,\n    pricecurr: item.pricecurr,\n    gid: item.gid,\n    reservno: item.reservno,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 37\n    }\n  })))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 25\n    }\n  }, __jsx(List, {\n    disablePadding: true,\n    className: classes.otherSummary,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 29\n    }\n  }, state.flyTransfer && state.flyTransferInfo && __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 37\n    }\n  }, __jsx(ListItem, {\n    className: classes.listItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 41\n    }\n  }, __jsx(ListItemText, {\n    primary: t('str_arrivalTransfer'),\n    secondary: `${moment(state.flyTransferInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - ${moment(state.flyTransferInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 45\n    }\n  }), __jsx(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 45\n    }\n  }, getSymbolFromCurrency(state.flyTransferInfo.priceInfo.pricecurr), \" \", global.helper.formatPrice(state.flyTransferInfo.priceInfo.res)), __jsx(\"div\", {\n    className: classes.listItemAction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 45\n    }\n  }, __jsx(ProgressIconButton, {\n    edge: \"end\",\n    ariaLabel: \"close\",\n    onClick: () => {\n      setToState(\"ibe\", [\"flyTransfer\"], false);\n      setToState(\"ibe\", [\"flyTransferInfo\"], false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 49\n    }\n  }, __jsx(Icon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 53\n    }\n  }, \"close\")))), __jsx(Divider, {\n    component: \"li\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 41\n    }\n  })), state.flyTransferReturn && state.flyTransferReturnInfo && __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 37\n    }\n  }, __jsx(ListItem, {\n    className: classes.listItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 41\n    }\n  }, __jsx(ListItemText, {\n    primary: t('str_departureTransfer'),\n    secondary: `${moment(state.flyTransferReturnInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - ${moment(state.flyTransferReturnInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 45\n    }\n  }), __jsx(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 45\n    }\n  }, getSymbolFromCurrency(state.flyTransferReturnInfo.priceInfo.pricecurr), \" \", global.helper.formatPrice(state.flyTransferReturnInfo.priceInfo.res)), __jsx(\"div\", {\n    className: classes.listItemAction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 45\n    }\n  }, __jsx(ProgressIconButton, {\n    edge: \"end\",\n    ariaLabel: \"close\",\n    onClick: () => {\n      setToState(\"ibe\", [\"flyTransferReturn\"], false);\n      setToState(\"ibe\", [\"flyTransferReturnInfo\"], false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 49\n    }\n  }, __jsx(Icon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 53\n    }\n  }, \"close\")))), __jsx(Divider, {\n    component: \"li\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 41\n    }\n  })), __jsx(ListItem, {\n    className: classes.listItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 33\n    }\n  }, __jsx(ListItemText, {\n    primary: t('str_total'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 37\n    }\n  }), __jsx(Typography, {\n    variant: \"subtitle1\",\n    className: classes.total,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 37\n    }\n  }, state.diffCurrency.use ? getSymbolFromCurrency(state.diffCurrency.use) : state.hotelBookingInfo.currencycode && getSymbolFromCurrency(state.hotelBookingInfo.currencycode), \" \", global.helper.formatPrice(reservationInfo().totalPrice))))), (bookingActiveStep === bookingStepCodes.rooms || bookingActiveStep === bookingStepCodes.addons) && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    className: clsx(classes.continueButton, {\n      [classes.closeContinueButton]: openReservationCart\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 29\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    onClick: () => handleNextStep(),\n    variant: \"contained\",\n    color: \"primary\",\n    disableElevation: true,\n    disabled: isDisabled || state.bookingIsLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 33\n    }\n  }, t('str_continueReservation')))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReservationCart);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/booking/components/ReservationCart.js"],"names":["React","useEffect","useState","useRef","clsx","makeStyles","IconButton","Grid","Typography","Button","Icon","Box","Badge","Divider","useTranslation","setToState","connect","RoomListItem","List","ListItem","ListItemText","getSymbolFromCurrency","global","moment","ArrowBackIcon","ArrowForwardIcon","ProgressIconButton","bookingStepCodes","useStyles","theme","root","flexGrow","breakpoints","down","position","background","top","left","height","width","display","listRoot","bottomMenu","bottom","zIndex","padding","boxShadow","wrapper","margin","palette","paper","title","fontWeight","description","overflow","textOverflow","letterSpacing","thumbnail","backgroundRepeat","backgroundSize","minHeight","borderRadius","rightColumn","attributeList","attributeItem","listStyleType","borderRight","attributeIcon","transform","actionsContainer","alignItems","textAlign","addRoomTitle","paddingRight","addRoomButton","deleteRoomButton","addRoomTotal","listItem","marginTop","marginBottom","spacing","total","otherSummary","openReservationCard","continueButton","closeContinueButton","reservationSummary","closeReservationSummary","float","up","visibility","bottomMenuBadge","buttonPadding","listItemAction","right","color","transition","ReservationCart","props","window","addEventListener","handleScroll","reservationCart","classes","t","state","handleNextStep","handleBackStep","bookingActiveStep","isDisabled","openReservationCart","setOpenReservationCart","currentOffsetTop","current","getAttribute","offsetTop","pageYOffset","setAttribute","offsetWidth","removeAttribute","settings","containerMaxWidth","containerSpacing","elevation","square","leftColumn","xs","sm","md","lg","xl","reservationInfo","totalPrice","selectedRooms","map","item","totalprice","flyTransferInfo","priceInfo","res","flyTransferReturnInfo","length","diffCurrency","use","hotelBookingInfo","currencycode","helper","formatPrice","isHandleContinue","i","roomtypeid","roomtypename","checkin","checkout","totalpax","totalchd","totalnight","pricecurr","gid","reservno","flyTransfer","flydate","format","flytime","flyTransferReturn","rooms","addons","bookingIsLoading","mapStateToProps","formReducer","ibe","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport clsx from 'clsx'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n    IconButton,\n    Grid,\n    Typography,\n    Button,\n    Icon,\n    Box,\n    Badge,\n    Divider\n} from '@material-ui/core'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { setToState } from 'state/actions'\nimport { connect } from 'react-redux'\nimport RoomListItem from './RoomListItem'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport * as global from '@webcms-globals'\nimport moment from 'moment'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\nimport ProgressIconButton from './ProgressIconButton'\nimport { bookingStepCodes } from 'components/booking/commons'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n        [theme.breakpoints.down('md')]: {\n            position: 'fixed',\n            background: '#fff',\n            top: 0,\n            left: 0,\n            height: '100%',\n            width: '100%',\n            display: 'none',\n        },\n    },\n    listRoot: {\n        flexGrow: 1,\n    },\n    bottomMenu: {\n        display: 'none',\n        [theme.breakpoints.down('md')]: {\n            display: 'block',\n            position: 'fixed',\n            left: 0,\n            bottom: 0,\n            zIndex: 3,\n            width: '100%',\n            padding: 15,\n            background: '#f5f5f5',\n            boxShadow: '0 -1px 5px 0px #00000047',\n        },\n    },\n    wrapper: {\n        margin: 'auto',\n        background: theme.palette.background.paper,\n        boxShadow: '0 0 0 1px #d2d2d26b',\n    },\n    title: {\n        fontWeight: 'bold',\n    },\n    description: {\n        display: '-webkit-box',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        '-webkit-line-clamp': 2,\n        '-webkit-box-orient': 'vertical',\n        letterSpacing: 0,\n    },\n    thumbnail: {\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n        width: '100%',\n        height: '100%',\n        minHeight: 222,\n        borderRadius: 0,\n    },\n    rightColumn: {\n        padding: 16,\n    },\n    attributeList: {\n        display: 'inline-flex',\n        padding: 0,\n    },\n    attributeItem: {\n        position: 'relative',\n        listStyleType: 'none',\n        padding: '15px',\n        borderRight: '1px solid #d2d2d26b',\n        '&:last-child': {\n            borderRight: 'none',\n        },\n    },\n    attributeIcon: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        '-ms-transform': 'translate(-50%, -50%)',\n        transform: 'translate(-50%, -50%)',\n    },\n    actionsContainer: {\n        display: 'flex',\n        alignItems: 'flex-end',\n        '& > div': {\n            textAlign: 'right',\n        },\n    },\n    addRoomTitle: {\n        paddingRight: 6,\n    },\n    addRoomButton: {\n        padding: 6,\n    },\n    deleteRoomButton: {\n        padding: 6,\n    },\n    addRoomTotal: {\n        padding: 10,\n        width: 50,\n    },\n    listItem: {\n        marginTop: 8,\n        marginBottom: 8,\n        padding: theme.spacing(1, 0),\n    },\n    total: {\n        fontWeight: 700,\n    },\n    otherSummary: {\n        boxShadow: '0 0 0 1px #d2d2d26b',\n        padding: 10,\n        marginBottom: 20,\n    },\n    openReservationCard: {\n        display: 'block!important',\n        zIndex: 4,\n    },\n    continueButton: {\n        display: 'block',\n    },\n    closeContinueButton: {\n        display: 'none!important',\n    },\n    reservationSummary: {\n        display: 'inline-block',\n        marginTop: 7,\n    },\n    closeReservationSummary: {\n        display: 'inline-block',\n        float: 'right',\n        [theme.breakpoints.up('md')]: {\n            visibility: 'hidden',\n        },\n    },\n    bottomMenuBadge: {\n        width: '100%',\n    },\n    buttonPadding: {\n        padding: 8\n    },\n    listItemAction:{\n        flexGrow: 1,\n        padding: '1px 10px 0px 0px',\n        position: 'absolute',\n        right: -7,\n        top: -12,\n        '& button[aria-label=\"close\"]:not([disabled])': {\n            color: '#a6a6a6',\n            '-webkit-transition': 'color 0.4s',\n            '-ms-transition': 'color 0.4s',\n            transition: 'color 0.4s',\n        },\n        \"&:hover\": {\n            '& button[aria-label=\"close\"]:not([disabled])': {\n                color: '#4d4d4d',\n                '-webkit-transition': 'color 0.4s',\n                '-ms-transition': 'color 0.4s',\n                transition: 'color 0.4s',\n            },\n        }\n    },\n}))\n\nconst ReservationCart = (props) => {\n    useEffect(() => window.addEventListener('scroll', () => handleScroll()), [])\n    const reservationCart = useRef(null)\n    const classes = useStyles()\n    const { t } = useTranslation()\n    const { state, setToState, handleNextStep, handleBackStep, bookingActiveStep, isDisabled } = props\n    const [openReservationCart, setOpenReservationCart] = useState(false)\n\n    const handleScroll = () => {\n        const currentOffsetTop = reservationCart.current && reservationCart.current.getAttribute('lastOffsetTop') || reservationCart && reservationCart.current && reservationCart.current.offsetTop || false\n        if (currentOffsetTop && window.pageYOffset > currentOffsetTop) {\n            if (reservationCart.current && !reservationCart.current.getAttribute('lastOffsetTop')) {\n                reservationCart.current.setAttribute('lastOffsetTop', reservationCart.current.offsetTop)\n            }\n            reservationCart.current.setAttribute('style', `position: fixed; top: 10px; width: ${reservationCart.current.offsetWidth}px;`)\n        }else {\n            if(reservationCart.current){\n                reservationCart.current.removeAttribute('lastOffsetTop')\n                reservationCart.current.removeAttribute('style')\n            }\n        }\n    }\n\n    const settings = {\n        containerMaxWidth: 'lg',\n        containerSpacing: 0,\n        wrapper: {\n            elevation: 3,\n            square: true,\n        },\n        leftColumn: {\n            xs: 12,\n            sm: 12,\n            md: 12,\n            lg: 4,\n            xl: 4,\n        },\n        rightColumn: {\n            xs: 12,\n            sm: 12,\n            md: 12,\n            lg: 8,\n            xl: 8,\n        },\n    }\n\n    const reservationInfo = () => {\n        let totalPrice = 0\n        state.selectedRooms.map((item) => {\n            totalPrice = totalPrice + item.totalprice\n        })\n\n        if(state.flyTransferInfo){\n            totalPrice = totalPrice + state.flyTransferInfo.priceInfo.res\n        }\n\n        if(state.flyTransferReturnInfo){\n            totalPrice = totalPrice + state.flyTransferReturnInfo.priceInfo.res\n        }\n\n        return {\n            totalPrice: totalPrice\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <div className={classes.bottomMenu}>\n                <Grid container spacing={1}>\n                    <Grid item xs={12}>\n                        <Badge color=\"secondary\" variant=\"dot\" className={classes.bottomMenuBadge} invisible={!(state.selectedRooms && state.selectedRooms.length > 0)}>\n                            <Button\n                                disabled={isDisabled}\n                                className={classes.buttonPadding}\n                                variant=\"outlined\"\n                                color=\"primary\"\n                                disableElevation\n                                fullWidth\n                                onClick={() => setOpenReservationCart(true)}\n                            >\n                                {t('str_yourStay')} ({state.diffCurrency.use ?  getSymbolFromCurrency(state.diffCurrency.use) : state.hotelBookingInfo.currencycode && getSymbolFromCurrency(state.hotelBookingInfo.currencycode)} {global.helper.formatPrice(reservationInfo().totalPrice)})\n                            </Button>\n                        </Badge>\n                    </Grid>\n                    <Grid item xs={6}>\n                        <Button\n                            className={classes.buttonPadding}\n                            color=\"primary\"\n                            disableElevation\n                            fullWidth\n                            onClick={() => handleBackStep()}\n                            disabled={isDisabled || state.isHandleContinue || !(state.selectedRooms && state.selectedRooms.length > 0)}\n                            startIcon={<ArrowBackIcon />}\n                        >\n                            {t('str_back')}\n                        </Button>\n                    </Grid>\n                    <Grid item xs={6}>\n                        <Button\n                            className={classes.buttonPadding}\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disableElevation\n                            fullWidth\n                            onClick={() => handleNextStep()}\n                            disabled={isDisabled || !(state.isHandleContinue || state.selectedRooms && state.selectedRooms.length > 0)}\n                            endIcon={<ArrowForwardIcon />}\n                        >\n                            {t('str_continue')}\n                        </Button>\n                    </Grid>\n                </Grid>\n            </div>\n            <div className={clsx(classes.root, { [classes.openReservationCard]: openReservationCart })}>\n                <Box p={2} className={classes.wrapper} ref={reservationCart}>\n                    <Grid container spacing={settings.containerSpacing}>\n                        <Grid item xs={12}>\n                            <Typography variant=\"h6\" gutterBottom className={classes.reservationSummary}>\n                                {t('str_yourStay')}\n                            </Typography>\n                            <IconButton edge=\"end\" color=\"inherit\" aria-label=\"close\" onClick={() => setOpenReservationCart(false)} className={classes.closeReservationSummary}>\n                                <Icon>close</Icon>\n                            </IconButton>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <List className={classes.listRoot}>\n                                {state.selectedRooms && state.selectedRooms.length > 0 && state.selectedRooms.map((item, i) => (\n                                    <RoomListItem\n                                        key={i}\n                                        roomtypeId={item.roomtypeid}\n                                        roomName={item.roomtypename}\n                                        checkin={item.checkin}\n                                        checkout={item.checkout}\n                                        pax={item.totalpax}\n                                        child={item.totalchd}\n                                        night={item.totalnight}\n                                        price={item.totalprice}\n                                        pricecurr={item.pricecurr}\n                                        gid={item.gid}\n                                        reservno={item.reservno}\n                                    />\n                                ))}\n                            </List>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <List disablePadding className={classes.otherSummary}>\n                                {state.flyTransfer && state.flyTransferInfo && (\n                                    <React.Fragment>\n                                        <ListItem className={classes.listItem}>\n                                            <ListItemText primary={t('str_arrivalTransfer')} secondary={`${moment(state.flyTransferInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - ${moment(state.flyTransferInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")}`}/>\n                                            <Typography variant=\"body2\">\n                                                {getSymbolFromCurrency(state.flyTransferInfo.priceInfo.pricecurr)} {global.helper.formatPrice(state.flyTransferInfo.priceInfo.res)}\n                                            </Typography>\n                                            <div className={classes.listItemAction}>\n                                                <ProgressIconButton edge=\"end\" ariaLabel=\"close\" onClick={() => {\n                                                    setToState(\"ibe\", [\"flyTransfer\"], false)\n                                                    setToState(\"ibe\", [\"flyTransferInfo\"], false)\n                                                }}>\n                                                    <Icon fontSize=\"small\">close</Icon>\n                                                </ProgressIconButton>\n                                            </div>\n                                        </ListItem>\n                                        <Divider component=\"li\"/>\n                                    </React.Fragment>\n                                )}\n                                {state.flyTransferReturn && state.flyTransferReturnInfo && (\n                                    <React.Fragment>\n                                        <ListItem className={classes.listItem}>\n                                            <ListItemText primary={t('str_departureTransfer')} secondary={`${moment(state.flyTransferReturnInfo.flydate, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - ${moment(state.flyTransferReturnInfo.flytime, \"HH:mm:ss\").format(\"HH:mm\")}`}/>\n                                            <Typography variant=\"body2\">\n                                                {getSymbolFromCurrency(state.flyTransferReturnInfo.priceInfo.pricecurr)} {global.helper.formatPrice(state.flyTransferReturnInfo.priceInfo.res)}\n                                            </Typography>\n                                            <div className={classes.listItemAction}>\n                                                <ProgressIconButton edge=\"end\" ariaLabel=\"close\" onClick={() => {\n                                                    setToState(\"ibe\", [\"flyTransferReturn\"], false)\n                                                    setToState(\"ibe\", [\"flyTransferReturnInfo\"], false)\n                                                }}>\n                                                    <Icon fontSize=\"small\">close</Icon>\n                                                </ProgressIconButton>\n                                            </div>\n                                        </ListItem>\n                                        <Divider component=\"li\"/>\n                                    </React.Fragment>\n                                )}\n                                <ListItem className={classes.listItem}>\n                                    <ListItemText primary={t('str_total')}/>\n                                    <Typography variant=\"subtitle1\" className={classes.total}>\n                                        {state.diffCurrency.use ? getSymbolFromCurrency(state.diffCurrency.use) : state.hotelBookingInfo.currencycode && getSymbolFromCurrency(state.hotelBookingInfo.currencycode)} {global.helper.formatPrice(reservationInfo().totalPrice)}\n                                    </Typography>\n                                </ListItem>\n                            </List>\n                        </Grid>\n                        {(bookingActiveStep === bookingStepCodes.rooms || bookingActiveStep === bookingStepCodes.addons) && (\n                            <Grid item xs={12} className={clsx(classes.continueButton, { [classes.closeContinueButton]: openReservationCart })}>\n                                <Button fullWidth onClick={() => handleNextStep()} variant=\"contained\" color=\"primary\" disableElevation disabled={isDisabled || state.bookingIsLoading}>\n                                    {t('str_continueReservation')}\n                                </Button>\n                            </Grid>\n                        )}\n                    </Grid>\n                </Box>\n            </div>\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReservationCart)\n"]},"metadata":{},"sourceType":"module"}