{"ast":null,"code":"import _toConsumableArray from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/public/components/info/event-reservation/menu-product-card.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useRef, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { pushToState as _pushToState, setToState as _setToState, updateState as _updateState } from 'state/actions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { formatMoney } from 'model/orest/constants';\nimport { Button, Card, CardContent, Dialog, DialogActions, DialogContent, DialogTitle, Divider, Grid, TextField, Typography } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport SpinEdit from '@webcms-ui/core/spin-edit';\nimport WebCmsGlobal from 'components/webcms-global';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport CardImage from '@webcms-ui/core/card-image';\nimport { CustomToolTip } from \"../../../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport TableColumnText from \"../../../../../TableColumnText\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SpinEditV2 from \"../../../../../../@webcms-ui/core/spin-edit-v2\";\nvar useStyles = makeStyles(function (theme) {\n  var _media, _dialogMedia;\n\n  return {\n    card: {\n      display: 'flex',\n      margin: 5\n    },\n    caption: {\n      textTransform: 'uppercase'\n    },\n    title: {\n      textTransform: 'uppercase',\n      color: theme.palette.primary.main,\n      fontWeight: 'bold'\n    },\n    media: (_media = {\n      width: 'auto',\n      height: 'auto'\n    }, _defineProperty(_media, theme.breakpoints.up('sm'), {\n      width: 1500\n    }), _defineProperty(_media, \"flexBasis\", '30%'), _defineProperty(_media, theme.breakpoints.only('xs'), {\n      flexBasis: '0',\n      display: 'none'\n    }), _media),\n    dialogMedia: (_dialogMedia = {\n      width: 'auto',\n      height: 'auto'\n    }, _defineProperty(_dialogMedia, theme.breakpoints.up('sm'), {\n      width: 1500\n    }), _defineProperty(_dialogMedia, \"flexBasis\", '30%'), _dialogMedia),\n    content: _defineProperty({\n      display: 'flex',\n      flexDirection: 'column',\n      flexBasis: '70%'\n    }, theme.breakpoints.only('xs'), {\n      flexBasis: '100%'\n    }),\n    cardText: _defineProperty({\n      flex: '1 0 auto',\n      marginBottom: 15\n    }, theme.breakpoints.up('sm'), {\n      marginBottom: 0\n    }),\n    linkAction: {\n      textDecoration: 'none',\n      textTransform: 'uppercase',\n      color: theme.palette.primary.main,\n      fontWeight: 'bold'\n    },\n    prodImageBox: _defineProperty({\n      display: 'none'\n    }, theme.breakpoints.only('xs'), {\n      display: 'block'\n    }),\n    productDesc: {\n      fontSize: 18,\n      fontWeight: 600,\n      maxWidth: 200,\n      whiteSpace: 'nowrap',\n      '&::-webkit-scrollbar': {\n        width: '0.12em',\n        height: 4,\n        background: '#0000000a'\n      },\n      '&::-webkit-scrollbar-track': {\n        boxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)',\n        webkitBoxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)'\n      },\n      '&::-webkit-scrollbar-thumb': {\n        backgroundColor: 'rgba(12, 12, 12, 0.17)',\n        outline: '1px solid #29609747'\n      }\n    },\n    prodImage: {\n      position: 'absolute',\n      width: '100%',\n      height: '100%',\n      opacity: '0.9',\n      borderRadius: 5,\n      backgroundSize: 'cover',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center'\n    },\n    categoryItemDescOverFlow: _defineProperty({\n      minHeight: \"48px\",\n      height: \"48px\",\n      maxHeight: \"48px\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      color: '#648B92',\n      display: \"-webkit-box\",\n      WebkitLineClamp: 2,\n      '-webkit-line-clamp': 2,\n      '-webkit-box-orient': \"vertical\"\n    }, theme.breakpoints.down('xs'), {\n      WebkitLineClamp: 3,\n      '-webkit-line-clamp': 3,\n      minHeight: \"64px\",\n      height: \"64px\",\n      maxHeight: \"64px\"\n    }),\n    productIngrText: _defineProperty({\n      minHeight: \"42px\",\n      height: \"42px\",\n      maxHeight: \"42px\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"-webkit-box\",\n      WebkitLineClamp: 2,\n      '-webkit-line-clamp': 2,\n      '-webkit-box-orient': \"vertical\"\n    }, theme.breakpoints.down('xs'), {\n      WebkitLineClamp: 3,\n      '-webkit-line-clamp': 3,\n      minHeight: \"72px\",\n      height: \"72px\",\n      maxHeight: \"72px\"\n    }),\n    priceText: {\n      paddingRight: \"16px\",\n      textAlign: \"right\",\n      fontSize: \"20px\",\n      fontWeight: \"bold\",\n      color: \"#383636\"\n    },\n    productTitle: {\n      paddingLeft: \"16px\",\n      paddingTop: \"4px\",\n      color: \"#383636\"\n    },\n    productText: {\n      padding: \"8px 16px\",\n      fontSize: \"12px\",\n      color: \"#959494\",\n      minHeight: \"48px\"\n    },\n    productCard: {\n      marginBottom: \"16px\",\n      \"&:focus\": {\n        border: \"3px solid blue\"\n      }\n    }\n  };\n});\n\nvar MenuProductCard = function MenuProductCard(props) {\n  _s();\n\n  var _productItem$localtit, _productItem$localdes, _productItem$localtit2, _productItem$localdes2, _productItem$localdes3;\n\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS;\n\n  var productItem = props.productItem,\n      isAddActive = props.isAddActive,\n      state = props.state,\n      updateState = props.updateState,\n      isOnlyProduct = props.isOnlyProduct;\n  var selectGuestProductList = state.selectGuestProductList;\n  var checkGuestProduct = selectGuestProductList.findIndex(function (item) {\n    return Number(item.productcodeid) === Number(isOnlyProduct ? productItem === null || productItem === void 0 ? void 0 : productItem.id : productItem === null || productItem === void 0 ? void 0 : productItem.productid);\n  });\n\n  var _useState = useState(1),\n      productQty = _useState[0],\n      setProductQty = _useState[1];\n\n  var _useState2 = useState(''),\n      note = _useState2[0],\n      setNote = _useState2[1];\n\n  var _useState3 = useState(false),\n      open = _useState3[0],\n      setOpen = _useState3[1];\n\n  var _useState4 = useState(false),\n      openToolTip = _useState4[0],\n      setOpenToolTip = _useState4[1];\n\n  var isPortal = GENERAL_SETTINGS.ISPORTAL;\n  var cardRef = useRef();\n  var actionButtonDivRef = useRef();\n  var imageWithDomainUrl = productItem === null || productItem === void 0 ? void 0 : productItem.imageurl;\n  useEffect(function () {\n    if (checkGuestProduct > -1) {\n      setNote(selectGuestProductList[checkGuestProduct].note);\n      setProductQty(selectGuestProductList[checkGuestProduct].amount);\n    }\n  }, [checkGuestProduct]);\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var handleAddProduct = function handleAddProduct() {\n    if (checkGuestProduct > -1) {\n      selectGuestProductList[checkGuestProduct].amount = productQty;\n      selectGuestProductList[checkGuestProduct].note = note;\n    } else {\n      selectGuestProductList.push({\n        title: productItem.description,\n        productcodeid: isOnlyProduct ? productItem.id : productItem.productid,\n        reservno: null,\n        groupname: isOnlyProduct ? productItem.description : productItem.spgroupdesc,\n        qty: productItem.qty,\n        amount: productQty,\n        price: productItem.saleprice,\n        pricecurr: productItem.pricecurr,\n        pricecurrid: productItem.pricecurrid,\n        showprice: productItem.showprice,\n        ismenu: true,\n        note: note\n      });\n    }\n\n    updateState('guest', 'selectGuestProductList', selectGuestProductList);\n    setOpen(false);\n  };\n\n  var handleSubtract = function handleSubtract() {\n    selectGuestProductList.splice(checkGuestProduct, 1);\n    updateState('guest', 'selectGuestProductList', selectGuestProductList);\n    setProductQty(1);\n    setNote('');\n  };\n\n  var isPriceShow = productItem && productItem.showprice && GENERAL_SETTINGS.hotelSettings.product_price || false;\n\n  if (productItem.imageurl) {\n    if (!imageWithDomainUrl.includes(GENERAL_SETTINGS.STATIC_URL)) {\n      imageWithDomainUrl = GENERAL_SETTINGS.STATIC_URL + imageWithDomainUrl;\n    }\n  } else {\n    imageWithDomainUrl = GENERAL_SETTINGS.BASE_URL + 'imgs/not-found.png';\n  }\n\n  var handleOnFocus = function handleOnFocus(e) {\n    if (isAddActive) {\n      if (e.currentTarget === e.target) {\n        cardRef.current.style.border = \"2px solid #44B3E4\";\n        actionButtonDivRef.current.style.display = \"block\";\n      }\n    }\n  };\n\n  var handleOnBlur = function handleOnBlur(e) {\n    if (isAddActive) {\n      if (!e.currentTarget.contains(e.relatedTarget) && !open) {\n        cardRef.current.style.border = \"none\";\n        actionButtonDivRef.current.style.display = \"none\";\n      }\n    }\n  };\n\n  var handleCalculateAmount = function handleCalculateAmount(array) {\n    var totalAmount = 0;\n\n    if (array) {\n      array.map(function (item) {\n        totalAmount += item === null || item === void 0 ? void 0 : item.amount;\n      });\n    }\n\n    return totalAmount;\n  };\n\n  var isSameProduct = function isSameProduct(id) {\n    var array = _toConsumableArray(state.selectGuestProductList);\n\n    return array.every(function (e) {\n      return e.productcodeid === id;\n    });\n  };\n\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, isPortal ? __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    onFocus: function onFocus(e) {\n      return handleOnFocus(e);\n    },\n    onBlur: function onBlur(e) {\n      return handleOnBlur(e);\n    },\n    tabIndex: 1,\n    onContextMenu: function onContextMenu() {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 25\n    }\n  }, __jsx(Card, {\n    ref: cardRef,\n    className: classes.productCard,\n    style: {\n      cursor: isAddActive ? \"pointer\" : \"default\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 29\n    }\n  }, __jsx(CardContent, {\n    style: {\n      padding: \"0\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 41\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: 'relative',\n      maxWidth: \"100%\",\n      height: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 45\n    }\n  }, __jsx(\"img\", {\n    src: productItem.imageurl,\n    style: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 49\n    }\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 41\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 49\n    }\n  }, __jsx(\"div\", {\n    style: {\n      paddingTop: \"8px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    className: classes.productTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 53\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localtit = productItem.localtitle) === null || _productItem$localtit === void 0 ? void 0 : _productItem$localtit.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.description) || ''))), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 49\n    }\n  }, isPriceShow && __jsx(Typography, {\n    className: classes.priceText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 57\n    }\n  }, productItem.saleprice > 0 ? formatMoney(productItem.saleprice) : ' - ', getSymbolFromCurrency(productItem.pricecurr))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 49\n    }\n  }, __jsx(\"div\", {\n    style: {\n      paddingTop: \"8px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 49\n    }\n  }, __jsx(Divider, {\n    style: {\n      marginLeft: \"16px\",\n      marginRight: \"16px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 49\n    }\n  }, __jsx(Typography, {\n    className: classes.productText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 53\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localdes = productItem.localdesc) === null || _productItem$localdes === void 0 ? void 0 : _productItem$localdes.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.ingrtext) || '')), isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.durationmin) && __jsx(Typography, {\n    className: classes.productText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 61\n    }\n  }, __jsx(\"a\", {\n    style: {\n      fontWeight: '600'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 65\n    }\n  }, \"\".concat(t('str_duration'), \": \")), \"\".concat(productItem === null || productItem === void 0 ? void 0 : productItem.durationmin, \" \").concat(t('str_minute'))))))))), __jsx(\"div\", {\n    ref: actionButtonDivRef,\n    style: {\n      paddingBottom: \"16px\",\n      textAlign: \"right\",\n      display: \"none\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      actionButtonDivRef.current.style.display = \"none\";\n      cardRef.current.style.border = \"none\";\n    },\n    size: \"small\",\n    style: {\n      fontSize: \"12px\",\n      textTransform: \"capitalize\"\n    },\n    color: \"primary\",\n    variant: \"outlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 41\n    }\n  }, t(\"str_back\")), checkGuestProduct > -1 ? __jsx(Button, {\n    size: \"small\",\n    style: {\n      marginLeft: \"8px\"\n    },\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSubtract,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 45\n    }\n  }, t(\"str_extract\")) : __jsx(CustomToolTip, {\n    title: 'cant',\n    open: openToolTip,\n    onOpen: function onOpen() {\n      return isOnlyProduct && state.selectGuestProductList.length >= state.totalPax && setOpenToolTip(true);\n    },\n    onClose: function onClose() {\n      return setOpenToolTip(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 45\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    size: \"small\",\n    style: {\n      fontSize: \"10px\",\n      marginLeft: \"8px\"\n    },\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleClickOpen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 49\n    }\n  }, t(\"str_add\")))))))) : __jsx(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: classes.prodImage,\n    style: {\n      backgroundImage: \"url(\".concat(imageWithDomainUrl, \")\")\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 37\n    }\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    style: {\n      padding: '16px 16px 16px 0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 41\n    }\n  }, __jsx(TableColumnText, {\n    fontSize: 18,\n    fontWeight: 600,\n    showToolTip: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 45\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localtit2 = productItem.localtitle) === null || _productItem$localtit2 === void 0 ? void 0 : _productItem$localtit2.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.description) || '')), isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.durationmin) && (productItem === null || productItem === void 0 ? void 0 : productItem.durationmin) > 0 && __jsx(Typography, {\n    style: {\n      fontSize: '12px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 53\n    }\n  }, \"(\".concat(productItem === null || productItem === void 0 ? void 0 : productItem.durationmin, \" \").concat(t('str_minute'), \")\"))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 41\n    }\n  }, __jsx(Divider, {\n    light: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 45\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"body2\",\n    className: classes.productIngrText,\n    title: t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localdes2 = productItem.localdesc) === null || _productItem$localdes2 === void 0 ? void 0 : _productItem$localdes2.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.ingrtext) || ''),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 45\n    }\n  }, t((productItem === null || productItem === void 0 ? void 0 : (_productItem$localdes3 = productItem.localdesc) === null || _productItem$localdes3 === void 0 ? void 0 : _productItem$localdes3.removeHtmlTag()) || (productItem === null || productItem === void 0 ? void 0 : productItem.ingrtext) || ''))), isAddActive && __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 45\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 49\n    }\n  }, __jsx(Alert, {\n    variant: \"outlined\",\n    severity: \"warning\",\n    style: {\n      fontSize: 12,\n      textAlign: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 53\n    }\n  }, t('str_allergicInformation'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 49\n    }\n  }, __jsx(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    label: t('str_note'),\n    multiline: true,\n    rows: 2,\n    value: note,\n    onChange: function onChange(e) {\n      setNote(e.target.value);\n\n      if (checkGuestProduct !== -1) {\n        var data = _toConsumableArray(state.selectGuestProductList);\n\n        data[checkGuestProduct].note = e.target.value;\n        updateState('guest', ['selectGuestProductList'], data);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 53\n    }\n  })), isPriceShow && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 53\n    }\n  }, __jsx(Typography, {\n    style: {\n      fontWeight: '600',\n      textAlign: 'right'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 57\n    }\n  }, productItem.saleprice > 0 ? formatMoney(productItem.saleprice) : ' - ', getSymbolFromCurrency(productItem.pricecurr))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 7,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 49\n    }\n  }, __jsx(SpinEditV2, {\n    defaultValue: productQty,\n    label: t('str_pieces'),\n    size: 'small',\n    min: 1,\n    max: isOnlyProduct && productItem !== null && productItem !== void 0 && productItem.ispp ? state.totalPax > 1 ? isSameProduct(productItem === null || productItem === void 0 ? void 0 : productItem.id) ? state.totalPax : state.totalPax - state.selectGuestProductList.length : 1 : 99,\n    onChange: function onChange(value) {\n      setProductQty(value);\n\n      if (checkGuestProduct !== -1) {\n        var data = _toConsumableArray(state.selectGuestProductList);\n\n        data[checkGuestProduct].amount = value;\n        updateState('guest', ['selectGuestProductList'], data);\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 53\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 5,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 49\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 53\n    }\n  }, checkGuestProduct > -1 ? __jsx(Button, {\n    fullWidth: true,\n    style: {\n      textTransform: 'none',\n      color: 'red',\n      padding: '8px'\n    },\n    startIcon: __jsx(DeleteIcon, {\n      style: {\n        color: 'red'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 76\n      }\n    }),\n    variant: \"outlined\",\n    size: \"small\",\n    onClick: handleSubtract,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 61\n    }\n  }, t('str_removeSelection')) : __jsx(CustomToolTip, {\n    title: isOnlyProduct && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax ? t('str_productSelectionWasMadeInfo') : t('str_add'),\n    open: openToolTip,\n    onOpen: function onOpen() {\n      return isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.ispp) && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax && setOpenToolTip(true);\n    },\n    onClose: function onClose() {\n      return setOpenToolTip(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 61\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 61\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    disabled: isOnlyProduct && (productItem === null || productItem === void 0 ? void 0 : productItem.ispp) && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax,\n    style: {\n      textTransform: 'none'\n    },\n    startIcon: __jsx(AddIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 81\n      }\n    }),\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: function onClick() {\n      return !(isOnlyProduct && productItem !== null && productItem !== void 0 && productItem.ispp && state.selectGuestProductList.length >= state.totalPax) && handleAddProduct();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 66\n    }\n  }, t(\"str_add\")))))))))))));\n};\n\n_s(MenuProductCard, \"N8ZCvRwrUAEHxlBTn7Qlnypvl7w=\", false, function () {\n  return [useStyles, useTranslation];\n});\n\n_c = MenuProductCard;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    },\n    updateState: function updateState(stateType, stateName, value) {\n      return dispatch(_updateState(stateType, stateName, value));\n    },\n    pushToState: function pushToState(stateType, stateName, value) {\n      return dispatch(_pushToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuProductCard);\n\nvar _c;\n\n$RefreshReg$(_c, \"MenuProductCard\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/public/components/info/event-reservation/menu-product-card.js"],"names":["React","useContext","useState","useRef","useEffect","connect","pushToState","setToState","updateState","makeStyles","formatMoney","Button","Card","CardContent","Dialog","DialogActions","DialogContent","DialogTitle","Divider","Grid","TextField","Typography","Alert","SpinEdit","WebCmsGlobal","useTranslation","getSymbolFromCurrency","CardImage","CustomToolTip","TableColumnText","DeleteIcon","AddIcon","SpinEditV2","useStyles","theme","card","display","margin","caption","textTransform","title","color","palette","primary","main","fontWeight","media","width","height","breakpoints","up","only","flexBasis","dialogMedia","content","flexDirection","cardText","flex","marginBottom","linkAction","textDecoration","prodImageBox","productDesc","fontSize","maxWidth","whiteSpace","background","boxShadow","webkitBoxShadow","backgroundColor","outline","prodImage","position","opacity","borderRadius","backgroundSize","backgroundRepeat","backgroundPosition","categoryItemDescOverFlow","minHeight","maxHeight","overflow","textOverflow","WebkitLineClamp","down","productIngrText","priceText","paddingRight","textAlign","productTitle","paddingLeft","paddingTop","productText","padding","productCard","border","MenuProductCard","props","classes","t","GENERAL_SETTINGS","productItem","isAddActive","state","isOnlyProduct","selectGuestProductList","checkGuestProduct","findIndex","item","Number","productcodeid","id","productid","productQty","setProductQty","note","setNote","open","setOpen","openToolTip","setOpenToolTip","isPortal","ISPORTAL","cardRef","actionButtonDivRef","imageWithDomainUrl","imageurl","amount","handleClickOpen","handleClose","handleAddProduct","push","description","reservno","groupname","spgroupdesc","qty","price","saleprice","pricecurr","pricecurrid","showprice","ismenu","handleSubtract","splice","isPriceShow","hotelSettings","product_price","includes","STATIC_URL","BASE_URL","handleOnFocus","e","currentTarget","target","current","style","handleOnBlur","contains","relatedTarget","handleCalculateAmount","array","totalAmount","map","isSameProduct","every","cursor","localtitle","removeHtmlTag","marginLeft","marginRight","localdesc","ingrtext","durationmin","paddingBottom","length","totalPax","backgroundImage","value","data","ispp","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useRef, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { pushToState, setToState, updateState } from 'state/actions'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { formatMoney } from 'model/orest/constants'\nimport {\n    Button,\n    Card,\n    CardContent,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    Divider,\n    Grid,\n    TextField,\n    Typography,\n} from '@material-ui/core'\nimport Alert from '@material-ui/lab/Alert'\nimport SpinEdit from '@webcms-ui/core/spin-edit'\nimport WebCmsGlobal from 'components/webcms-global'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport CardImage from '@webcms-ui/core/card-image'\nimport {CustomToolTip} from \"../../../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport TableColumnText from \"../../../../../TableColumnText\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SpinEditV2 from \"../../../../../../@webcms-ui/core/spin-edit-v2\";\n\nconst useStyles = makeStyles((theme) => ({\n    card: {\n        display: 'flex',\n        margin: 5,\n    },\n    caption: {\n        textTransform: 'uppercase',\n    },\n    title: {\n        textTransform: 'uppercase',\n        color: theme.palette.primary.main,\n        fontWeight: 'bold',\n    },\n    media: {\n        width: 'auto',\n        height: 'auto',\n        [theme.breakpoints.up('sm')]: {\n            width: 1500,\n        },\n        flexBasis: '30%',\n        [theme.breakpoints.only('xs')]: {\n            flexBasis: '0',\n            display: 'none',\n        },\n    },\n    dialogMedia: {\n        width: 'auto',\n        height: 'auto',\n        [theme.breakpoints.up('sm')]: {\n            width: 1500,\n        },\n        flexBasis: '30%',\n    },\n    content: {\n        display: 'flex',\n        flexDirection: 'column',\n        flexBasis: '70%',\n        [theme.breakpoints.only('xs')]: {\n            flexBasis: '100%',\n        },\n    },\n    cardText: {\n        flex: '1 0 auto',\n        marginBottom: 15,\n        [theme.breakpoints.up('sm')]: {\n            marginBottom: 0,\n        },\n    },\n    linkAction: {\n        textDecoration: 'none',\n        textTransform: 'uppercase',\n        color: theme.palette.primary.main,\n        fontWeight: 'bold',\n    },\n    prodImageBox: {\n        display: 'none',\n        [theme.breakpoints.only('xs')]: {\n            display: 'block',\n        },\n    },\n    productDesc: {\n        fontSize: 18,\n        fontWeight: 600,\n        maxWidth: 200,\n        whiteSpace: 'nowrap',\n        '&::-webkit-scrollbar': {\n            width: '0.12em',\n            height: 4,\n            background: '#0000000a',\n        },\n        '&::-webkit-scrollbar-track': {\n            boxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)',\n            webkitBoxShadow: 'inset 0 0 6px rgba(0,0,0,0.00)',\n        },\n        '&::-webkit-scrollbar-thumb': {\n            backgroundColor: 'rgba(12, 12, 12, 0.17)',\n            outline: '1px solid #29609747',\n        },\n    },\n    prodImage: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        opacity: '0.9',\n        borderRadius: 5,\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center'\n    },\n    categoryItemDescOverFlow: {\n        minHeight: \"48px\",\n        height: \"48px\",\n        maxHeight: \"48px\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        color: '#648B92',\n        display: \"-webkit-box\",\n        WebkitLineClamp: 2,\n        '-webkit-line-clamp': 2,\n        '-webkit-box-orient': \"vertical\",\n        [theme.breakpoints.down('xs')]: {\n            WebkitLineClamp: 3,\n            '-webkit-line-clamp': 3,\n            minHeight: \"64px\",\n            height: \"64px\",\n            maxHeight: \"64px\",\n        },\n\n    },\n    productIngrText: {\n        minHeight: \"42px\",\n        height: \"42px\",\n        maxHeight: \"42px\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        display: \"-webkit-box\",\n        WebkitLineClamp: 2,\n        '-webkit-line-clamp': 2,\n        '-webkit-box-orient': \"vertical\",\n        [theme.breakpoints.down('xs')]: {\n            WebkitLineClamp: 3,\n            '-webkit-line-clamp': 3,\n            minHeight: \"72px\",\n            height: \"72px\",\n            maxHeight: \"72px\",\n        },\n    },\n    priceText: {\n        paddingRight: \"16px\",\n        textAlign: \"right\",\n        fontSize: \"20px\",\n        fontWeight: \"bold\",\n        color: \"#383636\"\n    },\n    productTitle: {\n        paddingLeft: \"16px\",\n        paddingTop: \"4px\",\n        color: \"#383636\"\n    },\n    productText: {\n        padding: \"8px 16px\",\n        fontSize: \"12px\",\n        color: \"#959494\",\n        minHeight:\"48px\"\n    },\n    productCard: {\n        marginBottom: \"16px\",\n        \"&:focus\": {\n            border: \"3px solid blue\"\n        },\n    }\n}))\n\nconst MenuProductCard = (props) => {\n    const classes = useStyles()\n    const { t } = useTranslation()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n    const { productItem, isAddActive, state, updateState, isOnlyProduct } = props\n    let selectGuestProductList = state.selectGuestProductList\n    const checkGuestProduct = selectGuestProductList.findIndex((item) => Number(item.productcodeid) === Number( isOnlyProduct ? productItem?.id : productItem?.productid))\n    const [productQty, setProductQty] = useState(1)\n    const [note, setNote] = useState('')\n    const [open, setOpen] = useState(false)\n    const [openToolTip, setOpenToolTip] = useState(false)\n    const isPortal = GENERAL_SETTINGS.ISPORTAL;\n    const cardRef = useRef();\n    const actionButtonDivRef = useRef();\n    let imageWithDomainUrl = productItem?.imageurl\n\n    useEffect(() => {\n        if(checkGuestProduct > -1) {\n            setNote(selectGuestProductList[checkGuestProduct].note)\n            setProductQty(selectGuestProductList[checkGuestProduct].amount)\n        }\n    }, [checkGuestProduct])\n\n    const handleClickOpen = () => {\n        setOpen(true)\n    }\n\n    const handleClose = () => {\n        setOpen(false)\n    }\n\n    const handleAddProduct = () => {\n        if (checkGuestProduct > -1) {\n            selectGuestProductList[checkGuestProduct].amount = productQty\n            selectGuestProductList[checkGuestProduct].note = note\n        } else {\n            selectGuestProductList.push({\n                title: productItem.description,\n                productcodeid: isOnlyProduct ? productItem.id : productItem.productid,\n                reservno: null,\n                groupname: isOnlyProduct ? productItem.description : productItem.spgroupdesc,\n                qty: productItem.qty,\n                amount: productQty,\n                price: productItem.saleprice,\n                pricecurr: productItem.pricecurr,\n                pricecurrid: productItem.pricecurrid,\n                showprice: productItem.showprice,\n                ismenu: true,\n                note: note\n            })\n        }\n\n        updateState('guest', 'selectGuestProductList', selectGuestProductList)\n        setOpen(false)\n    }\n\n    const handleSubtract = () => {\n        selectGuestProductList.splice(checkGuestProduct, 1)\n        updateState('guest', 'selectGuestProductList', selectGuestProductList)\n        setProductQty(1)\n        setNote('')\n    }\n\n    let isPriceShow = productItem && productItem.showprice && GENERAL_SETTINGS.hotelSettings.product_price || false\n\n    if(productItem.imageurl){\n        if(!imageWithDomainUrl.includes(GENERAL_SETTINGS.STATIC_URL)){\n            imageWithDomainUrl =  GENERAL_SETTINGS.STATIC_URL + imageWithDomainUrl\n        }\n    }else{\n        imageWithDomainUrl = GENERAL_SETTINGS.BASE_URL + 'imgs/not-found.png'\n    }\n\n\n    const handleOnFocus = (e) => {\n        if(isAddActive) {\n            if (e.currentTarget === e.target) {\n                cardRef.current.style.border = \"2px solid #44B3E4\";\n                actionButtonDivRef.current.style.display = \"block\";\n            }\n        }\n\n    }\n\n    const handleOnBlur = (e) => {\n        if(isAddActive) {\n            if (!e.currentTarget.contains(e.relatedTarget) && !open) {\n                cardRef.current.style.border = \"none\";\n                actionButtonDivRef.current.style.display = \"none\";\n            }\n        }\n    }\n\n    const handleCalculateAmount = (array) => {\n        let totalAmount = 0\n        if(array) {\n            array.map((item) => {\n                totalAmount += item?.amount\n            })\n        }\n      return totalAmount\n    }\n\n    const isSameProduct = (id) => {\n        const array = [...state.selectGuestProductList]\n        return array.every(e => e.productcodeid === id)\n    }\n\n    return (\n        <React.Fragment>\n            {\n                isPortal ? (\n                    <React.Fragment>\n                        <div\n                            onFocus={(e) => handleOnFocus(e)}\n                            onBlur={(e) => handleOnBlur(e)}\n                            tabIndex={1}\n                            onContextMenu={() => {}}\n                        >\n                            <Card\n                                ref={cardRef}\n                                className={classes.productCard}\n                                style={{cursor: isAddActive ?  \"pointer\" : \"default\"}}\n                            >\n                                <CardContent style={{padding: \"0\"}}>\n                                    <Grid container>\n                                        <Grid item xs={4}>\n                                            <div style={{position: 'relative', maxWidth: \"100%\", height: \"100%\"}}>\n                                                <img src={productItem.imageurl} style={{position: \"absolute\", width: \"100%\", height: \"100%\"}}/>\n                                            </div>\n                                        </Grid>\n                                        <Grid item xs={8}>\n                                            <Grid container>\n                                                <Grid item xs={12}>\n                                                    <div style={{paddingTop: \"8px\"}}/>\n                                                </Grid>\n                                                <Grid item xs={8}>\n                                                    <Typography className={classes.productTitle}>\n                                                        {t(productItem?.localtitle?.removeHtmlTag() || productItem?.description || '')}\n                                                    </Typography>\n                                                </Grid>\n                                                <Grid item xs={4}>\n                                                    {isPriceShow && (\n                                                        <Typography className={classes.priceText}>\n                                                            {(productItem.saleprice > 0) ? formatMoney(productItem.saleprice) : ' - '}\n                                                            {getSymbolFromCurrency(productItem.pricecurr)}\n                                                        </Typography>\n                                                    )}\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <div style={{paddingTop: \"8px\"}}/>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <Divider style={{marginLeft: \"16px\", marginRight: \"16px\"}}/>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <Typography className={classes.productText}>{t(productItem?.localdesc?.removeHtmlTag() || productItem?.ingrtext || '')}</Typography>\n                                                    {isOnlyProduct && productItem?.durationmin && (\n                                                            <Typography className={classes.productText}>\n                                                                <a style={{fontWeight: '600'}}>{`${t('str_duration')}: `}</a>\n                                                                {`${productItem?.durationmin} ${t('str_minute')}`}\n                                                            </Typography>\n                                                        )}\n                                                </Grid>\n                                            </Grid>\n                                        </Grid>\n                                    </Grid>\n                                </CardContent>\n                            </Card>\n                            <div ref={actionButtonDivRef} style={{paddingBottom: \"16px\", textAlign: \"right\", display: \"none\"}}>\n                                <Grid container>\n                                    <Grid item xs={12}>\n                                        <Button\n                                            onClick={() => {\n                                                actionButtonDivRef.current.style.display = \"none\";\n                                                cardRef.current.style.border = \"none\";\n                                            }}\n                                            size={\"small\"}\n                                            style={{fontSize: \"12px\", textTransform: \"capitalize\"}}\n                                            color={\"primary\"}\n                                            variant={\"outlined\"}\n                                        >\n                                            {t(\"str_back\")}\n                                        </Button>\n                                        {checkGuestProduct > -1 ? (\n                                            <Button\n                                                size={\"small\"}\n                                                style={{marginLeft: \"8px\"}}\n                                                color={\"primary\"}\n                                                variant={\"contained\"}\n                                                onClick={handleSubtract}\n                                            >\n                                                {t(\"str_extract\")}\n                                            </Button>\n                                        ) : (\n                                            <CustomToolTip\n                                                title={'cant'}\n                                                open={openToolTip}\n                                                onOpen={() => isOnlyProduct && state.selectGuestProductList.length >= state.totalPax && setOpenToolTip(true)}\n                                                onClose={() => setOpenToolTip(false)}\n                                            >\n                                                <Button\n                                                    fullWidth\n                                                    size={\"small\"}\n                                                    style={{fontSize: \"10px\", marginLeft: \"8px\"}}\n                                                    color={\"primary\"}\n                                                    variant={\"contained\"}\n                                                    onClick={handleClickOpen}\n                                                >\n                                                    {t(\"str_add\")}\n                                                </Button>\n                                            </CustomToolTip>\n                                        )}\n                                    </Grid>\n                                </Grid>\n                            </div>\n                        </div>\n                    </React.Fragment>\n                ) : (\n                    <Card>\n                        <Grid container spacing={2}>\n                            <Grid item xs={12} sm={12} md={4}>\n                                <div style={{position: 'relative', width: '100%', height: '100%'}}>\n                                    <div\n                                        className={classes.prodImage}\n                                        style={{backgroundImage: `url(${imageWithDomainUrl})`}}\n                                    />\n                                </div>\n                            </Grid>\n                            <Grid item xs={12} sm={12} md={8}>\n                                <div style={{padding: '16px 16px 16px 0'}}>\n                                    <Grid container spacing={1}>\n                                        <Grid item xs={12}>\n                                            <TableColumnText fontSize={18} fontWeight={600} showToolTip>\n                                                {t(productItem?.localtitle?.removeHtmlTag() || productItem?.description || '')}\n                                            </TableColumnText>\n                                            {\n                                                isOnlyProduct && productItem?.durationmin && productItem?.durationmin > 0 && (\n                                                    <Typography style={{fontSize: '12px'}}>{`(${productItem?.durationmin} ${t('str_minute')})`}</Typography>\n                                                )\n                                            }\n                                        </Grid>\n                                        <Grid item xs={12}>\n                                            <Divider light />\n                                        </Grid>\n                                        <Grid item xs={12}>\n                                            <Typography variant=\"body2\" className={classes.productIngrText} title={t(productItem?.localdesc?.removeHtmlTag() || productItem?.ingrtext || '')}>\n                                                {t(productItem?.localdesc?.removeHtmlTag() || productItem?.ingrtext || '')}\n                                            </Typography>\n                                        </Grid>\n                                        {isAddActive && (\n                                            <React.Fragment>\n                                                <Grid item xs={12}>\n                                                    <Alert\n                                                        variant=\"outlined\"\n                                                        severity=\"warning\"\n                                                        style={{ fontSize: 12, textAlign: 'center'}}\n                                                    >\n                                                        {t('str_allergicInformation')}\n                                                    </Alert>\n                                                </Grid>\n                                                <Grid item xs={12}>\n                                                    <TextField\n                                                        fullWidth\n                                                        variant=\"outlined\"\n                                                        label={t('str_note')}\n                                                        multiline\n                                                        rows={2}\n                                                        value={note}\n                                                        onChange={(e) => {\n                                                            setNote(e.target.value)\n                                                            if(checkGuestProduct !== -1) {\n                                                                const data = [...state.selectGuestProductList]\n                                                                data[checkGuestProduct].note = e.target.value\n                                                                updateState('guest', ['selectGuestProductList'], data)\n                                                            }\n                                                        }}\n                                                    />\n                                                </Grid>\n                                                {isPriceShow && (\n                                                    <Grid item xs={12}>\n                                                        <Typography style={{fontWeight: '600', textAlign: 'right'}} >\n                                                            {(productItem.saleprice > 0) ? formatMoney(productItem.saleprice) : ' - '}\n                                                            {getSymbolFromCurrency(productItem.pricecurr)}\n                                                        </Typography>\n                                                    </Grid>\n                                                )}\n                                                <Grid item xs={12} sm={12} md={7}>\n                                                    <SpinEditV2\n                                                        defaultValue={productQty}\n                                                        label={t('str_pieces')}\n                                                        size={'small'}\n                                                        min={1}\n                                                        max={isOnlyProduct && productItem?.ispp ? (state.totalPax > 1 ? isSameProduct(productItem?.id) ? state.totalPax : (state.totalPax - state.selectGuestProductList.length) : 1) : 99}\n                                                        onChange={(value) => {\n                                                            setProductQty(value)\n                                                            if(checkGuestProduct !== -1) {\n                                                                const data = [...state.selectGuestProductList]\n                                                                data[checkGuestProduct].amount = value\n                                                                updateState('guest', ['selectGuestProductList'], data)\n                                                            }\n                                                        }}\n                                                    />\n                                                </Grid>\n                                                <Grid item xs={12} sm={12} md={5}>\n                                                    <div>\n                                                        {checkGuestProduct > -1 ? (\n                                                            <Button\n                                                                fullWidth\n                                                                style={{textTransform: 'none', color: 'red', padding: '8px'}}\n                                                                startIcon={<DeleteIcon style={{color: 'red'}}/>}\n                                                                variant=\"outlined\"\n                                                                size=\"small\"\n                                                                onClick={handleSubtract}\n                                                            >\n                                                                {t('str_removeSelection')}\n                                                            </Button>\n                                                        ) : (\n                                                            <CustomToolTip\n                                                                title={isOnlyProduct && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax ? t('str_productSelectionWasMadeInfo') : t('str_add')}\n                                                                open={openToolTip}\n                                                                onOpen={() => isOnlyProduct && productItem?.ispp && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax && setOpenToolTip(true)}\n                                                                onClose={() => setOpenToolTip(false)}\n                                                            >\n                                                            <span>\n                                                                 <Button\n                                                                     fullWidth\n                                                                     disabled={isOnlyProduct && productItem?.ispp && handleCalculateAmount(state.selectGuestProductList) >= state.totalPax}\n                                                                     style={{textTransform: 'none'}}\n                                                                     startIcon={<AddIcon />}\n                                                                     color={\"primary\"}\n                                                                     variant={\"contained\"}\n                                                                     onClick={() => !(isOnlyProduct && productItem?.ispp && state.selectGuestProductList.length >= state.totalPax) && handleAddProduct()}\n                                                                 >\n                                                                     {t(\"str_add\")}\n                                                                 </Button>\n                                                            </span>\n                                                            </CustomToolTip>\n                                                        )}\n                                                    </div>\n                                                </Grid>\n                                            </React.Fragment>\n                                        )}\n                                    </Grid>\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </Card>\n                )\n            }\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    pushToState: (stateType, stateName, value) => dispatch(pushToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuProductCard)\n"]},"metadata":{},"sourceType":"module"}