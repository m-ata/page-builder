{"ast":null,"code":"import React, { useState, useEffect, useContext } from 'react';\nimport { connect } from 'react-redux';\nimport { setToState, updateState } from 'state/actions';\nimport axios from 'axios';\nimport WebCmsGlobal from 'components/webcms-global';\n\nconst Faq = props => {\n  const {\n    state,\n    setToState,\n    isPortal,\n    chainId\n  } = props;\n  const {\n    GENERAL_SETTINGS,\n    locale\n  } = useContext(WebCmsGlobal);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  let clientParams = {};\n  clientParams.langcode = locale;\n  useEffect(() => {\n    let active = true;\n    let isChainHotelChange = false;\n\n    if (GENERAL_SETTINGS.ISCHAIN && state.changeHotelRefno !== false || isPortal) {\n      clientParams.ischain = true;\n      clientParams.chainid = chainId || state.changeHotelRefno;\n      clientParams.hotelrefno = GENERAL_SETTINGS.HOTELREFNO;\n\n      if (clientParams.chainid !== state.hotelFaq.chainid) {\n        isChainHotelChange = true;\n      }\n    } else {\n      clientParams.ischain = false;\n      clientParams.chainid = false;\n    }\n\n    let isLangChange = false;\n\n    if (state.hotelFaq.langcode !== locale) {\n      isLangChange = true;\n      setToState('guest', ['hotelFaq', 'langcode'], locale);\n      clientParams.langcode = locale;\n    }\n\n    let isRequest;\n\n    if (GENERAL_SETTINGS.ISCHAIN) {\n      isRequest = state.hotelFaq.data === false && GENERAL_SETTINGS.ISCHAIN && state.changeHotelRefno !== false;\n    } else {\n      isRequest = state.hotelFaq.data === false && GENERAL_SETTINGS.ISCHAIN === false;\n    }\n\n    if (active && (isRequest || isLangChange || isChainHotelChange) && isLoading === false) {\n      setIsLoading(true);\n      axios({\n        url: GENERAL_SETTINGS.BASE_URL + 'api/guestweb/faq',\n        method: 'post',\n        params: clientParams\n      }).then(hotelFaqResponse => {\n        if (active || isPortal) {\n          const hotelFaqData = hotelFaqResponse.data;\n\n          if (hotelFaqData.success) {\n            if (Object.keys(hotelFaqData.data).length > 0) {\n              setToState('guest', ['hotelFaq', 'data'], hotelFaqData.data);\n              setToState('guest', ['hotelFaq', 'langcode'], locale);\n              setToState('guest', ['hotelFaq', 'chainid'], clientParams.chainid);\n              setIsLoading(false);\n            } else {\n              setToState('guest', ['hotelFaq', 'data'], null);\n              setToState('guest', ['hotelFaq', 'langcode'], null);\n              setToState('guest', ['hotelFaq', 'chainid'], clientParams.chainid);\n              setIsLoading(false);\n            }\n          } else {\n            setToState('guest', ['hotelFaq', 'data'], null);\n            setToState('guest', ['hotelFaq', 'langcode'], null);\n            setToState('guest', ['hotelFaq', 'chainid'], clientParams.chainid);\n            setIsLoading(false);\n          }\n        }\n      });\n    }\n\n    return () => {\n      active = false;\n    };\n  }, [state.changeHotelRefno, locale]);\n  return props.children;\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Faq);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/public/components/faq.js"],"names":["React","useState","useEffect","useContext","connect","setToState","updateState","axios","WebCmsGlobal","Faq","props","state","isPortal","chainId","GENERAL_SETTINGS","locale","isLoading","setIsLoading","clientParams","langcode","active","isChainHotelChange","ISCHAIN","changeHotelRefno","ischain","chainid","hotelrefno","HOTELREFNO","hotelFaq","isLangChange","isRequest","data","url","BASE_URL","method","params","then","hotelFaqResponse","hotelFaqData","success","Object","keys","length","children","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { connect } from 'react-redux'\nimport { setToState, updateState } from 'state/actions'\nimport axios from 'axios'\nimport WebCmsGlobal from 'components/webcms-global'\n\nconst Faq = (props) => {\n    const { state, setToState, isPortal, chainId} = props\n    const { GENERAL_SETTINGS, locale } = useContext(WebCmsGlobal)\n    const [isLoading, setIsLoading] = useState(false)\n\n    let clientParams = {}\n    clientParams.langcode = locale\n\n    useEffect(() => {\n        let active = true\n\n        let isChainHotelChange = false\n        if (GENERAL_SETTINGS.ISCHAIN && state.changeHotelRefno !== false || isPortal) {\n            clientParams.ischain = true\n            clientParams.chainid = chainId || state.changeHotelRefno\n            clientParams.hotelrefno = GENERAL_SETTINGS.HOTELREFNO\n\n            if(clientParams.chainid !== state.hotelFaq.chainid){\n                isChainHotelChange = true\n            }\n\n        } else {\n            clientParams.ischain = false\n            clientParams.chainid = false\n        }\n\n        let isLangChange = false\n        if (state.hotelFaq.langcode !== locale) {\n            isLangChange = true\n            setToState('guest', ['hotelFaq', 'langcode'], locale)\n            clientParams.langcode = locale\n        }\n\n        let isRequest\n        if (GENERAL_SETTINGS.ISCHAIN) {\n            isRequest = state.hotelFaq.data === false && GENERAL_SETTINGS.ISCHAIN && state.changeHotelRefno !== false\n        } else {\n            isRequest = state.hotelFaq.data === false && GENERAL_SETTINGS.ISCHAIN === false\n        }\n\n        if (active && (isRequest || isLangChange || isChainHotelChange) && isLoading === false) {\n            setIsLoading(true)\n            axios({\n                url: GENERAL_SETTINGS.BASE_URL + 'api/guestweb/faq',\n                method: 'post',\n                params: clientParams\n            }).then((hotelFaqResponse) => {\n                if (active || isPortal) {\n                    const hotelFaqData = hotelFaqResponse.data\n                    if (hotelFaqData.success) {\n                        if(Object.keys(hotelFaqData.data).length > 0){\n                            setToState('guest', ['hotelFaq', 'data'], hotelFaqData.data)\n                            setToState('guest', ['hotelFaq', 'langcode'], locale)\n                            setToState('guest', ['hotelFaq', 'chainid'], clientParams.chainid)\n                            setIsLoading(false)\n                        }else{\n                            setToState('guest', ['hotelFaq', 'data'], null)\n                            setToState('guest', ['hotelFaq', 'langcode'], null)\n                            setToState('guest', ['hotelFaq', 'chainid'], clientParams.chainid)\n                            setIsLoading(false)\n                        }\n                    } else {\n                        setToState('guest', ['hotelFaq', 'data'], null)\n                        setToState('guest', ['hotelFaq', 'langcode'], null)\n                        setToState('guest', ['hotelFaq', 'chainid'], clientParams.chainid)\n                        setIsLoading(false)\n                    }\n                }\n            })\n        }\n\n        return () => {\n            active = false\n        }\n    },[state.changeHotelRefno, locale])\n\n    return (\n        props.children\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Faq)\n"]},"metadata":{},"sourceType":"module"}