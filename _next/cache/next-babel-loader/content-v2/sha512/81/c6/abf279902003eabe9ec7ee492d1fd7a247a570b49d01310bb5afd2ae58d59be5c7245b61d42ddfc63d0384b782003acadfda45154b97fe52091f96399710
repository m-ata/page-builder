{"ast":null,"code":"import _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/slider-gallery/SliderGallery.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { ViewList } from \"@webcms/orest\";\nimport { isErrorMsg, OREST_ENDPOINT } from \"../../../../../../../model/orest/constants\";\nimport { toast } from \"react-toastify\";\nimport WebCmsGlobal from \"components/webcms-global\";\nimport { useRouter } from \"next/router\";\nimport LoadingSpinner from \"../../../../../../LoadingSpinner\";\nimport { COLORS } from \"../../../../constants\";\nimport Slider from 'react-slick';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSelector } from 'react-redux';\nvar useStyles = makeStyles(function () {\n  return {\n    cardRoot: {\n      width: '100%',\n      display: 'flex !important',\n      position: 'relative'\n    },\n    textDiv: {\n      \"float\": \"left\",\n      width: '50%'\n    },\n    heading: {\n      letterSpacing: 2,\n      marginBottom: 30,\n      color: function color(props) {\n        return props !== null && props !== void 0 && props.textColor ? props.textColor : \"#000000\";\n      }\n    },\n    cardDiv: {\n      display: \"inline-block\",\n      width: '50%'\n    },\n    cardImage: {\n      width: '100%',\n      height: '40vh',\n      borderRadius: 5\n    },\n    description: {\n      color: function color(props) {\n        return props !== null && props !== void 0 && props.textColor ? props.textColor : \"#000000\";\n      }\n    },\n    line: {\n      background: '#839FAD none repeat scroll 0 0',\n      display: 'block',\n      height: 1,\n      marginTop: 10,\n      marginBottom: 10,\n      position: 'relative',\n      width: '10%'\n    },\n    ctaButton: {\n      borderRadius: 2,\n      backgroundColor: function backgroundColor(props) {\n        return props !== null && props !== void 0 && props.buttonColor ? props.buttonColor : \"#000000\";\n      },\n      cursor: 'pointer',\n      display: 'inline-block',\n      fontSize: 14,\n      letterSpacing: 3,\n      lineHeight: '45px',\n      padding: '0 45px',\n      textAlign: \"center\",\n      '& a': {\n        color: 'white'\n      }\n    }\n  };\n});\n\nvar SliderGallery = function SliderGallery(props) {\n  _s();\n\n  var sliderGallery = props.sliderGallery,\n      otherLangSliderGallery = props.otherLangSliderGallery;\n\n  var _useState = useState({\n    isRequestSend: false,\n    sliderImages: []\n  }),\n      localState = _useState[0],\n      setLocalState = _useState[1];\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      token = _useContext.token;\n\n  var state = useSelector(function (state) {\n    var _state$formReducer;\n\n    return state === null || state === void 0 ? void 0 : (_state$formReducer = state.formReducer) === null || _state$formReducer === void 0 ? void 0 : _state$formReducer.pageBuilder;\n  });\n  var router = useRouter(); // const token = useSelector((state) => state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : router.query.authToken)\n\n  var companyId = router.query.companyID || GENERAL_SETTINGS.HOTELREFNO;\n  var authToken = token || router.query.authToken;\n  var classes = useStyles(sliderGallery);\n  var settings = {\n    dots: true,\n    speed: 500,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    infinite: true\n  };\n  var isRequestSend = localState.isRequestSend,\n      sliderImages = localState.sliderImages;\n  useEffect(function () {\n    (sliderGallery === null || sliderGallery === void 0 ? void 0 : sliderGallery.gid) && fetchGalleryData(sliderGallery.gid);\n  }, [sliderGallery]);\n\n  var fetchGalleryData = function fetchGalleryData(gid) {\n    setLocalState(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        isRequestSend: true\n      });\n    });\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.HCMITEMSLD,\n      token: authToken,\n      params: {\n        query: \"gid:\".concat(gid),\n        hotelrefno: Number(companyId)\n      }\n    }).then(function (res) {\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200) {\n        var _res$data, _res$data$data;\n\n        if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$data = _res$data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.length) > 0) {\n          var _res$data$data$;\n\n          ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.HCMITEMIMG,\n            token: authToken,\n            params: {\n              query: \"sliderid:\".concat((_res$data$data$ = res.data.data[0]) === null || _res$data$data$ === void 0 ? void 0 : _res$data$data$.id),\n              sort: 'orderno',\n              hotelrefno: Number(companyId)\n            }\n          }).then(function (res1) {\n            if ((res1 === null || res1 === void 0 ? void 0 : res1.status) === 200) {\n              var _res1$data, _res1$data$data;\n\n              if ((res1 === null || res1 === void 0 ? void 0 : (_res1$data = res1.data) === null || _res1$data === void 0 ? void 0 : (_res1$data$data = _res1$data.data) === null || _res1$data$data === void 0 ? void 0 : _res1$data$data.length) > 0) {\n                var updatedImages = [];\n                res1.data.data.map(function (data) {\n                  updatedImages.push(data);\n                });\n                setLocalState(function (prev) {\n                  return _objectSpread(_objectSpread({}, prev), {}, {\n                    sliderImages: updatedImages,\n                    isRequestSend: false\n                  });\n                });\n              } else {\n                setLocalState(function (prev) {\n                  return _objectSpread(_objectSpread({}, prev), {}, {\n                    isRequestSend: false\n                  });\n                });\n                toast.warn('Images not found', {\n                  position: toast.POSITION.TOP_RIGHT\n                });\n              }\n            } else {\n              setLocalState(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  isRequestSend: false\n                });\n              });\n              var retErr = isErrorMsg(res1);\n              toast.error(retErr.errorMsg, {\n                position: toast.POSITION.TOP_RIGHT\n              });\n            }\n          });\n        }\n      } else {\n        setLocalState(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, {\n            isRequestSend: false\n          });\n        });\n        var retErr = isErrorMsg(res);\n        toast.error(retErr.errorMsg, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    });\n  };\n\n  if (isRequestSend) {\n    return __jsx(LoadingSpinner, {\n      size: 40,\n      style: {\n        color: COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Slider, _extends({}, settings, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }), sliderImages.map(function (item, i) {\n    var _otherLangSliderGalle, _otherLangSliderGalle2, _state$assets, _state$assets$font, _otherLangSliderGalle3;\n\n    return __jsx(\"div\", {\n      key: i,\n      className: classes.cardRoot,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: classes.textDiv,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      className: classes.heading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: state.langCode === (state === null || state === void 0 ? void 0 : state.defaultLang) ? item.title : (otherLangSliderGallery === null || otherLangSliderGallery === void 0 ? void 0 : otherLangSliderGallery.length) > 0 && ((_otherLangSliderGalle = otherLangSliderGallery[i]) === null || _otherLangSliderGalle === void 0 ? void 0 : _otherLangSliderGalle.title)\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 37\n      }\n    }), __jsx(\"span\", {\n      className: classes.line,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 37\n      }\n    })), __jsx(\"div\", {\n      className: classes.description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: (state === null || state === void 0 ? void 0 : state.langCode) === (state === null || state === void 0 ? void 0 : state.defaultLang) ? item.description : (otherLangSliderGallery === null || otherLangSliderGallery === void 0 ? void 0 : otherLangSliderGallery.length) > 0 && ((_otherLangSliderGalle2 = otherLangSliderGallery[i]) === null || _otherLangSliderGalle2 === void 0 ? void 0 : _otherLangSliderGalle2.description)\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 37\n      }\n    })), (item === null || item === void 0 ? void 0 : item.cta) && __jsx(\"div\", {\n      style: {\n        position: 'absolute',\n        left: \"\".concat((item === null || item === void 0 ? void 0 : item.alignhor) === '0000192' ? '16.5%' : (item === null || item === void 0 ? void 0 : item.alignhor) === '0000190' && 0),\n        top: \"\".concat((item === null || item === void 0 ? void 0 : item.alignver) === '0000182' && '50%'),\n        bottom: \"\".concat((item === null || item === void 0 ? void 0 : item.alignver) === '0000184' ? 0 : (item === null || item === void 0 ? void 0 : item.alignver) === '0000182' && '50%'),\n        right: \"\".concat((item === null || item === void 0 ? void 0 : item.alignhor) === '0000194' && '52%')\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 37\n      }\n    }, __jsx(Button, {\n      variant: \"contained\",\n      size: \"small\",\n      color: \"primary\",\n      \"aria-label\": \"add\",\n      className: classes.ctaButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 41\n      }\n    }, __jsx(\"div\", {\n      style: {\n        fontFamily: state !== null && state !== void 0 && (_state$assets = state.assets) !== null && _state$assets !== void 0 && (_state$assets$font = _state$assets.font) !== null && _state$assets$font !== void 0 && _state$assets$font.name ? state.assets.font.name : 'Roboto'\n      },\n      dangerouslySetInnerHTML: {\n        __html: (state === null || state === void 0 ? void 0 : state.langCode) === (state === null || state === void 0 ? void 0 : state.defaultLang) ? item === null || item === void 0 ? void 0 : item.cta : (otherLangSliderGallery === null || otherLangSliderGallery === void 0 ? void 0 : otherLangSliderGallery.length) > 0 && ((_otherLangSliderGalle3 = otherLangSliderGallery[i]) === null || _otherLangSliderGalle3 === void 0 ? void 0 : _otherLangSliderGalle3.cta)\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 45\n      }\n    })))), __jsx(\"div\", {\n      className: classes.cardDiv,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, __jsx(\"img\", {\n      alt: 'image',\n      src: GENERAL_SETTINGS.STATIC_URL + (item === null || item === void 0 ? void 0 : item.fileurl),\n      className: classes.cardImage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 33\n      }\n    })));\n  })));\n};\n\n_s(SliderGallery, \"sMLJhDCAW4bZM6IpCiyv19umPIw=\", false, function () {\n  return [useSelector, useRouter, useStyles];\n});\n\n_c = SliderGallery;\nexport default SliderGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"SliderGallery\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/slider-gallery/SliderGallery.js"],"names":["React","useContext","useEffect","useState","ViewList","isErrorMsg","OREST_ENDPOINT","toast","WebCmsGlobal","useRouter","LoadingSpinner","COLORS","Slider","makeStyles","Button","useSelector","useStyles","cardRoot","width","display","position","textDiv","heading","letterSpacing","marginBottom","color","props","textColor","cardDiv","cardImage","height","borderRadius","description","line","background","marginTop","ctaButton","backgroundColor","buttonColor","cursor","fontSize","lineHeight","padding","textAlign","SliderGallery","sliderGallery","otherLangSliderGallery","isRequestSend","sliderImages","localState","setLocalState","GENERAL_SETTINGS","token","state","formReducer","pageBuilder","router","companyId","query","companyID","HOTELREFNO","authToken","classes","settings","dots","speed","slidesToShow","slidesToScroll","infinite","gid","fetchGalleryData","prev","apiUrl","OREST_URL","endpoint","HCMITEMSLD","params","hotelrefno","Number","then","res","status","data","length","HCMITEMIMG","id","sort","res1","updatedImages","map","push","warn","POSITION","TOP_RIGHT","retErr","error","errorMsg","secondary","item","i","__html","langCode","defaultLang","title","cta","left","alignhor","top","alignver","bottom","right","fontFamily","assets","font","name","STATIC_URL","fileurl"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\nimport {ViewList} from \"@webcms/orest\";\nimport {isErrorMsg, OREST_ENDPOINT} from \"../../../../../../../model/orest/constants\";\nimport {toast} from \"react-toastify\";\nimport WebCmsGlobal from \"components/webcms-global\";\nimport {useRouter} from \"next/router\";\nimport LoadingSpinner from \"../../../../../../LoadingSpinner\";\nimport {COLORS} from \"../../../../constants\";\nimport Slider from 'react-slick';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSelector } from 'react-redux'\n\nconst useStyles = makeStyles(() => ({\n    cardRoot: {\n        width: '100%',\n        display: 'flex !important',\n        position: 'relative'\n    },\n    textDiv: {\n        float: \"left\",\n        width: '50%',\n    },\n    heading: {\n        letterSpacing: 2,\n        marginBottom: 30,\n        color: props => props?.textColor ? props.textColor : \"#000000\"\n    },\n    cardDiv: {\n        display: \"inline-block\",\n        width: '50%',\n    },\n    cardImage: {\n        width: '100%',\n        height: '40vh',\n        borderRadius: 5\n    },\n    description: {\n        color: props => props?.textColor ? props.textColor : \"#000000\"\n    },\n    line: {\n        background: '#839FAD none repeat scroll 0 0',\n        display: 'block',\n        height: 1,\n        marginTop: 10,\n        marginBottom: 10,\n        position: 'relative',\n        width: '10%'\n    },\n    ctaButton: {\n        borderRadius: 2,\n        backgroundColor: props => props?.buttonColor ? props.buttonColor : \"#000000\",\n        cursor: 'pointer',\n        display: 'inline-block',\n        fontSize: 14,\n        letterSpacing: 3,\n        lineHeight: '45px',\n        padding: '0 45px',\n        textAlign: \"center\",\n        '& a': {\n            color: 'white'\n        }\n    },\n}));\n\nconst SliderGallery = (props) => {\n\n    const { sliderGallery, otherLangSliderGallery } = props\n    const [localState, setLocalState] = useState({\n        isRequestSend: false,\n        sliderImages: [],\n    });\n    const {GENERAL_SETTINGS, token} = useContext(WebCmsGlobal);\n    const state = useSelector(state => state?.formReducer?.pageBuilder);\n    const router = useRouter();\n    // const token = useSelector((state) => state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : router.query.authToken)\n    const companyId = router.query.companyID || GENERAL_SETTINGS.HOTELREFNO;\n    const authToken = token || router.query.authToken;\n\n    const classes = useStyles(sliderGallery);\n    const settings = {\n        dots: true,\n        speed: 500,\n        slidesToShow: 1,\n        slidesToScroll: 1,\n        infinite: true,\n    }\n\n    const { isRequestSend, sliderImages } = localState;\n\n    useEffect(() => {\n         (sliderGallery?.gid) && fetchGalleryData(sliderGallery.gid);\n    }, [sliderGallery]);\n\n    const fetchGalleryData = (gid) => {\n        setLocalState(prev => ({...prev, isRequestSend: true}));\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.HCMITEMSLD,\n            token: authToken,\n            params: {\n                query: `gid:${gid}`,\n                hotelrefno:  Number(companyId)\n            }\n        }).then(res => {\n            if (res?.status === 200) {\n                if (res?.data?.data?.length > 0) {\n                    ViewList({\n                        apiUrl: GENERAL_SETTINGS.OREST_URL,\n                        endpoint: OREST_ENDPOINT.HCMITEMIMG,\n                        token: authToken,\n                        params: {\n                            query: `sliderid:${res.data.data[0]?.id}`,\n                            sort: 'orderno',\n                            hotelrefno:  Number(companyId)\n                        }\n                    }).then(res1 => {\n                        if (res1?.status === 200) {\n                            if (res1?.data?.data?.length > 0) {\n                                let updatedImages = [];\n                                res1.data.data.map(data => {\n                                    updatedImages.push(data);\n                                });\n                                setLocalState(prev => ({...prev, sliderImages: updatedImages, isRequestSend: false}));\n                            } else {\n                                setLocalState(prev => ({...prev, isRequestSend: false}));\n                                toast.warn('Images not found', {\n                                    position: toast.POSITION.TOP_RIGHT\n                                });\n                            }\n                        } else {\n                            setLocalState(prev => ({...prev, isRequestSend: false}));\n                            const retErr = isErrorMsg(res1);\n                            toast.error(retErr.errorMsg, {\n                                position: toast.POSITION.TOP_RIGHT\n                            });\n                        }\n                    })\n                }\n            } else {\n                setLocalState(prev => ({...prev, isRequestSend: false}));\n                const retErr = isErrorMsg(res);\n                toast.error(retErr.errorMsg, {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n            }\n        })\n    }\n\n    if (isRequestSend) {\n        return <LoadingSpinner size={40} style={{color: COLORS?.secondary}} />\n    }\n\n    return (\n        <>\n            <Slider {...settings}>\n                {sliderImages.map((item, i) => {\n\n                    return (\n                        <div key={i} className={classes.cardRoot} >\n                            <div className={classes.textDiv}>\n                                <div className={classes.heading} >\n                                    <div dangerouslySetInnerHTML={{__html: state.langCode === state?.defaultLang ? item.title : otherLangSliderGallery?.length > 0 && otherLangSliderGallery[i]?.title}}></div>\n                                    <span className={classes.line}></span>\n                                </div>\n                                <div className={classes.description}>\n                                    <div dangerouslySetInnerHTML={{__html: state?.langCode === state?.defaultLang ? item.description : otherLangSliderGallery?.length > 0 && otherLangSliderGallery[i]?.description}}></div>\n                                </div>\n                                {\n                                    item?.cta &&\n                                    <div style={{position: 'absolute',\n                                        left: `${item?.alignhor === '0000192' ? '16.5%' : (item?.alignhor === '0000190' && 0)}`,\n                                        top: `${(item?.alignver === '0000182' && '50%')}`,\n                                        bottom: `${item?.alignver === '0000184' ? 0 : (item?.alignver === '0000182' && '50%')}`,\n                                        right: `${(item?.alignhor === '0000194' && '52%')}`}}>\n                                        <Button\n                                            variant=\"contained\"\n                                            size=\"small\"\n                                            color=\"primary\"\n                                            aria-label=\"add\"\n                                            className={classes.ctaButton}\n                                        >\n                                            <div style={{fontFamily: state?.assets?.font?.name ? state.assets.font.name : 'Roboto'}}\n                                                dangerouslySetInnerHTML={{__html: state?.langCode === state?.defaultLang ? item?.cta : otherLangSliderGallery?.length > 0 && otherLangSliderGallery[i]?.cta}}></div>\n                                        </Button>\n                                    </div>\n                                }\n                            </div>\n                            <div className={classes.cardDiv}>\n                                <img alt={'image'} src={GENERAL_SETTINGS.STATIC_URL + item?.fileurl} className={classes.cardImage}  />\n                            </div>\n                        </div>\n                    )\n                })}\n            </Slider>\n        </>\n    )\n}\n\nexport default SliderGallery;"]},"metadata":{},"sourceType":"module"}