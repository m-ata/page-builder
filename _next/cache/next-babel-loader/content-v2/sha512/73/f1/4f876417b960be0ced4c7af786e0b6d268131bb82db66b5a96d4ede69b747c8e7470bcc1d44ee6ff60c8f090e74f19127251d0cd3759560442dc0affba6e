{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/survey/surveytree/options/sub-components/HasFile.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { makeStyles } from '@material-ui/core/styles';\nimport styles from '../../../style/SurveyOptions.style';\nimport Button from '@material-ui/core/Button';\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport useSurveyAction from '../../../../../model/survey/useSurveyAction';\nimport LoginComponent from '../../../../LoginComponent/LoginComponent';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { DEFAULT_OREST_TOKEN } from '../../../../../model/orest/constants';\nconst useStyles = makeStyles(styles);\nexport default function HasFile(props) {\n  const {\n    t\n  } = useTranslation();\n  const {\n    option\n  } = props;\n  const router = useRouter(); //style\n\n  const classes = useStyles(); //redux\n\n  const auth = useSelector(state => state.orest.currentUser && state.orest.currentUser.auth);\n  const {\n    setSurveyFiles\n  } = useSurveyAction();\n  const surveyIsValid = useSelector(state => state.survey.isValid);\n  const surveyTrans = useSelector(state => state.survey.trans);\n  const token = useSelector(state => state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : DEFAULT_OREST_TOKEN);\n  const reftoken = router.query.reftoken || token; //state\n\n  const {\n    0: isUploadDialogOpen,\n    1: setIsUploadDialogOpen\n  } = useState(false);\n\n  const onOpen = () => {\n    setIsUploadDialogOpen(true);\n  };\n\n  const onClose = () => {\n    setIsUploadDialogOpen(false);\n  };\n\n  const onChange = files => {\n    setSurveyFiles(surveyTrans, option.id, files);\n  };\n\n  const onDelete = file => {//console.log(file)\n  };\n\n  return __jsx(\"div\", {\n    className: classes.optionContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    onClick: onOpen,\n    variant: \"contained\",\n    fullWidth: true,\n    disabled: surveyIsValid,\n    className: classes.uploadFileButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, t('str_uploadAFile')), __jsx(Dialog, {\n    open: isUploadDialogOpen,\n    onClose: onClose,\n    maxWidth: 'sm',\n    fullWidth: true,\n    keepMounted: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, !reftoken && !auth ? __jsx(\"div\", {\n    style: {\n      padding: 18\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, __jsx(\"h3\", {\n    style: {\n      fontSize: 27,\n      fontWeight: 500,\n      color: '#2F3434',\n      textAlign: 'center',\n      margin: 6\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, t('str_loginToUpload')), __jsx(LoginComponent, {\n    locationName: \"survey\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  })) : __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, __jsx(DialogContent, {\n    dividers: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, __jsx(DropzoneArea, {\n    showPreviews: false,\n    showPreviewsInDropzone: true,\n    showFileNames: true,\n    showFileNamesInPreview: true,\n    filesLimit: 10,\n    showAlerts: true,\n    dropzoneText: 'Drag and drop files here or click',\n    getFileLimitExceedMessage: filesLimit => `Maximum allowed number of files exceeded. Only ${filesLimit} allowed`,\n    getFileAddedMessage: fileName => `File ${fileName} successfully added.`,\n    getFileRemovedMessage: fileName => `File ${fileName} removed.` //getDropRejectMessage={(rejectedFile) => `File ${rejectedFile.name} was rejected. File type not supported. File is too big. Size limit is ${rejectedFile.size}.`}\n    ,\n    previewGridClasses: {\n      image: classes.fileUploadPreviewImage\n    },\n    dropzoneParagraphClass: classes.fileUploadPreviewParagraph,\n    previewGridProps: {\n      alignContent: 'center',\n      alignItems: 'center',\n      justify: 'center',\n      item: {\n        style: {\n          padding: 12\n        },\n        xs: 'auto'\n      },\n      container: {\n        spacing: 0,\n        margin: 0,\n        width: '100%',\n        direction: 'row',\n        justify: 'center',\n        alignContent: 'center',\n        alignItems: 'center',\n        style: {\n          paddingTop: 18\n        }\n      }\n    },\n    onChange: onChange,\n    onDelete: onDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  })), __jsx(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    onClick: onClose,\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, t('str_done'))))));\n}","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/survey/surveytree/options/sub-components/HasFile.js"],"names":["React","useState","useSelector","useRouter","makeStyles","styles","Button","DropzoneArea","Dialog","DialogContent","DialogActions","useSurveyAction","LoginComponent","useTranslation","DEFAULT_OREST_TOKEN","useStyles","HasFile","props","t","option","router","classes","auth","state","orest","currentUser","setSurveyFiles","surveyIsValid","survey","isValid","surveyTrans","trans","token","access_token","reftoken","query","isUploadDialogOpen","setIsUploadDialogOpen","onOpen","onClose","onChange","files","id","onDelete","file","optionContainer","uploadFileButton","padding","fontSize","fontWeight","color","textAlign","margin","filesLimit","fileName","image","fileUploadPreviewImage","fileUploadPreviewParagraph","alignContent","alignItems","justify","item","style","xs","container","spacing","width","direction","paddingTop","button"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport {useSelector} from 'react-redux'\nimport { useRouter } from 'next/router'\nimport {makeStyles} from '@material-ui/core/styles'\nimport styles from '../../../style/SurveyOptions.style'\nimport Button from '@material-ui/core/Button'\nimport {DropzoneArea} from 'material-ui-dropzone'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport useSurveyAction from '../../../../../model/survey/useSurveyAction'\nimport LoginComponent from '../../../../LoginComponent/LoginComponent'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { DEFAULT_OREST_TOKEN } from '../../../../../model/orest/constants'\n\nconst useStyles = makeStyles(styles)\n\nexport default function HasFile(props) {\n    const { t } = useTranslation()\n    const {option} = props\n    const router = useRouter()\n    //style\n    const classes = useStyles()\n\n    //redux\n    const auth = useSelector((state) => state.orest.currentUser && state.orest.currentUser.auth)\n    const {setSurveyFiles} = useSurveyAction()\n    const surveyIsValid = useSelector((state) => state.survey.isValid)\n    const surveyTrans = useSelector((state) => state.survey.trans)\n    const token = useSelector((state) => state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : DEFAULT_OREST_TOKEN)\n    const reftoken = router.query.reftoken || token\n\n    //state\n    const [isUploadDialogOpen, setIsUploadDialogOpen] = useState(false)\n\n    const onOpen = () => {\n        setIsUploadDialogOpen(true)\n    }\n\n    const onClose = () => {\n        setIsUploadDialogOpen(false)\n    }\n\n    const onChange = (files) => {\n        setSurveyFiles(surveyTrans, option.id, files)\n    }\n\n    const onDelete = (file) => {\n        //console.log(file)\n    }\n\n    return (\n        <div className={classes.optionContainer}>\n            <Button\n                onClick={onOpen}\n                variant=\"contained\"\n                fullWidth={true}\n                disabled={surveyIsValid}\n                className={classes.uploadFileButton}\n            >\n                {t('str_uploadAFile')}\n            </Button>\n            <Dialog open={isUploadDialogOpen} onClose={onClose} maxWidth={'sm'} fullWidth={true} keepMounted={true}>\n                {(!reftoken && !auth) ? (\n                    <div style={{padding: 18}}>\n                        <h3\n                            style={{\n                                fontSize: 27,\n                                fontWeight: 500,\n                                color: '#2F3434',\n                                textAlign: 'center',\n                                margin: 6,\n                            }}\n                        >\n                            {t('str_loginToUpload')}\n                        </h3>\n                        <LoginComponent locationName=\"survey\"/>\n                    </div>\n                ) : (\n                    <React.Fragment>\n                        <DialogContent dividers={false}>\n                            <DropzoneArea\n                                showPreviews={false}\n                                showPreviewsInDropzone={true}\n                                showFileNames={true}\n                                showFileNamesInPreview={true}\n                                filesLimit={10}\n                                showAlerts={true}\n                                dropzoneText={'Drag and drop files here or click'}\n                                getFileLimitExceedMessage={(filesLimit) =>\n                                    `Maximum allowed number of files exceeded. Only ${filesLimit} allowed`\n                                }\n                                getFileAddedMessage={(fileName) => `File ${fileName} successfully added.`}\n                                getFileRemovedMessage={(fileName) => `File ${fileName} removed.`}\n                                //getDropRejectMessage={(rejectedFile) => `File ${rejectedFile.name} was rejected. File type not supported. File is too big. Size limit is ${rejectedFile.size}.`}\n                                previewGridClasses={{\n                                    image: classes.fileUploadPreviewImage,\n                                }}\n                                dropzoneParagraphClass={classes.fileUploadPreviewParagraph}\n                                previewGridProps={{\n                                    alignContent: 'center',\n                                    alignItems: 'center',\n                                    justify: 'center',\n                                    item: {\n                                        style: {padding: 12},\n                                        xs: 'auto',\n                                    },\n                                    container: {\n                                        spacing: 0,\n                                        margin: 0,\n                                        width: '100%',\n                                        direction: 'row',\n                                        justify: 'center',\n                                        alignContent: 'center',\n                                        alignItems: 'center',\n                                        style: {paddingTop: 18},\n                                    },\n                                }}\n                                onChange={onChange}\n                                onDelete={onDelete}\n                            />\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={onClose} className={classes.button}>\n                                {t('str_done')}\n                            </Button>\n                        </DialogActions>\n                    </React.Fragment>\n                )}\n            </Dialog>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}