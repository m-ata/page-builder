{"ast":null,"code":"import _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/Offers/OfferCard.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport styles from './style/OfferCard.style';\nimport LoadingSpinner from 'components/LoadingSpinner';\nimport { Grid, Card, CardContent, CardActionArea, CardActions, Button, Typography, Dialog, DialogActions, DialogContent, DialogTitle, Box } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport WebCmsGlobal from 'components/webcms-global';\nimport stylesTabPanel from '../style/TabPanel.style';\nimport CardImage from '@webcms-ui/core/card-image';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { getHyperlinkParser, stdTimeFormat } from 'model/orest/constants';\nimport { useSelector } from 'react-redux';\nimport LoginDialog from '../../../LoginComponent/LoginDialog';\nimport { useSnackbar } from 'notistack';\nimport Link from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Slider from 'react-slick';\nvar useStyles = makeStyles(styles);\nvar useStylesTabPanel = makeStyles(stylesTabPanel);\n\nvar getDescription = function getDescription(str) {\n  var useLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n  var useShort = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n\n  if (str && str.length >= useLength) {\n    return str.substring(0, useShort) + ' ...';\n  }\n\n  return str;\n};\n\nvar useModalStyles = makeStyles(function (theme) {\n  var _h, _sliderImgBox;\n\n  return {\n    dialogTitle: {\n      '& h2': (_h = {}, _defineProperty(_h, theme.breakpoints.only('md'), {\n        fontSize: 15\n      }), _defineProperty(_h, theme.breakpoints.only('sm'), {\n        fontSize: 14\n      }), _defineProperty(_h, theme.breakpoints.only('xs'), {\n        fontSize: 13\n      }), _h)\n    },\n    button: {\n      textAlign: 'center',\n      '& a': {\n        background: '#fffbfb',\n        padding: 10,\n        textAlign: 'center',\n        color: theme.palette.primary.main,\n        border: \"1px solid \".concat(theme.palette.primary.main),\n        fontSize: '0.875rem',\n        minWidth: 64,\n        boxSizing: 'border-box',\n        transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n        fontWeight: 500,\n        lineHeight: 1.75,\n        borderRadius: 4,\n        letterSpacing: '0.02857em',\n        textTransform: 'uppercase'\n      }\n    },\n    sliderImgBox: (_sliderImgBox = {\n      width: '100%',\n      height: 340\n    }, _defineProperty(_sliderImgBox, theme.breakpoints.only('xs'), {\n      height: 180\n    }), _defineProperty(_sliderImgBox, \"backgroundRepeat\", 'no-repeat'), _defineProperty(_sliderImgBox, \"backgroundSize\", '100% 100%'), _sliderImgBox),\n    deleteIcon: {\n      cursor: 'unset'\n    }\n  };\n});\n\nfunction OfferModal(_ref) {\n  _s();\n\n  var _this = this,\n      _dialogData$localtitl,\n      _t,\n      _dialogData$localdesc2;\n\n  var open = _ref.open,\n      handleCloseDialog = _ref.handleCloseDialog,\n      dialogData = _ref.dialogData;\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      locale = _useContext.locale;\n\n  var _useState = useState(false),\n      isOpenLoginDialog = _useState[0],\n      setIsOpenLoginDialog = _useState[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var classes = useModalStyles();\n\n  var _useState2 = useState(false),\n      itemSlideData = _useState2[0],\n      setItemSlideData = _useState2[1];\n\n  var loginfo = useSelector(function (state) {\n    return state.orest.currentUser && state.orest.currentUser.loginfo;\n  });\n  var clientParams = {\n    hotelrefno: loginfo && loginfo.hotelrefno || GENERAL_SETTINGS.HOTELREFNO\n  };\n  useEffect(function () {\n    var active = true;\n\n    if (active && open && dialogData !== null && dialogData !== void 0 && dialogData.sliderid) {\n      axios({\n        url: GENERAL_SETTINGS.BASE_URL + 'api/hotel/content/slider',\n        method: 'post',\n        params: Object.assign({\n          sliderid: dialogData.sliderid\n        }, clientParams)\n      }).then(function (sliderResponse) {\n        if (active) {\n          var sliderData = sliderResponse.data;\n\n          if (sliderData.success && sliderData.data.length > 0) {\n            setItemSlideData(sliderData.data);\n          } else {\n            setItemSlideData(null);\n          }\n        }\n      });\n    }\n\n    return function () {\n      active = false;\n    };\n  }, [open]);\n  var settings = {\n    dots: true,\n    infinite: true,\n    lazyLoad: true,\n    speed: 500,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    centerMode: true,\n    swipeToSlide: true,\n    touchMove: true\n  };\n\n  var _useState3 = useState(null),\n      mouseX = _useState3[0],\n      setMouseX = _useState3[1];\n\n  var _useState4 = useState(null),\n      mouseY = _useState4[0],\n      setMouseY = _useState4[1];\n\n  var _useState5 = useState(false),\n      openContextMenu = _useState5[0],\n      setOpenContextMenu = _useState5[1];\n\n  var _useState6 = useState(null),\n      contextData = _useState6[0],\n      setContextData = _useState6[1];\n\n  var handleRightClick = function handleRightClick(e, item) {\n    setMouseX(e.clientX - 2);\n    setMouseY(e.clientY - 4);\n    setOpenContextMenu(true);\n    setContextData(item);\n    e.preventDefault();\n  };\n\n  var onHandleCopyText = function onHandleCopyText() {\n    navigator.clipboard.writeText(contextData).then(function () {\n      enqueueSnackbar(t(\"str_copiedToClipboard\").replace('%s', \"\\\"\".concat(contextData.substring(0, 50) + '...', \"\\\"\")), {\n        variant: 'success',\n        autoHideDuration: 2000\n      });\n    });\n    setOpenContextMenu(false);\n    setContextData(null);\n  };\n\n  var renderButton = function renderButton(cta) {\n    if (cta) {\n      var _link$text;\n\n      var link = getHyperlinkParser(cta);\n\n      if (link === false) {\n        return;\n      }\n\n      var href = link.href,\n          text = (link === null || link === void 0 ? void 0 : (_link$text = link.text) === null || _link$text === void 0 ? void 0 : _link$text.replace(/ /g, '')) || '',\n          host = window.location.host,\n          isExternalLink = false;\n\n      if (href.includes('http') && !href.includes(host)) {\n        isExternalLink = true;\n      }\n\n      if (!isExternalLink) {\n        return __jsx(Link, {\n          id: \"slick-button\",\n          variant: \"outlined\",\n          color: \"primary\",\n          href: href,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 21\n          }\n        }, t(text));\n      }\n\n      return __jsx(Link, {\n        id: \"slick-button\",\n        variant: \"outlined\",\n        color: \"primary\",\n        target: \"_blank\",\n        href: href,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }\n      }, t(text));\n    }\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, __jsx(LoginDialog, {\n    open: isOpenLoginDialog,\n    onClose: function onClose(status) {\n      return setIsOpenLoginDialog(status);\n    },\n    locationName: \"guest\",\n    isLoginWrapper: true,\n    disableRegister: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }), __jsx(Dialog, {\n    maxWidth: \"sm\",\n    open: open,\n    onClose: function onClose() {\n      return handleCloseDialog();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, __jsx(DialogTitle, {\n    className: classes.dialogTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, dialogData && t((dialogData === null || dialogData === void 0 ? void 0 : (_dialogData$localtitl = dialogData.localtitle) === null || _dialogData$localtitl === void 0 ? void 0 : _dialogData$localtitl.renderText()) || \"\")), __jsx(DialogContent, {\n    dividers: true,\n    style: {\n      overflow: 'overlay',\n      padding: '16px 40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, dialogData === false ? __jsx(Box, {\n    p: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, __jsx(LoadingSpinner, {\n    size: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 29\n    }\n  })) : dialogData === null ? __jsx(Box, {\n    p: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    align: \"center\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 29\n    }\n  }, t('str_noDefaultRecord'))) : __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 29\n    }\n  }, __jsx(Slider, _extends({}, settings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 33\n    }\n  }), itemSlideData && itemSlideData.map(function (item, i) {\n    return __jsx(Box, {\n      key: i,\n      p: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 45\n      }\n    }, __jsx(\"div\", {\n      className: classes.sliderImgBox,\n      style: {\n        backgroundImage: \"url(\".concat(GENERAL_SETTINGS.STATIC_URL + item.fileurl, \")\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 49\n      }\n    }));\n  })), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  }, __jsx(Typography, {\n    onContextMenu: function onContextMenu(e) {\n      var _dialogData$localdesc;\n\n      return handleRightClick(e, t(dialogData === null || dialogData === void 0 ? void 0 : (_dialogData$localdesc = dialogData.localdesc) === null || _dialogData$localdesc === void 0 ? void 0 : _dialogData$localdesc.renderText()));\n    },\n    variant: \"body2\",\n    align: \"justify\",\n    style: {\n      whiteSpace: 'pre-line'\n    },\n    dangerouslySetInnerHTML: {\n      __html: (_t = t(dialogData === null || dialogData === void 0 ? void 0 : (_dialogData$localdesc2 = dialogData.localdesc) === null || _dialogData$localdesc2 === void 0 ? void 0 : _dialogData$localdesc2.renderText())) === null || _t === void 0 ? void 0 : _t.replace('\\n', '<br/>')\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 33\n    }\n  }), __jsx(Menu, {\n    open: openContextMenu,\n    onClose: function onClose() {\n      return setOpenContextMenu(false);\n    },\n    anchorReference: \"anchorPosition\",\n    anchorPosition: mouseY !== null && mouseX !== null ? {\n      top: mouseY,\n      left: mouseX\n    } : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 33\n    }\n  }, __jsx(MenuItem, {\n    onClick: function onClick() {\n      return onHandleCopyText();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 37\n    }\n  }, t(\"str_copy\")))), dialogData && dialogData.cta ? __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 33\n    }\n  }, __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 37\n    }\n  }), renderButton(dialogData.cta), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 37\n    }\n  })) : null)), __jsx(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleCloseDialog();\n    },\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, t('str_close')))));\n}\n\n_s(OfferModal, \"mCQCl1qmIQJEGycmcT+Uc4JvHOo=\", false, function () {\n  return [useTranslation, useSnackbar, useModalStyles, useSelector];\n});\n\n_c = OfferModal;\nexport default function OfferCard(props) {\n  _s2();\n\n  var _offer$localdesc;\n\n  var offer = props.offer,\n      _useTranslation2 = useTranslation(),\n      t = _useTranslation2.t,\n      classes = useStyles(),\n      classesTabPanel = useStylesTabPanel(),\n      _useContext2 = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext2.GENERAL_SETTINGS,\n      _useState7 = useState(false),\n      openDialog = _useState7[0],\n      setOpenDialog = _useState7[1],\n      _useSnackbar2 = useSnackbar(),\n      enqueueSnackbar = _useSnackbar2.enqueueSnackbar,\n      _useState8 = useState(false),\n      isOpenLoginDialog = _useState8[0],\n      setIsOpenLoginDialog = _useState8[1];\n\n  if (!offer) {\n    return __jsx(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 16\n      }\n    });\n  }\n\n  var cta = false;\n\n  if (offer.cta) {\n    var link = getHyperlinkParser(offer.cta);\n\n    if (link) {\n      cta = {};\n      cta.href = link.href;\n      cta.text = link.text;\n    }\n  }\n\n  var handleOnClick = function handleOnClick(cta) {\n    return cta.href.includes(window.location.host) ? window.location.href = cta.href : window.open(cta.href);\n  };\n\n  return __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 4,\n    className: classesTabPanel.gridItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  }, __jsx(LoginDialog, {\n    open: isOpenLoginDialog,\n    onClose: function onClose(status) {\n      return setIsOpenLoginDialog(status);\n    },\n    locationName: \"guest\",\n    isLoginWrapper: true,\n    disableRegister: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }), __jsx(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, __jsx(CardActionArea, {\n    onClick: function onClick() {\n      return setOpenDialog(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, __jsx(CardImage, {\n    className: classes.offerImage,\n    src: offer.url !== null ? GENERAL_SETTINGS.STATIC_URL + offer.url : null,\n    alt: t((offer === null || offer === void 0 ? void 0 : (_offer$localdesc = offer.localdesc) === null || _offer$localdesc === void 0 ? void 0 : _offer$localdesc.renderText()) || \"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }), offer.saleprice && offer.pricecurr ? __jsx(\"span\", {\n    className: classes.priceBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 25\n    }\n  }, __jsx(Typography, {\n    className: classes.price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 29\n    }\n  }, offer.saleprice, \" \", offer.pricecurr, \" \", __jsx(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 69\n    }\n  }, \"/\", t(offer.qty)))) : null, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 21\n    }\n  }, (offer.localtitle || offer.title) && __jsx(Typography, {\n    gutterBottom: true,\n    variant: \"h5\",\n    component: \"h2\",\n    align: \"center\",\n    className: classes.nameText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 29\n    }\n  }, t((offer === null || offer === void 0 ? void 0 : offer.localtitle.renderText()) || (offer === null || offer === void 0 ? void 0 : offer.title.renderText()))), (offer.localdesc || offer.description) && __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    align: \"justify\",\n    className: classes.descText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 29\n    }\n  }, getDescription(t((offer === null || offer === void 0 ? void 0 : offer.localdesc.renderText()) || (offer === null || offer === void 0 ? void 0 : offer.description.renderText())))))), __jsx(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }\n  }, cta && cta.text && cta.href ? __jsx(Button, {\n    classes: {\n      root: classes.ctaButton\n    },\n    variant: \"outlined\",\n    color: \"primary\",\n    fullWidth: true,\n    onClick: function onClick() {\n      return handleOnClick(cta);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 25\n    }\n  }, t(cta.text.renderText())) : null)), __jsx(OfferModal, {\n    open: openDialog,\n    handleCloseDialog: function handleCloseDialog() {\n      return setOpenDialog(false);\n    },\n    dialogData: offer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }));\n}\n\n_s2(OfferCard, \"VFKyjCLqZayctcleYl41BbjuHPE=\", false, function () {\n  return [useTranslation, useStyles, useStylesTabPanel, useSnackbar];\n});\n\n_c2 = OfferCard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"OfferModal\");\n$RefreshReg$(_c2, \"OfferCard\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/Offers/OfferCard.js"],"names":["React","useContext","useState","useEffect","axios","styles","LoadingSpinner","Grid","Card","CardContent","CardActionArea","CardActions","Button","Typography","Dialog","DialogActions","DialogContent","DialogTitle","Box","makeStyles","WebCmsGlobal","stylesTabPanel","CardImage","useTranslation","getHyperlinkParser","stdTimeFormat","useSelector","LoginDialog","useSnackbar","Link","Menu","MenuItem","Slider","useStyles","useStylesTabPanel","getDescription","str","useLength","useShort","length","substring","useModalStyles","theme","dialogTitle","breakpoints","only","fontSize","button","textAlign","background","padding","color","palette","primary","main","border","minWidth","boxSizing","transition","fontWeight","lineHeight","borderRadius","letterSpacing","textTransform","sliderImgBox","width","height","deleteIcon","cursor","OfferModal","open","handleCloseDialog","dialogData","GENERAL_SETTINGS","locale","isOpenLoginDialog","setIsOpenLoginDialog","t","enqueueSnackbar","classes","itemSlideData","setItemSlideData","loginfo","state","orest","currentUser","clientParams","hotelrefno","HOTELREFNO","active","sliderid","url","BASE_URL","method","params","Object","assign","then","sliderResponse","sliderData","data","success","settings","dots","infinite","lazyLoad","speed","slidesToShow","slidesToScroll","centerMode","swipeToSlide","touchMove","mouseX","setMouseX","mouseY","setMouseY","openContextMenu","setOpenContextMenu","contextData","setContextData","handleRightClick","e","item","clientX","clientY","preventDefault","onHandleCopyText","navigator","clipboard","writeText","replace","variant","autoHideDuration","renderButton","cta","link","href","text","host","window","location","isExternalLink","includes","status","localtitle","renderText","overflow","map","i","backgroundImage","STATIC_URL","fileurl","localdesc","whiteSpace","__html","top","left","undefined","OfferCard","props","offer","classesTabPanel","openDialog","setOpenDialog","handleOnClick","gridItem","root","offerImage","saleprice","pricecurr","priceBox","price","qty","title","nameText","description","descText","ctaButton"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport axios from 'axios'\nimport styles from './style/OfferCard.style'\nimport LoadingSpinner from 'components/LoadingSpinner'\nimport {\n    Grid,\n    Card,\n    CardContent,\n    CardActionArea,\n    CardActions,\n    Button,\n    Typography,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    Box\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport WebCmsGlobal from 'components/webcms-global'\nimport stylesTabPanel from '../style/TabPanel.style'\nimport CardImage from '@webcms-ui/core/card-image'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { getHyperlinkParser, stdTimeFormat } from 'model/orest/constants'\nimport { useSelector } from 'react-redux'\nimport LoginDialog from '../../../LoginComponent/LoginDialog'\nimport { useSnackbar } from 'notistack'\nimport Link from '@material-ui/core/Button'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Slider from 'react-slick'\nconst useStyles = makeStyles(styles)\nconst useStylesTabPanel = makeStyles(stylesTabPanel)\n\nconst getDescription = (str, useLength = 100, useShort = 100) => {\n    if (str && str.length >= useLength) {\n        return str.substring(0, useShort) + ' ...'\n    }\n    return str\n}\n\nconst useModalStyles = makeStyles((theme) => ({\n    dialogTitle: {\n        '& h2': {\n            [theme.breakpoints.only('md')]: {\n                fontSize: 15,\n            },\n            [theme.breakpoints.only('sm')]: {\n                fontSize: 14,\n            },\n            [theme.breakpoints.only('xs')]: {\n                fontSize: 13,\n            },\n        },\n    },\n    button: {\n        textAlign: 'center',\n        '& a': {\n            background: '#fffbfb',\n            padding: 10,\n            textAlign: 'center',\n            color: theme.palette.primary.main,\n            border: `1px solid ${theme.palette.primary.main}`,\n            fontSize: '0.875rem',\n            minWidth: 64,\n            boxSizing: 'border-box',\n            transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n            fontWeight: 500,\n            lineHeight: 1.75,\n            borderRadius: 4,\n            letterSpacing: '0.02857em',\n            textTransform: 'uppercase'\n        },\n    },\n    sliderImgBox: {\n        width: '100%',\n        height: 340,\n        [theme.breakpoints.only('xs')]: {\n            height: 180,\n        },\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: '100% 100%',\n    },\n    deleteIcon: {\n        cursor: 'unset'\n    }\n}))\n\nfunction OfferModal({ open, handleCloseDialog, dialogData }) {\n    const { GENERAL_SETTINGS, locale } = useContext(WebCmsGlobal)\n    const [isOpenLoginDialog, setIsOpenLoginDialog] = useState(false)\n    const { t } = useTranslation()\n    const {enqueueSnackbar} = useSnackbar();\n\n    const classes = useModalStyles()\n\n    const [itemSlideData, setItemSlideData] = useState(false)\n    const loginfo = useSelector((state) => state.orest.currentUser && state.orest.currentUser.loginfo)\n\n    let clientParams = {\n        hotelrefno:  loginfo && loginfo.hotelrefno || GENERAL_SETTINGS.HOTELREFNO\n    }\n\n    useEffect(() => {\n        let active = true\n        if (active && open && dialogData?.sliderid) {\n            axios({\n                url: GENERAL_SETTINGS.BASE_URL + 'api/hotel/content/slider',\n                method: 'post',\n                params:  Object.assign({\n                    sliderid: dialogData.sliderid\n                }, clientParams),\n            }).then((sliderResponse) => {\n                if (active) {\n                    const sliderData = sliderResponse.data\n                    if (sliderData.success && sliderData.data.length > 0) {\n                        setItemSlideData(sliderData.data)\n                    } else {\n                        setItemSlideData(null)\n                    }\n                }\n            })\n        }\n\n        return () => {\n            active = false\n        }\n    }, [open])\n\n    const settings = {\n        dots: true,\n        infinite: true,\n        lazyLoad: true,\n        speed: 500,\n        slidesToShow: 1,\n        slidesToScroll: 1,\n        centerMode: true,\n        swipeToSlide: true,\n        touchMove: true,\n    }\n\n    const [mouseX, setMouseX] = useState(null)\n    const [mouseY, setMouseY] = useState(null)\n    const [openContextMenu, setOpenContextMenu] = useState(false)\n    const [contextData, setContextData] = useState(null)\n\n    const handleRightClick = (e, item) => {\n        setMouseX(e.clientX - 2)\n        setMouseY(e.clientY - 4)\n        setOpenContextMenu(true)\n        setContextData(item)\n        e.preventDefault()\n    }\n\n    const onHandleCopyText = () => {\n        navigator.clipboard.writeText(contextData).then(() => {\n            enqueueSnackbar(t(\"str_copiedToClipboard\").replace('%s', `\"${contextData.substring(0, 50) + '...'}\"`), { variant: 'success', autoHideDuration: 2000 })\n        })\n        setOpenContextMenu(false)\n        setContextData(null)\n    }\n\n    const renderButton = (cta) => {\n        if (cta) {\n            const link = getHyperlinkParser(cta)\n\n            if (link === false) {\n                return\n            }\n\n            let href = link.href\n                , text = link?.text?.replace(/ /g, '') || ''\n                , host = window.location.host\n                , isExternalLink = false\n\n            if (href.includes('http') && !href.includes(host)) {\n                isExternalLink = true\n            }\n\n            if (!isExternalLink) {\n                return (\n                    <Link id='slick-button' variant='outlined' color='primary' href={href}>\n                        {t(text)}\n                    </Link>\n                )\n            }\n\n            return (\n                <Link id='slick-button' variant='outlined' color='primary' target='_blank' href={href}>\n                    {t(text)}\n                </Link>\n            )\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <LoginDialog open={isOpenLoginDialog} onClose={(status) => setIsOpenLoginDialog(status)} locationName='guest' isLoginWrapper disableRegister/>\n            <Dialog maxWidth=\"sm\" open={open} onClose={() => handleCloseDialog()}>\n                <DialogTitle className={classes.dialogTitle}>{dialogData && t(dialogData?.localtitle?.renderText() || \"\")}</DialogTitle>\n                <DialogContent dividers style={{overflow: 'overlay', padding: '16px 40px'}}>\n                    {dialogData === false ? (\n                        <Box p={3}>\n                            <LoadingSpinner size={40} />\n                        </Box>\n                    ) : dialogData === null ? (\n                        <Box p={3}>\n                            <Typography variant=\"h6\" align=\"center\" gutterBottom>\n                                {t('str_noDefaultRecord')}\n                            </Typography>\n                        </Box>\n                    ) : (\n                        <Grid container spacing={1}>\n                            <Grid item xs={12}>\n                                <Slider {...settings}>\n                                    {itemSlideData && itemSlideData.map((item, i) => {\n                                        return (\n                                            <Box key={i} p={1}>\n                                                <div className={classes.sliderImgBox} style={{ backgroundImage: `url(${GENERAL_SETTINGS.STATIC_URL + item.fileurl})` }} />\n                                            </Box>\n                                        )\n                                    })}\n                                </Slider>\n                                <br />\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Typography onContextMenu={(e)=> handleRightClick(e, t(dialogData?.localdesc?.renderText()))} variant=\"body2\" align=\"justify\" style={{whiteSpace: 'pre-line'}} dangerouslySetInnerHTML={{ __html: t(dialogData?.localdesc?.renderText())?.replace('\\n', '<br/>')}} />\n                                <Menu\n                                    open={openContextMenu}\n                                    onClose={() => setOpenContextMenu(false)}\n                                    anchorReference=\"anchorPosition\"\n                                    anchorPosition={mouseY !== null && mouseX !== null ? { top: mouseY, left: mouseX } : undefined}\n                                >\n                                    <MenuItem onClick={()=> onHandleCopyText()}>{t(\"str_copy\")}</MenuItem>\n                                </Menu>\n                            </Grid>\n                            {dialogData && dialogData.cta ? (\n                                <Grid item xs={12}>\n                                    <br/>\n                                      {renderButton(dialogData.cta)}\n                                    <br/>\n                                </Grid>\n                            ): null}\n                        </Grid>\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleCloseDialog()} color=\"primary\">\n                        {t('str_close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </React.Fragment>\n    )\n}\n\nexport default function OfferCard(props) {\n    const { offer } = props\n        , { t } = useTranslation()\n        , classes = useStyles()\n        , classesTabPanel = useStylesTabPanel()\n        , { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n        , [openDialog, setOpenDialog] = useState(false)\n        , { enqueueSnackbar } = useSnackbar()\n        , [isOpenLoginDialog, setIsOpenLoginDialog] = useState(false)\n\n    if (!offer) {\n        return <LoadingSpinner />\n    }\n\n    let cta = false\n    if (offer.cta) {\n        let link = getHyperlinkParser(offer.cta)\n        if (link) {\n            cta = {}\n            cta.href = link.href\n            cta.text = link.text\n        }\n    }\n\n    const handleOnClick = (cta) => {\n        return cta.href.includes(window.location.host) ? window.location.href = cta.href : window.open(cta.href)\n    }\n\n    return (\n        <Grid item xs={12} sm={6} md={4} className={classesTabPanel.gridItem}>\n            <LoginDialog open={isOpenLoginDialog} onClose={(status) => setIsOpenLoginDialog(status)} locationName='guest' isLoginWrapper disableRegister/>\n            <Card className={classes.root}>\n                <CardActionArea onClick={() => setOpenDialog(true)}>\n                    <CardImage\n                        className={classes.offerImage}\n                        src={offer.url !== null ? GENERAL_SETTINGS.STATIC_URL + offer.url : null}\n                        alt={t(offer?.localdesc?.renderText() || \"\")}\n                    />\n                    {(offer.saleprice && offer.pricecurr) ? (\n                        <span className={classes.priceBox}>\n                            <Typography className={classes.price}>\n                                {offer.saleprice} {offer.pricecurr} <small>/{t(offer.qty)}</small>\n                            </Typography>\n                        </span>\n                    ): null}\n                    <CardContent>\n                        {(offer.localtitle || offer.title) && (\n                            <Typography gutterBottom variant='h5' component='h2' align='center' className={classes.nameText}>\n                                {t(offer?.localtitle.renderText() || offer?.title.renderText())}\n                            </Typography>\n                        )}\n                        {(offer.localdesc || offer.description) && (\n                            <Typography variant='body2' color='textSecondary' component='p' align='justify' className={classes.descText}>\n                                {getDescription(t(offer?.localdesc.renderText() || offer?.description.renderText()))}\n                            </Typography>\n                        )}\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    {(cta && cta.text && cta.href) ? (\n                        <Button classes={{ root: classes.ctaButton }} variant='outlined' color='primary' fullWidth onClick={() => handleOnClick(cta)}>\n                            {t(cta.text.renderText())}\n                        </Button>\n                    ): null}\n                </CardActions>\n            </Card>\n            <OfferModal open={openDialog} handleCloseDialog={() => setOpenDialog(false)} dialogData={offer}/>\n        </Grid>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}