{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/Preferences/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport styles from './style/Preferences.style';\nimport stylesTabPanel from '../style/TabPanel.style';\nimport { NextSeo } from 'next-seo';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Menu from '@material-ui/core/Menu';\nimport Dialog from '@material-ui/core/Dialog';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Button, IconButton, Checkbox, FormControlLabel } from '@material-ui/core';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { UseOrest, ViewList, Patch, List, Insert } from '@webcms/orest';\nimport SaveIcon from '@material-ui/icons/Save';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { DEFAULT_OREST_TOKEN, isErrorMsg, isObjectEqual, jsonGroupBy, OREST_ENDPOINT, OREST_TOOLS_USER_HASRIGHT, REQUEST_METHOD_CONST } from '../../../../model/orest/constants';\nimport PopupState, { bindTrigger, bindMenu } from 'material-ui-popup-state';\nimport useNotifications from '../../../../model/notification/useNotifications';\nimport WebCmsGlobal from '../../../webcms-global';\nimport LoadingSpinner from '../../../LoadingSpinner';\nimport RemarkGroup from './RemarkGroup';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TabHeader from '../../../layout/components/TabHeader';\nimport { TITLE_LOYALTY } from '../../../../assets/const';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { MAX_MINUTE_VALUE, SLASH, TRUE } from '../../../../model/globals';\nimport { useSnackbar } from 'notistack';\nimport { CustomToolTip } from \"../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport { useOrestAction } from \"../../../../model/orest\";\nimport { setToState, updateState } from \"../../../../state/actions\";\nimport { sendGuestChangeNotifyMail } from \"../Base/helper\";\nimport TrackedChangesDialog from \"../../../TrackedChangesDialog\";\nconst useStyles = makeStyles(styles);\nconst useStylesTabPanel = makeStyles(stylesTabPanel);\n\nfunction Preferences(props) {\n  const classes = useStyles();\n  const {\n    t\n  } = useTranslation();\n  const classesTabPanel = useStylesTabPanel();\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    state,\n    setToState\n  } = props; //redux\n\n  const {\n    showError\n  } = useNotifications();\n  const {\n    setOrestState\n  } = useOrestAction();\n  const token = useSelector(state => {\n    var _state$orest, _state$orest$currentU, _state$orest$currentU2;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : (_state$orest$currentU2 = _state$orest$currentU.auth) === null || _state$orest$currentU2 === void 0 ? void 0 : _state$orest$currentU2.access_token) || false;\n  });\n  const clientBase = useSelector(state => {\n    var _state$orest2, _state$orest2$state;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest2 = state.orest) === null || _state$orest2 === void 0 ? void 0 : (_state$orest2$state = _state$orest2.state) === null || _state$orest2$state === void 0 ? void 0 : _state$orest2$state.client) || false;\n  });\n  const hotelRefNo = useSelector(state => {\n    var _state$hotelinfo;\n\n    return (state === null || state === void 0 ? void 0 : (_state$hotelinfo = state.hotelinfo) === null || _state$hotelinfo === void 0 ? void 0 : _state$hotelinfo.currentHotelRefNo) || null;\n  });\n  const loginfo = useSelector(state => state.orest.currentUser && state.orest.currentUser.loginfo);\n  const reservBase = state.clientReservation || false;\n  const isClient = loginfo.roletype === '6500310';\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const radioGroupAllGid = useSelector(state => {\n    var _state$formReducer, _state$formReducer$gu, _state$formReducer$gu2;\n\n    return (state === null || state === void 0 ? void 0 : (_state$formReducer = state.formReducer) === null || _state$formReducer === void 0 ? void 0 : (_state$formReducer$gu = _state$formReducer.guest) === null || _state$formReducer$gu === void 0 ? void 0 : (_state$formReducer$gu2 = _state$formReducer$gu.profile) === null || _state$formReducer$gu2 === void 0 ? void 0 : _state$formReducer$gu2.radioGroupAllGid) || false;\n  });\n  const checkboxGroupAll = useSelector(state => {\n    var _state$formReducer2, _state$formReducer2$g, _state$formReducer2$g2;\n\n    return (state === null || state === void 0 ? void 0 : (_state$formReducer2 = state.formReducer) === null || _state$formReducer2 === void 0 ? void 0 : (_state$formReducer2$g = _state$formReducer2.guest) === null || _state$formReducer2$g === void 0 ? void 0 : (_state$formReducer2$g2 = _state$formReducer2$g.profile) === null || _state$formReducer2$g2 === void 0 ? void 0 : _state$formReducer2$g2.checkboxGroupAll) || false;\n  }); //state\n\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: isInitialized,\n    1: setIsInitialized\n  } = useState(false);\n  const {\n    0: remarkGroups,\n    1: setRemarkGroups\n  } = useState(null);\n  const {\n    0: isDisabled,\n    1: setIsDisabled\n  } = useState(isClient);\n  const {\n    0: remarkNote,\n    1: setRemarkNote\n  } = useState(clientBase ? clientBase.remarknote : \"\");\n  const {\n    0: isSuperUser,\n    1: setIsSuperUser\n  } = useState(false);\n  const {\n    0: isLoad,\n    1: setIsLoad\n  } = useState(true);\n  const {\n    0: isSaving,\n    1: setIsSaving\n  } = useState(false);\n  const {\n    0: openAddRemarkGroupDialog,\n    1: setOpenAddRemarkGroupDialog\n  } = useState(false);\n  const {\n    0: openTrackedDialog,\n    1: setOpenTrackedDialog\n  } = useState(false);\n  const {\n    0: openToolTip,\n    1: setOpenToolTip\n  } = useState(false);\n  const {\n    0: isSavingRemarkGroup,\n    1: setIsSavingRemarkGroup\n  } = useState(false);\n  const {\n    0: remarkGroupData,\n    1: setRemarkGroupData\n  } = useState(null);\n  const {\n    0: isHorizontal,\n    1: setIsHorizontal\n  } = useState(false);\n  const {\n    0: isMultiple,\n    1: setIsMultiple\n  } = useState(false);\n  const {\n    0: remarkGroupDesc,\n    1: setRemarkGroupDesc\n  } = useState({\n    value: '',\n    isError: false,\n    errorType: ''\n  });\n  useEffect(() => {\n    UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_TOOLS_USER_HASRIGHT,\n      token: token,\n      params: {\n        checksuper: true,\n        empid: loginfo.id,\n        moduleid: 308236\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        const data = res.data.data;\n\n        if (data.canl && data.cana && data.canu && data.canx && data.cand && data.cans && data.res) {\n          setIsSuperUser(true);\n        }\n      } else {\n        setIsSuperUser(false);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    if (remarkGroupDesc.value.length > 0 && remarkGroupDesc.value.length < 2) {\n      setRemarkGroupDesc(_objectSpread(_objectSpread({}, remarkGroupDesc), {}, {\n        value: remarkGroupDesc.value,\n        isError: true,\n        errorType: 'lengthError'\n      }));\n    } else {\n      setRemarkGroupDesc(_objectSpread(_objectSpread({}, remarkGroupDesc), {}, {\n        value: remarkGroupDesc.value,\n        isError: false,\n        errorType: ''\n      }));\n    }\n\n    if (remarkGroupDesc.value.length > 0) {\n      const timer = setTimeout(() => {\n        var _remarkGroupDesc$valu;\n\n        List({\n          apiUrl: GENERAL_SETTINGS.OREST_URL,\n          endpoint: OREST_ENDPOINT.REMARKGR,\n          token,\n          params: {\n            query: `code::${(_remarkGroupDesc$valu = remarkGroupDesc.value) === null || _remarkGroupDesc$valu === void 0 ? void 0 : _remarkGroupDesc$valu.toUpperCase()}`,\n            hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n          }\n        }).then(res => {\n          if (res.status === 200) {\n            if (res.data.count > 0) {\n              setRemarkGroupDesc(_objectSpread(_objectSpread({}, remarkGroupDesc), {}, {\n                value: remarkGroupDesc.value,\n                isError: true,\n                errorType: 'invalidCode'\n              }));\n            }\n          }\n        });\n      }, 700);\n      return () => clearTimeout(timer);\n    }\n  }, [remarkGroupDesc.value]);\n  useEffect(() => {\n    let active = true;\n\n    if (active) {\n      if (isLoading) {\n        return undefined;\n      }\n\n      if (clientBase) {\n        getRemarkGroup(active);\n      } else {\n        setIsInitialized(true);\n      }\n    }\n\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const getRemarkGroup = async (active = false) => {\n    setIsLoading(true);\n    await getClientRem();\n    return ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.REMARKGR,\n      token: token,\n      params: {\n        query: 'isactive:true',\n        allhotels: true\n      }\n    }).then(r => {\n      if (active) {\n        if (r.status === 200) {\n          setRemarkGroups(r.data.data);\n          setOrestState(['remarkGroups'], r.data.data);\n          setIsInitialized(true);\n          setIsLoading(false);\n        } else {\n          const retErr = isErrorMsg(r);\n          showError(retErr.errorMsg);\n          setIsInitialized(true);\n          setIsLoading(false);\n        }\n      }\n    });\n  };\n\n  const getClientRem = async () => {\n    return ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.CLIENTREM,\n      token,\n      params: {\n        query: `masterid:${clientBase.mid}`,\n        allhotels: true,\n        limit: 100\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setOrestState(['selectedRemarkList'], res.data.data);\n        return true;\n      } else {\n        const retErr = isErrorMsg(res);\n        enqueueSnackbar(t(retErr.errorMsg), {\n          variant: 'error'\n        });\n        return false;\n      }\n    });\n  };\n\n  function handleButtonEdit() {\n    setIsDisabled(!isDisabled);\n  }\n\n  const handlePatchRemarkNote = async () => {\n    return Patch({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.CLIENT,\n      gid: clientBase.gid,\n      token: token,\n      params: {\n        hotelrefno: clientBase.hotelrefno || hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n      },\n      data: {\n        remarknote: remarkNote\n      }\n    }).then(async res => {\n      if (res.status === 200) {\n        setOrestState(['client'], res.data.data);\n        return {\n          success: true,\n          errorText: false\n        };\n      } else {\n        const retErr = isErrorMsg(res);\n        return {\n          success: false,\n          errorText: retErr.errorMsg\n        };\n      }\n    });\n  };\n\n  const handleRemarkGroupDef = () => {\n    UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.REMARKGR + SLASH + OREST_ENDPOINT.DEF,\n      token,\n      params: {\n        hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        var _res$data;\n\n        setRemarkGroupData(res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data);\n      } else {\n        const error = isErrorMsg(res);\n        enqueueSnackbar(t(error.errorMsg), {\n          variant: 'error'\n        });\n      }\n    });\n  };\n\n  const handleAddRemarkGroup = () => {\n    var _remarkGroupDesc$valu2, _remarkGroupDesc$valu3, _remarkGroupDesc$valu4;\n\n    setIsSavingRemarkGroup(true);\n    const data = remarkGroupData;\n    data.code = ((_remarkGroupDesc$valu2 = remarkGroupDesc.value) === null || _remarkGroupDesc$valu2 === void 0 ? void 0 : _remarkGroupDesc$valu2.length) > 50 ? (_remarkGroupDesc$valu3 = remarkGroupDesc.value) === null || _remarkGroupDesc$valu3 === void 0 ? void 0 : _remarkGroupDesc$valu3.toUpperCase().substring(0, 50) : (_remarkGroupDesc$valu4 = remarkGroupDesc.value) === null || _remarkGroupDesc$valu4 === void 0 ? void 0 : _remarkGroupDesc$valu4.toUpperCase();\n    data.description = remarkGroupDesc.value;\n    data.multiselect = isMultiple;\n    data.ishoriz = isHorizontal;\n    Insert({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.REMARKGR,\n      token,\n      params: {\n        hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n      },\n      data: data\n    }).then(res => {\n      setIsSavingRemarkGroup(false);\n\n      if (res.status === 200) {\n        enqueueSnackbar(t('str_processCompletedSuccessfully'), {\n          variant: 'success'\n        });\n        setOpenAddRemarkGroupDialog(false);\n        setIsInitialized(false);\n        getRemarkGroup(true);\n        handleReset();\n      } else {\n        const error = isErrorMsg(res);\n        enqueueSnackbar(t(error.errorMsg), {\n          variant: 'error'\n        });\n      }\n    });\n  };\n\n  const handleInsert = async list => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.CLIENTREM + SLASH + OREST_ENDPOINT.LIST + SLASH + OREST_ENDPOINT.INS,\n      method: REQUEST_METHOD_CONST.POST,\n      token,\n      params: {\n        hotelrefno: clientBase === null || clientBase === void 0 ? void 0 : clientBase.hotelrefno\n      },\n      data: list\n    }).then(async res => {\n      if (res.status === 200) {\n        if (res.data.data) {\n          return {\n            success: true,\n            errorText: false\n          };\n        } else {\n          const retErr = isErrorMsg(res);\n          return {\n            success: false,\n            errorText: retErr.errorMsg\n          };\n        }\n      }\n    });\n  };\n\n  const handlePatchClientRem = async list => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.CLIENTREM + SLASH + OREST_ENDPOINT.LIST + SLASH + OREST_ENDPOINT.PATCH,\n      method: REQUEST_METHOD_CONST.PATCH,\n      token,\n      params: {\n        hotelrefno: clientBase === null || clientBase === void 0 ? void 0 : clientBase.hotelrefno\n      },\n      data: list\n    }).then(async res => {\n      if (res.status === 200) {\n        if (res.data.data) {\n          return {\n            success: true,\n            errorText: false\n          };\n        } else {\n          const retErr = isErrorMsg(res);\n          return {\n            success: false,\n            errorText: retErr.errorMsg\n          };\n        }\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const handleDelete = async delList => {\n    return UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.CLIENTREM + SLASH + OREST_ENDPOINT.LIST + SLASH + OREST_ENDPOINT.DEL,\n      method: REQUEST_METHOD_CONST.DELETE,\n      token,\n      params: {\n        hotelrefno: clientBase === null || clientBase === void 0 ? void 0 : clientBase.hotelrefno\n      },\n      data: delList\n    }).then(async r1 => {\n      if (r1.status === 200) {\n        if (r1.data.success) {\n          var _state$profile, _state$profile2;\n\n          const checkboxGroup = state.profile.checkboxGroupAll;\n          const checkboxGroupBase = state.profile.checkboxGroupAllBase;\n          const radioGroupAllGid = state === null || state === void 0 ? void 0 : (_state$profile = state.profile) === null || _state$profile === void 0 ? void 0 : _state$profile.radioGroupAllGid;\n          const radioGroupAllGidBase = state === null || state === void 0 ? void 0 : (_state$profile2 = state.profile) === null || _state$profile2 === void 0 ? void 0 : _state$profile2.radioGroupAllGidBase;\n          Object.keys(checkboxGroup).map(item => {\n            if (checkboxGroup[item].canBeDelete && !checkboxGroup[item].canBeInsert) {\n              delete checkboxGroup[item];\n              delete checkboxGroupBase[item];\n            }\n          });\n          Object.keys(radioGroupAllGid).map(item => {\n            if (radioGroupAllGid[item].canBeDelete && radioGroupAllGid[item].canBeInsert === 'delete') {\n              delete radioGroupAllGid[item];\n              delete radioGroupAllGidBase[item];\n            }\n          });\n          setToState('guest', ['profile', 'checkboxGroupAllBase'], checkboxGroupBase);\n          setToState('guest', ['profile', 'checkboxGroupAll'], checkboxGroup);\n          return {\n            success: true,\n            errorText: false\n          };\n        } else {\n          const retErr = isErrorMsg(r1);\n          return {\n            success: false,\n            errorText: retErr.errorMsg\n          };\n        }\n      }\n    });\n  };\n\n  const handleSave = async () => {\n    let insList = [];\n    let delList = [];\n    let infoList = [];\n    let patchList = [];\n    setIsSaving(true); //radioGroup\n\n    Object.keys(radioGroupAllGid).map((item, i) => {\n      if (radioGroupAllGid[item].canBeInsert && radioGroupAllGid[item].canBeDelete || radioGroupAllGid[item].canBeDelete && radioGroupAllGid[item].canBeInsert === 'delete') {\n        delList.push({\n          gid: radioGroupAllGid[item].canBeDelete\n        });\n      }\n\n      if (radioGroupAllGid[item].canBeInsert && radioGroupAllGid[item].canBeInsert !== 'delete') {\n        var _radioGroupAllGid$ite, _radioGroupAllGid$ite2;\n\n        const remarkInfo = {\n          remarkgr: t(radioGroupAllGid[item].info.remarkgr, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n          remark: t(radioGroupAllGid[item].info.remark, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n          add: true\n        };\n        infoList.push(remarkInfo);\n        const insertData = {\n          masterid: clientBase === null || clientBase === void 0 ? void 0 : clientBase.mid,\n          remarkid: radioGroupAllGid[item].canBeInsert,\n          hotelrefno: clientBase === null || clientBase === void 0 ? void 0 : clientBase.hotelrefno\n        };\n\n        if ((_radioGroupAllGid$ite = radioGroupAllGid[item]) !== null && _radioGroupAllGid$ite !== void 0 && _radioGroupAllGid$ite.note && (_radioGroupAllGid$ite2 = radioGroupAllGid[item]) !== null && _radioGroupAllGid$ite2 !== void 0 && _radioGroupAllGid$ite2.hasNote) {\n          insertData.note = radioGroupAllGid[item].note;\n        }\n\n        insList.push(insertData);\n      }\n\n      if (!radioGroupAllGid[item].canBeInsert && radioGroupAllGid[item].canBeDelete) {\n        if (radioGroupAllGid[item].isUpdateNote) {\n          patchList.push({\n            gid: radioGroupAllGid[item].canBeDelete,\n            note: radioGroupAllGid[item].note\n          });\n        }\n      }\n    }); //checkbox Group\n\n    Object.keys(checkboxGroupAll).map((item, i) => {\n      if (!checkboxGroupAll[item].canBeInsert && checkboxGroupAll[item].canBeDelete) {\n        const remarkInfo = {\n          remarkgr: t(checkboxGroupAll[item].info.remarkgr, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n          remark: t(checkboxGroupAll[item].info.remark, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n          add: false\n        };\n        infoList.push(remarkInfo);\n        delList.push({\n          gid: checkboxGroupAll[item].canBeDelete\n        });\n      } else if (checkboxGroupAll[item].canBeInsert && !checkboxGroupAll[item].canBeDelete) {\n        const remarkInfo = {\n          remarkgr: t(checkboxGroupAll[item].info.remarkgr, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n          remark: t(checkboxGroupAll[item].info.remark, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n          add: true\n        };\n        infoList.push(remarkInfo);\n        const insertData = {\n          masterid: clientBase === null || clientBase === void 0 ? void 0 : clientBase.mid,\n          remarkid: checkboxGroupAll[item].canBeInsert,\n          hotelrefno: clientBase === null || clientBase === void 0 ? void 0 : clientBase.hotelrefno\n        };\n\n        if (checkboxGroupAll[item].note) {\n          insertData.note = checkboxGroupAll[item].note;\n        }\n\n        insList.push(insertData);\n      } else {\n        if (checkboxGroupAll[item].isUpdateNote) {\n          var _checkboxGroupAll$ite, _checkboxGroupAll$ite2;\n\n          const patchData = {\n            gid: (_checkboxGroupAll$ite = checkboxGroupAll[item]) === null || _checkboxGroupAll$ite === void 0 ? void 0 : _checkboxGroupAll$ite.canBeDelete,\n            note: (_checkboxGroupAll$ite2 = checkboxGroupAll[item]) === null || _checkboxGroupAll$ite2 === void 0 ? void 0 : _checkboxGroupAll$ite2.note\n          };\n          patchList = [...patchList, patchData];\n        }\n      }\n    });\n    const insListGroup = jsonGroupBy(infoList, 'remarkgr');\n    const notifyValues = {\n      roomno: (reservBase === null || reservBase === void 0 ? void 0 : reservBase.roomno) || \"\",\n      clientname: (clientBase === null || clientBase === void 0 ? void 0 : clientBase.clientname) || \"\",\n      changes: JSON.stringify({\n        changeItems: insListGroup\n      })\n    };\n    const apiResponse = {\n      deleteRem: {\n        success: true,\n        errorText: false\n      },\n      patchRem: {\n        success: true,\n        errorText: false\n      },\n      insertRem: {\n        success: true,\n        errorText: false\n      },\n      patchRemNote: {\n        success: true,\n        errorText: false\n      }\n    };\n    if (delList.length > 0) apiResponse.deleteRem = await handleDelete(delList);\n    if (patchList.length > 0) apiResponse.patchRem = await handlePatchClientRem(patchList);\n    if (insList.length > 0) apiResponse.insertRem = await handleInsert(insList);\n    if ((clientBase === null || clientBase === void 0 ? void 0 : clientBase.remarknote) !== remarkNote) apiResponse.patchRemNote = await handlePatchRemarkNote();\n    await getClientRem();\n    setIsSaving(false);\n\n    if (apiResponse.deleteRem.success && apiResponse.patchRem.success && apiResponse.insertRem.success && apiResponse.patchRemNote.success) {\n      enqueueSnackbar(t('str_processCompletedSuccessfully'), {\n        variant: 'success'\n      });\n    } else {\n      enqueueSnackbar(apiResponse.deleteRem.errorText || apiResponse.patchRem.errorText || apiResponse.insertRem.errorText || apiResponse.patchRemNote.errorText, {\n        variant: 'error'\n      });\n    }\n\n    if (delList.length > 0 || insList.length > 0) {\n      sendGuestChangeNotifyMail(reservBase !== null && reservBase !== void 0 && reservBase.gid ? false : true, 'clientrem', 'upd', clientBase.id, reservBase !== null && reservBase !== void 0 && reservBase.gid ? reservBase.gid : clientBase.gid, notifyValues, (reservBase === null || reservBase === void 0 ? void 0 : reservBase.hotelrefno) || GENERAL_SETTINGS.HOTELREFNO);\n    }\n  };\n\n  const handleCloseAddRemarkDialog = () => {\n    if (remarkGroupDesc.value !== '' || isMultiple || isHorizontal) {\n      setOpenTrackedDialog(true);\n    } else {\n      setOpenAddRemarkGroupDialog(false);\n      handleReset();\n    }\n  };\n\n  const handleOpenToolTip = () => {\n    if (remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError) {\n      setOpenToolTip(true);\n    }\n  };\n\n  const handleCloseToolTip = () => {\n    setOpenToolTip(false);\n  };\n\n  const handleReset = () => {\n    setRemarkGroupDesc({\n      value: '',\n      isError: false,\n      errorType: ''\n    });\n    setIsHorizontal(false);\n    setIsMultiple(false);\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 9\n    }\n  }, __jsx(TabHeader, {\n    title: t('str_preferences'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 17\n    }\n  }, isClient ? __jsx(Tooltip, {\n    title: t('str_edit'),\n    interactive: true,\n    className: classes.tooltip,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 29\n    }\n  }, __jsx(Button, {\n    onClick: handleButtonEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 33\n    }\n  }, __jsx(EditIcon, {\n    className: classes.editIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 37\n    }\n  }))) : null, !isClient ? __jsx(Button, {\n    startIcon: __jsx(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 44\n      }\n    }),\n    variant: 'contained',\n    color: \"primary\",\n    onClick: () => {\n      handleRemarkGroupDef();\n      setOpenAddRemarkGroupDialog(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 29\n    }\n  }, t('str_newGroup')) : null)), __jsx(\"div\", {\n    style: {\n      paddingTop: '12px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 13\n    }\n  }), __jsx(Grid, {\n    container: true,\n    justify: 'center',\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 13\n    }\n  }, clientBase ? isInitialized ? remarkGroups && remarkGroups.length > 0 ? remarkGroups.map((remarkGroup, index) => {\n    return __jsx(RemarkGroup, {\n      key: index,\n      remarkGroup: remarkGroup,\n      index: index,\n      isDisabled: isDisabled,\n      isSuperUser: isSuperUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 37\n      }\n    });\n  }) : __jsx(Grid, {\n    item: true,\n    xs: 12,\n    className: classesTabPanel.gridItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 29\n    }\n  }, __jsx(Typography, {\n    component: \"h3\",\n    className: classesTabPanel.nothingToShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 33\n    }\n  }, t('str_noPreferencesToShow'))) : __jsx(Grid, {\n    item: true,\n    xs: 12,\n    className: classesTabPanel.gridItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 25\n    }\n  }, __jsx(LoadingSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 29\n    }\n  })) : __jsx(Typography, {\n    component: \"h3\",\n    style: {\n      marginTop: 15,\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 21\n    }\n  }, t('You are not a client.')), !isClient ? __jsx(Grid, {\n    item: true,\n    xs: 12,\n    className: classesTabPanel.gridItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 608,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 33\n    }\n  }, __jsx(Typography, {\n    style: {\n      fontSize: \"22px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 37\n    }\n  }, t(\"str_clientRemarks\"))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 33\n    }\n  }, __jsx(TextField, {\n    value: remarkNote ? remarkNote : \"\",\n    disabled: isDisabled,\n    multiline: true,\n    fullWidth: true,\n    rows: 4,\n    rowsMax: 4,\n    variant: \"outlined\",\n    onChange: e => setRemarkNote(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 37\n    }\n  })))) : null, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 17\n    }\n  }, (clientBase === null || clientBase === void 0 ? void 0 : clientBase.remarknote) === remarkNote && JSON.stringify(state.profile.checkboxGroupAllBase) === JSON.stringify(state.profile.checkboxGroupAll) && JSON.stringify(state.profile.radioGroupAllGid) === JSON.stringify(state.profile.radioGroupAllGidBase) ? __jsx(CustomToolTip, {\n    title: __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 37\n      }\n    }, __jsx(Typography, {\n      style: {\n        fontWeight: '600',\n        fontSize: 'inherit'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 41\n      }\n    }, t('str_noChangesYet'))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 29\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 35\n    }\n  }, __jsx(Button, {\n    disabled: true,\n    size: 'large',\n    color: 'primary',\n    variant: 'contained',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 40\n    }\n  }, t('str_saveChanges')))) : __jsx(Button, {\n    disabled: isSaving || isDisabled || (clientBase === null || clientBase === void 0 ? void 0 : clientBase.remarknote) === remarkNote && JSON.stringify(state.profile.checkboxGroupAllBase) === JSON.stringify(state.profile.checkboxGroupAll) && JSON.stringify(state.profile.radioGroupAllGid) === JSON.stringify(state.profile.radioGroupAllGidBase),\n    startIcon: isSaving && __jsx(LoadingSpinner, {\n      size: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 56\n      }\n    }),\n    size: 'large',\n    color: 'primary',\n    variant: 'contained',\n    onClick: () => handleSave(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 29\n    }\n  }, t('str_saveChanges')))), __jsx(Dialog, {\n    open: openAddRemarkGroupDialog,\n    maxWidth: \"sm\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    style: {\n      padding: \"24px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 25\n    }\n  }, __jsx(Typography, {\n    style: {\n      fontSize: '24px',\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 29\n    }\n  }, t('str_newGroup'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 25\n    }\n  }, __jsx(TextField, {\n    error: remarkGroupDesc.isError,\n    id: \"remark-group-desc\",\n    name: \"remark-group-desc\",\n    variant: \"outlined\",\n    fullWidth: true,\n    label: t(\"str_description\"),\n    required: true,\n    FormHelperTextProps: {\n      style: {\n        opacity: remarkGroupDesc.isError ? '1' : '0'\n      }\n    },\n    helperText: remarkGroupDesc.errorType === 'lengthError' ? 'Length must be between 2 and 50' : remarkGroupDesc.errorType === 'required' ? t('str_mandatory') : remarkGroupDesc.errorType === 'invalidCode' ? t('str_thereIsAlreadyExistUniqueValue') + remarkGroupDesc.value : 'null',\n    onChange: e => {\n      setRemarkGroupDesc(_objectSpread(_objectSpread({}, remarkGroupDesc), {}, {\n        value: e.target.value,\n        isError: e.target.value === '' ? remarkGroupDesc.isError : false\n      }));\n    },\n    onBlur: () => {\n      setRemarkGroupDesc(_objectSpread(_objectSpread({}, remarkGroupDesc), {}, {\n        value: remarkGroupDesc.value,\n        isError: remarkGroupDesc.value === '' ? true : remarkGroupDesc.isError,\n        errorType: remarkGroupDesc.value === '' ? 'required' : remarkGroupDesc.errorType\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 29\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 25\n    }\n  }, __jsx(FormControlLabel, {\n    checked: isMultiple,\n    onChange: e => setIsMultiple(e.target.checked),\n    color: 'primary',\n    control: __jsx(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 43\n      }\n    }),\n    label: t('str_multiple'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 709,\n      columnNumber: 29\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 25\n    }\n  }, __jsx(FormControlLabel, {\n    checked: isHorizontal,\n    onChange: e => setIsHorizontal(e.target.checked),\n    color: 'primary',\n    control: __jsx(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 43\n      }\n    }),\n    label: t('str_horizontal'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 29\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: \"right\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 29\n    }\n  }, __jsx(Button, {\n    disabled: isSavingRemarkGroup,\n    color: 'primary',\n    variant: 'outlined',\n    startIcon: __jsx(ClearIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 48\n      }\n    }),\n    onClick: handleCloseAddRemarkDialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 728,\n      columnNumber: 33\n    }\n  }, t(\"str_cancel\")), __jsx(CustomToolTip, {\n    open: openToolTip,\n    onOpen: handleOpenToolTip,\n    onClose: handleCloseToolTip,\n    title: __jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 41\n      }\n    }, remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError ? __jsx(Typography, {\n      style: {\n        fontSize: \"inherit\",\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 53\n      }\n    }, t(\"str_invalidFields\"), \":\") : null, remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError ? __jsx(Typography, {\n      style: {\n        fontSize: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 53\n      }\n    }, t(\"str_description\")) : null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 737,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: \"inline\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 761,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    style: {\n      marginLeft: '8px'\n    },\n    startIcon: isSavingRemarkGroup ? __jsx(LoadingSpinner, {\n      size: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 78\n      }\n    }) : __jsx(CheckIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 108\n      }\n    }),\n    disabled: isSavingRemarkGroup || remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError,\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: () => handleAddRemarkGroup(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 762,\n      columnNumber: 41\n    }\n  }, t(\"str_save\"))))))))), __jsx(TrackedChangesDialog, {\n    open: openTrackedDialog,\n    onPressNo: e => setOpenTrackedDialog(e),\n    onPressYes: e => {\n      setOpenTrackedDialog(e);\n      setOpenAddRemarkGroupDialog(false);\n      setTimeout(() => {\n        handleReset();\n      }, 50);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 779,\n      columnNumber: 13\n    }\n  }));\n}\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Preferences);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/Preferences/index.js"],"names":["React","useContext","useEffect","useState","connect","useSelector","styles","stylesTabPanel","NextSeo","Typography","TextField","Menu","Dialog","MenuItem","InputAdornment","Grid","Tooltip","EditIcon","Button","IconButton","Checkbox","FormControlLabel","Fab","AddIcon","UseOrest","ViewList","Patch","List","Insert","SaveIcon","CheckIcon","ClearIcon","DEFAULT_OREST_TOKEN","isErrorMsg","isObjectEqual","jsonGroupBy","OREST_ENDPOINT","OREST_TOOLS_USER_HASRIGHT","REQUEST_METHOD_CONST","PopupState","bindTrigger","bindMenu","useNotifications","WebCmsGlobal","LoadingSpinner","RemarkGroup","makeStyles","TabHeader","TITLE_LOYALTY","useTranslation","MAX_MINUTE_VALUE","SLASH","TRUE","useSnackbar","CustomToolTip","useOrestAction","setToState","updateState","sendGuestChangeNotifyMail","TrackedChangesDialog","useStyles","useStylesTabPanel","Preferences","props","classes","t","classesTabPanel","GENERAL_SETTINGS","state","showError","setOrestState","token","orest","currentUser","auth","access_token","clientBase","client","hotelRefNo","hotelinfo","currentHotelRefNo","loginfo","reservBase","clientReservation","isClient","roletype","enqueueSnackbar","radioGroupAllGid","formReducer","guest","profile","checkboxGroupAll","isLoading","setIsLoading","isInitialized","setIsInitialized","remarkGroups","setRemarkGroups","isDisabled","setIsDisabled","remarkNote","setRemarkNote","remarknote","isSuperUser","setIsSuperUser","isLoad","setIsLoad","isSaving","setIsSaving","openAddRemarkGroupDialog","setOpenAddRemarkGroupDialog","openTrackedDialog","setOpenTrackedDialog","openToolTip","setOpenToolTip","isSavingRemarkGroup","setIsSavingRemarkGroup","remarkGroupData","setRemarkGroupData","isHorizontal","setIsHorizontal","isMultiple","setIsMultiple","remarkGroupDesc","setRemarkGroupDesc","value","isError","errorType","apiUrl","OREST_URL","endpoint","params","checksuper","empid","id","moduleid","then","res","status","data","canl","cana","canu","canx","cand","cans","length","timer","setTimeout","REMARKGR","query","toUpperCase","hotelrefno","HOTELREFNO","count","clearTimeout","active","undefined","getRemarkGroup","getClientRem","allhotels","r","retErr","errorMsg","CLIENTREM","mid","limit","variant","handleButtonEdit","handlePatchRemarkNote","CLIENT","gid","success","errorText","handleRemarkGroupDef","DEF","error","handleAddRemarkGroup","code","substring","description","multiselect","ishoriz","handleReset","handleInsert","list","LIST","INS","method","POST","handlePatchClientRem","PATCH","catch","e","console","log","handleDelete","delList","DEL","DELETE","r1","checkboxGroup","checkboxGroupBase","checkboxGroupAllBase","radioGroupAllGidBase","Object","keys","map","item","canBeDelete","canBeInsert","handleSave","insList","infoList","patchList","i","push","remarkInfo","remarkgr","info","hotelLocalLangGCode","remark","add","insertData","masterid","remarkid","note","hasNote","isUpdateNote","patchData","insListGroup","notifyValues","roomno","clientname","changes","JSON","stringify","changeItems","apiResponse","deleteRem","patchRem","insertRem","patchRemNote","handleCloseAddRemarkDialog","handleOpenToolTip","handleCloseToolTip","tooltip","editIcon","paddingTop","remarkGroup","index","gridItem","nothingToShow","marginTop","textAlign","fontSize","target","fontWeight","padding","style","opacity","checked","display","marginLeft","mapStateToProps","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport {connect, useSelector } from 'react-redux'\nimport styles from './style/Preferences.style'\nimport stylesTabPanel from '../style/TabPanel.style'\nimport { NextSeo } from 'next-seo'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport Menu from '@material-ui/core/Menu'\nimport Dialog from '@material-ui/core/Dialog'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Grid from '@material-ui/core/Grid'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport EditIcon from '@material-ui/icons/Edit'\nimport { Button, IconButton, Checkbox, FormControlLabel } from '@material-ui/core'\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { UseOrest, ViewList, Patch, List, Insert } from '@webcms/orest'\nimport SaveIcon from '@material-ui/icons/Save';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport {\n    DEFAULT_OREST_TOKEN,\n    isErrorMsg, isObjectEqual, jsonGroupBy,\n    OREST_ENDPOINT, OREST_TOOLS_USER_HASRIGHT, REQUEST_METHOD_CONST\n} from '../../../../model/orest/constants'\nimport PopupState, { bindTrigger, bindMenu } from 'material-ui-popup-state'\nimport useNotifications from '../../../../model/notification/useNotifications'\nimport WebCmsGlobal from '../../../webcms-global'\nimport LoadingSpinner from '../../../LoadingSpinner'\nimport RemarkGroup from './RemarkGroup'\nimport { makeStyles } from '@material-ui/core/styles'\nimport TabHeader from '../../../layout/components/TabHeader'\nimport { TITLE_LOYALTY } from '../../../../assets/const'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport {MAX_MINUTE_VALUE, SLASH, TRUE} from '../../../../model/globals'\nimport { useSnackbar } from 'notistack';\nimport {CustomToolTip} from \"../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport {useOrestAction} from \"../../../../model/orest\";\nimport {setToState, updateState} from \"../../../../state/actions\";\nimport {sendGuestChangeNotifyMail} from \"../Base/helper\";\nimport TrackedChangesDialog from \"../../../TrackedChangesDialog\";\n\nconst useStyles = makeStyles(styles)\nconst useStylesTabPanel = makeStyles(stylesTabPanel)\n\nfunction Preferences(props) {\n    const classes = useStyles()\n    const { t } = useTranslation()\n    const classesTabPanel = useStylesTabPanel()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n\n    const {state, setToState } = props;\n\n    //redux\n    const { showError } = useNotifications()\n    const { setOrestState } = useOrestAction()\n    const token = useSelector((state) => state?.orest?.currentUser?.auth?.access_token || false)\n    const clientBase = useSelector((state) => state?.orest?.state?.client || false)\n    const hotelRefNo = useSelector(state => state?.hotelinfo?.currentHotelRefNo || null);\n    const loginfo = useSelector((state) => state.orest.currentUser && state.orest.currentUser.loginfo)\n    const reservBase = state.clientReservation || false\n    const isClient = loginfo.roletype === '6500310'\n    const { enqueueSnackbar } = useSnackbar()\n    const radioGroupAllGid = useSelector((state) => state?.formReducer?.guest?.profile?.radioGroupAllGid || false)\n    const checkboxGroupAll = useSelector((state) => state?.formReducer?.guest?.profile?.checkboxGroupAll || false)\n\n    //state\n    const [isLoading, setIsLoading] = useState(false)\n    const [isInitialized, setIsInitialized] = useState(false)\n    const [remarkGroups, setRemarkGroups] = useState(null)\n    const [isDisabled, setIsDisabled] = useState(isClient)\n    const [remarkNote, setRemarkNote] = useState(clientBase ? clientBase.remarknote : \"\");\n    const [isSuperUser, setIsSuperUser] = useState(false);\n    const [isLoad, setIsLoad] = useState(true);\n    const [isSaving, setIsSaving] = useState(false);\n    const [openAddRemarkGroupDialog, setOpenAddRemarkGroupDialog] = useState(false);\n    const [openTrackedDialog, setOpenTrackedDialog] = useState(false);\n    const [openToolTip, setOpenToolTip] = useState(false);\n\n    const [isSavingRemarkGroup, setIsSavingRemarkGroup] = useState(false);\n    const [remarkGroupData, setRemarkGroupData] = useState(null);\n    const [isHorizontal, setIsHorizontal] = useState(false);\n    const [isMultiple, setIsMultiple] = useState(false);\n    const [remarkGroupDesc, setRemarkGroupDesc] = useState({\n        value: '',\n        isError: false,\n        errorType: ''\n    });\n\n    useEffect(() => {\n        UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_TOOLS_USER_HASRIGHT,\n            token: token,\n            params: {\n                checksuper: true,\n                empid: loginfo.id,\n                moduleid: 308236\n            }\n        }).then(res => {\n            if(res.status === 200) {\n                const data = res.data.data;\n                if(data.canl && data.cana && data.canu && data.canx && data.cand && data.cans && data.res) {\n                    setIsSuperUser(true);\n                }\n            } else {\n                setIsSuperUser(false);\n            }\n        })\n    }, [])\n\n    useEffect(() => {\n        if(remarkGroupDesc.value.length > 0 && remarkGroupDesc.value.length < 2) {\n            setRemarkGroupDesc({\n                ...remarkGroupDesc,\n                value: remarkGroupDesc.value,\n                isError: true,\n                errorType: 'lengthError'\n            })\n        } else {\n            setRemarkGroupDesc({\n                ...remarkGroupDesc,\n                value: remarkGroupDesc.value,\n                isError: false,\n                errorType: ''\n            })\n        }\n\n        if(remarkGroupDesc.value.length > 0){\n            const timer = setTimeout(() => {\n                List({\n                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                    endpoint: OREST_ENDPOINT.REMARKGR,\n                    token,\n                    params: {\n                        query: `code::${remarkGroupDesc.value?.toUpperCase()}`,\n                        hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n                    }\n                }).then(res => {\n                    if(res.status === 200) {\n                        if(res.data.count > 0) {\n                            setRemarkGroupDesc({\n                                ...remarkGroupDesc,\n                                value: remarkGroupDesc.value,\n                                isError: true,\n                                errorType: 'invalidCode'\n                            })\n                        }\n                    }\n                })\n            }, 700)\n            return () =>  clearTimeout(timer)\n        }\n\n    },[remarkGroupDesc.value])\n\n    useEffect(() => {\n        let active = true\n        if (active) {\n            if (isLoading) {\n                return undefined\n            }\n            if (clientBase) {\n                getRemarkGroup(active)\n            } else {\n                setIsInitialized(true)\n            }\n        }\n\n        return () => {\n            active = false\n        }\n    }, [])\n\n    const getRemarkGroup = async (active = false) => {\n        setIsLoading(true);\n        await getClientRem()\n        return ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.REMARKGR,\n            token: token,\n            params: {\n                query: 'isactive:true',\n                allhotels: true\n            }\n        }).then((r) => {\n            if (active) {\n                if (r.status === 200) {\n                    setRemarkGroups(r.data.data)\n                    setOrestState(['remarkGroups'], r.data.data)\n                    setIsInitialized(true)\n                    setIsLoading(false)\n                } else {\n                    const retErr = isErrorMsg(r)\n                    showError(retErr.errorMsg)\n                    setIsInitialized(true)\n                    setIsLoading(false)\n                }\n            }\n        })\n\n    }\n\n    const getClientRem = async () => {\n       return  ViewList({\n           apiUrl: GENERAL_SETTINGS.OREST_URL,\n           endpoint: OREST_ENDPOINT.CLIENTREM,\n           token,\n           params: {\n               query: `masterid:${clientBase.mid}`,\n               allhotels: true,\n               limit: 100\n           }\n       }).then(res => {\n           if(res.status === 200) {\n               setOrestState(['selectedRemarkList'], res.data.data)\n               return true\n           } else {\n               const retErr = isErrorMsg(res)\n               enqueueSnackbar(t(retErr.errorMsg), {variant: 'error'})\n               return false\n           }\n       })\n    }\n\n\n    function handleButtonEdit() {\n        setIsDisabled(!isDisabled)\n    }\n\n    const handlePatchRemarkNote = async () => {\n        return Patch({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.CLIENT,\n            gid: clientBase.gid,\n            token: token,\n            params: {\n                hotelrefno: clientBase.hotelrefno || hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n            },\n            data: {\n                remarknote: remarkNote\n            }\n        }).then( async res => {\n            if(res.status === 200) {\n                setOrestState(['client'], res.data.data);\n                return {success: true, errorText: false}\n            } else {\n                const retErr = isErrorMsg(res)\n                return {success: false, errorText: retErr.errorMsg}\n            }\n        })\n    }\n\n    const handleRemarkGroupDef = () => {\n        UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.REMARKGR + SLASH + OREST_ENDPOINT.DEF,\n            token,\n            params: {\n                hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n            }\n        }).then(res => {\n            if(res.status === 200) {\n                setRemarkGroupData(res?.data?.data)\n            } else {\n                const error = isErrorMsg(res)\n                enqueueSnackbar(t(error.errorMsg), {variant: 'error'})\n            }\n        })\n    }\n\n    const handleAddRemarkGroup = () => {\n        setIsSavingRemarkGroup(true);\n        const data = remarkGroupData;\n        data.code = remarkGroupDesc.value?.length > 50 ? remarkGroupDesc.value?.toUpperCase().substring(0, 50) : remarkGroupDesc.value?.toUpperCase();\n        data.description = remarkGroupDesc.value;\n        data.multiselect = isMultiple;\n        data.ishoriz = isHorizontal;\n        Insert({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.REMARKGR,\n            token,\n            params: {\n                hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO\n            },\n            data: data\n        }).then(res => {\n            setIsSavingRemarkGroup(false);\n            if(res.status === 200){\n                enqueueSnackbar(t('str_processCompletedSuccessfully'), {variant: 'success'})\n                setOpenAddRemarkGroupDialog(false);\n                setIsInitialized(false)\n                getRemarkGroup(true);\n                handleReset()\n            } else {\n                const error = isErrorMsg(res)\n                enqueueSnackbar(t(error.errorMsg), {variant: 'error'})\n            }\n        })\n    }\n\n    const handleInsert = async (list) => {\n       return  UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.CLIENTREM + SLASH + OREST_ENDPOINT.LIST + SLASH + OREST_ENDPOINT.INS,\n            method: REQUEST_METHOD_CONST.POST,\n            token,\n            params: {\n                hotelrefno: clientBase?.hotelrefno\n            },\n            data: list\n        }).then( async (res) => {\n            if (res.status === 200) {\n                if(res.data.data) {\n                    return {success: true, errorText: false}\n                } else {\n                    const retErr = isErrorMsg(res)\n                    return {success: false, errorText: retErr.errorMsg}\n                }\n            }\n        })\n    }\n\n    const handlePatchClientRem = async (list) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.CLIENTREM + SLASH + OREST_ENDPOINT.LIST + SLASH + OREST_ENDPOINT.PATCH,\n            method: REQUEST_METHOD_CONST.PATCH,\n            token,\n            params: {\n                hotelrefno: clientBase?.hotelrefno\n            },\n            data: list\n        }).then( async (res) => {\n            if (res.status === 200) {\n                if(res.data.data) {\n                    return {success: true, errorText: false}\n                } else {\n                    const retErr = isErrorMsg(res)\n                    return {success: false, errorText: retErr.errorMsg}\n                }\n            }\n        }).catch(e => {\n            console.log(e)\n        })\n    }\n\n    const handleDelete = async (delList) => {\n        return UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.CLIENTREM + SLASH + OREST_ENDPOINT.LIST + SLASH + OREST_ENDPOINT.DEL,\n            method: REQUEST_METHOD_CONST.DELETE,\n            token,\n            params: {\n                hotelrefno: clientBase?.hotelrefno\n            },\n            data: delList\n        }).then(async (r1) => {\n            if (r1.status === 200) {\n                if(r1.data.success) {\n                    const checkboxGroup = state.profile.checkboxGroupAll;\n                    const checkboxGroupBase = state.profile.checkboxGroupAllBase;\n                    const radioGroupAllGid = state?.profile?.radioGroupAllGid;\n                    const radioGroupAllGidBase = state?.profile?.radioGroupAllGidBase;\n                    Object.keys(checkboxGroup).map((item) => {\n                        if(checkboxGroup[item].canBeDelete && !checkboxGroup[item].canBeInsert) {\n                            delete checkboxGroup[item]\n                            delete checkboxGroupBase[item]\n                        }\n                    })\n                    Object.keys(radioGroupAllGid).map((item) => {\n                        if(radioGroupAllGid[item].canBeDelete && radioGroupAllGid[item].canBeInsert === 'delete') {\n                            delete radioGroupAllGid[item]\n                            delete radioGroupAllGidBase[item]\n                        }\n                    })\n                    setToState('guest', ['profile', 'checkboxGroupAllBase'], checkboxGroupBase)\n                    setToState('guest', ['profile', 'checkboxGroupAll'], checkboxGroup)\n                    return {success: true, errorText: false}\n                } else {\n                    const retErr = isErrorMsg(r1)\n                    return {success: false, errorText: retErr.errorMsg}\n                }\n            }\n        })\n    }\n\n\n    const handleSave = async () => {\n        let insList = [];\n        let delList = [];\n        let infoList = [];\n        let patchList = [];\n        setIsSaving(true);\n\n        //radioGroup\n        Object.keys(radioGroupAllGid).map((item, i) => {\n            if(radioGroupAllGid[item].canBeInsert && radioGroupAllGid[item].canBeDelete || radioGroupAllGid[item].canBeDelete && radioGroupAllGid[item].canBeInsert === 'delete') {\n                delList.push({\n                    gid: radioGroupAllGid[item].canBeDelete\n                })\n            }\n            if(radioGroupAllGid[item].canBeInsert && radioGroupAllGid[item].canBeInsert !== 'delete' ) {\n                const remarkInfo = {\n                    remarkgr: t(radioGroupAllGid[item].info.remarkgr, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n                    remark:  t(radioGroupAllGid[item].info.remark, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n                    add: true\n                }\n                infoList.push(remarkInfo)\n                const insertData = {\n                    masterid: clientBase?.mid,\n                    remarkid: radioGroupAllGid[item].canBeInsert,\n                    hotelrefno: clientBase?.hotelrefno\n                }\n                if(radioGroupAllGid[item]?.note && radioGroupAllGid[item]?.hasNote) {\n                    insertData.note = radioGroupAllGid[item].note\n                }\n                insList.push(insertData)\n            }\n            if(!radioGroupAllGid[item].canBeInsert && radioGroupAllGid[item].canBeDelete) {\n                if(radioGroupAllGid[item].isUpdateNote) {\n                    patchList.push({\n                        gid: radioGroupAllGid[item].canBeDelete,\n                        note: radioGroupAllGid[item].note\n                    })\n                }\n            }\n        })\n\n        //checkbox Group\n        Object.keys(checkboxGroupAll).map((item,i) => {\n            if(!checkboxGroupAll[item].canBeInsert && checkboxGroupAll[item].canBeDelete) {\n                const remarkInfo = {\n                    remarkgr: t(checkboxGroupAll[item].info.remarkgr, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n                    remark: t(checkboxGroupAll[item].info.remark, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n                    add: false\n                }\n                infoList.push(remarkInfo)\n                delList.push({\n                    gid: checkboxGroupAll[item].canBeDelete\n                })\n            } else if(checkboxGroupAll[item].canBeInsert && !checkboxGroupAll[item].canBeDelete) {\n                const remarkInfo = {\n                    remarkgr: t(checkboxGroupAll[item].info.remarkgr, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n                    remark: t(checkboxGroupAll[item].info.remark, false, GENERAL_SETTINGS.hotelLocalLangGCode),\n                    add: true\n                }\n                infoList.push(remarkInfo)\n                const insertData = {\n                    masterid: clientBase?.mid,\n                    remarkid: checkboxGroupAll[item].canBeInsert,\n                    hotelrefno: clientBase?.hotelrefno\n                }\n                if(checkboxGroupAll[item].note) {\n                    insertData.note = checkboxGroupAll[item].note\n                }\n                insList.push(insertData)\n            } else {\n                if(checkboxGroupAll[item].isUpdateNote) {\n                    const patchData = {\n                        gid: checkboxGroupAll[item]?.canBeDelete,\n                        note: checkboxGroupAll[item]?.note\n                    }\n                    patchList = [...patchList, patchData]\n                }\n            }\n        })\n\n        const insListGroup = jsonGroupBy(infoList, 'remarkgr')\n        const notifyValues = {\n            roomno: reservBase?.roomno || \"\",\n            clientname: clientBase?.clientname || \"\",\n            changes: JSON.stringify({\n                changeItems: insListGroup\n            })\n        }\n\n        const apiResponse = {\n            deleteRem: {success: true, errorText: false},\n            patchRem: {success: true, errorText: false},\n            insertRem: {success: true, errorText: false},\n            patchRemNote: {success: true, errorText: false}\n        }\n\n        if(delList.length > 0) apiResponse.deleteRem = await handleDelete(delList)\n        if(patchList.length > 0) apiResponse.patchRem = await handlePatchClientRem(patchList)\n        if(insList.length > 0) apiResponse.insertRem = await handleInsert(insList)\n        if(clientBase?.remarknote !== remarkNote) apiResponse.patchRemNote = await handlePatchRemarkNote()\n        await getClientRem()\n        setIsSaving(false)\n\n        if(apiResponse.deleteRem.success && apiResponse.patchRem.success && apiResponse.insertRem.success && apiResponse.patchRemNote.success) {\n            enqueueSnackbar(t('str_processCompletedSuccessfully'), {variant: 'success'})\n        } else {\n            enqueueSnackbar(\n                apiResponse.deleteRem.errorText ||\n                apiResponse.patchRem.errorText ||\n                apiResponse.insertRem.errorText ||\n                apiResponse.patchRemNote.errorText,\n                {variant: 'error'}\n            )\n        }\n\n        if(delList.length > 0 || insList.length > 0){\n            sendGuestChangeNotifyMail(reservBase?.gid ? false : true,'clientrem','upd',clientBase.id,reservBase?.gid ? reservBase.gid : clientBase.gid, notifyValues, reservBase?.hotelrefno || GENERAL_SETTINGS.HOTELREFNO)\n        }\n     }\n\n    const handleCloseAddRemarkDialog = () => {\n        if(remarkGroupDesc.value !== '' || isMultiple || isHorizontal) {\n            setOpenTrackedDialog(true);\n        } else {\n            setOpenAddRemarkGroupDialog(false);\n            handleReset();\n        }\n\n    }\n\n    const handleOpenToolTip = () => {\n        if(remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError) {\n            setOpenToolTip(true)\n        }\n\n    }\n\n    const handleCloseToolTip = () => {\n        setOpenToolTip(false);\n    }\n\n    const handleReset = () => {\n        setRemarkGroupDesc({\n            value: '',\n            isError: false,\n            errorType: ''\n        })\n        setIsHorizontal(false);\n        setIsMultiple(false);\n\n    }\n\n    return (\n        <React.Fragment>\n            <TabHeader title={t('str_preferences')}>\n                <Grid item>\n                    {\n                        isClient ? (\n                            <Tooltip title={t('str_edit')} interactive className={classes.tooltip}>\n                                <Button onClick={handleButtonEdit}>\n                                    <EditIcon className={classes.editIcon} />\n                                </Button>\n                            </Tooltip>\n                        ) : null\n                    }\n                    {\n                        !isClient ? (\n                            <Button\n                                startIcon={<AddIcon />}\n                                variant={'contained'}\n                                color=\"primary\"\n                                onClick={() => {\n                                    handleRemarkGroupDef()\n                                    setOpenAddRemarkGroupDialog(true)\n                                }}\n                            >\n                                {t('str_newGroup')}\n                            </Button>\n                        ) : null\n                    }\n                </Grid>\n            </TabHeader>\n            <div style={{paddingTop: '12px'}}/>\n            <Grid container justify={'center'} spacing={3}>\n                {clientBase ? (\n                    isInitialized ? (\n                        remarkGroups && remarkGroups.length > 0 ? (\n                            remarkGroups.map((remarkGroup, index) => {\n                                return (\n                                    <RemarkGroup\n                                        key={index}\n                                        remarkGroup={remarkGroup}\n                                        index={index}\n                                        isDisabled={isDisabled}\n                                        isSuperUser={isSuperUser}\n                                    />\n                                )\n                            })\n                        ) : (\n                            <Grid item xs={12} className={classesTabPanel.gridItem}>\n                                <Typography component=\"h3\" className={classesTabPanel.nothingToShow}>\n                                    {t('str_noPreferencesToShow')}\n                                </Typography>\n                            </Grid>\n                        )\n                    ) : (\n                        <Grid item xs={12} className={classesTabPanel.gridItem}>\n                            <LoadingSpinner />\n                        </Grid>\n                    )\n                ) : (\n                    <Typography component=\"h3\" style={{ marginTop: 15, textAlign: 'center' }}>\n                        {t('You are not a client.')}\n                    </Typography>\n                )}\n                {\n                    !isClient ? (\n                        <Grid item xs={12} className={classesTabPanel.gridItem}>\n                            <Grid container spacing={3}>\n                                <Grid item xs={12}>\n                                    <Typography style={{fontSize: \"22px\"}}>\n                                        {t(\"str_clientRemarks\")}\n                                    </Typography>\n                                </Grid>\n                                <Grid item xs={12}>\n                                    <TextField\n                                        value={remarkNote ? remarkNote : \"\"}\n                                        disabled={isDisabled}\n                                        multiline\n                                        fullWidth\n                                        rows={4}\n                                        rowsMax={4}\n                                        variant={\"outlined\"}\n                                        onChange={(e) => setRemarkNote(e.target.value)}\n                                    />\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                    ) : null\n                }\n                <Grid item xs={12} style={{textAlign: 'right'}}>\n                    {\n                        clientBase?.remarknote === remarkNote && JSON.stringify(state.profile.checkboxGroupAllBase) === JSON.stringify(state.profile.checkboxGroupAll) && JSON.stringify(state.profile.radioGroupAllGid) === JSON.stringify(state.profile.radioGroupAllGidBase) ?  (\n                            <CustomToolTip\n                                title={\n                                    <div>\n                                        <Typography style={{fontWeight: '600', fontSize: 'inherit'}}>\n                                            {t('str_noChangesYet')}\n                                        </Typography>\n                                    </div>\n                                }\n                            >\n                                  <span>\n                                       <Button\n                                           disabled\n                                           size={'large'}\n                                           color={'primary'}\n                                           variant={'contained'}\n                                       >\n                                           {t('str_saveChanges')}\n                                       </Button>\n                                  </span>\n                            </CustomToolTip>\n                        ) : (\n                            <Button\n                                disabled={isSaving || isDisabled || clientBase?.remarknote === remarkNote && JSON.stringify(state.profile.checkboxGroupAllBase) === JSON.stringify(state.profile.checkboxGroupAll) && JSON.stringify(state.profile.radioGroupAllGid) === JSON.stringify(state.profile.radioGroupAllGidBase)}\n                                startIcon={isSaving && <LoadingSpinner size={24}/>}\n                                size={'large'}\n                                color={'primary'}\n                                variant={'contained'}\n                                onClick={() => handleSave()}\n                            >\n                                {t('str_saveChanges')}\n                            </Button>\n                        )\n                    }\n                </Grid>\n            </Grid>\n            <Dialog\n                open={openAddRemarkGroupDialog}\n                maxWidth={\"sm\"}\n                fullWidth\n            >\n                <div style={{padding: \"24px\"}}>\n                    <Grid container spacing={3}>\n                        <Grid item xs={12}>\n                            <Typography style={{fontSize: '24px', fontWeight: 'bold'}}>{t('str_newGroup')}</Typography>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                error={remarkGroupDesc.isError}\n                                id={\"remark-group-desc\"}\n                                name={\"remark-group-desc\"}\n                                variant={\"outlined\"}\n                                fullWidth\n                                label={t(\"str_description\")}\n                                required\n                                FormHelperTextProps={{\n                                    style:  {opacity: remarkGroupDesc.isError  ? '1' : '0'}\n                                }}\n                                helperText={remarkGroupDesc.errorType === 'lengthError' ? 'Length must be between 2 and 50' : remarkGroupDesc.errorType === 'required' ? t('str_mandatory') : remarkGroupDesc.errorType === 'invalidCode' ? t('str_thereIsAlreadyExistUniqueValue') + remarkGroupDesc.value : 'null'}\n                                onChange={(e) => {\n                                    setRemarkGroupDesc({\n                                        ...remarkGroupDesc,\n                                        value: e.target.value,\n                                        isError: e.target.value === '' ? remarkGroupDesc.isError : false\n                                    })\n                                }}\n                                onBlur={() => {\n                                    setRemarkGroupDesc({\n                                        ...remarkGroupDesc,\n                                        value: remarkGroupDesc.value,\n                                        isError: remarkGroupDesc.value === '' ? true : remarkGroupDesc.isError,\n                                        errorType: remarkGroupDesc.value === '' ? 'required' : remarkGroupDesc.errorType\n                                    })\n                                }}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <FormControlLabel\n                                checked={isMultiple}\n                                onChange={(e) => setIsMultiple(e.target.checked)}\n                                color={'primary'}\n                                control={ <Checkbox />}\n                                label={t('str_multiple')}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <FormControlLabel\n                                checked={isHorizontal}\n                                onChange={(e) => setIsHorizontal(e.target.checked)}\n                                color={'primary'}\n                                control={ <Checkbox />}\n                                label={t('str_horizontal')}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <div style={{textAlign: \"right\"}}>\n                                <Button\n                                    disabled={isSavingRemarkGroup}\n                                    color={'primary'}\n                                    variant={'outlined'}\n                                    startIcon={<ClearIcon />}\n                                    onClick={handleCloseAddRemarkDialog}\n                                >\n                                    {t(\"str_cancel\")}\n                                </Button>\n                                <CustomToolTip\n                                    open={openToolTip}\n                                    onOpen={handleOpenToolTip}\n                                    onClose={handleCloseToolTip}\n                                    title={\n                                        <React.Fragment>\n                                            {\n                                                 remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError ? (\n                                                    <Typography style={{fontSize: \"inherit\", fontWeight: \"bold\"}}>{t(\"str_invalidFields\")}:</Typography>\n                                                ) : null\n                                            }\n                                            {\n                                               /* remarkGroupCode.value.length <= 0 || remarkGroupCode.isError ? (\n                                                    <Typography style={{fontSize: \"inherit\"}}>{t(\"str_code\")}</Typography>\n                                                ) : null*/\n                                            }\n                                            {\n                                                remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError ?  (\n                                                    <Typography style={{fontSize: \"inherit\"}}>{t(\"str_description\")}</Typography>\n                                                ) : null\n                                            }\n                                        </React.Fragment>\n                                    }\n                                >\n                                    <div style={{display: \"inline\"}}>\n                                        <Button\n                                            style={{marginLeft: '8px'}}\n                                            startIcon={isSavingRemarkGroup ? <LoadingSpinner size={24}/> : <CheckIcon />}\n                                            disabled={isSavingRemarkGroup || remarkGroupDesc.value.length <= 0 || remarkGroupDesc.isError}\n                                            color={\"primary\"}\n                                            variant={\"contained\"}\n                                            onClick={() => handleAddRemarkGroup()}\n                                        >\n                                            {t(\"str_save\")}\n                                        </Button>\n                                    </div>\n                                </CustomToolTip>\n                            </div>\n                        </Grid>\n                    </Grid>\n                </div>\n            </Dialog>\n            <TrackedChangesDialog\n                open={openTrackedDialog}\n                onPressNo={(e) => setOpenTrackedDialog(e)}\n                onPressYes={(e) => {\n                    setOpenTrackedDialog(e);\n                    setOpenAddRemarkGroupDialog(false);\n                    setTimeout(() => {\n                        handleReset();\n                    }, 50)\n                }}\n            />\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Preferences)\n"]},"metadata":{},"sourceType":"module"}