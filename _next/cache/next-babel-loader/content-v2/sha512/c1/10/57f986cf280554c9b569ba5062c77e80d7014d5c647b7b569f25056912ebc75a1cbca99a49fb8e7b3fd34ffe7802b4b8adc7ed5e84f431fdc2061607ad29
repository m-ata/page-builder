{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/paragraph/Paragraph.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ViewList } from '@webcms/orest';\nimport WebCmsGlobal from 'components/webcms-global';\nimport { useRouter } from 'next/router';\nimport { OREST_ENDPOINT } from '../../../../../../../model/orest/constants';\nimport { connect, useSelector } from 'react-redux';\n\nvar Paragraph = function Paragraph(props) {\n  _s();\n\n  var _router$query2;\n\n  var paragraph = props.paragraph,\n      state = props.state;\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      token = _useContext.token;\n\n  var router = useRouter();\n  var clientToken = useSelector(function (state) {\n    var _router$query;\n\n    return state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : router === null || router === void 0 ? void 0 : (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.authToken;\n  });\n  var companyId = (router === null || router === void 0 ? void 0 : (_router$query2 = router.query) === null || _router$query2 === void 0 ? void 0 : _router$query2.companyID) || GENERAL_SETTINGS.HOTELREFNO;\n\n  var _useState = useState(''),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var authToken = token || clientToken || router.query.authToken;\n  useEffect(function () {\n    if (paragraph !== null && paragraph !== void 0 && paragraph.gid) {\n      ViewList({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n        token: authToken,\n        params: {\n          query: \"gid:\".concat(paragraph.gid),\n          hotelrefno: Number(companyId)\n        }\n      }).then(function (res) {\n        if (res.status === 200 && res.data.data.length > 0) {\n          setData(res.data.data[0].itemtext);\n        }\n      });\n    } else {\n      state.langCode !== state.defaultLang && setData(paragraph);\n    }\n  }, [paragraph]);\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }\n  }, data && __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: data\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 21\n    }\n  }));\n};\n\n_s(Paragraph, \"F73vtj/iLiR4CMn3/7alUcZ7WOk=\", false, function () {\n  return [useRouter, useSelector];\n});\n\n_c = Paragraph;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.pageBuilder\n  };\n};\n\nexport default connect(mapStateToProps)(Paragraph);\n\nvar _c;\n\n$RefreshReg$(_c, \"Paragraph\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/page/sections/paragraph/Paragraph.js"],"names":["React","useContext","useEffect","useState","ViewList","WebCmsGlobal","useRouter","OREST_ENDPOINT","connect","useSelector","Paragraph","props","paragraph","state","GENERAL_SETTINGS","token","router","clientToken","orest","currentUser","auth","access_token","query","authToken","companyId","companyID","HOTELREFNO","data","setData","gid","apiUrl","OREST_URL","endpoint","HCMITEMTXTPAR","params","hotelrefno","Number","then","res","status","length","itemtext","langCode","defaultLang","__html","mapStateToProps","formReducer","pageBuilder"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport { ViewList } from '@webcms/orest'\nimport WebCmsGlobal from 'components/webcms-global'\nimport { useRouter } from 'next/router'\nimport { OREST_ENDPOINT } from '../../../../../../../model/orest/constants'\nimport { connect, useSelector } from 'react-redux'\n\nconst Paragraph = (props) => {\n    const { paragraph, state } = props\n    const { GENERAL_SETTINGS, token } = useContext(WebCmsGlobal)\n    const router = useRouter()\n    const clientToken = useSelector((state) => state.orest.currentUser !== null ? state.orest.currentUser.auth.access_token : router?.query?.authToken)\n    const companyId = router?.query?.companyID || GENERAL_SETTINGS.HOTELREFNO\n    const [data, setData] = useState('');\n    const authToken = token || clientToken || router.query.authToken;\n\n    useEffect(() => {\n        if (paragraph?.gid) {\n            ViewList({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n                token: authToken,\n                params: {\n                    query: `gid:${paragraph.gid}`,\n                    hotelrefno: Number(companyId)\n                },\n            }).then((res) => {\n                if (res.status === 200 && res.data.data.length > 0) {\n                    setData(res.data.data[0].itemtext)\n                }\n            })\n        } else {\n            state.langCode !== state.defaultLang && setData(paragraph);\n        }\n    }, [paragraph])\n\n    return <React.Fragment>\n        {\n            data && <div dangerouslySetInnerHTML={{__html: data}}></div>\n        }\n    </React.Fragment>\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.pageBuilder,\n    }\n}\n\nexport default connect(mapStateToProps)(Paragraph)\n"]},"metadata":{},"sourceType":"module"}