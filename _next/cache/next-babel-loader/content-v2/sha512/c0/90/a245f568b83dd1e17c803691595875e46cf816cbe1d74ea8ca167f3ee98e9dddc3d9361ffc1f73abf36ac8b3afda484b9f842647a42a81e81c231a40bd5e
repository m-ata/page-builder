{"ast":null,"code":"import _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/booking/components/PriceCalendar.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport moment from 'moment';\nimport MomentAdapter from '@date-io/moment';\nimport { Badge, TextField, Tooltip } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LocalizationProvider, StaticDatePicker, PickersDay } from '@material-ui/pickers';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport { formatMoney } from 'model/orest/constants';\nimport clsx from 'clsx';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { getTotalPrice } from 'lib/helpers/useFunction';\nvar usePriceDayStyles = makeStyles(function (theme) {\n  return {\n    priceDay: {\n      top: 25,\n      left: -13,\n      color: '#767676',\n      width: 36,\n      display: 'block',\n      padding: '3px 0 1px 0',\n      position: 'relative',\n      fontSize: '6.6px',\n      textAlign: 'center',\n      fontWeight: 800,\n      borderRadius: 0\n    },\n    priceDayDisc: {\n      top: 25,\n      left: -13,\n      color: '#28a745',\n      width: 36,\n      display: 'block',\n      padding: '3px 0 1px 0',\n      position: 'relative',\n      fontSize: '6.6px',\n      textAlign: 'center',\n      fontWeight: 800,\n      borderRadius: 0,\n      cursor: 'pointer'\n    },\n    highlight: {\n      color: '#727272!important',\n      borderRadius: 0,\n      backgroundColor: '#f9f9f9!important',\n      borderLeft: '1px solid #ebebeb',\n      alignItems: 'flex-start',\n      justifyContent: 'end',\n      padding: '2px 6px 4px 4px',\n      '&:hover, &:focus': {\n        backgroundColor: theme.palette.primary.dark\n      },\n      '& span': {\n        zIndex: 2\n      }\n    },\n    firstHighlight: {\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0,\n      backgroundColor: 'transparent!important',\n      borderLeft: 'none',\n      '&:before': {\n        content: '\\'\\'',\n        width: 0,\n        height: 0,\n        borderStyle: 'solid',\n        borderWidth: '0 0 36px 36px',\n        position: 'absolute',\n        top: 0,\n        left: -1,\n        borderColor: 'transparent transparent #cdcdcd52 transparent'\n      },\n      '& span': {\n        zIndex: 2\n      }\n    },\n    endHighlight: {\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      '&:after': {\n        content: '\\'\\'',\n        width: 0,\n        height: 0,\n        borderStyle: 'solid',\n        borderWidth: '36px 36px 0 0',\n        position: 'absolute',\n        top: 0,\n        left: 1,\n        borderColor: '#cdcdcd52 transparent transparent transparent'\n      },\n      '& span': {\n        zIndex: 2\n      }\n    },\n    priceCalender: {\n      padding: 0,\n      maxHeight: 340,\n      width: 300\n    }\n  };\n});\n\nfunction makeJSDateObject(date) {\n  if (date) {\n    return date.clone().toDate();\n  }\n\n  if (moment.isMoment(date)) {\n    return date.clone().toDate();\n  }\n\n  if (date) {\n    return date.toJSDate();\n  }\n\n  if (date) {\n    return new Date(date.getTime());\n  }\n\n  return date;\n}\n\nfunction isMatchDay(date1, date2) {\n  return moment(date1, 'YYYY-MM-DD').format('YYYY-MM-DD') === moment(date2).format('YYYY-MM-DD');\n}\n\nfunction getPriceInfo(useDate, priceList) {\n  return priceList.find(function (info) {\n    return isMatchDay(info.startdate, useDate);\n  });\n}\n\nfunction PriceDay(props) {\n  _s();\n\n  var classes = usePriceDayStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var discdesc = props.discdesc,\n      priceItem = props.priceItem,\n      adult = props.adult,\n      chdAges = props.chdAges,\n      agencyChdAges = props.agencyChdAges;\n  var pricecurr = priceItem.pricecurr,\n      discrate = priceItem.discrate;\n\n  var _getTotalPrice = getTotalPrice(priceItem, adult, chdAges, agencyChdAges),\n      totalPrice = _getTotalPrice.totalPrice,\n      discTotalPrice = _getTotalPrice.discTotalPrice;\n\n  if (discTotalPrice > 0) {\n    return __jsx(Tooltip, {\n      title: discdesc && t(discdesc) || t('str_withDiscount', {\n        discount: discrate\n      }),\n      arrow: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, __jsx(\"span\", {\n      className: classes.priceDayDisc,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, getSymbolFromCurrency(pricecurr || ''), \" \", formatMoney(discTotalPrice)));\n  } else {\n    return __jsx(\"span\", {\n      className: classes.priceDay,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 16\n      }\n    }, getSymbolFromCurrency(pricecurr || ''), \" \", formatMoney(totalPrice));\n  }\n}\n\n_s(PriceDay, \"q4V+Pm0nwqz3jXKIqobiDFubfeo=\", false, function () {\n  return [usePriceDayStyles, useTranslation];\n});\n\n_c = PriceDay;\n\nfunction PriceCalendar(props) {\n  _s2();\n\n  var _this = this;\n\n  var classes = usePriceDayStyles();\n  var checkin = props.checkin,\n      checkout = props.checkout,\n      priceList = props.priceList,\n      adult = props.adult,\n      chdAges = props.chdAges,\n      agencyChdAges = props.agencyChdAges;\n  return __jsx(LocalizationProvider, {\n    dateLibInstance: moment,\n    dateAdapter: MomentAdapter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, __jsx(StaticDatePicker, {\n    className: classes.priceCalender,\n    onChange: function onChange() {},\n    disablePast: true,\n    disableHighlightToday: true,\n    displayStaticWrapperAs: \"desktop\",\n    value: checkin,\n    minDate: checkin,\n    maxDate: moment(checkout).subtract(1, 'days'),\n    renderInput: function renderInput(props) {\n      return __jsx(TextField, _extends({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 41\n        }\n      }));\n    },\n    renderLoading: function renderLoading() {\n      return \"\";\n    },\n    renderDay: function renderDay(day, value, DayComponentProps) {\n      var _clsx;\n\n      var date = makeJSDateObject(day !== null && day !== void 0 ? day : new Date()),\n          useData = getPriceInfo(date, priceList),\n          isSelected = DayComponentProps.inCurrentMonth && useData,\n          isFirstDay = isMatchDay(checkin, date),\n          isLastDay = isMatchDay(checkout, date);\n      return __jsx(Badge, {\n        key: date.toString(),\n        overlap: \"circle\",\n        badgeContent: isSelected ? __jsx(PriceDay, {\n          priceItem: useData,\n          adult: adult,\n          chdAges: chdAges,\n          agencyChdAges: agencyChdAges,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 98\n          }\n        }) : undefined,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      }, __jsx(PickersDay, _extends({}, DayComponentProps, {\n        disableMargin: true,\n        className: clsx((_clsx = {}, _defineProperty(_clsx, classes.highlight, isSelected), _defineProperty(_clsx, classes.firstHighlight, isFirstDay), _defineProperty(_clsx, classes.endHighlight, isLastDay), _clsx)),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 29\n        }\n      })));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }));\n}\n\n_s2(PriceCalendar, \"9M0RgAm6T6TolC+tB9oHMSNO8ps=\", false, function () {\n  return [usePriceDayStyles];\n});\n\n_c2 = PriceCalendar;\nexport default PriceCalendar;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PriceDay\");\n$RefreshReg$(_c2, \"PriceCalendar\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/booking/components/PriceCalendar.js"],"names":["React","moment","MomentAdapter","Badge","TextField","Tooltip","makeStyles","LocalizationProvider","StaticDatePicker","PickersDay","getSymbolFromCurrency","formatMoney","clsx","useTranslation","getTotalPrice","usePriceDayStyles","theme","priceDay","top","left","color","width","display","padding","position","fontSize","textAlign","fontWeight","borderRadius","priceDayDisc","cursor","highlight","backgroundColor","borderLeft","alignItems","justifyContent","palette","primary","dark","zIndex","firstHighlight","borderTopLeftRadius","borderBottomLeftRadius","content","height","borderStyle","borderWidth","borderColor","endHighlight","borderTopRightRadius","borderBottomRightRadius","priceCalender","maxHeight","makeJSDateObject","date","clone","toDate","isMoment","toJSDate","Date","getTime","isMatchDay","date1","date2","format","getPriceInfo","useDate","priceList","find","info","startdate","PriceDay","props","classes","t","discdesc","priceItem","adult","chdAges","agencyChdAges","pricecurr","discrate","totalPrice","discTotalPrice","discount","PriceCalendar","checkin","checkout","subtract","day","value","DayComponentProps","useData","isSelected","inCurrentMonth","isFirstDay","isLastDay","toString","undefined"],"mappings":"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","sourcesContent":["import React from 'react'\nimport moment from 'moment'\nimport MomentAdapter from '@date-io/moment'\nimport { Badge, TextField, Tooltip } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { LocalizationProvider, StaticDatePicker, PickersDay } from '@material-ui/pickers'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport { formatMoney } from 'model/orest/constants'\nimport clsx from 'clsx'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { getTotalPrice} from 'lib/helpers/useFunction'\n\nconst usePriceDayStyles = makeStyles((theme) => ({\n    priceDay: {\n        top: 25,\n        left: -13,\n        color: '#767676',\n        width: 36,\n        display: 'block',\n        padding: '3px 0 1px 0',\n        position: 'relative',\n        fontSize: '6.6px',\n        textAlign: 'center',\n        fontWeight: 800,\n        borderRadius: 0\n    },\n    priceDayDisc: {\n        top: 25,\n        left: -13,\n        color: '#28a745',\n        width: 36,\n        display: 'block',\n        padding: '3px 0 1px 0',\n        position: 'relative',\n        fontSize: '6.6px',\n        textAlign: 'center',\n        fontWeight: 800,\n        borderRadius: 0,\n        cursor: 'pointer'\n    },\n    highlight: {\n        color: '#727272!important',\n        borderRadius: 0,\n        backgroundColor: '#f9f9f9!important',\n        borderLeft: '1px solid #ebebeb',\n        alignItems: 'flex-start',\n        justifyContent: 'end',\n        padding: '2px 6px 4px 4px',\n        '&:hover, &:focus': {\n            backgroundColor: theme.palette.primary.dark,\n        },\n        '& span': {\n            zIndex: 2\n        }\n    },\n    firstHighlight: {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n        backgroundColor: 'transparent!important',\n        borderLeft: 'none',\n        '&:before': {\n            content: '\\'\\'',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid',\n            borderWidth: '0 0 36px 36px',\n            position: 'absolute',\n            top: 0,\n            left: -1,\n            borderColor: 'transparent transparent #cdcdcd52 transparent',\n        },\n        '& span': {\n            zIndex: 2\n        }\n    },\n    endHighlight: {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        '&:after': {\n            content: '\\'\\'',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid',\n            borderWidth: '36px 36px 0 0',\n            position: 'absolute',\n            top: 0,\n            left: 1,\n            borderColor: '#cdcdcd52 transparent transparent transparent',\n        },\n        '& span': {\n            zIndex: 2\n        }\n    },\n    priceCalender: {\n        padding: 0,\n        maxHeight: 340,\n        width: 300\n    }\n}))\n\nfunction makeJSDateObject(date) {\n    if (date) {\n        return date.clone().toDate();\n    }\n\n    if (moment.isMoment(date)) {\n        return date.clone().toDate();\n    }\n\n    if (date) {\n        return date.toJSDate();\n    }\n\n    if (date) {\n        return new Date(date.getTime());\n    }\n\n    return date;\n}\n\nfunction isMatchDay(date1, date2){\n    return moment(date1, 'YYYY-MM-DD').format('YYYY-MM-DD') === moment(date2).format('YYYY-MM-DD')\n}\n\nfunction getPriceInfo(useDate, priceList){\n    return priceList.find(info => isMatchDay(info.startdate, useDate))\n}\n\nfunction PriceDay(props){\n    const classes = usePriceDayStyles()\n    const { t } = useTranslation()\n    const { discdesc, priceItem, adult, chdAges, agencyChdAges } = props\n    const { pricecurr, discrate } = priceItem\n    const { totalPrice, discTotalPrice } = getTotalPrice(priceItem, adult, chdAges, agencyChdAges)\n\n    if(discTotalPrice > 0){\n        return (\n            <Tooltip title={discdesc && t(discdesc) || t('str_withDiscount', {discount: discrate})} arrow>\n                <span className={classes.priceDayDisc}>{getSymbolFromCurrency(pricecurr || '')} {formatMoney(discTotalPrice)}</span>\n            </Tooltip>\n        )\n    }else {\n        return <span className={classes.priceDay}>{getSymbolFromCurrency(pricecurr || '')} {formatMoney(totalPrice)}</span>\n    }\n}\n\nfunction PriceCalendar(props) {\n    const classes = usePriceDayStyles()\n    const { checkin, checkout, priceList, adult, chdAges, agencyChdAges  } = props\n\n    return (\n        <LocalizationProvider dateLibInstance={moment} dateAdapter={MomentAdapter}>\n            <StaticDatePicker\n                className={classes.priceCalender}\n                onChange={()=> {}}\n                disablePast\n                disableHighlightToday\n                displayStaticWrapperAs='desktop'\n                value={checkin}\n                minDate={checkin}\n                maxDate={moment(checkout).subtract(1,'days')}\n                renderInput={(props) => <TextField {...props} />}\n                renderLoading={() => \"\"}\n                renderDay={(day, value, DayComponentProps) => {\n                    const date = makeJSDateObject(day ?? new Date())\n                        , useData =   getPriceInfo(date, priceList)\n                        , isSelected = DayComponentProps.inCurrentMonth && useData\n                        , isFirstDay =  isMatchDay(checkin, date)\n                        , isLastDay = isMatchDay(checkout, date)\n\n                    return (\n                        <Badge key={date.toString()} overlap='circle' badgeContent={isSelected ? <PriceDay priceItem={useData} adult={adult} chdAges={chdAges} agencyChdAges={agencyChdAges} /> : undefined}>\n                            <PickersDay\n                                {...DayComponentProps}\n                                disableMargin\n                                className={clsx({\n                                    [classes.highlight]: isSelected,\n                                    [classes.firstHighlight]: isFirstDay,\n                                    [classes.endHighlight]: isLastDay,\n                                })}\n                            />\n                        </Badge>\n                    )\n                }}\n            />\n        </LocalizationProvider>\n    )\n}\n\nexport default PriceCalendar;\n"]},"metadata":{},"sourceType":"module"}