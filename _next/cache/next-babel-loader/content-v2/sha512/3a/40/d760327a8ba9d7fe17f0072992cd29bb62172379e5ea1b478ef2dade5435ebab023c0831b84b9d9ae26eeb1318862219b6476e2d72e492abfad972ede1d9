{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderStepper.js\";\nvar __jsx = React.createElement;\n//imports from react\nimport React, { useEffect, useState, useContext } from 'react'; //redux imports\n\nimport { connect } from 'react-redux';\nimport { pushToState, deleteFromState, setToState, updateState } from '../../state/actions'; //material imports\n\nimport { makeStyles, createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepConnector from '@material-ui/core/StepConnector';\nimport FormControl from '@material-ui/core/FormControl';\nimport WebAssetIcon from '@material-ui/icons/WebAsset';\nimport WebIcon from '@material-ui/icons/Web';\nimport EmailIcon from '@material-ui/icons/Email';\nimport HomeIcon from '@material-ui/icons/Home';\nimport BrushIcon from '@material-ui/icons/Brush';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport HelpIcon from '@material-ui/icons/Help';\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport clsx from 'clsx'; //custom components imports\n\nimport Page from './PageBuilderSteps/steps/webpage/Page';\nimport Style from './PageBuilderSteps/steps/assets/Style';\nimport Asset from './PageBuilderSteps/steps/assets/Asset';\nimport Final from './PageBuilderSteps/steps/webpage/Final';\nimport Preview from './PageBuilderSteps/steps/webpage/Preview';\nimport Home from './PageBuilderSteps/steps/home/Home';\nimport WebsitePage from './PageBuilderSteps/steps/website/Page';\nimport WebsitePreview from './PageBuilderSteps/steps/website/Preview';\nimport WebsiteFinal from './PageBuilderSteps/steps/website/Final';\nimport EmailDesign from './PageBuilderSteps/steps/email/EmailDesign';\nimport EmailPreview from './PageBuilderSteps/steps/email/EmailPreview';\nimport EmailSave from './PageBuilderSteps/steps/email/EmailSave';\nimport LoadingSpinner from '../LoadingSpinner';\nimport GenericSlider from './PageBuilderSteps/components/slider';\nimport FAQDesign from './PageBuilderSteps/steps/faq/FaqDesign';\nimport FAQPreview from './PageBuilderSteps/steps/faq/FAQPreview';\nimport FAQSave from './PageBuilderSteps/steps/faq/FAQSave'; // imports for toaster\n\nimport { ToastContainer, toast } from 'react-toastify'; //constants imports\n\nimport { COLORS, SAVED_SUCCESS, PB_OPTIONS } from './PageBuilderSteps/constants/index';\nimport WebCmsGlobal from 'components/webcms-global';\nimport { isErrorMsg, OREST_ENDPOINT } from '../../model/orest/constants';\nimport { ViewList, Insert, Patch, UseOrest } from '@webcms/orest';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nconst useStyles = makeStyles(theme => ({\n  actionButtons: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    marginTop: theme.spacing(2)\n  },\n  actionButton: {\n    borderRadius: 20,\n    marginBottom: 16,\n    backgroundColor: COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary\n  },\n  newButton: {\n    marginTop: theme.spacing(2),\n    float: 'right',\n    backgroundColor: COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary\n  },\n  assetButton: {\n    borderRadius: 20,\n    float: 'right',\n    marginTop: theme.spacing(2),\n    marginRight: theme.spacing(1) // backgroundColor: COLORS.secondary\n\n  },\n  backButton: {\n    borderRadius: 20,\n    marginBottom: 16\n  },\n  disabled: {\n    pointerEvents: 'none',\n    opacity: 0.5\n  }\n}));\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary,\n      dark: COLORS === null || COLORS === void 0 ? void 0 : COLORS.primary,\n      light: COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary,\n      contrastText: 'white'\n    }\n  }\n});\nconst useColorStepIconStyle = makeStyles(() => ({\n  root: {\n    backgroundColor: '#ccc',\n    zIndex: 1,\n    color: '#fff',\n    width: 65,\n    height: 65,\n    display: 'flex',\n    borderRadius: '50%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    '& img': {\n      width: 35\n    }\n  },\n  iconSize: {\n    height: 50,\n    width: 50\n  },\n  active: {\n    backgroundColor: COLORS === null || COLORS === void 0 ? void 0 : COLORS.secondary,\n    boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)'\n  },\n  completed: {\n    backgroundColor: COLORS === null || COLORS === void 0 ? void 0 : COLORS.primary,\n    color: '#fff'\n  }\n}));\nconst ColorlibConnector = withStyles({\n  alternativeLabel: {\n    top: 30,\n    left: 'calc(-50% + 10px)',\n    right: 'calc(50% + 10px)'\n  },\n  active: {\n    '& $line': {\n      background: 'transparent linear-gradient(270deg, #269DD4 0%, #0F4571 100%) 0% 0% no-repeat padding-box'\n    }\n  },\n  completed: {\n    '& $line': {\n      backgroundColor: COLORS.primary\n    }\n  },\n  line: {\n    height: 4,\n    border: 0,\n    backgroundColor: '#eaeaf0',\n    borderRadius: 1\n  }\n})(StepConnector);\n\nfunction getStepsIcons(step, isActive, isCompleted, pageBuilderType) {\n  const icon_classes = useColorStepIconStyle();\n  let icons = {};\n\n  switch (pageBuilderType) {\n    case 'webPage':\n      icons = {\n        0: __jsx(HomeIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 20\n          }\n        }),\n        1: __jsx(MenuBookIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 20\n          }\n        }),\n        2: __jsx(VisibilityIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 20\n          }\n        })\n      };\n      break;\n\n    case 'website':\n      icons = {\n        0: __jsx(HomeIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 20\n          }\n        }),\n        1: __jsx(WebIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 20\n          }\n        }),\n        2: __jsx(VisibilityIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 20\n          }\n        })\n      };\n      break;\n\n    case 'email':\n      icons = {\n        0: __jsx(HomeIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 20\n          }\n        }),\n        1: __jsx(EmailIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 20\n          }\n        }),\n        2: __jsx(VisibilityIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 20\n          }\n        })\n      };\n      break;\n\n    case 'faqOnly':\n      icons = {\n        0: __jsx(HelpIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 20\n          }\n        }),\n        1: __jsx(VisibilityIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 20\n          }\n        })\n      };\n      break;\n\n    case 'assets':\n      icons = {\n        0: __jsx(HomeIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 20\n          }\n        }),\n        1: __jsx(BrushIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 20\n          }\n        }),\n        2: __jsx(WebAssetIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 20\n          }\n        })\n      };\n      break;\n\n    case 'assetOnly':\n      icons = {\n        0: __jsx(BrushIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 20\n          }\n        }),\n        1: __jsx(WebAssetIcon, {\n          className: icon_classes.iconSize,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 20\n          }\n        })\n      };\n      break;\n\n    default:\n      return icons;\n  }\n\n  return __jsx(\"div\", {\n    className: clsx(icon_classes.root, {\n      [icon_classes.active]: isActive,\n      [icon_classes.completed]: isCompleted\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }, icons[step]);\n}\n\nconst PageBuilderStepper = props => {\n  var _router$query, _router$query9, _router$query10, _router$query11, _router$query12, _router$query13, _router$query14, _router$query15, _router$query16, _router$query17;\n\n  const {\n    state,\n    updateState,\n    deleteFromState,\n    pushToState\n  } = props;\n  const classes = useStyles(); //local state\n\n  const [renderFinal, setRenderFinal] = React.useState('');\n  const {\n    0: pageBuilderType,\n    1: setPageBuilderType\n  } = useState('');\n  const {\n    0: isWebPageSelected,\n    1: setWebPageSelected\n  } = useState(false);\n  const {\n    0: isWebsiteSelected,\n    1: setWebsiteSelected\n  } = useState(false);\n  const {\n    0: isEmailSelected,\n    1: setEmailSelected\n  } = useState(false);\n  const {\n    0: isLoaded,\n    1: setIsLoaded\n  } = useState(false);\n  const {\n    0: isRequestSend,\n    1: setRequestSend\n  } = useState(false);\n  const {\n    0: url,\n    1: setUrl\n  } = useState('');\n  const steps = state.steps;\n  const pageStep = state.pageStep;\n  const emptyPage = {\n    id: '',\n    sections: []\n  };\n  const {\n    GENERAL_SETTINGS,\n    token\n  } = useContext(WebCmsGlobal);\n  const router = useRouter();\n  const companyId = router === null || router === void 0 ? void 0 : (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.companyID;\n  const authToken = token || router.query.authToken;\n  useEffect(() => {\n    var _router$query2;\n\n    //setting url\n    if (window && window.location && window.location.port) {\n      setUrl(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`);\n    } else {\n      setUrl(`${window.location.protocol}//${window.location.hostname}`);\n    }\n\n    if (router !== null && router !== void 0 && (_router$query2 = router.query) !== null && _router$query2 !== void 0 && _router$query2.emailOnly) {\n      updateState('pageBuilder', 'previousStep', 0);\n      updateState('pageBuilder', 'pageStep', 1);\n    }\n  }, []);\n  useEffect(() => {\n    setRequestSend(true);\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.RAFILE,\n      token: authToken,\n      params: {\n        query: `code:HCMASSET`,\n        hotelrefno: Number(companyId)\n      }\n    }).then(async res => {\n      setRequestSend(false);\n\n      if (res.data && res.data.data && res.data.data.length > 0) {\n        var _assetsData$colors;\n\n        const assetsData = JSON.parse(Buffer.from(res.data.data[0].filedata, 'base64').toString('utf-8'));\n\n        if (!(assetsData !== null && assetsData !== void 0 && (_assetsData$colors = assetsData.colors) !== null && _assetsData$colors !== void 0 && _assetsData$colors.slider)) {\n          assetsData.colors['slider'] = {\n            main: '',\n            light: '',\n            dark: '',\n            contrastText: ''\n          };\n        }\n\n        if (!(assetsData !== null && assetsData !== void 0 && assetsData.icons)) {\n          assetsData['icons'] = {\n            phone: '',\n            email: '',\n            facebook: '',\n            twitter: '',\n            instagram: '',\n            linkedin: ''\n          };\n        }\n\n        updateState('pageBuilder', 'assets', assetsData);\n        const assets = await handleAssetLogoUrlChange(JSON.parse(Buffer.from(res.data.data[0].filedata, 'base64').toString('utf-8')));\n        const images = assets === null || assets === void 0 ? void 0 : assets.images;\n        const icons = assets === null || assets === void 0 ? void 0 : assets.icons;\n\n        if (Object.keys(images).length > 0) {\n          updateState('pageBuilder', 'logoUrl', images === null || images === void 0 ? void 0 : images.logo);\n          updateState('pageBuilder', 'altLogoUrl', images === null || images === void 0 ? void 0 : images.altLogo);\n          updateState('pageBuilder', 'logoBanner', images === null || images === void 0 ? void 0 : images.logoBanner);\n          updateState('pageBuilder', 'faviconUrl', images === null || images === void 0 ? void 0 : images.favIcon);\n          updateState('pageBuilder', 'backgroundUrl', images === null || images === void 0 ? void 0 : images.background);\n          updateState('pageBuilder', 'poweredByUrl', images === null || images === void 0 ? void 0 : images.poweredBy);\n          updateState('pageBuilder', 'thumbnailUrl', images === null || images === void 0 ? void 0 : images.thumbnail);\n        }\n\n        if (icons && Object.keys(icons).length > 0) {\n          updateState('pageBuilder', 'phoneIconUrl', icons === null || icons === void 0 ? void 0 : icons.phone);\n          updateState('pageBuilder', 'emailIconUrl', icons === null || icons === void 0 ? void 0 : icons.email);\n          updateState('pageBuilder', 'facebookIconUrl', icons === null || icons === void 0 ? void 0 : icons.facebook);\n          updateState('pageBuilder', 'twitterIconUrl', icons === null || icons === void 0 ? void 0 : icons.twitter);\n          updateState('pageBuilder', 'instagramIconUrl', icons === null || icons === void 0 ? void 0 : icons.instagram);\n          updateState('pageBuilder', 'linkedinIconUrl', icons === null || icons === void 0 ? void 0 : icons.linkedin);\n        }\n      }\n    });\n    UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.INFO + '/' + OREST_ENDPOINT.LOGIN,\n      token: authToken,\n      method: 'get'\n    }).then(res => {\n      if (res.status === 200 && res.data && res.data.data && res.data.data.hotelmid) {\n        updateState('pageBuilder', 'hotelMid', res.data.data.hotelmid);\n      } else {\n        const retErr = isErrorMsg(res);\n        toast.error(retErr.errorMsg, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    }); //for default language\n\n    UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'sett/lang/local',\n      token: authToken,\n      method: 'get'\n    }).then(res => {\n      if (res.status === 200 && res.data && res.data.success && res.data.data) {\n        var _res$data, _res$data$data, _res$data2, _res$data2$data;\n\n        if (res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && (_res$data$data = _res$data.data) !== null && _res$data$data !== void 0 && _res$data$data.code && res !== null && res !== void 0 && (_res$data2 = res.data) !== null && _res$data2 !== void 0 && (_res$data2$data = _res$data2.data) !== null && _res$data2$data !== void 0 && _res$data2$data.id) {\n          var _res$data$data2, _res$data$data2$code, _res$data$data3;\n\n          updateState('pageBuilder', 'defaultLang', (_res$data$data2 = res.data.data) === null || _res$data$data2 === void 0 ? void 0 : (_res$data$data2$code = _res$data$data2.code) === null || _res$data$data2$code === void 0 ? void 0 : _res$data$data2$code.toLowerCase());\n          updateState('pageBuilder', 'defaultLangId', (_res$data$data3 = res.data.data) === null || _res$data$data3 === void 0 ? void 0 : _res$data$data3.id);\n        } else toast.error('Default language is not set yet!', {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      } else {\n        const retErr = isErrorMsg(res);\n        toast.error(retErr.errorMsg, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    }); //request for logininfo to get super hotel\n\n    UseOrest({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: 'info/login',\n      token: authToken,\n      method: 'get'\n    }).then(res => {\n      var _res$data3;\n\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200 && res !== null && res !== void 0 && (_res$data3 = res.data) !== null && _res$data3 !== void 0 && _res$data3.data) {\n        var _res$data$data4, _res$data$data5;\n\n        updateState('pageBuilder', 'isSuperHotel', (_res$data$data4 = res.data.data) === null || _res$data$data4 === void 0 ? void 0 : _res$data$data4.issuperhotel);\n        updateState('pageBuilder', 'isSuperUser', (_res$data$data5 = res.data.data) === null || _res$data$data5 === void 0 ? void 0 : _res$data$data5.issuperuser);\n      } else {\n        const retErr = isErrorMsg(res);\n        toast.error(retErr.errorMsg, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    });\n  }, []);\n  useEffect(() => {\n    // getting languages from service\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.RALANG,\n      token: authToken,\n      params: {\n        hotelrefno: Number(companyId)\n      }\n    }).then(res => {\n      var _res$data4, _res$data4$data;\n\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200 && (res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : (_res$data4$data = _res$data4.data) === null || _res$data4$data === void 0 ? void 0 : _res$data4$data.length) > 0) {\n        res.data.data.map(lang => {\n          var _lang$code;\n\n          pushToState('pageBuilder', ['languages'], [{\n            id: lang === null || lang === void 0 ? void 0 : lang.id,\n            code: lang === null || lang === void 0 ? void 0 : (_lang$code = lang.code) === null || _lang$code === void 0 ? void 0 : _lang$code.toLowerCase(),\n            description: lang === null || lang === void 0 ? void 0 : lang.description\n          }]);\n\n          if (lang.code.toLowerCase() === state.defaultLang) {\n            updateState('pageBuilder', 'langId', lang.id);\n            updateState('pageBuilder', 'langCode', lang.code.toLowerCase());\n          }\n        });\n      }\n    });\n  }, [state.defaultLang]);\n  useEffect(() => {\n    if (pageStep === 0) {\n      var _router$query3, _router$query4, _router$query5, _router$query6;\n\n      if (router !== null && router !== void 0 && (_router$query3 = router.query) !== null && _router$query3 !== void 0 && _router$query3.sliderOnly) {\n        updateState('pageBuilder', 'type', 'generic-slider');\n      } else if (router !== null && router !== void 0 && (_router$query4 = router.query) !== null && _router$query4 !== void 0 && _router$query4.emailOnly) {\n        updateState('pageBuilder', 'type', 'emailOnly');\n        setPageBuilderType('email');\n      } else if (router !== null && router !== void 0 && (_router$query5 = router.query) !== null && _router$query5 !== void 0 && _router$query5.assetOnly) {\n        updateState('pageBuilder', 'type', 'assetOnly');\n        setPageBuilderType('assetOnly');\n      } else if (router !== null && router !== void 0 && (_router$query6 = router.query) !== null && _router$query6 !== void 0 && _router$query6.faqOnly) {\n        updateState('pageBuilder', 'type', 'faqOnly');\n        setPageBuilderType('faqOnly');\n      } else {\n        updateState('pageBuilder', 'type', 'webPage');\n        setPageBuilderType('webPage');\n      }\n    }\n  }, [pageStep]);\n  useEffect(() => {\n    setIsLoaded(true);\n    resetSteps(pageBuilderType);\n    setSteps(pageBuilderType);\n  }, [pageBuilderType]);\n\n  const resetSteps = () => {\n    const steps = [2, 1, 0];\n    steps.map(index => deleteFromState('pageBuilder', ['steps'], [index, 1]));\n  };\n\n  const setSteps = pageBuilderType => {\n    switch (pageBuilderType) {\n      case 'webPage':\n        const webPageSteps = ['Home', 'Page', 'Preview'];\n        webPageSteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      case 'email':\n        const emailSteps = ['Home', 'Design', 'Preview'];\n        emailSteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      case 'website':\n        const websiteSteps = ['Home', 'Design', 'Preview'];\n        websiteSteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      case 'assets':\n        const assetSteps = ['Home', 'Style', 'Assets'];\n        assetSteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      case 'assetOnly':\n        const assetOnlySteps = ['Style', 'Assets'];\n        assetOnlySteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      case 'faq':\n        const faqSteps = ['Home', \"FAQ's\", 'Preview'];\n        faqSteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      case 'faqOnly':\n        const faqOnlySteps = ['Design', 'Preview'];\n        faqOnlySteps.map(element => {\n          pushToState('pageBuilder', ['steps'], [element]);\n        });\n        break;\n\n      default:\n        return;\n    }\n  };\n\n  const handleNext = () => {\n    if (pageStep === steps.length - 1) {\n      handleSave();\n    } else {\n      updateState('pageBuilder', 'previousStep', pageStep);\n      updateState('pageBuilder', 'pageStep', pageStep + 1);\n    }\n  };\n\n  const handleBack = () => {\n    updateState('pageBuilder', 'previousStep', pageStep);\n    updateState('pageBuilder', 'pageStep', pageStep - 1);\n  };\n\n  const handleNextDisable = () => {\n    switch (state.type) {\n      case 'assets':\n        if (pageStep === 1) {\n          const colors = hasColors();\n          if (colors) return false;else return true;\n        } else if (pageStep === 2) {\n          const assets = hasAssets();\n          if (assets) return false;else return true;\n        }\n\n      case 'webPage':\n        if (pageStep === 0) {\n          if (isWebPageSelected) {\n            return false;\n          } else {\n            return true;\n          }\n        } else if (pageStep === 1) {\n          if (state.page.sections.length === 0) {\n            return true;\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n\n      case 'email':\n        if (pageStep === 0) {\n          if (isEmailSelected) return false;else return true;\n        }\n\n        if (pageStep === 1) {\n          if (state.email.body.length === 0) return true;else return false;\n        }\n\n        return false;\n\n      case 'emailOnly':\n        if (pageStep === 1) {\n          if (state.email.body.length === 0) return true;else return false;\n        }\n\n        return false;\n\n      case 'website':\n        if (pageStep === 0) {\n          if (isWebsiteSelected) return false;else return true;\n        }\n\n        if (pageStep === 1) {\n          if (state.footerOnly) {\n            if (Object.keys(state.website.footer).length === 0) return true;else return false;\n          } else {\n            if (Object.keys(state.website.header).length === 0 || Object.keys(state.website.footer).length === 0 || state.website.pages.length === 0) return true;else return false;\n          }\n        }\n\n        return false;\n\n      case 'faqOnly':\n        if (state.faq.length > 0) return false;else return true;\n\n      default:\n        return;\n    }\n  };\n\n  const hasColors = () => {\n    for (const color in state === null || state === void 0 ? void 0 : (_state$assets = state.assets) === null || _state$assets === void 0 ? void 0 : _state$assets.colors) {\n      var _state$assets;\n\n      for (const type in state === null || state === void 0 ? void 0 : (_state$assets2 = state.assets) === null || _state$assets2 === void 0 ? void 0 : _state$assets2.colors[color]) {\n        var _state$assets2, _state$assets3;\n\n        if (!(state !== null && state !== void 0 && (_state$assets3 = state.assets) !== null && _state$assets3 !== void 0 && _state$assets3.colors[color][type])) return false;\n      }\n    }\n\n    return true;\n  };\n\n  const hasAssets = () => {\n    var _state$assets4, _state$assets4$meta;\n\n    if (!(state !== null && state !== void 0 && (_state$assets4 = state.assets) !== null && _state$assets4 !== void 0 && (_state$assets4$meta = _state$assets4.meta) !== null && _state$assets4$meta !== void 0 && _state$assets4$meta.title)) return false;\n\n    for (const img in state === null || state === void 0 ? void 0 : (_state$assets5 = state.assets) === null || _state$assets5 === void 0 ? void 0 : _state$assets5.images) {\n      var _state$assets5, _state$assets6;\n\n      if (!(state !== null && state !== void 0 && (_state$assets6 = state.assets) !== null && _state$assets6 !== void 0 && _state$assets6.images[img])) return false;\n    }\n\n    return true;\n  };\n\n  const setPageBuilderType_ = value => {\n    setPageBuilderType(value);\n    updateState('pageBuilder', 'type', value);\n    updateState('pageBuilder', 'code', '');\n\n    if (value === 'webPage') {\n      updateState('pageBuilder', 'page', emptyPage);\n    } else if (value === 'website') {\n      const website = {\n        header: {},\n        footer: {},\n        pages: []\n      };\n      updateState('pageBuilder', 'website', website);\n    } else if (value === 'email') {\n      const emptyEmail = {\n        header: {},\n        footer: {},\n        body: []\n      };\n      updateState('pageBuilder', 'email', emptyEmail);\n    }\n  };\n\n  const handleNew = () => {\n    updateState('pageBuilder', 'langCode', state.defaultLang);\n    updateState('pageBuilder', 'langsFile', {});\n    updateState('pageBuilder', 'isTemplate', false);\n    updateState('pageBuilder', 'previousStep', pageStep);\n    updateState('pageBuilder', 'pageStep', pageStep + 1);\n\n    if (pageBuilderType === 'webPage') {\n      updateState('pageBuilder', 'code', 'NEW PAGE');\n      updateState('pageBuilder', 'page', emptyPage);\n      setWebPageSelected(false);\n    }\n\n    if (pageBuilderType === 'website') {\n      const website = {\n        header: {},\n        footer: {},\n        pages: []\n      };\n      updateState('pageBuilder', 'code', 'NEW WEBSITE');\n      updateState('pageBuilder', 'footerOnly', false);\n      updateState('pageBuilder', 'website', website);\n      setWebsiteSelected(false);\n    }\n\n    if (pageBuilderType === 'email') {\n      const email = {\n        header: {},\n        footer: {},\n        body: []\n      };\n      updateState('pageBuilder', 'email', email);\n      updateState('pageBuilder', 'code', 'NEW EMAIL');\n      setEmailSelected(false);\n    }\n  };\n\n  const resetFinal = () => {\n    setRenderFinal('');\n  };\n\n  const handleSave = () => {\n    if (state.type === 'assets' || state.type === 'assetOnly') {\n      handleSaveAssets();\n    } else if (state.type === 'webPage') {\n      setRenderFinal(__jsx(Final, {\n        isWebPageSelected: isWebPageSelected,\n        dialogTitle: 'Save',\n        resetFinal: resetFinal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 28\n        }\n      }));\n    } else if (state.type === 'website') {\n      setRenderFinal(__jsx(WebsiteFinal, {\n        isWebsiteSelected: isWebsiteSelected,\n        dialogTitle: 'Save',\n        resetFinal: resetFinal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 17\n        }\n      }));\n    } else if (state.type === 'email') {\n      setRenderFinal(__jsx(EmailSave, {\n        dialogTitle: 'Save',\n        resetFinal: resetFinal,\n        isEmailSelected: isEmailSelected,\n        onSelectEmail: onSelectEmail,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 17\n        }\n      }));\n    } else if (state.type === 'emailOnly') {\n      if (isEmailSelected) {\n        setRenderFinal(__jsx(EmailSave, {\n          dialogTitle: 'Save',\n          resetFinal: resetFinal,\n          isEmailSelected: !isEmailSelected,\n          onSelectEmail: onSelectEmail,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 21\n          }\n        }));\n      } else {\n        var _router$query7;\n\n        if (router !== null && router !== void 0 && (_router$query7 = router.query) !== null && _router$query7 !== void 0 && _router$query7.masterid) {\n          var _router$query8;\n\n          ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RAFILE,\n            token: authToken,\n            params: {\n              hotelrefno: Number(companyId),\n              query: `masterid::${router === null || router === void 0 ? void 0 : (_router$query8 = router.query) === null || _router$query8 === void 0 ? void 0 : _router$query8.masterid},filetype::PB-EMAIL`\n            }\n          }).then(res => {\n            if ((res === null || res === void 0 ? void 0 : res.status) === 200 && res !== null && res !== void 0 && res.data) {\n              var _res$data5, _res$data5$data;\n\n              if ((res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : (_res$data5$data = _res$data5.data) === null || _res$data5$data === void 0 ? void 0 : _res$data5$data.length) > 0) {\n                setRenderFinal(__jsx(EmailSave, {\n                  dialogTitle: 'Save',\n                  resetFinal: resetFinal,\n                  isEmailSelected: true,\n                  onSelectEmail: onSelectEmail,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 685,\n                    columnNumber: 37\n                  }\n                }));\n              } else {\n                setRenderFinal(__jsx(EmailSave, {\n                  dialogTitle: 'Save',\n                  resetFinal: resetFinal,\n                  isEmailSelected: false,\n                  onSelectEmail: onSelectEmail,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 694,\n                    columnNumber: 37\n                  }\n                }));\n              }\n            } else {\n              const retErr = isErrorMsg(res);\n              toast.error(retErr.errorMsg, {\n                position: toast.POSITION.TOP_RIGHT\n              });\n            }\n          });\n        }\n      }\n    } else if (state.type === 'faqOnly') {\n      setRenderFinal(__jsx(FAQSave, {\n        resetFinal: resetFinal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 28\n        }\n      }));\n    }\n  };\n\n  const handleSaveAssets = () => {\n    setRequestSend(true);\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.RAFILE,\n      token: authToken,\n      params: {\n        query: `code:HCMASSET`,\n        hotelrefno: Number(companyId)\n      }\n    }).then(res1 => {\n      if (res1.data && res1.data.data && res1.data.data.length === 0) {\n        Insert({\n          // insert header into rafile\n          apiUrl: GENERAL_SETTINGS.OREST_URL,\n          endpoint: OREST_ENDPOINT.RAFILE,\n          token: authToken,\n          data: {\n            code: `HCMASSET`,\n            masterid: GENERAL_SETTINGS.HOTELMID,\n            filename: 'HCMASSET',\n            filetype: 'HCMASSET',\n            filedata: Buffer.from(JSON.stringify(state === null || state === void 0 ? void 0 : state.assets)).toString('base64'),\n            isorsactive: true,\n            hotelrefno: Number(companyId)\n          }\n        }).then(async res2 => {\n          setRequestSend(false);\n\n          if (res2.status === 200 && res2.data.data) {\n            const redisStdJson = state.redisStdJson;\n            redisStdJson.assets = await handleAssetLogoUrlChange(JSON.parse(Buffer.from(res2.data.data.filedata, 'base64').toString('utf-8')));\n            toast.success(SAVED_SUCCESS, {\n              position: toast.POSITION.TOP_RIGHT\n            });\n            updateState('pageBuilder', 'previousStep', 0);\n            updateState('pageBuilder', 'pageStep', 0);\n          }\n        });\n      } else {\n        Patch({\n          // update header into rafile\n          apiUrl: GENERAL_SETTINGS.OREST_URL,\n          endpoint: OREST_ENDPOINT.RAFILE,\n          token: authToken,\n          gid: res1.data.data[0].gid,\n          params: {\n            hotelrefno: Number(companyId)\n          },\n          data: {\n            filedata: Buffer.from(JSON.stringify(state === null || state === void 0 ? void 0 : state.assets)).toString('base64'),\n            isorsactive: true,\n            hotelrefno: Number(companyId)\n          }\n        }).then(async res2 => {\n          setRequestSend(false);\n\n          if (res2.status === 200 && res2.data.data) {\n            const redisStdJson = state.redisStdJson;\n            redisStdJson.assets = await handleAssetLogoUrlChange(JSON.parse(Buffer.from(res2.data.data.filedata, 'base64').toString('utf-8')));\n            toast.success(SAVED_SUCCESS, {\n              position: toast.POSITION.TOP_RIGHT\n            });\n            updateState('pageBuilder', 'previousStep', 0);\n            updateState('pageBuilder', 'pageStep', 0);\n          }\n        });\n      }\n    });\n  };\n\n  const handleAssetLogoUrlChange = async assets => {\n    setRequestSend(true);\n    const images = assets === null || assets === void 0 ? void 0 : assets.images;\n    const icons = assets === null || assets === void 0 ? void 0 : assets.icons;\n\n    for (const logo in images) {\n      if (images[logo]) {\n        var _image$url;\n\n        const REQUEST_OPTIONS = {\n          url: GENERAL_SETTINGS.OREST_URL + '/rafile/view/list',\n          method: 'get',\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n            'Content-Type': 'application/json'\n          },\n          params: {\n            query: 'gid::' + images[logo],\n            hotelrefno: Number(companyId)\n          }\n        };\n        const image = await getImageData(REQUEST_OPTIONS);\n        let url = image === null || image === void 0 ? void 0 : (_image$url = image.url) === null || _image$url === void 0 ? void 0 : _image$url.replace('/var/otello', '').replace('/public', '');\n        assets.images[logo] = url;\n      }\n    }\n\n    for (const icon in icons) {\n      if (icons[icon]) {\n        var _image$url2;\n\n        const REQUEST_OPTIONS = {\n          url: GENERAL_SETTINGS.OREST_URL + '/rafile/view/list',\n          method: 'get',\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n            'Content-Type': 'application/json'\n          },\n          params: {\n            query: 'gid::' + icons[icon],\n            hotelrefno: Number(companyId)\n          }\n        };\n        const image = await getImageData(REQUEST_OPTIONS);\n        let url = image === null || image === void 0 ? void 0 : (_image$url2 = image.url) === null || _image$url2 === void 0 ? void 0 : _image$url2.replace('/var/otello', '').replace('/public', '');\n        assets.icons[icon] = url;\n      }\n    }\n\n    setRequestSend(false);\n    return assets;\n  };\n\n  const getImageData = option => {\n    return new Promise(async resv => {\n      return await axios(option).then(async response => {\n        if (response.status === 200) {\n          var _response$data, _response$data$data;\n\n          if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$data = _response$data.data) === null || _response$data$data === void 0 ? void 0 : _response$data$data.length) > 0) {\n            resv(response.data.data[0]);\n          } else {\n            resv(null);\n          }\n        } else {\n          const retErr = isErrorMsg(response);\n          toast.error(retErr.errorMsg, {\n            position: toast.POSITION.TOP_RIGHT\n          });\n          resv(null);\n        }\n      }).catch(error => {\n        console.log(error);\n        resv(error.response || {\n          status: 0\n        });\n      });\n    });\n  };\n\n  const onSelectPage = isSelected => {\n    setWebPageSelected(isSelected);\n  };\n\n  const handleAssets = () => {\n    const website = {\n      header: {},\n      footer: {},\n      pages: []\n    };\n    setPageBuilderType_('assets');\n    updateState('pageBuilder', 'code', '');\n    updateState('pageBuilder', 'page', emptyPage);\n    updateState('pageBuilder', 'website', website);\n    updateState('pageBuilder', 'previousStep', pageStep);\n    updateState('pageBuilder', 'pageStep', pageStep + 1);\n  };\n\n  const onSelectWebsite = isSelected => {\n    setWebsiteSelected(isSelected);\n  };\n\n  const onSelectEmail = isSelected => {\n    setEmailSelected(isSelected);\n  };\n\n  const handleClearCache = () => {\n    // clear cache from redis\n    setRequestSend(true);\n    axios.get(url + '/?clearall=true').then(res => {\n      setRequestSend(false);\n\n      if (res.status === 200) {\n        toast.success('Cache cleared', {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      } else {\n        toast.error('The is no data available', {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    });\n  };\n\n  if (!isLoaded) {\n    return __jsx(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 904,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 908,\n      columnNumber: 9\n    }\n  }, __jsx(MuiThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 909,\n      columnNumber: 13\n    }\n  }, __jsx(Typography, {\n    component: 'div',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 910,\n      columnNumber: 17\n    }\n  }, (router === null || router === void 0 ? void 0 : (_router$query9 = router.query) === null || _router$query9 === void 0 ? void 0 : _router$query9.sliderOnly) && __jsx(GenericSlider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 911,\n      columnNumber: 51\n    }\n  }), steps && steps.length > 0 && __jsx(Stepper, {\n    activeStep: pageStep,\n    alternativeLabel: true,\n    connector: __jsx(ColorlibConnector, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 913,\n        columnNumber: 84\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 913,\n      columnNumber: 25\n    }\n  }, steps.map((label, index) => {\n    return __jsx(Step, {\n      key: `step-${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 916,\n        columnNumber: 37\n      }\n    }, __jsx(StepLabel, {\n      color: \"secondary\",\n      StepIconComponent: () => getStepsIcons(index, pageStep === index, pageStep > index, pageBuilderType),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 917,\n        columnNumber: 41\n      }\n    }, label));\n  })), pageStep === 0 && !(router !== null && router !== void 0 && (_router$query10 = router.query) !== null && _router$query10 !== void 0 && _router$query10.sliderOnly) && !(router !== null && router !== void 0 && (_router$query11 = router.query) !== null && _router$query11 !== void 0 && _router$query11.assetOnly) && !(router !== null && router !== void 0 && (_router$query12 = router.query) !== null && _router$query12 !== void 0 && _router$query12.faqOnly) && __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 939,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: 'flex-start',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 940,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 941,\n      columnNumber: 37\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: 'flex-start',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 942,\n      columnNumber: 41\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 943,\n      columnNumber: 45\n    }\n  }, __jsx(FormControl, {\n    variant: \"outlined\",\n    style: {\n      marginTop: 16\n    },\n    disabled: router === null || router === void 0 ? void 0 : (_router$query13 = router.query) === null || _router$query13 === void 0 ? void 0 : _router$query13.emailOnly,\n    size: 'small',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 944,\n      columnNumber: 49\n    }\n  }, __jsx(Select, {\n    value: pageBuilderType,\n    onChange: e => setPageBuilderType_(e.target.value),\n    label: \"Select PB Options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 950,\n      columnNumber: 53\n    }\n  }, PB_OPTIONS.map((option, index) => {\n    return __jsx(MenuItem, {\n      value: option.code,\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 957,\n        columnNumber: 65\n      }\n    }, ' ', option.description, ' ');\n  })))))), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 968,\n      columnNumber: 37\n    }\n  }, !(router !== null && router !== void 0 && (_router$query14 = router.query) !== null && _router$query14 !== void 0 && _router$query14.emailOnly) && __jsx(Button, {\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    onClick: handleNew,\n    className: clsx({\n      [classes.actionButton]: true,\n      [classes.newButton]: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 970,\n      columnNumber: 45\n    }\n  }, \"+NEW\"), __jsx(Button, {\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    className: classes.assetButton,\n    onClick: handleAssets,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 984,\n      columnNumber: 41\n    }\n  }, \"ASSETS\"), !(router !== null && router !== void 0 && (_router$query15 = router.query) !== null && _router$query15 !== void 0 && _router$query15.emailOnly) && __jsx(Button, {\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    onClick: handleClearCache,\n    className: classes.assetButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 995,\n      columnNumber: 45\n    }\n  }, \"CLEAR CACHE\")))), isRequestSend && !(router !== null && router !== void 0 && (_router$query16 = router.query) !== null && _router$query16 !== void 0 && _router$query16.sliderOnly) ? __jsx(LoadingSpinner, {\n    style: {\n      color: COLORS.secondary\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1011,\n      columnNumber: 25\n    }\n  }) : __jsx(React.Fragment, null, state.type === 'assets' && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1015,\n      columnNumber: 33\n    }\n  }, pageStep === 0 && __jsx(Home, {\n    onSelectPage: onSelectPage,\n    onSelectWebsite: onSelectWebsite,\n    onSelectEmail: onSelectEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1017,\n      columnNumber: 41\n    }\n  }), pageStep === 1 && __jsx(Style, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1023,\n      columnNumber: 56\n    }\n  }), pageStep === 2 && __jsx(Asset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1024,\n      columnNumber: 56\n    }\n  })), state.type === 'webPage' && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1028,\n      columnNumber: 33\n    }\n  }, pageStep === 0 && __jsx(Home, {\n    onSelectPage: onSelectPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1029,\n      columnNumber: 56\n    }\n  }), pageStep === 1 && __jsx(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1030,\n      columnNumber: 56\n    }\n  }), pageStep === 2 && __jsx(Preview, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1031,\n      columnNumber: 56\n    }\n  })), state.type === 'website' && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1035,\n      columnNumber: 33\n    }\n  }, pageStep === 0 && __jsx(Home, {\n    onSelectWebsite: onSelectWebsite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1036,\n      columnNumber: 56\n    }\n  }), pageStep === 1 && __jsx(WebsitePage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1037,\n      columnNumber: 56\n    }\n  }), pageStep === 2 && __jsx(WebsitePreview, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1038,\n      columnNumber: 56\n    }\n  })), (state.type === 'email' || state.type === 'emailOnly') && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1042,\n      columnNumber: 33\n    }\n  }, pageStep === 0 && __jsx(Home, {\n    onSelectEmail: onSelectEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1043,\n      columnNumber: 56\n    }\n  }), pageStep === 1 && __jsx(EmailDesign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1044,\n      columnNumber: 56\n    }\n  }), pageStep === 2 && __jsx(EmailPreview, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1045,\n      columnNumber: 56\n    }\n  })), state.type === 'assetOnly' && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1049,\n      columnNumber: 33\n    }\n  }, pageStep === 0 && __jsx(Style, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1050,\n      columnNumber: 56\n    }\n  }), pageStep === 1 && __jsx(Asset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1051,\n      columnNumber: 56\n    }\n  })), state.type === 'faqOnly' && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1055,\n      columnNumber: 33\n    }\n  }, pageStep === 0 && __jsx(FAQDesign, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1056,\n      columnNumber: 56\n    }\n  }), pageStep === 1 && __jsx(FAQPreview, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1057,\n      columnNumber: 56\n    }\n  })), !(router !== null && router !== void 0 && (_router$query17 = router.query) !== null && _router$query17 !== void 0 && _router$query17.sliderOnly) && __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1061,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: classes.actionButtons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1062,\n      columnNumber: 37\n    }\n  }, pageStep !== 0 && __jsx(Button, {\n    onClick: handleBack,\n    variant: \"contained\",\n    size: \"small\",\n    \"aria-label\": \"add\",\n    className: classes.backButton,\n    style: {\n      marginRight: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1064,\n      columnNumber: 45\n    }\n  }, \"BACK\"), __jsx(Button, {\n    onClick: handleNext,\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    className: classes.actionButton,\n    style: {\n      marginRight: 24\n    },\n    disabled: handleNextDisable(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1075,\n      columnNumber: 41\n    }\n  }, pageStep === steps.length - 1 ? 'SAVE' : 'NEXT'), renderFinal))))), __jsx(ToastContainer, {\n    autoClose: 8000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1095,\n      columnNumber: 13\n    }\n  }));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.pageBuilder\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n  pushToState: (stateType, stateName, value) => dispatch(pushToState(stateType, stateName, value)),\n  deleteFromState: (stateType, stateName, value) => dispatch(deleteFromState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageBuilderStepper);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderStepper.js"],"names":["React","useEffect","useState","useContext","connect","pushToState","deleteFromState","setToState","updateState","makeStyles","createMuiTheme","MuiThemeProvider","withStyles","Typography","Grid","Container","Button","Stepper","Step","StepLabel","StepConnector","FormControl","WebAssetIcon","WebIcon","EmailIcon","HomeIcon","BrushIcon","VisibilityIcon","HelpIcon","MenuBookIcon","Select","MenuItem","clsx","Page","Style","Asset","Final","Preview","Home","WebsitePage","WebsitePreview","WebsiteFinal","EmailDesign","EmailPreview","EmailSave","LoadingSpinner","GenericSlider","FAQDesign","FAQPreview","FAQSave","ToastContainer","toast","COLORS","SAVED_SUCCESS","PB_OPTIONS","WebCmsGlobal","isErrorMsg","OREST_ENDPOINT","ViewList","Insert","Patch","UseOrest","useRouter","axios","useStyles","theme","actionButtons","display","justifyContent","marginTop","spacing","actionButton","borderRadius","marginBottom","backgroundColor","secondary","newButton","float","assetButton","marginRight","backButton","disabled","pointerEvents","opacity","palette","primary","main","dark","light","contrastText","useColorStepIconStyle","root","zIndex","color","width","height","alignItems","iconSize","active","boxShadow","completed","ColorlibConnector","alternativeLabel","top","left","right","background","line","border","getStepsIcons","step","isActive","isCompleted","pageBuilderType","icon_classes","icons","PageBuilderStepper","props","state","classes","renderFinal","setRenderFinal","setPageBuilderType","isWebPageSelected","setWebPageSelected","isWebsiteSelected","setWebsiteSelected","isEmailSelected","setEmailSelected","isLoaded","setIsLoaded","isRequestSend","setRequestSend","url","setUrl","steps","pageStep","emptyPage","id","sections","GENERAL_SETTINGS","token","router","companyId","query","companyID","authToken","window","location","port","protocol","hostname","emailOnly","apiUrl","OREST_URL","endpoint","RAFILE","params","hotelrefno","Number","then","res","data","length","assetsData","JSON","parse","Buffer","from","filedata","toString","colors","slider","phone","email","facebook","twitter","instagram","linkedin","assets","handleAssetLogoUrlChange","images","Object","keys","logo","altLogo","logoBanner","favIcon","poweredBy","thumbnail","INFO","LOGIN","method","status","hotelmid","retErr","error","errorMsg","position","POSITION","TOP_RIGHT","success","code","toLowerCase","issuperhotel","issuperuser","RALANG","map","lang","description","defaultLang","sliderOnly","assetOnly","faqOnly","resetSteps","setSteps","index","webPageSteps","element","emailSteps","websiteSteps","assetSteps","assetOnlySteps","faqSteps","faqOnlySteps","handleNext","handleSave","handleBack","handleNextDisable","type","hasColors","hasAssets","page","body","footerOnly","website","footer","header","pages","faq","meta","title","img","setPageBuilderType_","value","emptyEmail","handleNew","resetFinal","handleSaveAssets","onSelectEmail","masterid","res1","HOTELMID","filename","filetype","stringify","isorsactive","res2","redisStdJson","gid","REQUEST_OPTIONS","headers","Authorization","image","getImageData","replace","icon","option","Promise","resv","response","catch","console","log","onSelectPage","isSelected","handleAssets","onSelectWebsite","handleClearCache","get","label","e","target","mapStateToProps","formReducer","pageBuilder","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["//imports from react\nimport React, { useEffect, useState, useContext } from 'react'\n//redux imports\nimport { connect } from 'react-redux'\nimport { pushToState, deleteFromState, setToState, updateState } from '../../state/actions'\n//material imports\nimport { makeStyles, createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles'\nimport { withStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Container from '@material-ui/core/Container'\nimport Button from '@material-ui/core/Button'\nimport Stepper from '@material-ui/core/Stepper'\nimport Step from '@material-ui/core/Step'\nimport StepLabel from '@material-ui/core/StepLabel'\nimport StepConnector from '@material-ui/core/StepConnector'\nimport FormControl from '@material-ui/core/FormControl'\nimport WebAssetIcon from '@material-ui/icons/WebAsset'\nimport WebIcon from '@material-ui/icons/Web'\nimport EmailIcon from '@material-ui/icons/Email'\nimport HomeIcon from '@material-ui/icons/Home'\nimport BrushIcon from '@material-ui/icons/Brush'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport HelpIcon from '@material-ui/icons/Help'\nimport MenuBookIcon from '@material-ui/icons/MenuBook'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport clsx from 'clsx'\n//custom components imports\nimport Page from './PageBuilderSteps/steps/webpage/Page'\nimport Style from './PageBuilderSteps/steps/assets/Style'\nimport Asset from './PageBuilderSteps/steps/assets/Asset'\nimport Final from './PageBuilderSteps/steps/webpage/Final'\nimport Preview from './PageBuilderSteps/steps/webpage/Preview'\nimport Home from './PageBuilderSteps/steps/home/Home'\nimport WebsitePage from './PageBuilderSteps/steps/website/Page'\nimport WebsitePreview from './PageBuilderSteps/steps/website/Preview'\nimport WebsiteFinal from './PageBuilderSteps/steps/website/Final'\nimport EmailDesign from './PageBuilderSteps/steps/email/EmailDesign'\nimport EmailPreview from './PageBuilderSteps/steps/email/EmailPreview'\nimport EmailSave from './PageBuilderSteps/steps/email/EmailSave'\nimport LoadingSpinner from '../LoadingSpinner'\nimport GenericSlider from './PageBuilderSteps/components/slider'\nimport FAQDesign from './PageBuilderSteps/steps/faq/FaqDesign'\nimport FAQPreview from './PageBuilderSteps/steps/faq/FAQPreview'\nimport FAQSave from './PageBuilderSteps/steps/faq/FAQSave'\n// imports for toaster\nimport { ToastContainer, toast } from 'react-toastify'\n//constants imports\nimport { COLORS, SAVED_SUCCESS, PB_OPTIONS } from './PageBuilderSteps/constants/index'\nimport WebCmsGlobal from 'components/webcms-global'\nimport { isErrorMsg, OREST_ENDPOINT } from '../../model/orest/constants'\nimport { ViewList, Insert, Patch, UseOrest } from '@webcms/orest'\nimport { useRouter } from 'next/router'\nimport axios from 'axios'\n\nconst useStyles = makeStyles((theme) => ({\n    actionButtons: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        marginTop: theme.spacing(2),\n    },\n    actionButton: {\n        borderRadius: 20,\n        marginBottom: 16,\n        backgroundColor: COLORS?.secondary,\n    },\n    newButton: {\n        marginTop: theme.spacing(2),\n        float: 'right',\n        backgroundColor: COLORS?.secondary,\n    },\n    assetButton: {\n        borderRadius: 20,\n        float: 'right',\n        marginTop: theme.spacing(2),\n        marginRight: theme.spacing(1),\n        // backgroundColor: COLORS.secondary\n    },\n    backButton: {\n        borderRadius: 20,\n        marginBottom: 16,\n    },\n    disabled: {\n        pointerEvents: 'none',\n        opacity: 0.5,\n    },\n}))\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: COLORS?.secondary,\n            dark: COLORS?.primary,\n            light: COLORS?.secondary,\n            contrastText: 'white',\n        },\n    },\n})\n\nconst useColorStepIconStyle = makeStyles(() => ({\n    root: {\n        backgroundColor: '#ccc',\n        zIndex: 1,\n        color: '#fff',\n        width: 65,\n        height: 65,\n        display: 'flex',\n        borderRadius: '50%',\n        justifyContent: 'center',\n        alignItems: 'center',\n        '& img': {\n            width: 35,\n        },\n    },\n    iconSize: {\n        height: 50,\n        width: 50,\n    },\n    active: {\n        backgroundColor: COLORS?.secondary,\n        boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)',\n    },\n    completed: {\n        backgroundColor: COLORS?.primary,\n        color: '#fff',\n    },\n}))\n\nconst ColorlibConnector = withStyles({\n    alternativeLabel: {\n        top: 30,\n        left: 'calc(-50% + 10px)',\n        right: 'calc(50% + 10px)',\n    },\n    active: {\n        '& $line': {\n            background: 'transparent linear-gradient(270deg, #269DD4 0%, #0F4571 100%) 0% 0% no-repeat padding-box',\n        },\n    },\n    completed: {\n        '& $line': {\n            backgroundColor: COLORS.primary,\n        },\n    },\n    line: {\n        height: 4,\n        border: 0,\n        backgroundColor: '#eaeaf0',\n        borderRadius: 1,\n    },\n})(StepConnector)\n\nfunction getStepsIcons(step, isActive, isCompleted, pageBuilderType) {\n    const icon_classes = useColorStepIconStyle()\n    let icons = {}\n    switch (pageBuilderType) {\n        case 'webPage':\n            icons = {\n                0: <HomeIcon className={icon_classes.iconSize} />,\n                1: <MenuBookIcon className={icon_classes.iconSize} />,\n                2: <VisibilityIcon className={icon_classes.iconSize} />,\n            }\n            break\n        case 'website':\n            icons = {\n                0: <HomeIcon className={icon_classes.iconSize} />,\n                1: <WebIcon className={icon_classes.iconSize} />,\n                2: <VisibilityIcon className={icon_classes.iconSize} />,\n            }\n            break\n        case 'email':\n            icons = {\n                0: <HomeIcon className={icon_classes.iconSize} />,\n                1: <EmailIcon className={icon_classes.iconSize} />,\n                2: <VisibilityIcon className={icon_classes.iconSize} />,\n            }\n            break\n        case 'faqOnly':\n            icons = {\n                0: <HelpIcon className={icon_classes.iconSize} />,\n                1: <VisibilityIcon className={icon_classes.iconSize} />,\n            }\n            break\n        case 'assets':\n            icons = {\n                0: <HomeIcon className={icon_classes.iconSize} />,\n                1: <BrushIcon className={icon_classes.iconSize} />,\n                2: <WebAssetIcon className={icon_classes.iconSize} />,\n            }\n            break\n        case 'assetOnly':\n            icons = {\n                0: <BrushIcon className={icon_classes.iconSize} />,\n                1: <WebAssetIcon className={icon_classes.iconSize} />,\n            }\n            break\n        default:\n            return icons\n    }\n\n    return (\n        <div\n            className={clsx(icon_classes.root, {\n                [icon_classes.active]: isActive,\n                [icon_classes.completed]: isCompleted,\n            })}\n        >\n            {icons[step]}\n        </div>\n    )\n}\n\nconst PageBuilderStepper = (props) => {\n    const { state, updateState, deleteFromState, pushToState } = props\n\n    const classes = useStyles()\n\n    //local state\n    const [renderFinal, setRenderFinal] = React.useState('')\n    const [pageBuilderType, setPageBuilderType] = useState('')\n    const [isWebPageSelected, setWebPageSelected] = useState(false)\n    const [isWebsiteSelected, setWebsiteSelected] = useState(false)\n    const [isEmailSelected, setEmailSelected] = useState(false)\n    const [isLoaded, setIsLoaded] = useState(false)\n    const [isRequestSend, setRequestSend] = useState(false)\n    const [url, setUrl] = useState('')\n    const steps = state.steps\n    const pageStep = state.pageStep\n    const emptyPage = {\n        id: '',\n        sections: [],\n    }\n\n    const { GENERAL_SETTINGS, token } = useContext(WebCmsGlobal)\n    const router = useRouter()\n    const companyId = router?.query?.companyID\n    const authToken = token || router.query.authToken\n\n    useEffect(() => {\n        //setting url\n        if (window && window.location && window.location.port) {\n            setUrl(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`)\n        } else {\n            setUrl(`${window.location.protocol}//${window.location.hostname}`)\n        }\n        if (router?.query?.emailOnly) {\n            updateState('pageBuilder', 'previousStep', 0)\n            updateState('pageBuilder', 'pageStep', 1)\n        }\n    }, [])\n\n    useEffect(() => {\n        setRequestSend(true)\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RAFILE,\n            token: authToken,\n            params: {\n                query: `code:HCMASSET`,\n                hotelrefno: Number(companyId),\n            },\n        }).then(async (res) => {\n            setRequestSend(false)\n            if (res.data && res.data.data && res.data.data.length > 0) {\n                const assetsData = JSON.parse(Buffer.from(res.data.data[0].filedata, 'base64').toString('utf-8'))\n                if (!assetsData?.colors?.slider) {\n                    assetsData.colors['slider'] = {\n                        main: '',\n                        light: '',\n                        dark: '',\n                        contrastText: '',\n                    }\n                }\n                if (!assetsData?.icons) {\n                    assetsData['icons'] = {\n                        phone: '',\n                        email: '',\n                        facebook: '',\n                        twitter: '',\n                        instagram: '',\n                        linkedin: '',\n                    }\n                }\n                updateState('pageBuilder', 'assets', assetsData)\n                const assets = await handleAssetLogoUrlChange(\n                    JSON.parse(Buffer.from(res.data.data[0].filedata, 'base64').toString('utf-8'))\n                )\n                const images = assets?.images;\n                const icons = assets?.icons;\n                if (Object.keys(images).length > 0) {\n                    updateState('pageBuilder', 'logoUrl', images?.logo);\n                    updateState('pageBuilder', 'altLogoUrl', images?.altLogo);\n                    updateState('pageBuilder', 'logoBanner', images?.logoBanner);\n                    updateState('pageBuilder', 'faviconUrl', images?.favIcon);\n                    updateState('pageBuilder', 'backgroundUrl', images?.background);\n                    updateState('pageBuilder', 'poweredByUrl', images?.poweredBy);\n                    updateState('pageBuilder', 'thumbnailUrl', images?.thumbnail);\n                }\n                if (icons && Object.keys(icons).length > 0) {\n                    updateState('pageBuilder', 'phoneIconUrl', icons?.phone);\n                    updateState('pageBuilder', 'emailIconUrl', icons?.email);\n                    updateState('pageBuilder', 'facebookIconUrl', icons?.facebook);\n                    updateState('pageBuilder', 'twitterIconUrl', icons?.twitter);\n                    updateState('pageBuilder', 'instagramIconUrl', icons?.instagram);\n                    updateState('pageBuilder', 'linkedinIconUrl', icons?.linkedin);\n                }\n            }\n        })\n\n        UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.INFO + '/' + OREST_ENDPOINT.LOGIN,\n            token: authToken,\n            method: 'get',\n        }).then((res) => {\n            if (res.status === 200 && res.data && res.data.data && res.data.data.hotelmid) {\n                updateState('pageBuilder', 'hotelMid', res.data.data.hotelmid)\n            } else {\n                const retErr = isErrorMsg(res)\n                toast.error(retErr.errorMsg, {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            }\n        })\n        //for default language\n        UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'sett/lang/local',\n            token: authToken,\n            method: 'get',\n        }).then((res) => {\n            if (res.status === 200 && res.data && res.data.success && res.data.data) {\n                if (res?.data?.data?.code && res?.data?.data?.id) {\n                    updateState('pageBuilder', 'defaultLang', res.data.data?.code?.toLowerCase())\n                    updateState('pageBuilder', 'defaultLangId', res.data.data?.id)\n                } else\n                    toast.error('Default language is not set yet!', {\n                        position: toast.POSITION.TOP_RIGHT,\n                    })\n            } else {\n                const retErr = isErrorMsg(res)\n                toast.error(retErr.errorMsg, {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            }\n        })\n        //request for logininfo to get super hotel\n        UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: 'info/login',\n            token: authToken,\n            method: 'get',\n        }).then((res) => {\n            if (res?.status === 200 && res?.data?.data) {\n                updateState('pageBuilder', 'isSuperHotel', res.data.data?.issuperhotel)\n                updateState('pageBuilder', 'isSuperUser', res.data.data?.issuperuser)\n            } else {\n                const retErr = isErrorMsg(res)\n                toast.error(retErr.errorMsg, {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            }\n        })\n    }, [])\n\n    useEffect(() => {\n        // getting languages from service\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RALANG,\n            token: authToken,\n            params: {\n                hotelrefno: Number(companyId),\n            },\n        }).then((res) => {\n            if (res?.status === 200 && res?.data?.data?.length > 0) {\n                res.data.data.map((lang) => {\n                    pushToState(\n                        'pageBuilder',\n                        ['languages'],\n                        [\n                            {\n                                id: lang?.id,\n                                code: lang?.code?.toLowerCase(),\n                                description: lang?.description,\n                            },\n                        ]\n                    )\n                    if (lang.code.toLowerCase() === state.defaultLang) {\n                        updateState('pageBuilder', 'langId', lang.id)\n                        updateState('pageBuilder', 'langCode', lang.code.toLowerCase())\n                    }\n                })\n            }\n        })\n    }, [state.defaultLang])\n\n    useEffect(() => {\n        if (pageStep === 0) {\n            if (router?.query?.sliderOnly) {\n                updateState('pageBuilder', 'type', 'generic-slider')\n            } else if (router?.query?.emailOnly) {\n                updateState('pageBuilder', 'type', 'emailOnly')\n                setPageBuilderType('email')\n            } else if (router?.query?.assetOnly) {\n                updateState('pageBuilder', 'type', 'assetOnly')\n                setPageBuilderType('assetOnly')\n            } else if (router?.query?.faqOnly) {\n                updateState('pageBuilder', 'type', 'faqOnly')\n                setPageBuilderType('faqOnly')\n            } else {\n                updateState('pageBuilder', 'type', 'webPage')\n                setPageBuilderType('webPage')\n            }\n        }\n    }, [pageStep])\n\n    useEffect(() => {\n        setIsLoaded(true)\n        resetSteps(pageBuilderType)\n        setSteps(pageBuilderType)\n    }, [pageBuilderType])\n\n    const resetSteps = () => {\n        const steps = [2, 1, 0]\n        steps.map((index) => deleteFromState('pageBuilder', ['steps'], [index, 1]))\n    }\n\n    const setSteps = (pageBuilderType) => {\n        switch (pageBuilderType) {\n            case 'webPage':\n                const webPageSteps = ['Home', 'Page', 'Preview']\n                webPageSteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            case 'email':\n                const emailSteps = ['Home', 'Design', 'Preview']\n                emailSteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            case 'website':\n                const websiteSteps = ['Home', 'Design', 'Preview']\n                websiteSteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            case 'assets':\n                const assetSteps = ['Home', 'Style', 'Assets']\n                assetSteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            case 'assetOnly':\n                const assetOnlySteps = ['Style', 'Assets']\n                assetOnlySteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            case 'faq':\n                const faqSteps = ['Home', \"FAQ's\", 'Preview']\n                faqSteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            case 'faqOnly':\n                const faqOnlySteps = ['Design', 'Preview']\n                faqOnlySteps.map((element) => {\n                    pushToState('pageBuilder', ['steps'], [element])\n                })\n                break\n            default:\n                return\n        }\n    }\n\n    const handleNext = () => {\n        if (pageStep === steps.length - 1) {\n            handleSave()\n        } else {\n            updateState('pageBuilder', 'previousStep', pageStep)\n            updateState('pageBuilder', 'pageStep', pageStep + 1)\n        }\n    }\n\n    const handleBack = () => {\n        updateState('pageBuilder', 'previousStep', pageStep)\n        updateState('pageBuilder', 'pageStep', pageStep - 1)\n    }\n\n    const handleNextDisable = () => {\n        switch (state.type) {\n            case 'assets':\n                if (pageStep === 1) {\n                    const colors = hasColors()\n                    if (colors) return false\n                    else return true\n                } else if (pageStep === 2) {\n                    const assets = hasAssets()\n                    if (assets) return false\n                    else return true\n                }\n            case 'webPage':\n                if (pageStep === 0) {\n                    if (isWebPageSelected) {\n                        return false\n                    } else {\n                        return true\n                    }\n                } else if (pageStep === 1) {\n                    if (state.page.sections.length === 0) {\n                        return true\n                    } else {\n                        return false\n                    }\n                } else {\n                    return false\n                }\n            case 'email':\n                if (pageStep === 0) {\n                    if (isEmailSelected) return false\n                    else return true\n                }\n                if (pageStep === 1) {\n                    if (state.email.body.length === 0) return true\n                    else return false\n                }\n                return false\n            case 'emailOnly':\n                if (pageStep === 1) {\n                    if (state.email.body.length === 0) return true\n                    else return false\n                }\n                return false\n            case 'website':\n                if (pageStep === 0) {\n                    if (isWebsiteSelected) return false\n                    else return true\n                }\n                if (pageStep === 1) {\n                    if (state.footerOnly) {\n                        if (Object.keys(state.website.footer).length === 0) return true\n                        else return false\n                    } else {\n                        if (\n                            Object.keys(state.website.header).length === 0 ||\n                            Object.keys(state.website.footer).length === 0 ||\n                            state.website.pages.length === 0\n                        )\n                            return true\n                        else return false\n                    }\n                }\n                return false\n            case 'faqOnly':\n                if (state.faq.length > 0) return false\n                else return true\n            default:\n                return\n        }\n    }\n\n    const hasColors = () => {\n        for (const color in state?.assets?.colors) {\n            for (const type in state?.assets?.colors[color]) {\n                if (!state?.assets?.colors[color][type]) return false\n            }\n        }\n        return true\n    }\n\n    const hasAssets = () => {\n        if (!state?.assets?.meta?.title) return false\n        for (const img in state?.assets?.images) {\n            if (!state?.assets?.images[img]) return false\n        }\n        return true\n    }\n\n    const setPageBuilderType_ = (value) => {\n        setPageBuilderType(value)\n        updateState('pageBuilder', 'type', value)\n        updateState('pageBuilder', 'code', '')\n        if (value === 'webPage') {\n            updateState('pageBuilder', 'page', emptyPage)\n        } else if (value === 'website') {\n            const website = {\n                header: {},\n                footer: {},\n                pages: [],\n            }\n            updateState('pageBuilder', 'website', website)\n        } else if (value === 'email') {\n            const emptyEmail = {\n                header: {},\n                footer: {},\n                body: [],\n            }\n            updateState('pageBuilder', 'email', emptyEmail)\n        }\n    }\n\n    const handleNew = () => {\n        updateState('pageBuilder', 'langCode', state.defaultLang)\n        updateState('pageBuilder', 'langsFile', {})\n        updateState('pageBuilder', 'isTemplate', false)\n        updateState('pageBuilder', 'previousStep', pageStep)\n        updateState('pageBuilder', 'pageStep', pageStep + 1)\n        if (pageBuilderType === 'webPage') {\n            updateState('pageBuilder', 'code', 'NEW PAGE')\n            updateState('pageBuilder', 'page', emptyPage)\n            setWebPageSelected(false)\n        }\n        if (pageBuilderType === 'website') {\n            const website = {\n                header: {},\n                footer: {},\n                pages: [],\n            }\n            updateState('pageBuilder', 'code', 'NEW WEBSITE')\n            updateState('pageBuilder', 'footerOnly', false)\n            updateState('pageBuilder', 'website', website)\n            setWebsiteSelected(false)\n        }\n        if (pageBuilderType === 'email') {\n            const email = {\n                header: {},\n                footer: {},\n                body: [],\n            }\n            updateState('pageBuilder', 'email', email)\n            updateState('pageBuilder', 'code', 'NEW EMAIL')\n            setEmailSelected(false)\n        }\n    }\n\n    const resetFinal = () => {\n        setRenderFinal('')\n    }\n\n    const handleSave = () => {\n        if (state.type === 'assets' || state.type === 'assetOnly') {\n            handleSaveAssets()\n        } else if (state.type === 'webPage') {\n            setRenderFinal(<Final isWebPageSelected={isWebPageSelected} dialogTitle={'Save'} resetFinal={resetFinal} />)\n        } else if (state.type === 'website') {\n            setRenderFinal(\n                <WebsiteFinal isWebsiteSelected={isWebsiteSelected} dialogTitle={'Save'} resetFinal={resetFinal} />\n            )\n        } else if (state.type === 'email') {\n            setRenderFinal(\n                <EmailSave\n                    dialogTitle={'Save'}\n                    resetFinal={resetFinal}\n                    isEmailSelected={isEmailSelected}\n                    onSelectEmail={onSelectEmail}\n                />\n            )\n        } else if (state.type === 'emailOnly') {\n            if (isEmailSelected) {\n                setRenderFinal(\n                    <EmailSave\n                        dialogTitle={'Save'}\n                        resetFinal={resetFinal}\n                        isEmailSelected={!isEmailSelected}\n                        onSelectEmail={onSelectEmail}\n                    />\n                )\n            } else {\n                if (router?.query?.masterid) {\n                    ViewList({\n                        apiUrl: GENERAL_SETTINGS.OREST_URL,\n                        endpoint: OREST_ENDPOINT.RAFILE,\n                        token: authToken,\n                        params: {\n                            hotelrefno: Number(companyId),\n                            query: `masterid::${router?.query?.masterid},filetype::PB-EMAIL`,\n                        },\n                    }).then((res) => {\n                        if (res?.status === 200 && res?.data) {\n                            if (res?.data?.data?.length > 0) {\n                                setRenderFinal(\n                                    <EmailSave\n                                        dialogTitle={'Save'}\n                                        resetFinal={resetFinal}\n                                        isEmailSelected={true}\n                                        onSelectEmail={onSelectEmail}\n                                    />\n                                )\n                            } else {\n                                setRenderFinal(\n                                    <EmailSave\n                                        dialogTitle={'Save'}\n                                        resetFinal={resetFinal}\n                                        isEmailSelected={false}\n                                        onSelectEmail={onSelectEmail}\n                                    />\n                                )\n                            }\n                        } else {\n                            const retErr = isErrorMsg(res)\n                            toast.error(retErr.errorMsg, {\n                                position: toast.POSITION.TOP_RIGHT,\n                            })\n                        }\n                    })\n                }\n            }\n        } else if (state.type === 'faqOnly') {\n            setRenderFinal(<FAQSave resetFinal={resetFinal} />)\n        }\n    }\n\n    const handleSaveAssets = () => {\n        setRequestSend(true)\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RAFILE,\n            token: authToken,\n            params: {\n                query: `code:HCMASSET`,\n                hotelrefno: Number(companyId),\n            },\n        }).then((res1) => {\n            if (res1.data && res1.data.data && res1.data.data.length === 0) {\n                Insert({\n                    // insert header into rafile\n                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                    endpoint: OREST_ENDPOINT.RAFILE,\n                    token: authToken,\n                    data: {\n                        code: `HCMASSET`,\n                        masterid: GENERAL_SETTINGS.HOTELMID,\n                        filename: 'HCMASSET',\n                        filetype: 'HCMASSET',\n                        filedata: Buffer.from(JSON.stringify(state?.assets)).toString('base64'),\n                        isorsactive: true,\n                        hotelrefno: Number(companyId),\n                    },\n                }).then(async (res2) => {\n                    setRequestSend(false)\n                    if (res2.status === 200 && res2.data.data) {\n                        const redisStdJson = state.redisStdJson\n                        redisStdJson.assets = await handleAssetLogoUrlChange(\n                            JSON.parse(Buffer.from(res2.data.data.filedata, 'base64').toString('utf-8'))\n                        )\n                        toast.success(SAVED_SUCCESS, {\n                            position: toast.POSITION.TOP_RIGHT,\n                        })\n                        updateState('pageBuilder', 'previousStep', 0)\n                        updateState('pageBuilder', 'pageStep', 0)\n                    }\n                })\n            } else {\n                Patch({\n                    // update header into rafile\n                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                    endpoint: OREST_ENDPOINT.RAFILE,\n                    token: authToken,\n                    gid: res1.data.data[0].gid,\n                    params: {\n                        hotelrefno: Number(companyId),\n                    },\n                    data: {\n                        filedata: Buffer.from(JSON.stringify(state?.assets)).toString('base64'),\n                        isorsactive: true,\n                        hotelrefno: Number(companyId),\n                    },\n                }).then(async (res2) => {\n                    setRequestSend(false)\n                    if (res2.status === 200 && res2.data.data) {\n                        const redisStdJson = state.redisStdJson\n                        redisStdJson.assets = await handleAssetLogoUrlChange(\n                            JSON.parse(Buffer.from(res2.data.data.filedata, 'base64').toString('utf-8'))\n                        )\n                        toast.success(SAVED_SUCCESS, {\n                            position: toast.POSITION.TOP_RIGHT,\n                        })\n                        updateState('pageBuilder', 'previousStep', 0)\n                        updateState('pageBuilder', 'pageStep', 0)\n                    }\n                })\n            }\n        })\n    }\n\n    const handleAssetLogoUrlChange = async (assets) => {\n        setRequestSend(true)\n        const images = assets?.images;\n        const icons = assets?.icons;\n        for (const logo in images) {\n            if (images[logo]) {\n                const REQUEST_OPTIONS = {\n                    url: GENERAL_SETTINGS.OREST_URL + '/rafile/view/list',\n                    method: 'get',\n                    headers: {\n                        Authorization: `Bearer ${authToken}`,\n                        'Content-Type': 'application/json',\n                    },\n                    params: {\n                        query: 'gid::' + images[logo],\n                        hotelrefno: Number(companyId),\n                    },\n                }\n                const image = await getImageData(REQUEST_OPTIONS)\n                let url = image?.url?.replace('/var/otello', '').replace('/public', '')\n                assets.images[logo] = url\n            }\n        }\n        for (const icon in icons) {\n            if (icons[icon]) {\n                const REQUEST_OPTIONS = {\n                    url: GENERAL_SETTINGS.OREST_URL + '/rafile/view/list',\n                    method: 'get',\n                    headers: {\n                        Authorization: `Bearer ${authToken}`,\n                        'Content-Type': 'application/json',\n                    },\n                    params: {\n                        query: 'gid::' + icons[icon],\n                        hotelrefno: Number(companyId),\n                    },\n                }\n                const image = await getImageData(REQUEST_OPTIONS)\n                let url = image?.url?.replace('/var/otello', '').replace('/public', '')\n                assets.icons[icon] = url\n            }\n        }\n        setRequestSend(false)\n        return assets\n    }\n\n    const getImageData = (option) => {\n        return new Promise(async (resv) => {\n            return await axios(option)\n                .then(async (response) => {\n                    if (response.status === 200) {\n                        if (response?.data?.data?.length > 0) {\n                            resv(response.data.data[0])\n                        } else {\n                            resv(null)\n                        }\n                    } else {\n                        const retErr = isErrorMsg(response)\n                        toast.error(retErr.errorMsg, {\n                            position: toast.POSITION.TOP_RIGHT,\n                        })\n                        resv(null)\n                    }\n                })\n                .catch((error) => {\n                    console.log(error)\n                    resv(error.response || { status: 0 })\n                })\n        })\n    }\n\n    const onSelectPage = (isSelected) => {\n        setWebPageSelected(isSelected)\n    }\n\n    const handleAssets = () => {\n        const website = {\n            header: {},\n            footer: {},\n            pages: [],\n        }\n        setPageBuilderType_('assets')\n        updateState('pageBuilder', 'code', '')\n        updateState('pageBuilder', 'page', emptyPage)\n        updateState('pageBuilder', 'website', website)\n        updateState('pageBuilder', 'previousStep', pageStep)\n        updateState('pageBuilder', 'pageStep', pageStep + 1)\n    }\n\n    const onSelectWebsite = (isSelected) => {\n        setWebsiteSelected(isSelected)\n    }\n\n    const onSelectEmail = (isSelected) => {\n        setEmailSelected(isSelected)\n    }\n\n    const handleClearCache = () => {\n        // clear cache from redis\n        setRequestSend(true)\n        axios.get(url + '/?clearall=true').then((res) => {\n            setRequestSend(false)\n            if (res.status === 200) {\n                toast.success('Cache cleared', {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            } else {\n                toast.error('The is no data available', {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            }\n        })\n    }\n\n    if (!isLoaded) {\n        return <LoadingSpinner />\n    }\n\n    return (\n        <React.Fragment>\n            <MuiThemeProvider theme={theme}>\n                <Typography component={'div'}>\n                    {router?.query?.sliderOnly && <GenericSlider />}\n                    {steps && steps.length > 0 && (\n                        <Stepper activeStep={pageStep} alternativeLabel connector={<ColorlibConnector />}>\n                            {steps.map((label, index) => {\n                                return (\n                                    <Step key={`step-${index}`}>\n                                        <StepLabel\n                                            color=\"secondary\"\n                                            StepIconComponent={() =>\n                                                getStepsIcons(\n                                                    index,\n                                                    pageStep === index,\n                                                    pageStep > index,\n                                                    pageBuilderType\n                                                )\n                                            }\n                                        >\n                                            {label}\n                                        </StepLabel>\n                                    </Step>\n                                )\n                            })}\n                        </Stepper>\n                    )}\n                    {pageStep === 0 &&\n                        !router?.query?.sliderOnly &&\n                        !router?.query?.assetOnly &&\n                        !router?.query?.faqOnly && (\n                            <Container>\n                                <Grid container direction=\"row\" justify={'flex-start'}>\n                                    <Grid item xs={8}>\n                                        <Grid container justify={'flex-start'}>\n                                            <Grid item xs={12}>\n                                                <FormControl\n                                                    variant=\"outlined\"\n                                                    style={{ marginTop: 16 }}\n                                                    disabled={router?.query?.emailOnly}\n                                                    size={'small'}\n                                                >\n                                                    <Select\n                                                        value={pageBuilderType}\n                                                        onChange={(e) => setPageBuilderType_(e.target.value)}\n                                                        label=\"Select PB Options\"\n                                                    >\n                                                        {PB_OPTIONS.map((option, index) => {\n                                                            return (\n                                                                <MenuItem value={option.code} key={index}>\n                                                                    {' '}\n                                                                    {option.description}{' '}\n                                                                </MenuItem>\n                                                            )\n                                                        })}\n                                                    </Select>\n                                                </FormControl>\n                                            </Grid>\n                                        </Grid>\n                                    </Grid>\n                                    <Grid item xs={4}>\n                                        {!router?.query?.emailOnly && (\n                                            <Button\n                                                variant=\"contained\"\n                                                size=\"small\"\n                                                color=\"primary\"\n                                                aria-label=\"add\"\n                                                onClick={handleNew}\n                                                className={clsx({\n                                                    [classes.actionButton]: true,\n                                                    [classes.newButton]: true,\n                                                })}\n                                            >\n                                                +NEW\n                                            </Button>\n                                        )}\n                                        <Button\n                                            variant=\"contained\"\n                                            size=\"small\"\n                                            color=\"primary\"\n                                            aria-label=\"add\"\n                                            className={classes.assetButton}\n                                            onClick={handleAssets}\n                                        >\n                                            ASSETS\n                                        </Button>\n                                        {!router?.query?.emailOnly && (\n                                            <Button\n                                                variant=\"contained\"\n                                                size=\"small\"\n                                                color=\"primary\"\n                                                aria-label=\"add\"\n                                                onClick={handleClearCache}\n                                                className={classes.assetButton}\n                                            >\n                                                CLEAR CACHE\n                                            </Button>\n                                        )}\n                                    </Grid>\n                                </Grid>\n                            </Container>\n                        )}\n                    {isRequestSend && !router?.query?.sliderOnly ? (\n                        <LoadingSpinner style={{ color: COLORS.secondary }} />\n                    ) : (\n                        <>\n                            {state.type === 'assets' && (\n                                <div>\n                                    {pageStep === 0 && (\n                                        <Home\n                                            onSelectPage={onSelectPage}\n                                            onSelectWebsite={onSelectWebsite}\n                                            onSelectEmail={onSelectEmail}\n                                        />\n                                    )}\n                                    {pageStep === 1 && <Style />}\n                                    {pageStep === 2 && <Asset />}\n                                </div>\n                            )}\n                            {state.type === 'webPage' && (\n                                <div>\n                                    {pageStep === 0 && <Home onSelectPage={onSelectPage} />}\n                                    {pageStep === 1 && <Page />}\n                                    {pageStep === 2 && <Preview />}\n                                </div>\n                            )}\n                            {state.type === 'website' && (\n                                <div>\n                                    {pageStep === 0 && <Home onSelectWebsite={onSelectWebsite} />}\n                                    {pageStep === 1 && <WebsitePage />}\n                                    {pageStep === 2 && <WebsitePreview />}\n                                </div>\n                            )}\n                            {(state.type === 'email' || state.type === 'emailOnly') && (\n                                <div>\n                                    {pageStep === 0 && <Home onSelectEmail={onSelectEmail} />}\n                                    {pageStep === 1 && <EmailDesign />}\n                                    {pageStep === 2 && <EmailPreview />}\n                                </div>\n                            )}\n                            {state.type === 'assetOnly' && (\n                                <div>\n                                    {pageStep === 0 && <Style />}\n                                    {pageStep === 1 && <Asset />}\n                                </div>\n                            )}\n                            {state.type === 'faqOnly' && (\n                                <div>\n                                    {pageStep === 0 && <FAQDesign />}\n                                    {pageStep === 1 && <FAQPreview />}\n                                </div>\n                            )}\n                            {!router?.query?.sliderOnly && (\n                                <Grid container direction=\"row\" justify=\"flex-end\" alignItems=\"flex-end\">\n                                    <div className={classes.actionButtons}>\n                                        {pageStep !== 0 && (\n                                            <Button\n                                                onClick={handleBack}\n                                                variant=\"contained\"\n                                                size=\"small\"\n                                                aria-label=\"add\"\n                                                className={classes.backButton}\n                                                style={{ marginRight: 8 }}\n                                            >\n                                                BACK\n                                            </Button>\n                                        )}\n                                        <Button\n                                            onClick={handleNext}\n                                            variant=\"contained\"\n                                            size=\"small\"\n                                            color=\"primary\"\n                                            aria-label=\"add\"\n                                            className={classes.actionButton}\n                                            style={{ marginRight: 24 }}\n                                            disabled={handleNextDisable()}\n                                        >\n                                            {pageStep === steps.length - 1 ? 'SAVE' : 'NEXT'}\n                                        </Button>\n                                        {renderFinal}\n                                    </div>\n                                </Grid>\n                            )}\n                        </>\n                    )}\n                </Typography>\n            </MuiThemeProvider>\n            <ToastContainer autoClose={8000} />\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.pageBuilder,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    pushToState: (stateType, stateName, value) => dispatch(pushToState(stateType, stateName, value)),\n    deleteFromState: (stateType, stateName, value) => dispatch(deleteFromState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PageBuilderStepper)\n"]},"metadata":{},"sourceType":"module"}