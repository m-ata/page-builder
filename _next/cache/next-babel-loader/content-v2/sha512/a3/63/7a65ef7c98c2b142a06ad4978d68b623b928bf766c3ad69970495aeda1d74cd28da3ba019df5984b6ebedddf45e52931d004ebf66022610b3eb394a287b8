{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/booking/components/RoomListItem.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { ListItem, Typography, Icon, Chip, Avatar, Tooltip } from '@material-ui/core';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport { setToState as _setToState } from 'state/actions';\nimport { connect } from 'react-redux';\nimport WebCmsGlobal from 'components/webcms-global';\nimport ProgressIconButton from './ProgressIconButton';\nimport { useSnackbar } from 'notistack';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport getSymbolFromCurrency from 'model/currency-symbol';\nimport { formatMoney } from 'model/orest/constants';\nimport TagManager from '@webcms-globals/tag-manager';\nimport * as global from '@webcms-globals';\nimport { useRouter } from 'next/router';\nvar useStyles = makeStyles(function () {\n  return {\n    infoChip: {\n      marginRight: 5,\n      backgroundColor: '#ffffff',\n      borderRadius: 0,\n      boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    infoPriceChip: {\n      backgroundColor: '#ffffff',\n      borderRadius: 0,\n      marginLeft: 5,\n      boxShadow: 'inset 0 0 0px 1px #c8c8c8',\n      position: 'absolute',\n      right: 10\n    },\n    listItemContainer: {\n      boxShadow: 'inset 0 0 1px 1px #f3f3f3'\n    },\n    listItemRoot: {\n      paddingTop: 0,\n      paddingBottom: 0,\n      marginTop: 10,\n      marginBottom: 10\n    },\n    listItemParent: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      width: '100%',\n      textAlign: 'center',\n      padding: 0,\n      boxShadow: '0 0 0 1px #d2d2d26b'\n    },\n    listItemBox: {\n      flexGrow: 11,\n      textAlign: 'start',\n      padding: 10\n    },\n    listItemAction: {\n      flexGrow: 1,\n      padding: '1px 10px 0px 0px',\n      '& button[aria-label=\"close\"]:not([disabled])': {\n        color: '#a6a6a6',\n        '-webkit-transition': 'color 0.4s',\n        '-ms-transition': 'color 0.4s',\n        transition: 'color 0.4s'\n      },\n      \"&:hover\": {\n        '& button[aria-label=\"close\"]:not([disabled])': {\n          color: '#4d4d4d',\n          '-webkit-transition': 'color 0.4s',\n          '-ms-transition': 'color 0.4s',\n          transition: 'color 0.4s'\n        }\n      }\n    },\n    infoChipTooltipLabel: {\n      fontSize: 12,\n      fontWeight: 600\n    },\n    infoChipTooltipValue: {\n      fontSize: 12\n    }\n  };\n});\nvar HtmlTooltip = withStyles(function (theme) {\n  return {\n    tooltip: {\n      backgroundColor: '#f5f5f9',\n      color: 'rgba(0, 0, 0, 0.87)',\n      maxWidth: 220,\n      fontSize: theme.typography.pxToRem(12),\n      border: '1px solid #dadde9'\n    }\n  };\n})(Tooltip);\n\nvar RoomListItem = function RoomListItem(props) {\n  _s();\n\n  var classes = useStyles(),\n      _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      WEBCMS_DATA = _useContext.WEBCMS_DATA,\n      state = props.state,\n      setToState = props.setToState,\n      roomtypeId = props.roomtypeId,\n      roomName = props.roomName,\n      checkin = props.checkin,\n      checkout = props.checkout,\n      pax = props.pax,\n      child = props.child,\n      night = props.night,\n      price = props.price,\n      pricecurr = props.pricecurr,\n      gid = props.gid,\n      reservno = props.reservno,\n      dailyrate = props.dailyrate,\n      _useState = useState(false),\n      isRoomDelete = _useState[0],\n      setIsRoomDelete = _useState[1],\n      _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar,\n      _useTranslation = useTranslation(),\n      t = _useTranslation.t,\n      router = useRouter();\n\n  useEffect(function () {\n    return function () {\n      return setIsRoomDelete(false);\n    };\n  }, []);\n\n  var handleRemoveRoom = function handleRemoveRoom(gid, reservno) {\n    setToState('ibe', ['bookingIsDisable'], true);\n    setIsRoomDelete(true);\n    return axios({\n      url: GENERAL_SETTINGS.BASE_URL + 'api/ors/room/delete',\n      method: 'post',\n      params: {\n        gid: gid,\n        reservno: reservno\n      }\n    }).then(function (deleteRoomResponse) {\n      var roomResponse = deleteRoomResponse.data;\n\n      if (roomResponse.status) {\n        var selectedRooms = state.selectedRooms;\n        var roomIndex = selectedRooms.findIndex(function (item) {\n          return item.gid === String(gid);\n        });\n\n        if (roomIndex > -1) {\n          var _WEBCMS_DATA$assets, _WEBCMS_DATA$assets$m;\n\n          var newRoomData = state.selectedRooms;\n          newRoomData.splice(roomIndex, 1);\n          setToState('ibe', ['selectedRooms'], newRoomData);\n          setToState('ibe', ['bookingIsDisable'], false);\n          setIsRoomDelete(false);\n          enqueueSnackbar(t('str_deleteRoomSuccess'), {\n            variant: 'success',\n            autoHideDuration: 3000\n          });\n\n          if (WEBCMS_DATA !== null && WEBCMS_DATA !== void 0 && (_WEBCMS_DATA$assets = WEBCMS_DATA.assets) !== null && _WEBCMS_DATA$assets !== void 0 && (_WEBCMS_DATA$assets$m = _WEBCMS_DATA$assets.meta) !== null && _WEBCMS_DATA$assets$m !== void 0 && _WEBCMS_DATA$assets$m.googleTag) {\n            var _WEBCMS_DATA$assets2, _WEBCMS_DATA$assets2$;\n\n            TagManager.booking.setRemoveRoom({\n              eventLabel: 'Remove to Cart',\n              hotelName: WEBCMS_DATA === null || WEBCMS_DATA === void 0 ? void 0 : (_WEBCMS_DATA$assets2 = WEBCMS_DATA.assets) === null || _WEBCMS_DATA$assets2 === void 0 ? void 0 : (_WEBCMS_DATA$assets2$ = _WEBCMS_DATA$assets2.meta) === null || _WEBCMS_DATA$assets2$ === void 0 ? void 0 : _WEBCMS_DATA$assets2$.title,\n              hotelId: GENERAL_SETTINGS.HOTELREFNO,\n              ciDate: checkin,\n              coDate: checkout,\n              adult: pax,\n              child: child,\n              currencyCode: pricecurr,\n              removeToCartData: {\n                reservNo: reservno,\n                id: roomtypeId,\n                name: roomName,\n                price: global.helper.formatPrice(price),\n                qty: 1,\n                category: 'Room'\n              }\n            });\n          }\n        }\n\n        if (selectedRooms.length === 0) {\n          router.push({\n            pathname: '/booking/rooms',\n            query: router.query\n          });\n        }\n      } else {\n        setIsRoomDelete(false);\n        setToState('ibe', ['bookingIsDisable'], false);\n        enqueueSnackbar(t('str_deleteRoomError'), {\n          variant: 'warning',\n          autoHideDuration: 3000\n        });\n      }\n    });\n  };\n\n  return __jsx(ListItem, {\n    alignItems: \"flex-start\",\n    button: true,\n    classes: {\n      container: classes.listItemContainer,\n      root: classes.listItemRoot,\n      button: classes.litemItemButton\n    },\n    disableGutters: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.listItemParent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: classes.listItemBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    className: classes.inline,\n    color: \"textPrimary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, roomName), __jsx(Typography, {\n    style: {\n      padding: '2px 0 10px 0'\n    },\n    variant: \"body2\",\n    className: classes.inline,\n    color: \"textSecondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }, moment(checkin, 'YYYY-MM-DD').format('dd, MMM DD, YYYY'), \" - \", moment(checkout, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }, __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: pax,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }, \"person\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 23\n    }\n  }), __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: child,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 33\n      }\n    }, \"face\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 23\n    }\n  }), __jsx(HtmlTooltip, {\n    arrow: true,\n    title: __jsx(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 31\n      }\n    }, __jsx(\"span\", {\n      className: classes.infoChipTooltipLabel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 35\n      }\n    }, t('str_perNight'), \":\"), \" \", __jsx(\"span\", {\n      className: classes.infoChipTooltipValue,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 110\n      }\n    }, formatMoney(dailyrate), \" \", getSymbolFromCurrency(pricecurr) || '')),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 23\n    }\n  }, __jsx(Chip, {\n    size: \"small\",\n    color: \"default\",\n    className: classes.infoChip,\n    label: night,\n    icon: __jsx(Icon, {\n      fontSize: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 33\n      }\n    }, \"nights_stay\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 23\n    }\n  })), __jsx(HtmlTooltip, {\n    arrow: true,\n    title: __jsx(\"span\", {\n      className: classes.infoChipTooltipLabel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 33\n      }\n    }, t('str_totalPrice')),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 22\n    }\n  }, __jsx(Chip, {\n    className: classes.infoPriceChip,\n    color: \"default\",\n    size: \"small\",\n    avatar: __jsx(Avatar, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 38\n      }\n    }, getSymbolFromCurrency(pricecurr) || ''),\n    label: formatMoney(price),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 26\n    }\n  })))), __jsx(\"div\", {\n    className: classes.listItemAction,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, __jsx(ProgressIconButton, {\n    edge: \"end\",\n    ariaLabel: \"close\",\n    isLoading: isRoomDelete,\n    onClick: function onClick() {\n      return !state.bookingIsDisable && handleRemoveRoom(gid, reservno);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }, __jsx(Icon, {\n    fontSize: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 25\n    }\n  }, \"close\")))));\n};\n\n_s(RoomListItem, \"JhsGK4p11zvO7YXCNawqQjUAJko=\", false, function () {\n  return [useStyles, useSnackbar, useTranslation, useRouter];\n});\n\n_c = RoomListItem;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomListItem);\n\nvar _c;\n\n$RefreshReg$(_c, \"RoomListItem\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/booking/components/RoomListItem.js"],"names":["React","useContext","useEffect","useState","useRef","axios","moment","ListItem","Typography","Icon","Chip","Avatar","Tooltip","withStyles","makeStyles","setToState","connect","WebCmsGlobal","ProgressIconButton","useSnackbar","useTranslation","getSymbolFromCurrency","formatMoney","TagManager","global","useRouter","useStyles","infoChip","marginRight","backgroundColor","borderRadius","boxShadow","infoPriceChip","marginLeft","position","right","listItemContainer","listItemRoot","paddingTop","paddingBottom","marginTop","marginBottom","listItemParent","display","alignItems","width","textAlign","padding","listItemBox","flexGrow","listItemAction","color","transition","infoChipTooltipLabel","fontSize","fontWeight","infoChipTooltipValue","HtmlTooltip","theme","tooltip","maxWidth","typography","pxToRem","border","RoomListItem","props","classes","GENERAL_SETTINGS","WEBCMS_DATA","state","roomtypeId","roomName","checkin","checkout","pax","child","night","price","pricecurr","gid","reservno","dailyrate","isRoomDelete","setIsRoomDelete","enqueueSnackbar","t","router","handleRemoveRoom","url","BASE_URL","method","params","then","deleteRoomResponse","roomResponse","data","status","selectedRooms","roomIndex","findIndex","item","String","newRoomData","splice","variant","autoHideDuration","assets","meta","googleTag","booking","setRemoveRoom","eventLabel","hotelName","title","hotelId","HOTELREFNO","ciDate","coDate","adult","currencyCode","removeToCartData","reservNo","id","name","helper","formatPrice","qty","category","length","push","pathname","query","container","root","button","litemItemButton","inline","format","bookingIsDisable","mapStateToProps","formReducer","ibe","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState, useRef } from 'react'\nimport axios from 'axios'\nimport moment from 'moment'\nimport {\n    ListItem,\n    Typography,\n    Icon,\n    Chip,\n    Avatar,\n    Tooltip\n} from '@material-ui/core'\nimport { withStyles, makeStyles } from '@material-ui/core/styles'\nimport { setToState } from 'state/actions'\nimport { connect } from 'react-redux'\nimport WebCmsGlobal from 'components/webcms-global'\nimport ProgressIconButton from './ProgressIconButton'\nimport { useSnackbar } from 'notistack'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport getSymbolFromCurrency from 'model/currency-symbol'\nimport { formatMoney } from 'model/orest/constants'\nimport TagManager from '@webcms-globals/tag-manager'\nimport * as global from '@webcms-globals'\nimport { useRouter } from 'next/router'\n\nconst useStyles = makeStyles(() => ({\n    infoChip: {\n        marginRight: 5,\n        backgroundColor: '#ffffff',\n        borderRadius: 0,\n        boxShadow: 'inset 0 0 0px 1px #c8c8c8'\n    },\n    infoPriceChip: {\n        backgroundColor: '#ffffff',\n        borderRadius: 0,\n        marginLeft: 5,\n        boxShadow: 'inset 0 0 0px 1px #c8c8c8',\n        position: 'absolute',\n        right: 10\n    },\n    listItemContainer: {\n        boxShadow: 'inset 0 0 1px 1px #f3f3f3',\n    },\n    listItemRoot: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        marginTop: 10,\n        marginBottom: 10,\n    },\n    listItemParent: {\n        display: 'flex',\n        alignItems: 'flex-start',\n        width: '100%',\n        textAlign: 'center',\n        padding: 0,\n        boxShadow: '0 0 0 1px #d2d2d26b'\n    },\n    listItemBox:{\n      flexGrow: 11,\n      textAlign: 'start',\n      padding: 10\n    },\n    listItemAction:{\n        flexGrow: 1,\n        padding: '1px 10px 0px 0px',\n        '& button[aria-label=\"close\"]:not([disabled])': {\n            color: '#a6a6a6',\n            '-webkit-transition': 'color 0.4s',\n            '-ms-transition': 'color 0.4s',\n            transition: 'color 0.4s',\n        },\n        \"&:hover\": {\n            '& button[aria-label=\"close\"]:not([disabled])': {\n                color: '#4d4d4d',\n                '-webkit-transition': 'color 0.4s',\n                '-ms-transition': 'color 0.4s',\n                transition: 'color 0.4s',\n            },\n        }\n    },\n    infoChipTooltipLabel: {\n        fontSize: 12,\n        fontWeight: 600\n    },\n    infoChipTooltipValue: {\n        fontSize: 12\n    }\n}))\n\nconst HtmlTooltip = withStyles((theme) => ({\n    tooltip: {\n        backgroundColor: '#f5f5f9',\n        color: 'rgba(0, 0, 0, 0.87)',\n        maxWidth: 220,\n        fontSize: theme.typography.pxToRem(12),\n        border: '1px solid #dadde9',\n    },\n}))(Tooltip)\n\nconst RoomListItem = (props) =>{\n    const classes = useStyles()\n        , { GENERAL_SETTINGS, WEBCMS_DATA } = useContext(WebCmsGlobal)\n        , { state, setToState, roomtypeId, roomName, checkin, checkout, pax, child, night, price, pricecurr, gid, reservno, dailyrate } = props\n        , [ isRoomDelete, setIsRoomDelete ] = useState(false)\n        , { enqueueSnackbar } = useSnackbar()\n        , { t } = useTranslation()\n        , router = useRouter()\n\n    useEffect(() => {\n        return () => setIsRoomDelete(false);\n    }, [])\n\n    const handleRemoveRoom = (gid, reservno) => {\n        setToState('ibe', ['bookingIsDisable'], true)\n        setIsRoomDelete(true)\n        return axios({\n            url: GENERAL_SETTINGS.BASE_URL + 'api/ors/room/delete',\n            method: 'post',\n            params: {\n                gid: gid,\n                reservno: reservno\n            },\n        }).then((deleteRoomResponse) => {\n            const roomResponse = deleteRoomResponse.data\n            if (roomResponse.status) {\n                let selectedRooms = state.selectedRooms\n                const roomIndex = selectedRooms.findIndex((item) => item.gid === String(gid))\n                if (roomIndex > -1) {\n                    let newRoomData = state.selectedRooms\n                    newRoomData.splice(roomIndex, 1)\n                    setToState('ibe', ['selectedRooms'], newRoomData)\n                    setToState('ibe', ['bookingIsDisable'], false)\n                    setIsRoomDelete(false)\n                    enqueueSnackbar(t('str_deleteRoomSuccess'), { variant: 'success', autoHideDuration: 3000 })\n\n                    if(WEBCMS_DATA?.assets?.meta?.googleTag){\n                        TagManager.booking.setRemoveRoom({\n                            eventLabel: 'Remove to Cart',\n                            hotelName: WEBCMS_DATA?.assets?.meta?.title,\n                            hotelId: GENERAL_SETTINGS.HOTELREFNO,\n                            ciDate: checkin,\n                            coDate: checkout,\n                            adult: pax,\n                            child: child,\n                            currencyCode: pricecurr,\n                            removeToCartData: {\n                                reservNo: reservno,\n                                id: roomtypeId,\n                                name: roomName,\n                                price: global.helper.formatPrice(price),\n                                qty: 1,\n                                category: 'Room',\n                            }\n                        })\n                    }\n\n                }\n\n                if (selectedRooms.length === 0) {\n                    router.push ({\n                        pathname: '/booking/rooms',\n                        query: router.query\n                    })\n                }\n            }else{\n                setIsRoomDelete(false)\n                setToState('ibe', ['bookingIsDisable'], false)\n                enqueueSnackbar(t('str_deleteRoomError'), { variant: 'warning', autoHideDuration: 3000 })\n            }\n        })\n    }\n\n    return (\n        <ListItem alignItems=\"flex-start\" button classes={{ container: classes.listItemContainer, root: classes.listItemRoot, button: classes.litemItemButton }} disableGutters>\n            <div className={classes.listItemParent}>\n                <div className={classes.listItemBox}>\n                    <Typography variant='body1' className={classes.inline} color='textPrimary'>\n                        {roomName}\n                    </Typography>\n                    <Typography\n                        style={{\n                            padding: '2px 0 10px 0',\n                        }}\n                        variant='body2'\n                        className={classes.inline}\n                        color='textSecondary'\n                    >\n                        {moment(checkin, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')} - {moment(checkout, 'YYYY-MM-DD').format('dd, MMM DD, YYYY')}\n                    </Typography>\n                    <span>\n                      <Chip\n                          size='small'\n                          color='default'\n                          className={classes.infoChip}\n                          label={pax}\n                          icon={<Icon fontSize='small'>person</Icon>}\n                      />\n                      <Chip\n                          size='small'\n                          color='default'\n                          className={classes.infoChip}\n                          label={child}\n                          icon={<Icon fontSize='small'>face</Icon>}\n                      />\n                      <HtmlTooltip\n                          arrow\n                          title={\n                              <React.Fragment>\n                                  <span className={classes.infoChipTooltipLabel}>{t('str_perNight')}:</span> <span className={classes.infoChipTooltipValue}>{formatMoney(dailyrate)} {getSymbolFromCurrency(pricecurr) || ''}</span>\n                              </React.Fragment>\n                          }\n                      >\n                      <Chip\n                          size='small'\n                          color='default'\n                          className={classes.infoChip}\n                          label={night}\n                          icon={<Icon fontSize='small'>nights_stay</Icon>}\n                      />\n                     </HtmlTooltip>\n                     <HtmlTooltip\n                         arrow\n                         title={<span className={classes.infoChipTooltipLabel}>{t('str_totalPrice')}</span>}\n                     >\n                         <Chip\n                             className={classes.infoPriceChip}\n                             color='default'\n                             size='small'\n                             avatar={<Avatar>{getSymbolFromCurrency(pricecurr) || ''}</Avatar>}\n                             label={formatMoney(price)}\n                         />\n                     </HtmlTooltip>\n                   </span>\n                </div>\n                <div className={classes.listItemAction}>\n                    <ProgressIconButton edge='end' ariaLabel='close' isLoading={isRoomDelete} onClick={() => !state.bookingIsDisable && handleRemoveRoom(gid, reservno)}>\n                        <Icon fontSize='small'>close</Icon>\n                    </ProgressIconButton>\n                </div>\n            </div>\n        </ListItem>\n    )\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomListItem)\n"]},"metadata":{},"sourceType":"module"}