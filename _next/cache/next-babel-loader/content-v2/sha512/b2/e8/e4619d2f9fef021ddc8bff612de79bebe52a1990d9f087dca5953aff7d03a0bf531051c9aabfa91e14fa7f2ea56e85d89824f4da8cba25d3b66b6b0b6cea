{"ast":null,"code":"import _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/LoyaltyClub/SeeAdvantages.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Slide from '@material-ui/core/Slide';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport { DEFAULT_OREST_TOKEN, OREST_ENDPOINT } from 'model/orest/constants';\nimport { ViewList } from '@webcms/orest';\nimport WebCmsGlobal from 'components/webcms-global';\nimport RenderWebPage from 'components/page-builder/PageBuilderSteps/steps/RenderWebPage';\nimport { setToState as _setToState } from 'state/actions';\nimport LoadingSpinner from 'components/LoadingSpinner';\nimport Alert from '@material-ui/lab/Alert';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Container from '@material-ui/core/Container';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    appBar: {\n      position: 'relative'\n    },\n    title: {\n      marginLeft: theme.spacing(2),\n      flex: 1,\n      textTransform: 'capitalize'\n    },\n    dialogTitle: {\n      padding: 0\n    },\n    container: {\n      paddingTop: 50,\n      paddingBottom: 120\n    }\n  };\n});\nvar Transition = /*#__PURE__*/React.forwardRef(_c = function Transition(props, ref) {\n  return __jsx(Slide, _extends({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }\n  }));\n});\n_c2 = Transition;\n\nvar SeeAdvantages = function SeeAdvantages(props) {\n  _s();\n\n  var _state$loyaltyAdvanta, _state$loyaltyAdvanta2;\n\n  var classes = useStyles();\n  var open = props.open,\n      onClose = props.onClose,\n      state = props.state,\n      setToState = props.setToState;\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      locale = _useContext.locale;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var token = useSelector(function (state) {\n    return state.orest.currentUser && state.orest.currentUser.auth.access_token;\n  });\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var handleClose = function handleClose() {\n    onClose(false);\n  };\n\n  useEffect(function () {\n    var active = true;\n\n    if (active && !isLoading && (!state.loyaltyAdvantages.data || state.loyaltyAdvantages.langcode !== locale)) {\n      setToState('guest', ['loyaltyAdvantages', 'data'], false);\n      setIsLoading(true);\n      ViewList({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.RAFILE,\n        token: token,\n        params: {\n          query: \"code::GAPP.LOYALTY.ADV,filetype::WEBPAGE,langcode:\".concat(locale),\n          allhotels: true\n        }\n      }).then(function (res) {\n        if (res.status === 200 && res.data && res.data.data.length > 0) {\n          setIsLoading(false);\n          var webPageData = JSON.parse(Buffer.from(res.data.data[0].filedata, 'base64').toString('utf-8'));\n          setToState('guest', ['loyaltyAdvantages', 'data'], webPageData);\n          setToState('guest', ['loyaltyAdvantages', 'langcode'], locale);\n        } else {\n          setIsLoading(false);\n          setToState('guest', ['loyaltyAdvantages', 'data'], null);\n          setToState('guest', ['loyaltyAdvantages', 'langcode'], locale);\n        }\n      })[\"catch\"](function () {\n        setIsLoading(false);\n        setToState('guest', ['loyaltyAdvantages', 'data'], null);\n        setToState('guest', ['loyaltyAdvantages', 'langcode'], locale);\n      });\n    }\n\n    return function () {\n      setIsLoading(false);\n      active = false;\n    };\n  }, [locale]);\n  return __jsx(Dialog, {\n    open: open,\n    maxWidth: \"lg\",\n    fullWidth: true,\n    onClose: handleClose,\n    TransitionComponent: Transition,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(DialogTitle, {\n    className: classes.dialogTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, __jsx(AppBar, {\n    className: classes.appBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, __jsx(Toolbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    className: classes.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, t('str_seeTheAdvantages')), __jsx(IconButton, {\n    edge: \"end\",\n    color: \"inherit\",\n    onClick: handleClose,\n    \"aria-label\": \"close\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, __jsx(CloseIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }))))), __jsx(DialogContent, {\n    dividers: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(Container, {\n    maxWidth: \"md\",\n    className: classes.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, isLoading ? __jsx(LoadingSpinner, {\n    style: {\n      marginTop: '5%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }) : ((_state$loyaltyAdvanta = state.loyaltyAdvantages.data) === null || _state$loyaltyAdvanta === void 0 ? void 0 : (_state$loyaltyAdvanta2 = _state$loyaltyAdvanta.sections) === null || _state$loyaltyAdvanta2 === void 0 ? void 0 : _state$loyaltyAdvanta2.length) > 0 ? __jsx(RenderWebPage, {\n    sections: state.loyaltyAdvantages.data.sections,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 30\n    }\n  }) : __jsx(Alert, {\n    style: {\n      margin: '0 auto',\n      marginTop: '5%',\n      width: '100%',\n      maxWidth: 400\n    },\n    variant: \"outlined\",\n    severity: \"info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 30\n    }\n  }, t('str_noDefaultRecord')))));\n};\n\n_s(SeeAdvantages, \"omJA4zJF+rw887ZRMW26wwii6K0=\", false, function () {\n  return [useStyles, useTranslation, useSelector];\n});\n\n_c3 = SeeAdvantages;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SeeAdvantages);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Transition$React.forwardRef\");\n$RefreshReg$(_c2, \"Transition\");\n$RefreshReg$(_c3, \"SeeAdvantages\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/LoyaltyClub/SeeAdvantages.js"],"names":["React","useEffect","useState","useContext","connect","useSelector","makeStyles","Dialog","AppBar","Toolbar","IconButton","Typography","CloseIcon","Slide","useTranslation","DEFAULT_OREST_TOKEN","OREST_ENDPOINT","ViewList","WebCmsGlobal","RenderWebPage","setToState","LoadingSpinner","Alert","DialogTitle","DialogContent","Container","useStyles","theme","appBar","position","title","marginLeft","spacing","flex","textTransform","dialogTitle","padding","container","paddingTop","paddingBottom","Transition","forwardRef","props","ref","SeeAdvantages","classes","open","onClose","state","GENERAL_SETTINGS","locale","t","token","orest","currentUser","auth","access_token","isLoading","setIsLoading","handleClose","active","loyaltyAdvantages","data","langcode","apiUrl","OREST_URL","endpoint","RAFILE","params","query","allhotels","then","res","status","length","webPageData","JSON","parse","Buffer","from","filedata","toString","marginTop","sections","margin","width","maxWidth","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport { connect, useSelector } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Dialog from '@material-ui/core/Dialog'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Slide from '@material-ui/core/Slide'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport { DEFAULT_OREST_TOKEN, OREST_ENDPOINT } from 'model/orest/constants'\nimport { ViewList } from '@webcms/orest'\nimport WebCmsGlobal from 'components/webcms-global'\nimport RenderWebPage from 'components/page-builder/PageBuilderSteps/steps/RenderWebPage'\nimport { setToState } from 'state/actions'\nimport LoadingSpinner from 'components/LoadingSpinner'\nimport Alert from '@material-ui/lab/Alert'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport Container from '@material-ui/core/Container'\n\nconst useStyles = makeStyles((theme) => ({\n    appBar: {\n        position: 'relative',\n    },\n    title: {\n        marginLeft: theme.spacing(2),\n        flex: 1,\n        textTransform: 'capitalize'\n    },\n    dialogTitle: {\n        padding: 0\n    },\n    container:{\n        paddingTop: 50 ,\n        paddingBottom: 120\n    }\n}))\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n})\n\nconst SeeAdvantages = (props) => {\n    const classes = useStyles();\n    const { open, onClose, state, setToState } = props\n    const { GENERAL_SETTINGS, locale } = useContext(WebCmsGlobal)\n    const { t } = useTranslation()\n    const token = useSelector((state) => state.orest.currentUser && state.orest.currentUser.auth.access_token)\n    const [isLoading, setIsLoading] = useState(false)\n\n    const handleClose = () => {\n        onClose(false)\n    }\n\n    useEffect(() => {\n        let active = true\n        if (active && !isLoading && (!state.loyaltyAdvantages.data || state.loyaltyAdvantages.langcode !== locale)) {\n            setToState('guest', ['loyaltyAdvantages', 'data'], false)\n            setIsLoading(true)\n            ViewList({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.RAFILE,\n                token: token,\n                params: {\n                    query: `code::GAPP.LOYALTY.ADV,filetype::WEBPAGE,langcode:${locale}`,\n                    allhotels: true\n                }\n            }).then(res => {\n                if (res.status === 200 && res.data && res.data.data.length > 0) {\n                    setIsLoading(false)\n                    const webPageData = JSON.parse(Buffer.from(res.data.data[0].filedata, 'base64').toString('utf-8'))\n                    setToState('guest', ['loyaltyAdvantages', 'data'], webPageData)\n                    setToState('guest', ['loyaltyAdvantages', 'langcode'], locale)\n                }else{\n                    setIsLoading(false)\n                    setToState('guest', ['loyaltyAdvantages', 'data'], null)\n                    setToState('guest', ['loyaltyAdvantages', 'langcode'], locale)\n                }\n            }).catch(()=> {\n                setIsLoading(false)\n                setToState('guest', ['loyaltyAdvantages', 'data'], null)\n                setToState('guest', ['loyaltyAdvantages', 'langcode'], locale)\n            })\n        }\n\n        return () => {\n            setIsLoading(false)\n            active = false\n        }\n    }, [locale])\n\n    return (\n        <Dialog open={open} maxWidth=\"lg\" fullWidth onClose={handleClose} TransitionComponent={Transition}>\n            <DialogTitle className={classes.dialogTitle}>\n                <AppBar className={classes.appBar}>\n                    <Toolbar>\n                        <Typography variant=\"h6\" className={classes.title}>\n                            {t('str_seeTheAdvantages')}\n                        </Typography>\n                        <IconButton edge=\"end\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\n                            <CloseIcon />\n                        </IconButton>\n                    </Toolbar>\n                </AppBar>\n            </DialogTitle>\n            <DialogContent dividers>\n                <Container maxWidth=\"md\" className={classes.container}>\n                    {isLoading ?\n                        <LoadingSpinner style={{ marginTop: '5%' }}  /> :\n                        state.loyaltyAdvantages.data?.sections?.length > 0 ?\n                            (<RenderWebPage sections={state.loyaltyAdvantages.data.sections} />) :\n                            (<Alert style={{ margin: '0 auto', marginTop: '5%', width: '100%', maxWidth: 400 }} variant=\"outlined\" severity=\"info\">{t('str_noDefaultRecord')}</Alert>)\n                    }\n                </Container>\n            </DialogContent>\n        </Dialog>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SeeAdvantages)\n"]},"metadata":{},"sourceType":"module"}