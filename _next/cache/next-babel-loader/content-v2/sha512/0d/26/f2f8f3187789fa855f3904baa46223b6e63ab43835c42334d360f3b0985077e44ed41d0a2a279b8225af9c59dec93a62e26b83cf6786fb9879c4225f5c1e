{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/redirects/index.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport WebCmsGlobal from 'components/webcms-global';\nimport DataGrid, { SelectColumn, Row as GridRow } from 'react-data-grid';\nimport { ContextMenuTrigger } from 'react-contextmenu';\nimport { Grid, Button, Icon, Dialog, DialogActions, DialogContent, DialogTitle, Popover, Box, TextField, InputAdornment } from '@material-ui/core';\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state';\nimport { List, Insert, Patch } from '@webcms/orest';\nimport { OREST_ENDPOINT } from 'model/orest/constants';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\n\nString.prototype.base64Decode = function () {\n  return this && JSON.parse(Buffer.from(this, 'base64').toString('utf-8')) || '';\n};\n\nString.prototype.base64Encode = function () {\n  return this && Buffer.from(this).toString('base64') || '';\n};\n\nvar RowRenderer = function RowRenderer(props) {\n  if (props.selectedCellProps) {\n    return __jsx(ContextMenuTrigger, {\n      id: \"grid-context-menu\",\n      collect: function collect() {\n        return {\n          row: props.row,\n          rowIdx: props.rowIdx,\n          selectedCellProps: props.selectedCellProps,\n          viewportColumns: props.viewportColumns\n        };\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }\n    }, __jsx(GridRow, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }\n    })));\n  } else {\n    return __jsx(GridRow, _extends({\n      onContextMenu: function onContextMenu(e) {\n        return e.preventDefault();\n      }\n    }, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 16\n      }\n    }));\n  }\n};\n\n_c = RowRenderer;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    deleteButton: {\n      background: '#ec1717',\n      color: '#ffffff',\n      \"&:hover\": {\n        background: '#a31111'\n      }\n    },\n    emptyMsgWrapper: {\n      alignItems: \"center\",\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      height: \"calc(65vh)\",\n      justifyContent: \"center\",\n      textAlign: \"center\",\n      width: \"100%\"\n    },\n    emptyMsg: {\n      textAlign: \"center\",\n      padding: \"10px\",\n      alignItems: \"center\",\n      borderRadius: \"50%\",\n      backgroundColor: \"#f1f3f4\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"320px\",\n      justifyContent: \"center\",\n      width: \"320px\",\n      margin: \"0 auto\"\n    },\n    emptyMsgTxt: {\n      fontSize: \".875rem\",\n      letterSpacing: \".25px\",\n      color: \"#5f6368\",\n      fontWeight: 500\n    },\n    emptyMsgIcon: {\n      color: 'rgb(154, 160, 166)',\n      display: 'block',\n      margin: '0 auto',\n      fontSize: '6em',\n      marginTop: -30,\n      marginBottom: 10\n    },\n    textFieldFormHelper: {\n      textAlign: 'end'\n    },\n    targetEditor: {\n      width: '100%'\n    }\n  };\n});\n\nvar EmptyRowsRenderer = function EmptyRowsRenderer() {\n  _s();\n\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  return __jsx(\"div\", {\n    className: classes.emptyMsgWrapper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.emptyMsg,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    className: classes.emptyMsgIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, \"add\"), __jsx(\"span\", {\n    className: classes.emptyMsgTxt,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, t('str_noRecordYouCanAddNewRecord'))));\n};\n\n_s(EmptyRowsRenderer, \"h68XjMarfE1o4WMqifPfj6fvklc=\", false, function () {\n  return [useStyles, useTranslation];\n});\n\n_c2 = EmptyRowsRenderer;\n\nvar LoadingRowsRenderer = function LoadingRowsRenderer() {\n  _s2();\n\n  var classes = useStyles();\n\n  var _useTranslation2 = useTranslation(),\n      t = _useTranslation2.t;\n\n  return __jsx(\"div\", {\n    className: classes.emptyMsgWrapper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.emptyMsg,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    className: classes.emptyMsgIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"add\"), __jsx(\"span\", {\n    className: classes.emptyMsgTxt,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, t('str_pleaseWait'))));\n};\n\n_s2(LoadingRowsRenderer, \"h68XjMarfE1o4WMqifPfj6fvklc=\", false, function () {\n  return [useStyles, useTranslation];\n});\n\n_c3 = LoadingRowsRenderer;\n\nvar RedirectsEditor = function RedirectsEditor(_ref) {\n  _s3();\n\n  var open = _ref.open,\n      onClose = _ref.onClose;\n  var classes = useStyles();\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS;\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var router = useRouter();\n\n  var _useTranslation3 = useTranslation(),\n      t = _useTranslation3.t; //Routers\n\n\n  var token = router.query.authToken;\n  var companyId = Number(GENERAL_SETTINGS === null || GENERAL_SETTINGS === void 0 ? void 0 : GENERAL_SETTINGS.HOTELREFNO);\n\n  var _useState = useState(function () {\n    return new Set();\n  }),\n      selectedRows = _useState[0],\n      setSelectedRows = _useState[1];\n\n  var _useState2 = useState([SelectColumn, {\n    key: 'oldpath',\n    name: 'Old Path',\n    editable: true,\n    frozen: true\n  }, {\n    key: 'newpath',\n    name: 'New Path',\n    editable: true,\n    frozen: true\n  }]),\n      dataColums = _useState2[0],\n      setDataColums = _useState2[1];\n\n  var _useState3 = useState([]),\n      dataRows = _useState3[0],\n      setDataRows = _useState3[1];\n\n  var _useState4 = useState(''),\n      newOldPath = _useState4[0],\n      setNewOldPath = _useState4[1];\n\n  var _useState5 = useState(''),\n      oldPathHelperText = _useState5[0],\n      setOldPathHelperText = _useState5[1];\n\n  var _useState6 = useState(''),\n      newNewPath = _useState6[0],\n      setNewNewPath = _useState6[1];\n\n  var _useState7 = useState(''),\n      newPathHelperText = _useState7[0],\n      setNewPathHelperText = _useState7[1];\n\n  var _useState8 = useState(false),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  var _useState9 = useState(false),\n      updateFileGid = _useState9[0],\n      setUpdateFileGid = _useState9[1];\n\n  var webCmsPathRedirect = 'WEBCMS.PATH.REDIRECT';\n  var fileType = 'WEBCMS.SETT';\n  var contenType = '0000525';\n  useEffect(function () {\n    var active = true;\n\n    if (active && !isLoading) {\n      setIsLoading(true);\n      List({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.RAFILE,\n        token: token,\n        params: {\n          query: \"code::\".concat(webCmsPathRedirect),\n          hotelrefno: companyId\n        }\n      }).then(function (rafileViewListResponse) {\n        if (active) {\n          if (rafileViewListResponse.data.success && rafileViewListResponse.data.count > 0) {\n            var _rafileViewListRespon, _rafileViewListRespon2, _rafileViewListRespon3, _rafileViewListRespon4, _rafileViewListRespon5;\n\n            setIsLoading(false);\n            setDataRows((rafileViewListResponse === null || rafileViewListResponse === void 0 ? void 0 : (_rafileViewListRespon = rafileViewListResponse.data) === null || _rafileViewListRespon === void 0 ? void 0 : (_rafileViewListRespon2 = _rafileViewListRespon.data[0]) === null || _rafileViewListRespon2 === void 0 ? void 0 : (_rafileViewListRespon3 = _rafileViewListRespon2.filedata) === null || _rafileViewListRespon3 === void 0 ? void 0 : _rafileViewListRespon3.base64Decode()) || false);\n            setUpdateFileGid((rafileViewListResponse === null || rafileViewListResponse === void 0 ? void 0 : (_rafileViewListRespon4 = rafileViewListResponse.data) === null || _rafileViewListRespon4 === void 0 ? void 0 : (_rafileViewListRespon5 = _rafileViewListRespon4.data[0]) === null || _rafileViewListRespon5 === void 0 ? void 0 : _rafileViewListRespon5.gid) || false);\n          } else {\n            setIsLoading(false);\n            setDataRows([]);\n          }\n        } else {\n          setIsLoading(false);\n          setDataRows([]);\n        }\n      })[\"catch\"](function () {\n        setIsLoading(false);\n        setDataRows([]);\n        enqueueSnackbar(t('str_unexpectedProblem'), {\n          variant: 'error'\n        });\n      });\n    }\n  }, []);\n\n  var handleSave = function handleSave() {\n    setIsLoading(true);\n    var useData = {\n      code: webCmsPathRedirect,\n      filedata: JSON.stringify(dataRows).base64Encode(),\n      filetype: fileType,\n      contentype: contenType,\n      hotelrefno: companyId\n    };\n\n    if (updateFileGid) {\n      Patch({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.RAFILE,\n        token: token,\n        gid: updateFileGid,\n        params: {\n          hotelrefno: companyId\n        },\n        data: useData\n      }).then(function (rafilePatchResponse) {\n        if (rafilePatchResponse.status === 200) {\n          var _rafilePatchResponse$, _rafilePatchResponse$2, _rafilePatchResponse$3, _rafilePatchResponse$4, _rafilePatchResponse$5;\n\n          setDataRows((rafilePatchResponse === null || rafilePatchResponse === void 0 ? void 0 : (_rafilePatchResponse$ = rafilePatchResponse.data) === null || _rafilePatchResponse$ === void 0 ? void 0 : (_rafilePatchResponse$2 = _rafilePatchResponse$.data) === null || _rafilePatchResponse$2 === void 0 ? void 0 : (_rafilePatchResponse$3 = _rafilePatchResponse$2.filedata) === null || _rafilePatchResponse$3 === void 0 ? void 0 : _rafilePatchResponse$3.base64Decode()) || false);\n          setUpdateFileGid((rafilePatchResponse === null || rafilePatchResponse === void 0 ? void 0 : (_rafilePatchResponse$4 = rafilePatchResponse.data) === null || _rafilePatchResponse$4 === void 0 ? void 0 : (_rafilePatchResponse$5 = _rafilePatchResponse$4.data) === null || _rafilePatchResponse$5 === void 0 ? void 0 : _rafilePatchResponse$5.gid) || false);\n          enqueueSnackbar(t('str_dataSaveSuccessMsg'), {\n            variant: 'success'\n          });\n          setIsLoading(false);\n        } else {\n          enqueueSnackbar(t('str_unexpectedProblem'), {\n            variant: 'error'\n          });\n          setIsLoading(false);\n        }\n      })[\"catch\"](function () {\n        enqueueSnackbar(t('str_unexpectedProblem'), {\n          variant: 'error'\n        });\n        setIsLoading(false);\n      });\n    } else {\n      Insert({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: OREST_ENDPOINT.RAFILE,\n        token: token,\n        params: {\n          hotelrefno: companyId\n        },\n        data: useData\n      }).then(function (rafileInsertResponse) {\n        if (rafileInsertResponse.status === 200) {\n          var _rafileInsertResponse, _rafileInsertResponse2, _rafileInsertResponse3, _rafileInsertResponse4, _rafileInsertResponse5;\n\n          setDataRows((rafileInsertResponse === null || rafileInsertResponse === void 0 ? void 0 : (_rafileInsertResponse = rafileInsertResponse.data) === null || _rafileInsertResponse === void 0 ? void 0 : (_rafileInsertResponse2 = _rafileInsertResponse.data) === null || _rafileInsertResponse2 === void 0 ? void 0 : (_rafileInsertResponse3 = _rafileInsertResponse2.filedata) === null || _rafileInsertResponse3 === void 0 ? void 0 : _rafileInsertResponse3.base64Decode()) || false);\n          setUpdateFileGid((rafileInsertResponse === null || rafileInsertResponse === void 0 ? void 0 : (_rafileInsertResponse4 = rafileInsertResponse.data) === null || _rafileInsertResponse4 === void 0 ? void 0 : (_rafileInsertResponse5 = _rafileInsertResponse4.data) === null || _rafileInsertResponse5 === void 0 ? void 0 : _rafileInsertResponse5.gid) || false);\n          enqueueSnackbar(t('str_dataSaveSuccessMsg'), {\n            variant: 'success'\n          });\n          setIsLoading(false);\n        } else {\n          enqueueSnackbar(t('str_unexpectedProblem'), {\n            variant: 'error'\n          });\n          setIsLoading(false);\n        }\n      })[\"catch\"](function () {\n        enqueueSnackbar(t('str_unexpectedProblem'), {\n          variant: 'error'\n        });\n        setIsLoading(false);\n      });\n    }\n  };\n\n  var handleDeleteSelectedItems = function handleDeleteSelectedItems() {\n    var newDataRows = _toConsumableArray(dataRows);\n\n    selectedRows.forEach(function (key) {\n      var getIndex = newDataRows.findIndex(function (indexItem) {\n        return String(indexItem.oldpath) === String(key);\n      });\n      selectedRows[\"delete\"](key);\n      newDataRows.splice(getIndex, 1);\n    });\n    setDataRows(newDataRows);\n  };\n\n  var slashPrefix = function slashPrefix(val) {\n    if (val) {\n      return '/' + val;\n    }\n\n    return val;\n  };\n\n  var handleAddNewRow = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var isError, isOldPath;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              isError = false, isOldPath = false;\n\n              if (newOldPath === \"\") {\n                isError = true;\n                setOldPathHelperText(t('str_requiredField'));\n              }\n\n              if (newNewPath === \"\") {\n                isError = true;\n                setNewPathHelperText(t('str_requiredField'));\n              }\n\n              if (newOldPath === newNewPath) {\n                isError = true;\n                setNewPathHelperText(t('str_theOldAndNewPathsCannotBeTheSame'));\n              }\n\n              Object.keys(dataRows).forEach(function (key) {\n                console.log(dataRows[key].oldpath, '/' + newOldPath, dataRows[key].oldpath === '/' + newOldPath);\n\n                if (dataRows[key].oldpath === slashPrefix(newOldPath)) {\n                  isOldPath = true;\n                  isError = true;\n                  return;\n                }\n              });\n\n              if (isOldPath) {\n                setOldPathHelperText(t('str_thisPathAlreadyExists'));\n              }\n\n              if (!isError) {\n                setDataRows([].concat(_toConsumableArray(dataRows), [{\n                  oldpath: slashPrefix(newOldPath),\n                  newpath: slashPrefix(newNewPath)\n                }]));\n                setNewOldPath(\"\");\n                setNewNewPath(\"\");\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleAddNewRow() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Dialog, {\n    fullWidth: true,\n    maxWidth: \"md\",\n    open: open,\n    style: {\n      maxHeight: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }\n  }, __jsx(DialogTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }\n  }, t('str_pathRedirection')), __jsx(DialogContent, {\n    dividers: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"flex-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    className: classes.deleteButton,\n    disabled: !(selectedRows.size > 0),\n    disableElevation: true,\n    onClick: function onClick() {\n      return handleDeleteSelectedItems();\n    },\n    startIcon: __jsx(Icon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 199\n      }\n    }, \"delete\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 29\n    }\n  }, t('str_deleteSelected', {\n    selected: selectedRows.size\n  }))), __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 25\n    }\n  }, __jsx(PopupState, {\n    variant: \"popover\",\n    popupId: \"demo-popup-popover\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 29\n    }\n  }, function (popupState) {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 37\n      }\n    }, __jsx(Button, _extends({\n      color: \"primary\",\n      disableElevation: true,\n      variant: \"outlined\",\n      startIcon: __jsx(Icon, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 112\n        }\n      }, \"add\")\n    }, bindTrigger(popupState), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 41\n      }\n    }), t('str_newRedirection')), __jsx(Popover, _extends({}, bindPopover(popupState), {\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'right'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 41\n      }\n    }), __jsx(Box, {\n      p: 3,\n      style: {\n        maxWidth: 400\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 44\n      }\n    }, __jsx(Grid, {\n      container: true,\n      spacing: 2,\n      justify: \"flex-end\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 48\n      }\n    }, __jsx(Grid, {\n      item: true,\n      xs: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 52\n      }\n    }, __jsx(TextField, {\n      required: true,\n      helperText: oldPathHelperText,\n      value: newOldPath,\n      onChange: function onChange(e) {\n        setOldPathHelperText(\"\");\n        setNewOldPath(e.target.value);\n      },\n      size: \"small\",\n      fullWidth: true,\n      id: \"old-path\",\n      label: t('str_oldPath'),\n      variant: \"outlined\",\n      InputProps: {\n        startAdornment: __jsx(InputAdornment, {\n          position: \"start\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 80\n          }\n        }, \"/\"),\n        autoComplete: 'off'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 56\n      }\n    })), __jsx(Grid, {\n      item: true,\n      xs: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 52\n      }\n    }, __jsx(TextField, {\n      required: true,\n      helperText: newPathHelperText,\n      value: newNewPath,\n      onChange: function onChange(e) {\n        setNewPathHelperText(\"\");\n        setNewNewPath(e.target.value);\n      },\n      size: \"small\",\n      fullWidth: true,\n      id: \"new-path\",\n      label: t('str_newPath'),\n      variant: \"outlined\",\n      InputProps: {\n        startAdornment: __jsx(InputAdornment, {\n          position: \"start\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 80\n          }\n        }, \"/\"),\n        autoComplete: 'off'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 56\n      }\n    })), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 52\n      }\n    }, __jsx(Button, {\n      disabled: newOldPath === \"\" || newNewPath === \"\",\n      color: \"primary\",\n      disableElevation: true,\n      variant: \"outlined\",\n      startIcon: __jsx(Icon, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 179\n        }\n      }, \"add\"),\n      onClick: function onClick() {\n        return handleAddNewRow();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 56\n      }\n    }, t('str_add')))))));\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 25\n    }\n  }, __jsx(DataGrid, {\n    rowKey: \"oldpath\",\n    columns: dataColums,\n    rows: dataRows,\n    rowKeyGetter: function rowKeyGetter(row) {\n      return row.oldpath || '';\n    },\n    onRowsChange: function onRowsChange(rows) {\n      return setDataRows(rows);\n    },\n    selectedRows: selectedRows,\n    onSelectedRowsChange: setSelectedRows,\n    rowRenderer: RowRenderer,\n    emptyRowsRenderer: isLoading ? LoadingRowsRenderer : EmptyRowsRenderer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 29\n    }\n  })))), __jsx(DialogActions, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"outlined\",\n    color: \"secondary\",\n    disableElevation: true,\n    onClick: function onClick() {\n      return onClose();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 21\n    }\n  }, t('str_close')), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disableElevation: true,\n    onClick: function onClick() {\n      return handleSave();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 21\n    }\n  }, t('str_save'))));\n};\n\n_s3(RedirectsEditor, \"kqmWZ2clxOOxgXYTi6LwZrBbxnw=\", false, function () {\n  return [useStyles, useSnackbar, useRouter, useTranslation];\n});\n\n_c4 = RedirectsEditor;\nexport default RedirectsEditor;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"RowRenderer\");\n$RefreshReg$(_c2, \"EmptyRowsRenderer\");\n$RefreshReg$(_c3, \"LoadingRowsRenderer\");\n$RefreshReg$(_c4, \"RedirectsEditor\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/redirects/index.js"],"names":["React","useState","useEffect","useContext","useRouter","useTranslation","WebCmsGlobal","DataGrid","SelectColumn","Row","GridRow","ContextMenuTrigger","Grid","Button","Icon","Dialog","DialogActions","DialogContent","DialogTitle","Popover","Box","TextField","InputAdornment","PopupState","bindTrigger","bindPopover","List","Insert","Patch","OREST_ENDPOINT","makeStyles","useSnackbar","String","prototype","base64Decode","JSON","parse","Buffer","from","toString","base64Encode","RowRenderer","props","selectedCellProps","row","rowIdx","viewportColumns","e","preventDefault","useStyles","theme","deleteButton","background","color","emptyMsgWrapper","alignItems","backgroundColor","display","flexDirection","height","justifyContent","textAlign","width","emptyMsg","padding","borderRadius","margin","emptyMsgTxt","fontSize","letterSpacing","fontWeight","emptyMsgIcon","marginTop","marginBottom","textFieldFormHelper","targetEditor","EmptyRowsRenderer","classes","t","LoadingRowsRenderer","RedirectsEditor","open","onClose","GENERAL_SETTINGS","enqueueSnackbar","router","token","query","authToken","companyId","Number","HOTELREFNO","Set","selectedRows","setSelectedRows","key","name","editable","frozen","dataColums","setDataColums","dataRows","setDataRows","newOldPath","setNewOldPath","oldPathHelperText","setOldPathHelperText","newNewPath","setNewNewPath","newPathHelperText","setNewPathHelperText","isLoading","setIsLoading","updateFileGid","setUpdateFileGid","webCmsPathRedirect","fileType","contenType","active","apiUrl","OREST_URL","endpoint","RAFILE","params","hotelrefno","then","rafileViewListResponse","data","success","count","filedata","gid","variant","handleSave","useData","code","stringify","filetype","contentype","rafilePatchResponse","status","rafileInsertResponse","handleDeleteSelectedItems","newDataRows","forEach","getIndex","findIndex","indexItem","oldpath","splice","slashPrefix","val","handleAddNewRow","isError","isOldPath","Object","keys","console","log","newpath","maxHeight","size","selected","popupState","vertical","horizontal","maxWidth","target","value","startAdornment","autoComplete","rows"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { useRouter } from 'next/router'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport WebCmsGlobal from 'components/webcms-global'\nimport DataGrid, { SelectColumn, Row as GridRow } from 'react-data-grid'\nimport { ContextMenuTrigger } from 'react-contextmenu'\nimport {\n    Grid,\n    Button,\n    Icon,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    Popover,\n    Box,\n    TextField,\n    InputAdornment,\n} from '@material-ui/core'\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state'\nimport { List, Insert, Patch } from '@webcms/orest'\nimport { OREST_ENDPOINT } from 'model/orest/constants'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { useSnackbar } from 'notistack'\n\nString.prototype.base64Decode = function() {\n    return this && JSON.parse(Buffer.from(this, 'base64').toString('utf-8')) || ''\n}\n\nString.prototype.base64Encode = function() {\n    return this && Buffer.from(this).toString('base64') || ''\n}\n\nconst RowRenderer = (props) => {\n    if(props.selectedCellProps){\n        return (\n            <ContextMenuTrigger id=\"grid-context-menu\" collect={() => ({ row: props.row, rowIdx: props.rowIdx, selectedCellProps: props.selectedCellProps, viewportColumns: props.viewportColumns })}>\n                <GridRow {...props} />\n            </ContextMenuTrigger>\n        )\n    }else{\n        return <GridRow onContextMenu={e => e.preventDefault()} {...props}/>\n    }\n}\n\nconst useStyles = makeStyles((theme) => ({\n    deleteButton: {\n        background: '#ec1717',\n        color: '#ffffff',\n        \"&:hover\": {\n            background: '#a31111',\n        },\n    },\n    emptyMsgWrapper: {\n        alignItems: \"center\",\n        backgroundColor: \"transparent\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        height: \"calc(65vh)\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        width: \"100%\"\n    },\n    emptyMsg: {\n        textAlign: \"center\",\n        padding: \"10px\",\n        alignItems: \"center\",\n        borderRadius: \"50%\",\n        backgroundColor: \"#f1f3f4\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"320px\",\n        justifyContent: \"center\",\n        width: \"320px\",\n        margin: \"0 auto\",\n    },\n    emptyMsgTxt: {\n        fontSize: \".875rem\",\n        letterSpacing: \".25px\",\n        color: \"#5f6368\",\n        fontWeight: 500\n    },\n    emptyMsgIcon: {\n        color: 'rgb(154, 160, 166)',\n        display: 'block',\n        margin: '0 auto',\n        fontSize: '6em',\n        marginTop: -30,\n        marginBottom: 10\n    },\n    textFieldFormHelper: {\n        textAlign: 'end'\n    },\n    targetEditor: {\n        width: '100%'\n    }\n}))\n\nconst EmptyRowsRenderer = () => {\n    const classes = useStyles()\n    const { t } = useTranslation()\n\n    return (\n        <div className={classes.emptyMsgWrapper}>\n            <div className={classes.emptyMsg}>\n                <Icon className={classes.emptyMsgIcon}>add</Icon>\n                <span className={classes.emptyMsgTxt}>\n                    {t('str_noRecordYouCanAddNewRecord')}\n                </span>\n            </div>\n        </div>\n    )\n}\n\nconst LoadingRowsRenderer = () => {\n    const classes = useStyles()\n    const { t } = useTranslation()\n\n    return (\n        <div className={classes.emptyMsgWrapper}>\n            <div className={classes.emptyMsg}>\n                <Icon className={classes.emptyMsgIcon}>add</Icon>\n                <span className={classes.emptyMsgTxt}>\n                    {t('str_pleaseWait')}\n                </span>\n            </div>\n        </div>\n    )\n}\n\nconst RedirectsEditor = ({ open, onClose }) => {\n    const classes = useStyles()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n    const { enqueueSnackbar } = useSnackbar()\n    const router = useRouter()\n    const { t } = useTranslation()\n\n    //Routers\n    const token = router.query.authToken\n    const companyId = Number(GENERAL_SETTINGS?.HOTELREFNO)\n\n    const [selectedRows, setSelectedRows] = useState(() => new Set())\n    const [dataColums, setDataColums] = useState([\n        SelectColumn,\n        {\n            key: 'oldpath',\n            name: 'Old Path',\n            editable: true,\n            frozen: true\n        },\n        {\n            key: 'newpath',\n            name: 'New Path',\n            editable: true,\n            frozen: true\n        }\n    ])\n\n    const [dataRows, setDataRows] = useState([])\n\n    const [newOldPath, setNewOldPath] = useState('')\n    const [oldPathHelperText, setOldPathHelperText] = useState('')\n\n    const [newNewPath, setNewNewPath] = useState('')\n    const [newPathHelperText, setNewPathHelperText] = useState('')\n\n    const [isLoading, setIsLoading] = useState(false)\n    const [updateFileGid, setUpdateFileGid] = useState(false)\n\n    const webCmsPathRedirect = 'WEBCMS.PATH.REDIRECT'\n    const fileType = 'WEBCMS.SETT'\n    const contenType = '0000525'\n\n    useEffect(() => {\n        let active = true\n        if(active && !isLoading) {\n            setIsLoading(true)\n            List({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.RAFILE,\n                token,\n                params: {\n                    query: `code::${webCmsPathRedirect}`,\n                    hotelrefno: companyId,\n                },\n            }).then((rafileViewListResponse) => {\n                if (active) {\n                    if (rafileViewListResponse.data.success && rafileViewListResponse.data.count > 0) {\n                        setIsLoading(false)\n                        setDataRows(rafileViewListResponse?.data?.data[0]?.filedata?.base64Decode() || false)\n                        setUpdateFileGid(rafileViewListResponse?.data?.data[0]?.gid || false)\n                    } else {\n                        setIsLoading(false)\n                        setDataRows([])\n                    }\n                } else {\n                    setIsLoading(false)\n                    setDataRows([])\n                }\n            }).catch(() => {\n                setIsLoading(false)\n                setDataRows([])\n                enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'error' })\n            })\n        }\n    }, [])\n\n    const handleSave = () => {\n        setIsLoading(true)\n\n        const useData = {\n            code: webCmsPathRedirect,\n            filedata: JSON.stringify(dataRows).base64Encode(),\n            filetype: fileType,\n            contentype: contenType,\n            hotelrefno: companyId,\n        }\n\n        if (updateFileGid) {\n            Patch({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.RAFILE,\n                token,\n                gid: updateFileGid,\n                params: {\n                    hotelrefno: companyId\n                },\n                data: useData,\n            }).then((rafilePatchResponse) => {\n                if (rafilePatchResponse.status === 200) {\n                    setDataRows(rafilePatchResponse?.data?.data?.filedata?.base64Decode() || false)\n                    setUpdateFileGid(rafilePatchResponse?.data?.data?.gid || false)\n                    enqueueSnackbar(t('str_dataSaveSuccessMsg'), { variant: 'success' })\n                    setIsLoading(false)\n                }else {\n                    enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'error' })\n                    setIsLoading(false)\n                }\n            }).catch(()=> {\n                enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'error' })\n                setIsLoading(false)\n            })\n        } else {\n            Insert({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: OREST_ENDPOINT.RAFILE,\n                token,\n                params: {\n                    hotelrefno: companyId\n                },\n                data: useData,\n            }).then((rafileInsertResponse) => {\n                if (rafileInsertResponse.status === 200) {\n                    setDataRows(rafileInsertResponse?.data?.data?.filedata?.base64Decode() || false)\n                    setUpdateFileGid(rafileInsertResponse?.data?.data?.gid || false)\n                    enqueueSnackbar(t('str_dataSaveSuccessMsg'), { variant: 'success' })\n                    setIsLoading(false)\n                }else {\n                    enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'error' })\n                    setIsLoading(false)\n                }\n            }).catch(()=> {\n                enqueueSnackbar(t('str_unexpectedProblem'), { variant: 'error' })\n                setIsLoading(false)\n            })\n        }\n    }\n\n    const handleDeleteSelectedItems = () => {\n        let newDataRows = [...dataRows]\n        selectedRows.forEach(function (key) {\n            const getIndex = newDataRows.findIndex(indexItem => String(indexItem.oldpath) === String(key))\n            selectedRows.delete(key)\n            newDataRows.splice(getIndex, 1)\n        })\n        setDataRows(newDataRows)\n    }\n\n    const slashPrefix = (val) => {\n        if (val) {\n            return '/' + val\n        }\n        return val\n    }\n\n    const handleAddNewRow = async () =>{\n        let isError = false, isOldPath = false\n\n        if(newOldPath === \"\"){\n            isError = true\n            setOldPathHelperText(t('str_requiredField'))\n        }\n\n        if(newNewPath === \"\"){\n            isError = true\n            setNewPathHelperText(t('str_requiredField'))\n        }\n\n        if(newOldPath === newNewPath){\n            isError = true\n            setNewPathHelperText(t('str_theOldAndNewPathsCannotBeTheSame'))\n        }\n\n        Object.keys(dataRows).forEach(function(key) {console.log(dataRows[key].oldpath, ('/' + newOldPath), (dataRows[key].oldpath === ('/' + newOldPath)))\n            if(dataRows[key].oldpath === slashPrefix(newOldPath)) {\n                isOldPath = true\n                isError = true\n                return\n            }\n        })\n\n        if(isOldPath){\n            setOldPathHelperText(t('str_thisPathAlreadyExists'))\n        }\n\n        if(!isError){\n            setDataRows([...dataRows, { oldpath: slashPrefix(newOldPath), newpath: slashPrefix(newNewPath) }])\n            setNewOldPath(\"\")\n            setNewNewPath(\"\")\n        }\n    }\n\n    return (\n            <Dialog fullWidth maxWidth=\"md\" open={open} style={{maxHeight: '80%'}}>\n                <DialogTitle>{t('str_pathRedirection')}</DialogTitle>\n                <DialogContent dividers>\n                    <Grid container spacing={2} justify='flex-end'>\n                        <Grid item>\n                            <Button variant=\"contained\" className={classes.deleteButton} disabled={!(selectedRows.size > 0)} disableElevation onClick={() => handleDeleteSelectedItems()}  startIcon={<Icon>delete</Icon>}>\n                                {t('str_deleteSelected', { selected: selectedRows.size })}\n                            </Button>\n                        </Grid>\n                        <Grid item>\n                            <PopupState variant=\"popover\" popupId=\"demo-popup-popover\">\n                                {(popupState) => (\n                                    <div>\n                                        <Button color='primary' disableElevation variant='outlined' startIcon={<Icon>add</Icon>} {...bindTrigger(popupState)}>\n                                            {t('str_newRedirection')}\n                                        </Button>\n                                        <Popover\n                                            {...bindPopover(popupState)}\n                                            anchorOrigin={{\n                                                vertical: 'bottom',\n                                                horizontal: 'right',\n                                            }}\n                                            transformOrigin={{\n                                                vertical: 'top',\n                                                horizontal: 'right',\n                                            }}\n                                        >\n                                           <Box p={3} style={{maxWidth: 400}}>\n                                               <Grid container spacing={2} justify='flex-end'>\n                                                   <Grid item xs={12}>\n                                                       <TextField\n                                                           required={true}\n                                                           helperText={oldPathHelperText}\n                                                           value={newOldPath}\n                                                           onChange={(e) => {\n                                                               setOldPathHelperText(\"\")\n                                                               setNewOldPath(e.target.value)\n                                                           }}\n                                                           size=\"small\"\n                                                           fullWidth\n                                                           id=\"old-path\"\n                                                           label={t('str_oldPath')}\n                                                           variant=\"outlined\"\n                                                           InputProps={{\n                                                               startAdornment: <InputAdornment position=\"start\">/</InputAdornment>,\n                                                               autoComplete: 'off'\n                                                           }}\n                                                       />\n                                                   </Grid>\n                                                   <Grid item xs={12}>\n                                                       <TextField\n                                                           required={true}\n                                                           helperText={newPathHelperText}\n                                                           value={newNewPath}\n                                                           onChange={(e) => {\n                                                               setNewPathHelperText(\"\")\n                                                               setNewNewPath(e.target.value)\n                                                           }}\n                                                           size=\"small\"\n                                                           fullWidth\n                                                           id=\"new-path\"\n                                                           label={t('str_newPath')}\n                                                           variant=\"outlined\"\n                                                           InputProps={{\n                                                               startAdornment: <InputAdornment position=\"start\">/</InputAdornment>,\n                                                               autoComplete: 'off'\n                                                           }}\n                                                       />\n                                                   </Grid>\n                                                   <Grid item>\n                                                       <Button disabled={(newOldPath === \"\" || newNewPath === \"\")} color='primary' disableElevation variant='outlined' startIcon={<Icon>add</Icon>} onClick={() => handleAddNewRow()}>\n                                                           {t('str_add')}\n                                                       </Button>\n                                                   </Grid>\n                                               </Grid>\n                                           </Box>\n                                        </Popover>\n                                    </div>\n                                )}\n                            </PopupState>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <DataGrid\n                                rowKey='oldpath'\n                                columns={dataColums}\n                                rows={dataRows}\n                                rowKeyGetter={(row) => row.oldpath || ''}\n                                onRowsChange={(rows) => setDataRows(rows)}\n                                selectedRows={selectedRows}\n                                onSelectedRowsChange={setSelectedRows}\n                                rowRenderer={RowRenderer}\n                                emptyRowsRenderer={isLoading ? LoadingRowsRenderer : EmptyRowsRenderer}\n                            />\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"outlined\" color=\"secondary\" disableElevation onClick={()=> onClose()}>{t('str_close')}</Button>\n                    <Button variant=\"contained\" color=\"primary\" disableElevation onClick={()=> handleSave()}>{t('str_save')}</Button>\n                </DialogActions>\n            </Dialog>\n    )\n}\n\nexport default RedirectsEditor"]},"metadata":{},"sourceType":"module"}