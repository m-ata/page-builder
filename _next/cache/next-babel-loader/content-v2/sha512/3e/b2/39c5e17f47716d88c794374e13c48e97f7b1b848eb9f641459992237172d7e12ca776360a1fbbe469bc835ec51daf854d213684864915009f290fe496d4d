{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar getRoomRate = function getRoomRate(roomRate) {\n  roomRate = Number(roomRate);\n\n  if (roomRate > 0 && roomRate !== null) {\n    return roomRate;\n  } else {\n    return null;\n  }\n};\n\nfunction naiveRound(num) {\n  var decimalPlaces = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var p = Math.pow(10, decimalPlaces);\n  return Math.round(num * p) / p;\n}\n\nfunction formatDiscRate(discRate) {\n  var newDiscRate;\n\n  if (discRate) {\n    var discStr = String(discRate).split('.');\n\n    if (discStr && discStr[0].length > 1) {\n      newDiscRate = String(discRate).substr(0, 5);\n    } else {\n      newDiscRate = String(discRate).substr(0, 4);\n    }\n  } else {\n    newDiscRate = discRate;\n  }\n\n  return naiveRound(parseFloat(newDiscRate));\n}\n\nfunction showDiscountRate(totalPrice, discTotalPrice) {\n  var disc = (totalPrice - discTotalPrice) * 100 / totalPrice;\n  return disc < 0 ? 0 : disc;\n}\n\nfunction applyDiscount(price, discrate) {\n  if (discrate) {\n    price = Number(price), discrate = Number(discrate) / 100;\n    return price - price * discrate;\n  }\n\n  return 0;\n}\n\nvar getPaxPrice = function getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate) {\n  if (totalPax === 1) {\n    return getRoomRate(sngrate);\n  } else if (totalPax === 2) {\n    return getRoomRate(dblrate);\n  } else if (totalPax === 3) {\n    return getRoomRate(trprate);\n  } else if (totalPax === 4) {\n    return getRoomRate(quadrate);\n  } else if (totalPax === 5) {\n    return getRoomRate(Number(quadrate) + Number(extrarate));\n  } else if (totalPax >= 6) {\n    var extraPax = Number(totalPax) - 5,\n        basePrice = Number(quadrate) + Number(extrarate),\n        extraPaxPrice = basePrice + Number(extra2rate) * extraPax;\n    return getRoomRate(extraPaxPrice);\n  } else {\n    return null;\n  }\n};\n\nvar getChdPrice = function getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate) {\n  var childTotals = getChildTotals(chdAges, agencyChdAges),\n      totalBaby = Number(childTotals.totalBaby) * Number(babyrate) || 0,\n      totalChd1 = Number(childTotals.totalChd1) * Number(chdrate) || 0,\n      totalChd2 = Number(childTotals.totalChd2) * Number(chd2rate) || 0;\n  return totalChd1 + totalChd2 + totalBaby;\n};\n\nvar getTotalPrice = function getTotalPrice(priceList, totalPax, chdAges, agencyChdAges) {\n  var useResRateVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var useTotalPrice, paxPrice, chdPrice, discrateVal;\n\n  if (useResRateVal) {\n    var rsingle = priceList.rsingle,\n        rdouble = priceList.rdouble,\n        rtriple = priceList.rtriple,\n        rquad = priceList.rquad,\n        extra = priceList.extra,\n        extra2 = priceList.extra2,\n        baby = priceList.baby,\n        child = priceList.child,\n        child2 = priceList.child2,\n        discrate = priceList.discrate;\n    paxPrice = getPaxPrice(totalPax, rsingle, rdouble, rtriple, rquad, extra, extra2);\n    chdPrice = getChdPrice(chdAges, agencyChdAges, baby, child, child2);\n    discrateVal = discrate;\n    useTotalPrice = Number(paxPrice) + Number(chdPrice);\n  } else {\n    var sngrate = priceList.sngrate,\n        dblrate = priceList.dblrate,\n        trprate = priceList.trprate,\n        quadrate = priceList.quadrate,\n        extrarate = priceList.extrarate,\n        extra2rate = priceList.extra2rate,\n        babyrate = priceList.babyrate,\n        chdrate = priceList.chdrate,\n        chd2rate = priceList.chd2rate,\n        _discrate = priceList.discrate;\n    paxPrice = getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate);\n    chdPrice = getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate);\n    discrateVal = _discrate;\n    useTotalPrice = Number(paxPrice) + Number(chdPrice);\n  }\n\n  return {\n    totalPrice: useTotalPrice || 0,\n    discTotalPrice: applyDiscount(useTotalPrice, discrateVal) || 0\n  };\n};\n\nvar useTotalPrice = function useTotalPrice(priceList, totalPax, chdAges, agencyChdAges) {\n  var useResRateVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var totalPrice = 0,\n      discTotalPrice = 0,\n      useDisc = false;\n\n  var _iterator = _createForOfIteratorHelper(priceList),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var priceItems = _step.value;\n      var dailyPaxPrice = getTotalPrice(priceItems, totalPax, chdAges, agencyChdAges, useResRateVal);\n      totalPrice += dailyPaxPrice.totalPrice;\n\n      if ((dailyPaxPrice === null || dailyPaxPrice === void 0 ? void 0 : dailyPaxPrice.discTotalPrice) > 0) {\n        useDisc = true;\n        discTotalPrice += dailyPaxPrice.discTotalPrice;\n      } else {\n        discTotalPrice += dailyPaxPrice.totalPrice;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var discrateTotal = useDisc ? showDiscountRate(totalPrice, discTotalPrice) : 0;\n  return {\n    totalPrice: totalPrice,\n    discTotalPrice: discTotalPrice,\n    discrateTotal: discrateTotal\n  };\n};\n\nvar getCurrencyCodeToIso = function getCurrencyCodeToIso(currCode) {\n  switch (currCode) {\n    case 'TL':\n      return 'TRY';\n\n    default:\n      return currCode;\n  }\n};\n\nvar getChildTotals = function getChildTotals(childAges, agencyInfo) {\n  var totalChd1 = 0,\n      totalChd2 = 0,\n      totalBaby = 0;\n\n  if (childAges && childAges.length > 0) {\n    var babyAge = Number(agencyInfo.babyage),\n        chd1Age = Number(agencyInfo.chd1age),\n        chd2Age = Number(agencyInfo.chd2age);\n\n    var _iterator2 = _createForOfIteratorHelper(childAges),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var childAge = _step2.value;\n\n        if (childAge) {\n          var useChild = typeof childAge === 'string' ? JSON.parse(childAge) : childAge,\n              useAge = Number(useChild.age);\n\n          if (useAge > 0 && babyAge > 0 && useAge <= babyAge) {\n            totalBaby++;\n          } else if (useAge > 0 && chd1Age > 0 && useAge <= chd1Age) {\n            totalChd1++;\n          } else if (useAge > 0 && chd2Age > 0 && useAge <= chd2Age) {\n            totalChd2++;\n          }\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return {\n    totalChd1: totalChd1,\n    totalChd2: totalChd2,\n    totalBaby: totalBaby\n  };\n};\n\nvar getDeviceType = function getDeviceType() {\n  if (/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android|iemobile|w3c|acs\\-|alav|alca|amoi|audi|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd\\-|dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg\\-c|lg\\-d|lg\\-g|lge\\-|maui|maxo|midp|mits|mmef|mobi|mot\\-|moto|mwbp|nec\\-|newt|noki|palm|pana|pant|phil|play|port|prox|qwap|sage|sams|sany|sch\\-|sec\\-|send|seri|sgh\\-|shar|sie\\-|siem|smal|smar|sony|sph\\-|symb|t\\-mo|teli|tim\\-|tosh|tsm\\-|upg1|upsi|vk\\-v|voda|wap\\-|wapa|wapi|wapp|wapr|webc|winw|winw|xda|xda\\-) /i.test(navigator.userAgent)) {\n    if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n      return 'Tablet';\n    } else {\n      return 'Mobile';\n    }\n  } else if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n    return 'Tablet';\n  } else {\n    return 'Desktop';\n  }\n};\n\nvar getBrowser = function getBrowser() {\n  var ua = navigator.userAgent,\n      tem,\n      M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n\n  if (/trident/i.test(M[1])) {\n    tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n    return {\n      name: 'IE',\n      version: tem[1] || ''\n    };\n  }\n\n  if (M[1] === 'Chrome') {\n    tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n\n    if (tem != null) {\n      return {\n        name: 'Opera',\n        version: tem[1]\n      };\n    }\n  }\n\n  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n\n  if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n    M.splice(1, 1, tem[1]);\n  }\n\n  return {\n    name: M[0],\n    version: M[1]\n  };\n};\n\nvar toSelfName = function toSelfName(fileName) {\n  var fileExt = fileName.split('.').pop(),\n      newFileName = fileName.toString().normalize('NFD').replace(\".\".concat(fileExt), '').replace(/[\\u0300-\\u036f]/g, '').replace(/\\s+/g, '-').toLowerCase().replace(/&/g, '-and-').replace(/[^a-z0-9\\-]/g, '').replace(/-+/g, '-').replace(/^-*/, '').replace(/-*$/, '');\n  return newFileName + \".\".concat(fileExt);\n};\n\nmodule.exports = {\n  getChildTotals: getChildTotals,\n  getDeviceType: getDeviceType,\n  getBrowser: getBrowser,\n  toSelfName: toSelfName,\n  getRoomRate: getRoomRate,\n  showDiscountRate: showDiscountRate,\n  formatDiscRate: formatDiscRate,\n  useTotalPrice: useTotalPrice,\n  getTotalPrice: getTotalPrice,\n  getPaxPrice: getPaxPrice,\n  getChdPrice: getChdPrice,\n  getCurrencyCodeToIso: getCurrencyCodeToIso\n};","map":{"version":3,"sources":["/Users/mata/app-cloudweb/lib/helpers/useFunction.js"],"names":["getRoomRate","roomRate","Number","naiveRound","num","decimalPlaces","p","Math","pow","round","formatDiscRate","discRate","newDiscRate","discStr","String","split","length","substr","parseFloat","showDiscountRate","totalPrice","discTotalPrice","disc","applyDiscount","price","discrate","getPaxPrice","totalPax","sngrate","dblrate","trprate","quadrate","extrarate","extra2rate","extraPax","basePrice","extraPaxPrice","getChdPrice","chdAges","agencyChdAges","babyrate","chdrate","chd2rate","childTotals","getChildTotals","totalBaby","totalChd1","totalChd2","getTotalPrice","priceList","useResRateVal","useTotalPrice","paxPrice","chdPrice","discrateVal","rsingle","rdouble","rtriple","rquad","extra","extra2","baby","child","child2","useDisc","priceItems","dailyPaxPrice","discrateTotal","getCurrencyCodeToIso","currCode","childAges","agencyInfo","babyAge","babyage","chd1Age","chd1age","chd2Age","chd2age","childAge","useChild","JSON","parse","useAge","age","getDeviceType","test","navigator","userAgent","getBrowser","ua","tem","M","match","exec","name","version","appName","appVersion","splice","toSelfName","fileName","fileExt","pop","newFileName","toString","normalize","replace","toLowerCase","module","exports"],"mappings":"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","sourcesContent":["const getRoomRate = (roomRate) => {\n    roomRate = Number(roomRate)\n    if (roomRate > 0 && roomRate !== null) {\n        return roomRate\n    } else {\n        return null\n    }\n}\n\nfunction naiveRound(num, decimalPlaces = 0) {\n    let p = Math.pow(10, decimalPlaces);\n    return Math.round(num * p) / p;\n}\n\nfunction formatDiscRate(discRate) {\n    let newDiscRate;\n    if (discRate) {\n        let discStr = String(discRate).split('.')\n        if (discStr && discStr[0].length > 1) {\n            newDiscRate = String(discRate).substr(0, 5)\n        } else {\n            newDiscRate = String(discRate).substr(0, 4)\n        }\n    } else {\n        newDiscRate = discRate\n    }\n    return naiveRound(parseFloat(newDiscRate))\n}\n\nfunction showDiscountRate(totalPrice, discTotalPrice) {\n    let disc = (totalPrice - discTotalPrice) * 100 / totalPrice\n    return disc < 0 ? 0 : disc\n}\n\nfunction applyDiscount(price, discrate) {\n    if (discrate) {\n        price = Number(price), discrate = Number(discrate) / 100\n        return (price - (price * discrate))\n    }\n    return 0\n}\n\nconst getPaxPrice = (totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate) => {\n    if (totalPax === 1) {\n        return getRoomRate(sngrate)\n    } else if (totalPax === 2) {\n        return getRoomRate(dblrate)\n    } else if (totalPax === 3) {\n        return getRoomRate(trprate)\n    } else if (totalPax === 4) {\n        return getRoomRate(quadrate)\n    } else if (totalPax === 5) {\n        return getRoomRate(Number(quadrate) + Number(extrarate))\n    } else if (totalPax >= 6) {\n        const extraPax = Number(totalPax) - 5\n            , basePrice = Number(quadrate) + Number(extrarate)\n            , extraPaxPrice = basePrice + (Number(extra2rate) * extraPax)\n        return getRoomRate(extraPaxPrice)\n    } else {\n        return null\n    }\n}\n\nconst getChdPrice = (chdAges, agencyChdAges, babyrate, chdrate, chd2rate) => {\n    const childTotals = getChildTotals(chdAges, agencyChdAges)\n        , totalBaby = Number(childTotals.totalBaby) * Number(babyrate) || 0\n        , totalChd1 = Number(childTotals.totalChd1) * Number(chdrate) || 0\n        , totalChd2 = Number(childTotals.totalChd2) * Number(chd2rate) || 0\n\n    return (totalChd1 + totalChd2 + totalBaby)\n}\n\nconst getTotalPrice = (priceList, totalPax, chdAges, agencyChdAges, useResRateVal = false) => {\n    let useTotalPrice, paxPrice, chdPrice, discrateVal\n    if(useResRateVal){\n        const { rsingle, rdouble, rtriple, rquad, extra, extra2, baby, child, child2, discrate } = priceList\n        paxPrice = getPaxPrice(totalPax, rsingle, rdouble, rtriple, rquad, extra, extra2)\n        chdPrice = getChdPrice(chdAges, agencyChdAges, baby, child, child2)\n        discrateVal = discrate\n        useTotalPrice = Number(paxPrice) + Number(chdPrice)\n    }else {\n        const { sngrate, dblrate, trprate, quadrate, extrarate, extra2rate, babyrate, chdrate, chd2rate, discrate } = priceList\n        paxPrice = getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate)\n        chdPrice = getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate)\n        discrateVal = discrate\n        useTotalPrice = Number(paxPrice) + Number(chdPrice)\n    }\n\n    return {\n        totalPrice: useTotalPrice || 0,\n        discTotalPrice: applyDiscount(useTotalPrice, discrateVal) || 0,\n    }\n}\n\nconst useTotalPrice = (priceList, totalPax, chdAges, agencyChdAges, useResRateVal = false) => {\n    let totalPrice = 0, discTotalPrice = 0, useDisc = false\n    for (let priceItems of priceList) {\n        const dailyPaxPrice = getTotalPrice(priceItems, totalPax, chdAges, agencyChdAges, useResRateVal)\n        totalPrice += dailyPaxPrice.totalPrice\n        if(dailyPaxPrice?.discTotalPrice > 0){\n            useDisc = true\n            discTotalPrice += dailyPaxPrice.discTotalPrice\n        }else {\n            discTotalPrice += dailyPaxPrice.totalPrice\n        }\n    }\n\n    const discrateTotal = useDisc ? showDiscountRate(totalPrice, discTotalPrice) : 0\n    return {\n        totalPrice,\n        discTotalPrice,\n        discrateTotal\n    }\n}\n\nconst getCurrencyCodeToIso = (currCode) => {\n    switch (currCode) {\n        case 'TL':\n            return 'TRY'\n        default:\n            return currCode\n    }\n}\n\nconst getChildTotals = (childAges, agencyInfo) => {\n    let\n        totalChd1 = 0\n        , totalChd2 = 0\n        , totalBaby = 0\n\n    if (childAges && childAges.length > 0) {\n        const\n            babyAge = Number(agencyInfo.babyage)\n            , chd1Age = Number(agencyInfo.chd1age)\n            , chd2Age = Number(agencyInfo.chd2age)\n\n        for (let childAge of childAges) {\n            if (childAge) {\n                const useChild = typeof childAge === 'string' ? JSON.parse(childAge) : childAge\n                    , useAge = Number(useChild.age)\n                if (useAge > 0 && babyAge > 0 && useAge <= babyAge) {\n                    totalBaby++\n                } else if (useAge > 0 && chd1Age > 0 && useAge <= chd1Age) {\n                    totalChd1++\n                } else if (useAge > 0 && chd2Age > 0 && useAge <= chd2Age) {\n                    totalChd2++\n                }\n            }\n        }\n    }\n\n    return {\n        totalChd1, totalChd2, totalBaby\n    }\n}\n\nconst getDeviceType = () => {\n    if (/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android|iemobile|w3c|acs\\-|alav|alca|amoi|audi|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd\\-|dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg\\-c|lg\\-d|lg\\-g|lge\\-|maui|maxo|midp|mits|mmef|mobi|mot\\-|moto|mwbp|nec\\-|newt|noki|palm|pana|pant|phil|play|port|prox|qwap|sage|sams|sany|sch\\-|sec\\-|send|seri|sgh\\-|shar|sie\\-|siem|smal|smar|sony|sph\\-|symb|t\\-mo|teli|tim\\-|tosh|tsm\\-|upg1|upsi|vk\\-v|voda|wap\\-|wapa|wapi|wapp|wapr|webc|winw|winw|xda|xda\\-) /i.test(navigator.userAgent)) {\n        if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n            return 'Tablet'\n        } else {\n            return 'Mobile'\n        }\n    } else if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n        return 'Tablet'\n    } else {\n        return 'Desktop'\n    }\n}\n\nconst getBrowser = () => {\n    let ua = navigator.userAgent, tem,\n        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || []\n    if (/trident/i.test(M[1])) {\n        tem = /\\brv[ :]+(\\d+)/g.exec(ua) || []\n        return { name: 'IE', version: (tem[1] || '') }\n    }\n    if (M[1] === 'Chrome') {\n        tem = ua.match(/\\bOPR|Edge\\/(\\d+)/)\n        if (tem != null) {\n            return { name: 'Opera', version: tem[1] }\n        }\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?']\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n        M.splice(1, 1, tem[1])\n    }\n    return {\n        name: M[0],\n        version: M[1],\n    }\n}\n\nconst toSelfName = (fileName) => {\n    const fileExt = fileName.split('.').pop(),\n        newFileName = fileName.toString()\n            .normalize('NFD')\n            .replace(`.${fileExt}`, '')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .replace(/\\s+/g, '-')\n            .toLowerCase()\n            .replace(/&/g, '-and-')\n            .replace(/[^a-z0-9\\-]/g, '')\n            .replace(/-+/g, '-')\n            .replace(/^-*/, '')\n            .replace(/-*$/, '')\n\n    return newFileName + `.${fileExt}`\n}\n\nmodule.exports = { getChildTotals, getDeviceType, getBrowser, toSelfName, getRoomRate, showDiscountRate, formatDiscRate, useTotalPrice, getTotalPrice, getPaxPrice, getChdPrice, getCurrencyCodeToIso  }"]},"metadata":{},"sourceType":"script"}