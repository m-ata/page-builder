{"ast":null,"code":"import _extends from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/CustomAutoComplete/CustomAutoComplete.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useEffect, useState, useRef } from \"react\";\nimport { connect, useSelector } from 'react-redux';\nimport { IconButton, TextField } from '@material-ui/core';\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport LoadingSpinner from \"../LoadingSpinner\";\nimport WebCmsGlobal from \"../webcms-global\";\nimport useTranslation from \"../../lib/translations/hooks/useTranslation\";\nimport { UseOrest } from '@webcms/orest';\nimport PropTypes from 'prop-types';\nimport { useOrestAction } from \"../../model/orest\";\nimport { REQUEST_METHOD_CONST } from \"../../model/orest/constants\";\nimport { setToState as _setToState } from \"../../state/actions\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n        paddingRight: '0'\n      },\n      '&.MuiAutocomplete-hasPopupIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n        paddingRight: '0'\n      },\n      '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]:hover $addIconContainer': {\n        visibility: 'visible'\n      },\n      '& .MuiInputBase-root > .MuiAutocomplete-endAdornment': {\n        position: 'initial'\n      },\n      '& .MuiAutocomplete-endAdornment > .MuiAutocomplete-clearIndicator': {\n        fontSize: '1.125rem',\n        padding: '3px'\n      },\n      '& .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"] .MuiAutocomplete-endAdornment': {\n        right: '0',\n        paddingRight: '8px'\n      }\n    },\n    addIconContainer: {\n      visibility: 'hidden'\n    }\n  };\n});\nvar filter = createFilterOptions();\n\nfunction CustomAutoComplete(props) {\n  _s();\n\n  var _this = this;\n\n  var classes = useStyles();\n  var id = props.id,\n      name = props.name,\n      endpoint = props.endpoint,\n      params = props.params,\n      disabled = props.disabled,\n      variant = props.variant,\n      searchParam = props.searchParam,\n      label = props.label,\n      value = props.value,\n      showOptionLabel = props.showOptionLabel,\n      initialId = props.initialId,\n      trgValKey = props.trgValKey,\n      showOption = props.showOption,\n      required = props.required,\n      searchInitialParam = props.searchInitialParam,\n      _onChange = props.onChange,\n      onLoad = props.onLoad,\n      freeSolo = props.freeSolo,\n      helperText = props.helperText,\n      error = props.error,\n      triggerValue = props.triggerValue,\n      _onInputChange = props.onInputChange,\n      useDefaultFilter = props.useDefaultFilter,\n      onBlur = props.onBlur,\n      withoutToken = props.withoutToken,\n      setToState = props.setToState,\n      withoutTokenData = props.withoutTokenData,\n      fullWidth = props.fullWidth,\n      showAddIcon = props.showAddIcon,\n      handleAddIconClick = props.handleAddIconClick,\n      fontSize = props.fontSize,\n      findDefaultValue = props.findDefaultValue; //context\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useOrestAction = useOrestAction(),\n      setOrestState = _useOrestAction.setOrestState; //redux\n\n\n  var token = useSelector(function (state) {\n    var _state$orest, _state$orest$currentU;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : _state$orest$currentU.auth.access_token) || false;\n  });\n  var reduxList = useSelector(function (state) {\n    var _state$formReducer, _state$formReducer$dy;\n\n    return (state === null || state === void 0 ? void 0 : (_state$formReducer = state.formReducer) === null || _state$formReducer === void 0 ? void 0 : (_state$formReducer$dy = _state$formReducer.dynamicList) === null || _state$formReducer$dy === void 0 ? void 0 : _state$formReducer$dy[name]) || false;\n  }); //state\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      searchText = _useState2[0],\n      setSearchText = _useState2[1];\n\n  var _useState3 = useState(''),\n      reason = _useState3[0],\n      setReason = _useState3[1];\n\n  var _useState4 = useState(reduxList || []),\n      list = _useState4[0],\n      setList = _useState4[1];\n\n  var _useState5 = useState(list),\n      filterList = _useState5[0],\n      setFilterList = _useState5[1];\n\n  var _useState6 = useState(''),\n      initialValue = _useState6[0],\n      setInitialValue = _useState6[1];\n\n  var _useState7 = useState(false),\n      localStateTriggerValue = _useState7[0],\n      setLocalStateTriggerValue = _useState7[1];\n\n  var baseUrl = GENERAL_SETTINGS === null || GENERAL_SETTINGS === void 0 ? void 0 : GENERAL_SETTINGS.BASE_URL;\n\n  if (withoutToken && baseUrl.length > 0) {\n    if (baseUrl[baseUrl.length - 1] === '/') {\n      baseUrl = baseUrl.substring(0, baseUrl.length - 1);\n    }\n  } //ref\n\n\n  var ref = useRef();\n  useEffect(function () {\n    if (initialId && initialId !== '' && initialValue === 'find' && initialId !== initialValue) {\n      UseOrest({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: endpoint,\n        token: token,\n        params: {\n          query: \"\".concat(searchInitialParam ? searchInitialParam : 'id', \":\").concat(initialId),\n          hotelrefno: params === null || params === void 0 ? void 0 : params.hotelrefno\n        }\n      }).then(function (r1) {\n        if (r1.status === 200) {\n          if (typeof onLoad === 'function') {\n            onLoad(r1.data.data[0]);\n          }\n        }\n      });\n    }\n  }, [initialId, initialValue]);\n  useEffect(function () {\n    if (endpoint && params && !reduxList || endpoint && withoutToken && !reduxList) {\n      setLoading(true);\n      UseOrest({\n        apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n        endpoint: endpoint,\n        method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n        token: withoutToken ? false : token,\n        params: params,\n        data: withoutToken ? withoutTokenData : false\n      }).then(function (res) {\n        if (res.status === 200 && res.data.success) {\n          setLoading(false);\n          setList(res.data.data);\n          setFilterList(res.data.data);\n          setToState('dynamicList', [name], res.data.data);\n        } else {\n          setLoading(false);\n        }\n      });\n    } else if (reduxList && (reduxList === null || reduxList === void 0 ? void 0 : reduxList.length) > 0) {\n      setList(reduxList);\n    }\n  }, []);\n  useEffect(function () {\n    if (initialId && list.length > 0) {\n      handleFindInitialValue(list);\n    }\n  }, [initialId, list]);\n  useEffect(function () {\n    if (localStateTriggerValue !== (typeof triggerValue === 'object' ? triggerValue[trgValKey] : triggerValue) && triggerValue !== '' && triggerValue) {\n      setLocalStateTriggerValue(triggerValue);\n      setLoading(true);\n      UseOrest({\n        apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n        endpoint: endpoint,\n        method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n        token: withoutToken ? false : token,\n        params: params,\n        data: withoutToken ? withoutTokenData && withoutTokenData : false\n      }).then(function (res) {\n        if (res.status === 200) {\n          setList(res.data.data);\n        }\n\n        setLoading(false);\n      });\n    }\n  }, [triggerValue]);\n\n  var handleFindInitialValue = function handleFindInitialValue() {\n    var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    if (list.length > 0) {\n      if (initialId) {\n        var _initialValue;\n\n        if (searchInitialParam) {\n          _initialValue = list.find(function (e) {\n            return e[searchInitialParam] === initialId;\n          });\n        } else {\n          _initialValue = list.find(function (e) {\n            return e.id === initialId;\n          });\n        }\n\n        if (_initialValue) {\n          if (typeof onLoad === 'function') {\n            onLoad(_initialValue);\n          }\n\n          setInitialValue(typeof _initialValue === 'object' ? _initialValue[searchInitialParam] : _initialValue);\n        } else {\n          setInitialValue('find');\n\n          if (findDefaultValue) {\n            var defaultValue = list.find(function (e) {\n              return e.isdef === true;\n            });\n\n            if (defaultValue) {\n              if (typeof onLoad === 'function') {\n                onLoad(defaultValue && defaultValue);\n              }\n\n              setInitialValue(_initialValue);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (!useDefaultFilter) {\n      if (searchText.length > 0 && reason !== 'reset') {\n        var timer = setTimeout(function () {\n          params.text = \"*\".concat(searchText);\n          params.field = searchParam;\n          setLoading(true);\n          UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: endpoint,\n            token: token,\n            params: params\n          }).then(function (res) {\n            if (res.status === 200) {\n              setFilterList(res.data.data);\n              setLoading(false);\n            } else {\n              setLoading(false);\n            }\n          });\n        }, 1000);\n        return function () {\n          return clearTimeout(timer);\n        };\n      } else {\n        setFilterList([]);\n      }\n    }\n  }, [searchText]);\n\n  var handleOnBlur = function handleOnBlur(event) {\n    if (typeof onBlur === 'function') onBlur(event);\n  };\n\n  return __jsx(Autocomplete, {\n    className: classes.root,\n    id: id,\n    name: name,\n    ref: ref,\n    loading: loading,\n    disabled: disabled || loading,\n    noOptionsText: t(\"str_notFound\"),\n    fullWidth: fullWidth,\n    value: value,\n    variant: variant || 'outlined',\n    onChange: function onChange(event, newValue) {\n      _onChange(event, newValue, ref.current.getAttribute(\"name\"));\n    },\n    onInputChange: function onInputChange(e, newInputValue, reason) {\n      setSearchText(newInputValue.toUpperCase());\n      setReason(reason);\n\n      if (typeof _onInputChange === 'function') {\n        _onInputChange(newInputValue);\n      }\n    },\n    onBlur: function onBlur(e) {\n      return handleOnBlur(e);\n    },\n    options: searchText.length > 0 && filterList.length > 0 ? filterList : list,\n    filterOptions: function filterOptions(options, params) {\n      return useDefaultFilter ? list.length > 0 && filter(options, params) : options;\n    },\n    getOptionLabel: function getOptionLabel(option) {\n      // Value selected with enter, right from the input\n      if (typeof option === 'string') {\n        return option;\n      } // Add \"xxx\" option created dynamically\n\n\n      if (option[showOption]) {\n        return option[showOption];\n      } // Regular option\n\n\n      return option.code;\n    } //renderOption={(option) => option[showOption ? showOption : 'code']}\n    ,\n    getOptionSelected: function getOptionSelected(option, value) {\n      return option[showOption ? showOption : 'id'] === value[showOption ? showOption : 'id'];\n    },\n    renderInput: function renderInput(params) {\n      return __jsx(TextField, _extends({}, params, {\n        required: required,\n        error: error,\n        label: label || '',\n        InputProps: _objectSpread(_objectSpread({}, params.InputProps), {}, {\n          style: {\n            fontSize: fontSize || 'inherit'\n          },\n          endAdornment: __jsx(React.Fragment, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 29\n            }\n          }, showAddIcon && __jsx(\"div\", {\n            className: classes.addIconContainer,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 41\n            }\n          }, __jsx(IconButton, {\n            size: 'small',\n            onClick: function onClick() {\n              return typeof handleAddIconClick === 'function' && handleAddIconClick();\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 45\n            }\n          }, __jsx(AddIcon, {\n            fontSize: 'small',\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 49\n            }\n          }))), loading ? __jsx(\"div\", {\n            style: {\n              paddingRight: '4px'\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 41\n            }\n          }, __jsx(LoadingSpinner, {\n            size: 18,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 45\n            }\n          })) : null, params.InputProps.endAdornment)\n        }),\n        variant: variant,\n        helperText: helperText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }\n      }));\n    },\n    freeSolo: freeSolo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  });\n}\n\n_s(CustomAutoComplete, \"IpiBkqGRNEN8N7JKH8uCbiHxNrg=\", false, function () {\n  return [useStyles, useTranslation, useOrestAction, useSelector, useSelector];\n});\n\n_c = CustomAutoComplete;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomAutoComplete);\nCustomAutoComplete.defaultProps = {\n  showOptionLabel: 'code'\n};\nCustomAutoComplete.propTypes = {\n  endpoint: PropTypes.string.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomAutoComplete\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/CustomAutoComplete/CustomAutoComplete.js"],"names":["React","useContext","useEffect","useState","useRef","connect","useSelector","IconButton","TextField","Autocomplete","createFilterOptions","LoadingSpinner","WebCmsGlobal","useTranslation","UseOrest","PropTypes","useOrestAction","REQUEST_METHOD_CONST","setToState","AddIcon","makeStyles","useStyles","theme","root","paddingRight","visibility","position","fontSize","padding","right","addIconContainer","filter","CustomAutoComplete","props","classes","id","name","endpoint","params","disabled","variant","searchParam","label","value","showOptionLabel","initialId","trgValKey","showOption","required","searchInitialParam","onChange","onLoad","freeSolo","helperText","error","triggerValue","onInputChange","useDefaultFilter","onBlur","withoutToken","withoutTokenData","fullWidth","showAddIcon","handleAddIconClick","findDefaultValue","GENERAL_SETTINGS","t","setOrestState","token","state","orest","currentUser","auth","access_token","reduxList","formReducer","dynamicList","loading","setLoading","searchText","setSearchText","reason","setReason","list","setList","filterList","setFilterList","initialValue","setInitialValue","localStateTriggerValue","setLocalStateTriggerValue","baseUrl","BASE_URL","length","substring","ref","apiUrl","OREST_URL","query","hotelrefno","then","r1","status","data","method","POST","GET","res","success","handleFindInitialValue","find","e","defaultValue","isdef","timer","setTimeout","text","field","clearTimeout","handleOnBlur","event","newValue","current","getAttribute","newInputValue","toUpperCase","options","option","code","InputProps","style","endAdornment","mapStateToProps","guest","mapDispatchToProps","dispatch","stateType","stateName","defaultProps","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState, useRef} from \"react\";\nimport {connect, useSelector} from 'react-redux'\nimport {IconButton, TextField} from '@material-ui/core'\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport LoadingSpinner from \"../LoadingSpinner\";\nimport WebCmsGlobal from \"../webcms-global\";\nimport useTranslation from \"../../lib/translations/hooks/useTranslation\";\nimport {UseOrest} from '@webcms/orest'\nimport PropTypes from 'prop-types'\nimport {useOrestAction} from \"../../model/orest\";\nimport { REQUEST_METHOD_CONST } from \"../../model/orest/constants\";\nimport { setToState } from \"../../state/actions\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n            paddingRight: '0',\n        },\n        '&.MuiAutocomplete-hasPopupIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n            paddingRight: '0',\n        },\n        '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]:hover $addIconContainer': {\n            visibility: 'visible',\n        },\n        '& .MuiInputBase-root > .MuiAutocomplete-endAdornment': {\n            position: 'initial',\n        },\n        '& .MuiAutocomplete-endAdornment > .MuiAutocomplete-clearIndicator': {\n            fontSize: '1.125rem',\n            padding: '3px'\n        },\n        '& .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"] .MuiAutocomplete-endAdornment': {\n            right: '0',\n            paddingRight: '8px'\n        }\n    },\n    addIconContainer: {\n        visibility: 'hidden'\n    }\n}))\n\nconst filter = createFilterOptions();\n\nfunction CustomAutoComplete(props) {\n    const classes = useStyles()\n\n    const { id, name, endpoint, params, disabled, variant, searchParam, label, value, showOptionLabel, initialId, trgValKey, showOption, required, searchInitialParam, onChange, onLoad, freeSolo, helperText, error, triggerValue, onInputChange, useDefaultFilter, onBlur, withoutToken, setToState, withoutTokenData, fullWidth, showAddIcon, handleAddIconClick, fontSize, findDefaultValue } = props\n\n    //context\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal);\n    const { t } = useTranslation();\n\n    const { setOrestState } = useOrestAction()\n\n    //redux\n    const token = useSelector((state) => state?.orest?.currentUser?.auth.access_token || false);\n    const reduxList = useSelector((state) => state?.formReducer?.dynamicList?.[name] || false);\n\n    //state\n    const [loading, setLoading] = useState(false);\n    const [searchText, setSearchText] = useState('');\n    const [reason, setReason] = useState('');\n    const [list, setList] = useState(reduxList || []);\n    const [filterList, setFilterList] = useState(list)\n    const [initialValue, setInitialValue] = useState('');\n    const [localStateTriggerValue, setLocalStateTriggerValue] = useState(false);\n\n    let baseUrl = GENERAL_SETTINGS?.BASE_URL\n    if(withoutToken && baseUrl.length > 0) {\n        if(baseUrl[baseUrl.length - 1] === '/') {\n            baseUrl = baseUrl.substring(0, baseUrl.length - 1)\n        }\n    }\n\n    //ref\n    const ref = useRef();\n\n    useEffect(() => {\n        if(initialId && initialId !== '' && initialValue === 'find' && initialId !== initialValue) {\n            UseOrest({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: endpoint,\n                token,\n                params: {\n                    query: `${searchInitialParam ? searchInitialParam : 'id'}:${initialId}`,\n                    hotelrefno: params?.hotelrefno\n                }\n            }).then(r1 => {\n                if(r1.status === 200) {\n                    if(typeof onLoad === 'function') {\n                        onLoad(r1.data.data[0])\n                    }\n                }\n            })\n        }\n    }, [initialId, initialValue])\n\n    useEffect(() => {\n        if((endpoint && params && !reduxList) || (endpoint && withoutToken && !reduxList)) {\n            setLoading(true);\n            UseOrest({\n                apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n                endpoint: endpoint,\n                method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n                token: withoutToken ? false : token,\n                params: params,\n                data: withoutToken ? withoutTokenData : false\n            }).then(res => {\n                if(res.status === 200 && res.data.success) {\n                    setLoading(false);\n                    setList(res.data.data);\n                    setFilterList(res.data.data);\n                    setToState('dynamicList', [name], res.data.data)\n                } else {\n                    setLoading(false);\n                }\n            })\n        } else if(reduxList && reduxList?.length > 0) {\n            setList(reduxList);\n        }\n    }, [])\n\n    useEffect(() => {\n        if(initialId && list.length > 0) {\n            handleFindInitialValue(list)\n        }\n    }, [initialId, list])\n\n\n\n\n    useEffect(() => {\n        if(localStateTriggerValue !== (typeof triggerValue === 'object' ? triggerValue[trgValKey] : triggerValue)  && triggerValue !== '' && triggerValue) {\n            setLocalStateTriggerValue(triggerValue);\n            setLoading(true);\n            UseOrest({\n                apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n                endpoint: endpoint,\n                method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n                token: withoutToken ? false : token,\n                params: params,\n                data: withoutToken ? withoutTokenData && withoutTokenData : false\n            }).then(res => {\n                if(res.status === 200) {\n                    setList(res.data.data)\n                }\n                setLoading(false);\n            })\n        }\n    }, [triggerValue])\n\n    const handleFindInitialValue = (list = []) => {\n        if(list.length > 0) {\n            if(initialId) {\n                let initialValue;\n                if(searchInitialParam) {\n                    initialValue = list.find(e => e[searchInitialParam] === initialId)\n                } else {\n                    initialValue = list.find(e => e.id === initialId)\n                }\n                if(initialValue){\n                    if(typeof onLoad === 'function') {\n                        onLoad(initialValue)\n                    }\n                    setInitialValue(typeof initialValue === 'object' ? initialValue[searchInitialParam] : initialValue)\n                } else {\n                    setInitialValue('find')\n                    if(findDefaultValue) {\n                        const defaultValue = list.find(e => e.isdef === true);\n                        if(defaultValue) {\n                            if(typeof onLoad === 'function') {\n                                onLoad(defaultValue && defaultValue)\n                            }\n                            setInitialValue(initialValue)\n                        }\n                    }                    \n                }\n            }\n        }\n    }\n\n\n\n\n    useEffect(() => {\n        if(!useDefaultFilter) {\n            if(searchText.length > 0 && reason !== 'reset') {\n                const timer = setTimeout(() => {\n                    params.text = `*${searchText}`;\n                    params.field = searchParam\n                    setLoading(true);\n                    UseOrest({\n                        apiUrl: GENERAL_SETTINGS.OREST_URL,\n                        endpoint: endpoint,\n                        token,\n                        params: params\n                    }).then(res => {\n                        if(res.status === 200) {\n                            setFilterList(res.data.data)\n                            setLoading(false)\n                        } else {\n                            setLoading(false);\n                        }\n                    })\n                }, 1000)\n                return () => clearTimeout(timer);\n            } else {\n                setFilterList([])\n            }\n        }\n\n    }, [searchText])\n\n    const handleOnBlur = (event) => {\n       if(typeof onBlur === 'function') onBlur(event)\n    }\n\n    return(\n        <Autocomplete\n            className={classes.root}\n            id={id}\n            name={name}\n            ref={ref}\n            loading={loading}\n            disabled={disabled || loading}\n            noOptionsText={t(\"str_notFound\")}\n            fullWidth={fullWidth}\n            value={value}\n            variant={variant || 'outlined'}\n            onChange={(event, newValue) => {\n                onChange(event, newValue, ref.current.getAttribute(\"name\"))\n            }}\n            onInputChange={(e, newInputValue, reason) => {\n                setSearchText(newInputValue.toUpperCase())\n                setReason(reason)\n                if(typeof onInputChange === 'function') {\n                    onInputChange(newInputValue)\n                }\n            }}\n            onBlur={(e) => handleOnBlur(e)}\n            options={searchText.length > 0 && filterList.length > 0 ? filterList : list}\n            filterOptions={(options, params) => useDefaultFilter ? list.length > 0 && filter(options, params) : options}\n            getOptionLabel={(option) => {\n                // Value selected with enter, right from the input\n                if (typeof option === 'string') {\n                    return option;\n                }\n                // Add \"xxx\" option created dynamically\n                if (option[showOption]) {\n                    return option[showOption];\n                }\n                // Regular option\n                return option.code;\n            }}\n            //renderOption={(option) => option[showOption ? showOption : 'code']}\n            getOptionSelected={(option, value) => option[showOption ? showOption : 'id'] === value[showOption ? showOption : 'id']}\n            renderInput={(params) => (\n                <TextField\n                    {...params}\n                    required={required}\n                    error={error}\n                    label={label || ''}\n                    InputProps={{\n                        ...params.InputProps,\n                        style:{fontSize: fontSize || 'inherit'},\n                        endAdornment: (\n                            <React.Fragment>\n\n                                {\n                                    showAddIcon && (\n                                        <div className={classes.addIconContainer}>\n                                            <IconButton size={'small'} onClick={() => typeof handleAddIconClick === 'function' && handleAddIconClick()}>\n                                                <AddIcon fontSize={'small'}/>\n                                            </IconButton>\n                                        </div>\n                                    )\n                                }\n                                {\n                                    loading ? (\n                                        <div style={{paddingRight: '4px'}}>\n                                            <LoadingSpinner size={18} />\n                                        </div>\n                                    ) : null\n                                }\n                                {params.InputProps.endAdornment}\n                            </React.Fragment>\n                        ),\n                    }}\n                    variant={variant}\n                    helperText={helperText}\n                />\n            )}\n            freeSolo={freeSolo}\n        />\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomAutoComplete)\n\nCustomAutoComplete.defaultProps = {\n    showOptionLabel: 'code'\n}\n\nCustomAutoComplete.propTypes = {\n    endpoint: PropTypes.string.isRequired,\n\n}"]},"metadata":{},"sourceType":"module"}