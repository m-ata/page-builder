{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/Reservations/RoomReservations.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport styles from './style/Reservations.style';\nimport stylesTabPanel from '../style/TabPanel.style';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport { ViewList, UseOrest } from '@webcms/orest';\nimport { OREST_ENDPOINT, SUBMODULE } from 'model/orest/constants';\nimport WebCmsGlobal from 'components/webcms-global';\nimport RoomReservationCard from './RoomReservationCard';\nimport LoadingSpinner from '../../../LoadingSpinner';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TabHeader from '../../../layout/components/TabHeader';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport ReservationCancelDialog from './ReservationCancelDialog';\nimport { Dialog, DialogContent, DialogActions } from \"@material-ui/core\";\nimport IndexPage from \"../../../../pages/booking\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { deleteFromState, pushToState, setToState, updateState } from \"../../../../state/actions\";\nimport TrackedChangesDialog from \"../../../TrackedChangesDialog\";\nconst useStyles = makeStyles(styles);\nconst useStylesTabPanel = makeStyles(stylesTabPanel);\n\nfunction RoomReservations(props) {\n  const classes = useStyles();\n  const classesTabPanel = useStylesTabPanel();\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    t\n  } = useTranslation();\n  const {\n    state,\n    setToState\n  } = props;\n  const hotelSettings = GENERAL_SETTINGS.hotelSettings;\n  const showAddons = Boolean(GENERAL_SETTINGS.hotelSettings.product) || Boolean(GENERAL_SETTINGS.hotelSettings.remark) || Boolean(GENERAL_SETTINGS.hotelSettings.transport); //redux\n\n  const token = useSelector(state => {\n    var _state$orest, _state$orest$currentU, _state$orest$currentU2;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : (_state$orest$currentU2 = _state$orest$currentU.auth) === null || _state$orest$currentU2 === void 0 ? void 0 : _state$orest$currentU2.access_token) || false;\n  });\n  const clientBase = useSelector(state => {\n    var _state$orest2, _state$orest2$state;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest2 = state.orest) === null || _state$orest2 === void 0 ? void 0 : (_state$orest2$state = _state$orest2.state) === null || _state$orest2$state === void 0 ? void 0 : _state$orest2$state.client) || false;\n  });\n  const loginBase = useSelector(state => {\n    var _state$orest3, _state$orest3$current;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest3 = state.orest) === null || _state$orest3 === void 0 ? void 0 : (_state$orest3$current = _state$orest3.currentUser) === null || _state$orest3$current === void 0 ? void 0 : _state$orest3$current.loginfo) || false;\n  }); //state\n\n  const {\n    0: moduleHashRight,\n    1: setModuleHashRight\n  } = useState(false);\n  const {\n    0: cancelReservationData,\n    1: setCancelReservationData\n  } = useState(false);\n  const {\n    0: reservations,\n    1: setReservations\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: isInitialized,\n    1: setIsInitialized\n  } = useState(false);\n  const {\n    0: isDone,\n    1: setIsDone\n  } = useState(false);\n  const {\n    0: limit,\n    1: setLimit\n  } = useState(4);\n  const {\n    0: page,\n    1: setPage\n  } = useState(0);\n  const {\n    0: openDialog,\n    1: setOpenDialog\n  } = useState(false);\n  const {\n    0: openTrackedDialog,\n    1: setOpenTrackedDialog\n  } = useState(false);\n  const {\n    0: isOnlyUpdate,\n    1: setIsOnlyUpdate\n  } = useState(false);\n\n  const getReservationListData = (active, fullReload = false) => {\n    setIsLoading(true);\n\n    if (fullReload) {\n      setIsInitialized(false);\n      setReservations([]);\n    }\n\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.RESERVAT,\n      token,\n      params: {\n        query: `clientid:${clientBase.id}`,\n        sort: 'reservno-',\n        limit: limit,\n        start: page * limit,\n        allhotels: true\n      }\n    }).then(r => {\n      if (active) {\n        if (r.status === 200) {\n          if (fullReload) {\n            setReservations(r.data.data);\n          } else {\n            setReservations([...reservations, ...r.data.data]);\n          }\n\n          setIsInitialized(true);\n          setIsLoading(false);\n\n          if (r.data.count < limit) {\n            setIsDone(true);\n          }\n        } else {\n          setIsInitialized(true);\n          setIsLoading(false);\n        }\n      }\n    });\n  };\n\n  useEffect(() => {\n    let active = true;\n\n    if (active) {\n      UseOrest({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: 'tools/user/hasright',\n        token: token,\n        params: {\n          empid: loginBase.id,\n          submoduleid: SUBMODULE.RESERVAT\n        }\n      }).then(toolsUserHasRightResponse => {\n        var _toolsUserHasRightRes;\n\n        if (toolsUserHasRightResponse.status === 200 && toolsUserHasRightResponse !== null && toolsUserHasRightResponse !== void 0 && (_toolsUserHasRightRes = toolsUserHasRightResponse.data) !== null && _toolsUserHasRightRes !== void 0 && _toolsUserHasRightRes.data) {\n          setModuleHashRight(toolsUserHasRightResponse.data.data);\n        } else {\n          setModuleHashRight(false);\n        }\n      }).catch(() => {\n        setModuleHashRight(false);\n      });\n    }\n\n    return () => {\n      active = false;\n    };\n  }, []);\n  useEffect(() => {\n    let active = true;\n\n    if (active) {\n      if (isLoading) {\n        return undefined;\n      }\n\n      if (clientBase && clientBase.id) {\n        getReservationListData(true);\n      } else {\n        setIsInitialized(true);\n      }\n    }\n\n    return () => {\n      active = false;\n    };\n  }, [page]);\n\n  function handleShowMore() {\n    setPage(page + 1);\n    window.scrollTo({\n      bottom: 0,\n      behavior: 'smooth'\n    });\n  }\n\n  const handleLess = () => {\n    setIsDone(false);\n    setIsInitialized(false);\n    setReservations([]);\n    setPage(0);\n    setLimit(4);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  const handleReset = () => {\n    setOpenDialog(false);\n    setToState('ibe', ['selectedRooms'], []);\n    setToState('ibe', ['selecttotalroom'], 0);\n    setToState('ibe', ['bookingActiveStep'], 0);\n    setToState('ibe', ['selectedPaymentIbanId'], null);\n    setToState('ibe', ['roomAvailabilityList'], []);\n    setToState('ibe', ['roomTypeAttrList'], []);\n    setToState('ibe', ['searchid'], '');\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, __jsx(ReservationCancelDialog, {\n    reservation: cancelReservationData,\n    isOnlyUpdate: isOnlyUpdate,\n    type: \"room\",\n    open: Boolean(cancelReservationData),\n    onClose: status => setCancelReservationData(!status),\n    getCallbackData: () => getReservationListData(true, true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    startIcon: __jsx(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 36\n      }\n    }),\n    color: 'primary',\n    variant: 'contained',\n    onClick: () => setOpenDialog(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, t('str_newReservation'))), __jsx(Grid, {\n    container: true,\n    justify: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, isInitialized ? reservations.length > 0 ? reservations.map((reservation, i) => {\n    return __jsx(RoomReservationCard, {\n      reservation: reservation,\n      key: i,\n      isCancel: moduleHashRight.canx || false,\n      cancelReservation: (resId, isOnlyUpdate) => {\n        setCancelReservationData(reservation);\n        setIsOnlyUpdate(isOnlyUpdate);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 36\n      }\n    });\n  }) : __jsx(Typography, {\n    component: \"h3\",\n    className: classesTabPanel.nothingToShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 25\n    }\n  }, t('str_widgetReservatListNoRecordYet')) : __jsx(Grid, {\n    item: true,\n    xs: 12,\n    className: classesTabPanel.gridItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, __jsx(LoadingSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  })), reservations.length > 0 && __jsx(Grid, {\n    item: true,\n    xs: 12,\n    className: classesTabPanel.gridItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, isLoading ? __jsx(LoadingSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 29\n    }\n  }) : !isDone ? __jsx(Grid, {\n    container: true,\n    direction: 'row',\n    justify: 'center',\n    alignItems: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    onClick: () => handleShowMore(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    className: classesTabPanel.showMoreText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 45\n    }\n  }, t('str_showMore')), __jsx(ExpandMore, {\n    className: classesTabPanel.showMoreIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 45\n    }\n  })))) : __jsx(Grid, {\n    container: true,\n    direction: 'row',\n    justify: 'center',\n    alignItems: 'center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 33\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 37\n    }\n  }, __jsx(Button, {\n    onClick: () => handleLess(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 41\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    className: classesTabPanel.showMoreText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 45\n    }\n  }, t('str_seeLess')), __jsx(ExpandLess, {\n    className: classesTabPanel.showMoreIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 45\n    }\n  })))))), __jsx(Dialog, {\n    open: openDialog,\n    maxWidth: 'lg',\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, __jsx(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 25\n    }\n  }, __jsx(IndexPage, {\n    hideLayout: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 29\n    }\n  })))), __jsx(DialogActions, {\n    className: classes.dialogAction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    className: classes.closeButton,\n    color: 'primary',\n    variant: 'outlined',\n    onClick: () => {\n      if (showAddons && state.selectedRooms.length > 0 && state.bookingActiveStep < 4 || !showAddons && state.selectedRooms.length > 0 && state.bookingActiveStep < 3) {\n        setOpenTrackedDialog(true);\n      } else {\n        handleReset();\n        getReservationListData(true, true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 21\n    }\n  }, t('str_close')))), __jsx(TrackedChangesDialog, {\n    open: openTrackedDialog,\n    onPressNo: e => {\n      setOpenTrackedDialog(e);\n    },\n    onPressYes: e => {\n      setOpenTrackedDialog(e);\n      setOpenDialog(false);\n      getReservationListData(true, true);\n      setTimeout(() => {\n        handleReset();\n      }, 100);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }));\n}\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.ibe\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomReservations);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/Reservations/RoomReservations.js"],"names":["React","useContext","useEffect","useState","connect","useSelector","styles","stylesTabPanel","Typography","Grid","ExpandMore","ExpandLess","ViewList","UseOrest","OREST_ENDPOINT","SUBMODULE","WebCmsGlobal","RoomReservationCard","LoadingSpinner","Button","makeStyles","TabHeader","useTranslation","ReservationCancelDialog","Dialog","DialogContent","DialogActions","IndexPage","AddIcon","deleteFromState","pushToState","setToState","updateState","TrackedChangesDialog","useStyles","useStylesTabPanel","RoomReservations","props","classes","classesTabPanel","GENERAL_SETTINGS","t","state","hotelSettings","showAddons","Boolean","product","remark","transport","token","orest","currentUser","auth","access_token","clientBase","client","loginBase","loginfo","moduleHashRight","setModuleHashRight","cancelReservationData","setCancelReservationData","reservations","setReservations","isLoading","setIsLoading","isInitialized","setIsInitialized","isDone","setIsDone","limit","setLimit","page","setPage","openDialog","setOpenDialog","openTrackedDialog","setOpenTrackedDialog","isOnlyUpdate","setIsOnlyUpdate","getReservationListData","active","fullReload","apiUrl","OREST_URL","endpoint","RESERVAT","params","query","id","sort","start","allhotels","then","r","status","data","count","empid","submoduleid","toolsUserHasRightResponse","catch","undefined","handleShowMore","window","scrollTo","bottom","behavior","handleLess","top","handleReset","textAlign","length","map","reservation","i","canx","resId","nothingToShow","gridItem","showMoreText","showMoreIcon","dialogAction","closeButton","selectedRooms","bookingActiveStep","e","setTimeout","mapStateToProps","formReducer","ibe","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAAQC,OAAR,EAAiBC,WAAjB,QAAmC,aAAnC;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,eAAnC;AACA,SAASC,cAAT,EAAyBC,SAAzB,QAA0C,uBAA1C;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,cAAP,MAA2B,uCAA3B;AACA,OAAOC,uBAAP,MAAoC,2BAApC;AACA,SAAQC,MAAR,EAAgBC,aAAhB,EAA+BC,aAA/B,QAAmD,mBAAnD;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,SAAQC,eAAR,EAAyBC,WAAzB,EAAsCC,UAAtC,EAAkDC,WAAlD,QAAoE,2BAApE;AACA,OAAOC,oBAAP,MAAiC,+BAAjC;AAEA,MAAMC,SAAS,GAAGd,UAAU,CAACd,MAAD,CAA5B;AACA,MAAM6B,iBAAiB,GAAGf,UAAU,CAACb,cAAD,CAApC;;AAEA,SAAS6B,gBAAT,CAA0BC,KAA1B,EAAiC;AAC7B,QAAMC,OAAO,GAAGJ,SAAS,EAAzB;AACA,QAAMK,eAAe,GAAGJ,iBAAiB,EAAzC;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAuBvC,UAAU,CAACe,YAAD,CAAvC;AACA,QAAM;AAAEyB,IAAAA;AAAF,MAAQnB,cAAc,EAA5B;AAEA,QAAM;AAAEoB,IAAAA,KAAF;AAASX,IAAAA;AAAT,MAAwBM,KAA9B;AAEA,QAAMM,aAAa,GAAGH,gBAAgB,CAACG,aAAvC;AACA,QAAMC,UAAU,GAAGC,OAAO,CAACL,gBAAgB,CAACG,aAAjB,CAA+BG,OAAhC,CAAP,IAAmDD,OAAO,CAACL,gBAAgB,CAACG,aAAjB,CAA+BI,MAAhC,CAA1D,IAAqGF,OAAO,CAACL,gBAAgB,CAACG,aAAjB,CAA+BK,SAAhC,CAA/H,CAT6B,CAW7B;;AACA,QAAMC,KAAK,GAAG5C,WAAW,CAAEqC,KAAD;AAAA;;AAAA,WAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,4BAAAA,KAAK,CAAEQ,KAAP,uFAAcC,WAAd,0GAA2BC,IAA3B,kFAAiCC,YAAjC,KAAiD,KAA5D;AAAA,GAAD,CAAzB;AACA,QAAMC,UAAU,GAAGjD,WAAW,CAAEqC,KAAD;AAAA;;AAAA,WAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,6BAAAA,KAAK,CAAEQ,KAAP,uFAAcR,KAAd,4EAAqBa,MAArB,KAA+B,KAA1C;AAAA,GAAD,CAA9B;AACA,QAAMC,SAAS,GAAGnD,WAAW,CAAEqC,KAAD;AAAA;;AAAA,WAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,6BAAAA,KAAK,CAAEQ,KAAP,yFAAcC,WAAd,gFAA2BM,OAA3B,KAAsC,KAAjD;AAAA,GAAD,CAA7B,CAd6B,CAgB7B;;AACA,QAAM;AAAA,OAACC,eAAD;AAAA,OAAkBC;AAAlB,MAAwCxD,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM;AAAA,OAACyD,qBAAD;AAAA,OAAwBC;AAAxB,MAAoD1D,QAAQ,CAAC,KAAD,CAAlE;AACA,QAAM;AAAA,OAAC2D,YAAD;AAAA,OAAeC;AAAf,MAAkC5D,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM;AAAA,OAAC6D,SAAD;AAAA,OAAYC;AAAZ,MAA4B9D,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAAC+D,aAAD;AAAA,OAAgBC;AAAhB,MAAoChE,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM;AAAA,OAACiE,MAAD;AAAA,OAASC;AAAT,MAAsBlE,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAA,OAACmE,KAAD;AAAA,OAAQC;AAAR,MAAoBpE,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM;AAAA,OAACqE,IAAD;AAAA,OAAOC;AAAP,MAAkBtE,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAM;AAAA,OAACuE,UAAD;AAAA,OAAaC;AAAb,MAA8BxE,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM;AAAA,OAACyE,iBAAD;AAAA,OAAoBC;AAApB,MAA4C1E,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM;AAAA,OAAC2E,YAAD;AAAA,OAAeC;AAAf,MAAkC5E,QAAQ,CAAC,KAAD,CAAhD;;AAEA,QAAM6E,sBAAsB,GAAG,CAACC,MAAD,EAASC,UAAU,GAAG,KAAtB,KAAgC;AAC3DjB,IAAAA,YAAY,CAAC,IAAD,CAAZ;;AACA,QAAIiB,UAAJ,EAAgB;AACZf,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAJ,MAAAA,eAAe,CAAC,EAAD,CAAf;AACH;;AACDnD,IAAAA,QAAQ,CAAC;AACLuE,MAAAA,MAAM,EAAE3C,gBAAgB,CAAC4C,SADpB;AAELC,MAAAA,QAAQ,EAAEvE,cAAc,CAACwE,QAFpB;AAGLrC,MAAAA,KAHK;AAILsC,MAAAA,MAAM,EAAE;AACJC,QAAAA,KAAK,EAAG,YAAWlC,UAAU,CAACmC,EAAG,EAD7B;AAEJC,QAAAA,IAAI,EAAE,WAFF;AAGJpB,QAAAA,KAAK,EAAEA,KAHH;AAIJqB,QAAAA,KAAK,EAAEnB,IAAI,GAAGF,KAJV;AAKJsB,QAAAA,SAAS,EAAE;AALP;AAJH,KAAD,CAAR,CAWGC,IAXH,CAWSC,CAAD,IAAO;AACX,UAAIb,MAAJ,EAAY;AACR,YAAIa,CAAC,CAACC,MAAF,KAAa,GAAjB,EAAsB;AAClB,cAAGb,UAAH,EAAc;AACVnB,YAAAA,eAAe,CAAC+B,CAAC,CAACE,IAAF,CAAOA,IAAR,CAAf;AACH,WAFD,MAEK;AACDjC,YAAAA,eAAe,CAAC,CAAC,GAAGD,YAAJ,EAAkB,GAAGgC,CAAC,CAACE,IAAF,CAAOA,IAA5B,CAAD,CAAf;AACH;;AACD7B,UAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAF,UAAAA,YAAY,CAAC,KAAD,CAAZ;;AACA,cAAI6B,CAAC,CAACE,IAAF,CAAOC,KAAP,GAAe3B,KAAnB,EAA0B;AACtBD,YAAAA,SAAS,CAAC,IAAD,CAAT;AACH;AACJ,SAXD,MAWO;AACHF,UAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAF,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;AACJ;AACJ,KA7BD;AA8BH,GApCD;;AAsCA/D,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI+E,MAAM,GAAG,IAAb;;AACA,QAAIA,MAAJ,EAAY;AACRpE,MAAAA,QAAQ,CAAC;AACLsE,QAAAA,MAAM,EAAE3C,gBAAgB,CAAC4C,SADpB;AAELC,QAAAA,QAAQ,EAAE,qBAFL;AAGLpC,QAAAA,KAAK,EAAEA,KAHF;AAILsC,QAAAA,MAAM,EAAE;AACJW,UAAAA,KAAK,EAAE1C,SAAS,CAACiC,EADb;AAEJU,UAAAA,WAAW,EAAEpF,SAAS,CAACuE;AAFnB;AAJH,OAAD,CAAR,CAQGO,IARH,CAQSO,yBAAD,IAA+B;AAAA;;AACnC,YAAIA,yBAAyB,CAACL,MAA1B,KAAqC,GAArC,IAA4CK,yBAA5C,aAA4CA,yBAA5C,wCAA4CA,yBAAyB,CAAEJ,IAAvE,kDAA4C,sBAAiCA,IAAjF,EAAuF;AACnFrC,UAAAA,kBAAkB,CAACyC,yBAAyB,CAACJ,IAA1B,CAA+BA,IAAhC,CAAlB;AACH,SAFD,MAEK;AACDrC,UAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACH;AACJ,OAdD,EAcG0C,KAdH,CAcS,MAAM;AACX1C,QAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACH,OAhBD;AAiBH;;AACD,WAAO,MAAM;AACTsB,MAAAA,MAAM,GAAG,KAAT;AACH,KAFD;AAGH,GAxBQ,EAwBN,EAxBM,CAAT;AA0BA/E,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI+E,MAAM,GAAG,IAAb;;AACA,QAAIA,MAAJ,EAAY;AACR,UAAIjB,SAAJ,EAAe;AACX,eAAOsC,SAAP;AACH;;AAED,UAAIhD,UAAU,IAAIA,UAAU,CAACmC,EAA7B,EAAiC;AAC7BT,QAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACH,OAFD,MAEO;AACHb,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH;AACJ;;AACD,WAAO,MAAM;AACTc,MAAAA,MAAM,GAAG,KAAT;AACH,KAFD;AAGH,GAhBQ,EAgBN,CAACT,IAAD,CAhBM,CAAT;;AAkBA,WAAS+B,cAAT,GAA0B;AACtB9B,IAAAA,OAAO,CAACD,IAAI,GAAG,CAAR,CAAP;AACAgC,IAAAA,MAAM,CAACC,QAAP,CAAgB;AAAEC,MAAAA,MAAM,EAAE,CAAV;AAAaC,MAAAA,QAAQ,EAAE;AAAvB,KAAhB;AACH;;AAED,QAAMC,UAAU,GAAG,MAAK;AACpBvC,IAAAA,SAAS,CAAC,KAAD,CAAT;AACAF,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAJ,IAAAA,eAAe,CAAC,EAAD,CAAf;AACAU,IAAAA,OAAO,CAAC,CAAD,CAAP;AACAF,IAAAA,QAAQ,CAAC,CAAD,CAAR;AACAiC,IAAAA,MAAM,CAACC,QAAP,CAAgB;AAAEI,MAAAA,GAAG,EAAE,CAAP;AAAUF,MAAAA,QAAQ,EAAE;AAApB,KAAhB;AACH,GAPD;;AASA,QAAMG,WAAW,GAAG,MAAM;AACtBnC,IAAAA,aAAa,CAAC,KAAD,CAAb;AACA5C,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,eAAD,CAAR,EAA2B,EAA3B,CAAV;AACAA,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,iBAAD,CAAR,EAA6B,CAA7B,CAAV;AACAA,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,mBAAD,CAAR,EAA+B,CAA/B,CAAV;AACAA,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,uBAAD,CAAR,EAAmC,IAAnC,CAAV;AACAA,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,sBAAD,CAAR,EAAkC,EAAlC,CAAV;AACAA,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,kBAAD,CAAR,EAA8B,EAA9B,CAAV;AACAA,IAAAA,UAAU,CAAC,KAAD,EAAQ,CAAC,UAAD,CAAR,EAAsB,EAAtB,CAAV;AACH,GATD;;AAWA,SACI,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,uBAAD;AAAyB,IAAA,WAAW,EAAE6B,qBAAtC;AAA6D,IAAA,YAAY,EAAEkB,YAA3E;AAAyF,IAAA,IAAI,EAAC,MAA9F;AAAqG,IAAA,IAAI,EAAEjC,OAAO,CAACe,qBAAD,CAAlH;AAA2I,IAAA,OAAO,EAAGmC,MAAD,IAAYlC,wBAAwB,CAAC,CAACkC,MAAF,CAAxL;AAAmM,IAAA,eAAe,EAAE,MAAKf,sBAAsB,CAAC,IAAD,EAAO,IAAP,CAA/O;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,KAAK,EAAE;AAAC+B,MAAAA,SAAS,EAAE;AAAZ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAQ,IAAA,SAAS,EAAE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAnB;AAAgC,IAAA,KAAK,EAAE,SAAvC;AAAkD,IAAA,OAAO,EAAE,WAA3D;AAAwE,IAAA,OAAO,EAAE,MAAMpC,aAAa,CAAC,IAAD,CAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6GlC,CAAC,CAAC,oBAAD,CAA9G,CADJ,CAFJ,EAKI,MAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKyB,aAAa,GACVJ,YAAY,CAACkD,MAAb,GAAsB,CAAtB,GACIlD,YAAY,CAACmD,GAAb,CAAiB,CAACC,WAAD,EAAcC,CAAd,KAAoB;AACjC,WAAO,MAAC,mBAAD;AACH,MAAA,WAAW,EAAED,WADV;AAEH,MAAA,GAAG,EAAEC,CAFF;AAGH,MAAA,QAAQ,EAAEzD,eAAe,CAAC0D,IAAhB,IAAwB,KAH/B;AAIH,MAAA,iBAAiB,EAAE,CAACC,KAAD,EAAQvC,YAAR,KAAwB;AACvCjB,QAAAA,wBAAwB,CAACqD,WAAD,CAAxB;AACAnC,QAAAA,eAAe,CAACD,YAAD,CAAf;AACH,OAPE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AASH,GAVD,CADJ,GAaI,MAAC,UAAD;AAAY,IAAA,SAAS,EAAC,IAAtB;AAA2B,IAAA,SAAS,EAAEvC,eAAe,CAAC+E,aAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK7E,CAAC,CAAC,mCAAD,CADN,CAdM,GAmBV,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,SAAS,EAAEF,eAAe,CAACgF,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CApBR,EAyBKzD,YAAY,CAACkD,MAAb,GAAsB,CAAtB,IACG,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,SAAS,EAAEzE,eAAe,CAACgF,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKvD,SAAS,GACN,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADM,GAGN,CAACI,MAAD,GACI,MAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,SAAS,EAAE,KAA3B;AAAkC,IAAA,OAAO,EAAE,QAA3C;AAAqD,IAAA,UAAU,EAAE,QAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAKmC,cAAc,EAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,SAAS,EAAEhE,eAAe,CAACiF,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK/E,CAAC,CAAC,cAAD,CADN,CADJ,EAII,MAAC,UAAD;AAAY,IAAA,SAAS,EAAEF,eAAe,CAACkF,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ,CADJ,CADJ,GAYI,MAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,SAAS,EAAE,KAA3B;AAAkC,IAAA,OAAO,EAAE,QAA3C;AAAqD,IAAA,UAAU,EAAE,QAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAKb,UAAU,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,SAAS,EAAErE,eAAe,CAACiF,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK/E,CAAC,CAAC,aAAD,CADN,CADJ,EAII,MAAC,UAAD;AAAY,IAAA,SAAS,EAAEF,eAAe,CAACkF,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ,CADJ,CAhBZ,CA1BR,CALJ,EA8DI,MAAC,MAAD;AACI,IAAA,IAAI,EAAE/C,UADV;AAEI,IAAA,QAAQ,EAAE,IAFd;AAGI,IAAA,SAAS,MAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,SAAD;AAAW,IAAA,UAAU,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ,CALJ,EAYI,MAAC,aAAD;AAAe,IAAA,SAAS,EAAEpC,OAAO,CAACoF,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AACI,IAAA,SAAS,EAAEpF,OAAO,CAACqF,WADvB;AAEI,IAAA,KAAK,EAAE,SAFX;AAGI,IAAA,OAAO,EAAE,UAHb;AAII,IAAA,OAAO,EAAE,MAAM;AACX,UAAI/E,UAAU,IAAIF,KAAK,CAACkF,aAAN,CAAoBZ,MAApB,GAA6B,CAA3C,IAAgDtE,KAAK,CAACmF,iBAAN,GAA0B,CAA3E,IAAkF,CAACjF,UAAD,IAAeF,KAAK,CAACkF,aAAN,CAAoBZ,MAApB,GAA6B,CAA5C,IAAiDtE,KAAK,CAACmF,iBAAN,GAA0B,CAAhK,EAAoK;AAChKhD,QAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH,OAFD,MAEO;AACHiC,QAAAA,WAAW;AACX9B,QAAAA,sBAAsB,CAAC,IAAD,EAAO,IAAP,CAAtB;AACH;AACJ,KAXL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaKvC,CAAC,CAAC,WAAD,CAbN,CADJ,CAZJ,CA9DJ,EA4FI,MAAC,oBAAD;AACI,IAAA,IAAI,EAAEmC,iBADV;AAEI,IAAA,SAAS,EAAGkD,CAAD,IAAO;AACdjD,MAAAA,oBAAoB,CAACiD,CAAD,CAApB;AACH,KAJL;AAKI,IAAA,UAAU,EAAGA,CAAD,IAAO;AACfjD,MAAAA,oBAAoB,CAACiD,CAAD,CAApB;AACAnD,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAK,MAAAA,sBAAsB,CAAC,IAAD,EAAO,IAAP,CAAtB;AACA+C,MAAAA,UAAU,CAAC,MAAM;AACbjB,QAAAA,WAAW;AACd,OAFS,EAEP,GAFO,CAAV;AAGH,KAZL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5FJ,CADJ;AA6GH;;AAGD,MAAMkB,eAAe,GAAItF,KAAD,IAAW;AAC/B,SAAO;AACHA,IAAAA,KAAK,EAAEA,KAAK,CAACuF,WAAN,CAAkBC;AADtB,GAAP;AAGH,CAJD;;AAMA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;AACtCrG,EAAAA,UAAU,EAAE,CAACsG,SAAD,EAAYC,SAAZ,EAAuBC,KAAvB,KAAiCH,QAAQ,CAACrG,UAAU,CAACsG,SAAD,EAAYC,SAAZ,EAAuBC,KAAvB,CAAX;AADf,CAAf,CAA3B;;AAIA,eAAenI,OAAO,CAAC4H,eAAD,EAAkBG,kBAAlB,CAAP,CAA6C/F,gBAA7C,CAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport {connect, useSelector} from 'react-redux'\nimport styles from './style/Reservations.style'\nimport stylesTabPanel from '../style/TabPanel.style'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport ExpandMore from '@material-ui/icons/ExpandMore'\nimport ExpandLess from '@material-ui/icons/ExpandLess'\nimport { ViewList, UseOrest } from '@webcms/orest'\nimport { OREST_ENDPOINT, SUBMODULE } from 'model/orest/constants'\nimport WebCmsGlobal from 'components/webcms-global'\nimport RoomReservationCard from './RoomReservationCard'\nimport LoadingSpinner from '../../../LoadingSpinner'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\nimport TabHeader from '../../../layout/components/TabHeader'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport ReservationCancelDialog from './ReservationCancelDialog'\nimport {Dialog, DialogContent, DialogActions} from \"@material-ui/core\";\nimport IndexPage from \"../../../../pages/booking\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {deleteFromState, pushToState, setToState, updateState} from \"../../../../state/actions\";\nimport TrackedChangesDialog from \"../../../TrackedChangesDialog\";\n\nconst useStyles = makeStyles(styles)\nconst useStylesTabPanel = makeStyles(stylesTabPanel)\n\nfunction RoomReservations(props) {\n    const classes = useStyles();\n    const classesTabPanel = useStylesTabPanel()\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal)\n    const { t } = useTranslation()\n\n    const { state, setToState } = props\n\n    const hotelSettings = GENERAL_SETTINGS.hotelSettings;\n    const showAddons = Boolean(GENERAL_SETTINGS.hotelSettings.product) || Boolean(GENERAL_SETTINGS.hotelSettings.remark) || Boolean(GENERAL_SETTINGS.hotelSettings.transport)\n\n    //redux\n    const token = useSelector((state) => state?.orest?.currentUser?.auth?.access_token || false)\n    const clientBase = useSelector((state) => state?.orest?.state?.client || false)\n    const loginBase = useSelector((state) => state?.orest?.currentUser?.loginfo || false)\n\n    //state\n    const [moduleHashRight, setModuleHashRight] = useState(false)\n    const [cancelReservationData, setCancelReservationData] = useState(false)\n    const [reservations, setReservations] = useState([])\n    const [isLoading, setIsLoading] = useState(false)\n    const [isInitialized, setIsInitialized] = useState(false)\n    const [isDone, setIsDone] = useState(false)\n    const [limit, setLimit] = useState(4)\n    const [page, setPage] = useState(0)\n    const [openDialog, setOpenDialog] = useState(false);\n    const [openTrackedDialog, setOpenTrackedDialog] = useState(false);\n    const [isOnlyUpdate, setIsOnlyUpdate] = useState(false);\n\n    const getReservationListData = (active, fullReload = false) => {\n        setIsLoading(true)\n        if (fullReload) {\n            setIsInitialized(false)\n            setReservations([])\n        }\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.RESERVAT,\n            token,\n            params: {\n                query: `clientid:${clientBase.id}`,\n                sort: 'reservno-',\n                limit: limit,\n                start: page * limit,\n                allhotels: true\n            },\n        }).then((r) => {\n            if (active) {\n                if (r.status === 200) {\n                    if(fullReload){\n                        setReservations(r.data.data)\n                    }else{\n                        setReservations([...reservations, ...r.data.data])\n                    }\n                    setIsInitialized(true)\n                    setIsLoading(false)\n                    if (r.data.count < limit) {\n                        setIsDone(true)\n                    }\n                } else {\n                    setIsInitialized(true)\n                    setIsLoading(false)\n                }\n            }\n        })\n    }\n\n    useEffect(() => {\n        let active = true\n        if (active) {\n            UseOrest({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: 'tools/user/hasright',\n                token: token,\n                params: {\n                    empid: loginBase.id,\n                    submoduleid: SUBMODULE.RESERVAT,\n                },\n            }).then((toolsUserHasRightResponse) => {\n                if (toolsUserHasRightResponse.status === 200 && toolsUserHasRightResponse?.data?.data) {\n                    setModuleHashRight(toolsUserHasRightResponse.data.data)\n                }else{\n                    setModuleHashRight(false)\n                }\n            }).catch(() => {\n                setModuleHashRight(false)\n            })\n        }\n        return () => {\n            active = false\n        }\n    }, [])\n\n    useEffect(() => {\n        let active = true\n        if (active) {\n            if (isLoading) {\n                return undefined\n            }\n\n            if (clientBase && clientBase.id) {\n                getReservationListData(true)\n            } else {\n                setIsInitialized(true)\n            }\n        }\n        return () => {\n            active = false\n        }\n    }, [page])\n\n    function handleShowMore() {\n        setPage(page + 1)\n        window.scrollTo({ bottom: 0, behavior: 'smooth' })\n    }\n\n    const handleLess = () =>{\n        setIsDone(false)\n        setIsInitialized(false)\n        setReservations([])\n        setPage(0)\n        setLimit(4)\n        window.scrollTo({ top: 0, behavior: 'smooth' })\n    }\n\n    const handleReset = () => {\n        setOpenDialog(false)\n        setToState('ibe', ['selectedRooms'], [])\n        setToState('ibe', ['selecttotalroom'], 0)\n        setToState('ibe', ['bookingActiveStep'], 0)\n        setToState('ibe', ['selectedPaymentIbanId'], null)\n        setToState('ibe', ['roomAvailabilityList'], [])\n        setToState('ibe', ['roomTypeAttrList'], [])\n        setToState('ibe', ['searchid'], '')\n    }\n\n    return (\n        <React.Fragment>\n            <ReservationCancelDialog reservation={cancelReservationData} isOnlyUpdate={isOnlyUpdate} type=\"room\" open={Boolean(cancelReservationData)} onClose={(status) => setCancelReservationData(!status)} getCallbackData={()=> getReservationListData(true, true)}/>\n            <div style={{textAlign: 'right'}}>\n                <Button startIcon={<AddIcon />} color={'primary'} variant={'contained'} onClick={() => setOpenDialog(true)}>{t('str_newReservation')}</Button>\n            </div>\n            <Grid container justify={'center'}>\n                {isInitialized ? (\n                    reservations.length > 0 ? (\n                        reservations.map((reservation, i) => {\n                            return <RoomReservationCard\n                                reservation={reservation}\n                                key={i}\n                                isCancel={moduleHashRight.canx || false}\n                                cancelReservation={(resId, isOnlyUpdate)=> {\n                                    setCancelReservationData(reservation)\n                                    setIsOnlyUpdate(isOnlyUpdate)\n                                }}\n                            />\n                        })\n                    ) : (\n                        <Typography component=\"h3\" className={classesTabPanel.nothingToShow}>\n                            {t('str_widgetReservatListNoRecordYet')}\n                        </Typography>\n                    )\n                ) : (\n                    <Grid item xs={12} className={classesTabPanel.gridItem}>\n                        <LoadingSpinner />\n                    </Grid>\n                )}\n\n                {reservations.length > 0 && (\n                    <Grid item xs={12} className={classesTabPanel.gridItem}>\n                        {isLoading ? (\n                            <LoadingSpinner />\n                        ) : (\n                            !isDone ? (\n                                <Grid container direction={'row'} justify={'center'} alignItems={'center'}>\n                                    <Grid item>\n                                        <Button onClick={()=> handleShowMore()}>\n                                            <Typography variant=\"h5\" className={classesTabPanel.showMoreText}>\n                                                {t('str_showMore')}\n                                            </Typography>\n                                            <ExpandMore className={classesTabPanel.showMoreIcon} />\n                                        </Button>\n                                    </Grid>\n                                </Grid>\n                            ) : (\n                                <Grid container direction={'row'} justify={'center'} alignItems={'center'}>\n                                    <Grid item>\n                                        <Button onClick={()=> handleLess()}>\n                                            <Typography variant=\"h5\" className={classesTabPanel.showMoreText}>\n                                                {t('str_seeLess')}\n                                            </Typography>\n                                            <ExpandLess className={classesTabPanel.showMoreIcon} />\n                                        </Button>\n                                    </Grid>\n                                </Grid>\n                            )\n                        )}\n                    </Grid>\n                )}\n            </Grid>\n            <Dialog\n                open={openDialog}\n                maxWidth={'lg'}\n                fullWidth\n            >\n                <DialogContent>\n                    <Grid container>\n                        <Grid item xs={12}>\n                            <IndexPage hideLayout/>\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions className={classes.dialogAction}>\n                    <Button\n                        className={classes.closeButton}\n                        color={'primary'}\n                        variant={'outlined'}\n                        onClick={() => {\n                            if((showAddons && state.selectedRooms.length > 0 && state.bookingActiveStep < 4) || (!showAddons && state.selectedRooms.length > 0 && state.bookingActiveStep < 3)) {\n                                setOpenTrackedDialog(true)\n                            } else {\n                                handleReset()\n                                getReservationListData(true, true)\n                            }\n                        }}\n                    >\n                        {t('str_close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n            <TrackedChangesDialog\n                open={openTrackedDialog}\n                onPressNo={(e) => {\n                    setOpenTrackedDialog(e);\n                }}\n                onPressYes={(e) => {\n                    setOpenTrackedDialog(e);\n                    setOpenDialog(false);\n                    getReservationListData(true, true)\n                    setTimeout(() => {\n                        handleReset()\n                    }, 100)\n                }}\n            />\n        </React.Fragment>\n    )\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.ibe,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomReservations)\n"]},"metadata":{},"sourceType":"module"}