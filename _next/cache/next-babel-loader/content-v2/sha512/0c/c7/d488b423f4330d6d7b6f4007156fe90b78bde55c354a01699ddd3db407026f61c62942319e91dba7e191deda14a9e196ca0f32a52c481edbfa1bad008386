{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/account/CallLog/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect, useState, useContext, useRef } from \"react\";\nimport { connect, useSelector } from 'react-redux';\nimport { ViewList } from '@webcms/orest';\nimport { IconButton, Grid, Typography, Collapse, Fab, Menu, MenuItem } from '@material-ui/core';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport NotInterestedIcon from '@material-ui/icons/NotInterested';\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport WebCmsGlobal from \"../../../webcms-global\";\nimport moment from 'moment';\nimport { formatMoney, OREST_ENDPOINT } from \"../../../../model/orest/constants\";\nimport useTranslation from \"../../../../lib/translations/hooks/useTranslation\";\nimport MaterialTable, { MTableHeader } from 'material-table';\nimport { CustomToolTip } from \"../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { setToState } from \"../../../../state/actions\";\nimport RequestDetail from \"../../../user-portal/components/RequestDetail\";\nimport TableColumnText from \"../../../TableColumnText\";\nimport AddRaTagDialog from \"../../../AddRaTagDialog\";\nimport PopupState, { bindMenu, bindTrigger } from \"material-ui-popup-state\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nconst useStyles = makeStyles(theme => ({\n  overflowContainer: {\n    maxWidth: '255px',\n    minWidth: '255px',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis'\n  },\n  inputAdornmentStyle: {\n    position: \"absolute\",\n    right: \"2px\",\n    top: \"10px\",\n    \"&.MuiInputAdornment-positionStart\": {\n      marginRight: \"0\"\n    }\n  },\n  callType: {\n    left: '50%',\n    transform: 'translateX(-50%)',\n    position: 'absolute',\n    visibility: 'visible'\n  },\n  ctxMenu: {\n    textAlign: 'center',\n    visibility: 'hidden'\n  },\n  table: {\n    \"& tbody>.MuiTableRow-root:hover\": {\n      backgroundColor: \"rgb(163, 166, 180,0.1)\"\n    },\n    \"& tbody>.MuiTableRow-root:hover $ctxMenu\": {\n      visibility: 'visible'\n    },\n    \"& tbody>.MuiTableRow-root:hover $callType\": {\n      visibility: 'hidden'\n    }\n  }\n}));\n\nfunction CallLog(props) {\n  const classes = useStyles(); //props\n\n  const {\n    setToState\n  } = props; //context\n\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    t\n  } = useTranslation(); //redux\n\n  const token = useSelector(state => {\n    var _state$orest, _state$orest$currentU;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : _state$orest$currentU.auth.access_token) || false;\n  });\n  const clientBase = useSelector(state => {\n    var _state$orest2, _state$orest2$state;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest2 = state.orest) === null || _state$orest2 === void 0 ? void 0 : (_state$orest2$state = _state$orest2.state) === null || _state$orest2$state === void 0 ? void 0 : _state$orest2$state.client) || false;\n  });\n  const hotelRefNo = useSelector(state => {\n    var _state$hotelinfo;\n\n    return (state === null || state === void 0 ? void 0 : (_state$hotelinfo = state.hotelinfo) === null || _state$hotelinfo === void 0 ? void 0 : _state$hotelinfo.currentHotelRefNo) || null;\n  });\n  const panelStatus = useSelector(state => {\n    var _state$formReducer, _state$formReducer$us;\n\n    return state === null || state === void 0 ? void 0 : (_state$formReducer = state.formReducer) === null || _state$formReducer === void 0 ? void 0 : (_state$formReducer$us = _state$formReducer.userPortal) === null || _state$formReducer$us === void 0 ? void 0 : _state$formReducer$us.panelStatus;\n  });\n  const panels = useSelector(state => {\n    var _state$formReducer2, _state$formReducer2$u;\n\n    return (state === null || state === void 0 ? void 0 : (_state$formReducer2 = state.formReducer) === null || _state$formReducer2 === void 0 ? void 0 : (_state$formReducer2$u = _state$formReducer2.userPortal) === null || _state$formReducer2$u === void 0 ? void 0 : _state$formReducer2$u.panels) || false;\n  }); //state\n\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: logList,\n    1: setLogList\n  } = useState();\n  const {\n    0: selectedCallLogInfo,\n    1: setSelectedCallLogInfo\n  } = useState(false);\n  const {\n    0: openAddRaTagDialog,\n    1: setOpenAddRaTagDialog\n  } = useState(false);\n  const {\n    0: midValue,\n    1: setMidValue\n  } = useState(0); //ref\n\n  const tableRef = useRef(null);\n  const columns = [{\n    title: t('str_callType'),\n    field: 'calltype',\n    render: props => __jsx(\"div\", {\n      style: {\n        position: 'relative'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: classes.callType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, __jsx(Typography, {\n      style: {\n        textAlign: 'center',\n        fontSize: 'inherit'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, __jsx(\"img\", {\n      src: (props === null || props === void 0 ? void 0 : props.transtypeicon) || '',\n      style: {\n        maxWidth: '1em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }))), __jsx(\"div\", {\n      className: classes.ctxMenu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, __jsx(IconButton, {\n      style: {\n        padding: '0'\n      },\n      onClick: () => handleOpenDetailPanel(props),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, __jsx(MenuIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    })), __jsx(PopupState, {\n      variant: \"popover\",\n      popupId: \"status-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, popupState => __jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 33\n      }\n    }, __jsx(IconButton, _extends({\n      style: {\n        padding: '0'\n      }\n    }, bindTrigger(popupState), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 37\n      }\n    }), __jsx(MoreVertIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 41\n      }\n    })), __jsx(Menu, _extends({\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      },\n      getContentAnchorEl: null\n    }, bindMenu(popupState), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 37\n      }\n    }), __jsx(MenuItem, {\n      onClick: () => {\n        setOpenAddRaTagDialog(true);\n        setMidValue(props === null || props === void 0 ? void 0 : props.mid);\n        popupState.close();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 41\n      }\n    }, __jsx(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 45\n      }\n    }), __jsx(Typography, {\n      style: {\n        paddingLeft: '8px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 45\n      }\n    }, \" \", t('str_addTag'))))))))\n  }, {\n    title: t('str_empCode'),\n    field: 'empcode',\n    render: state => __jsx(TableColumnText, {\n      minWidth: 150,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 32\n      }\n    }, state.empcode)\n  }, {\n    title: t('str_date'),\n    field: 'transdate',\n    render: state => __jsx(TableColumnText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 32\n      }\n    }, moment(state.transdate).format('L'))\n  }, {\n    title: t('str_time'),\n    field: 'transtime'\n  }, {\n    title: t('str_calledNumber'),\n    field: 'callednumber'\n  }, {\n    title: t('str_elapsed'),\n    field: 'elapsed'\n  }, {\n    title: t('str_counter'),\n    field: 'counter',\n    headerStyle: {\n      textAlign: 'right'\n    },\n    render: state => __jsx(TableColumnText, {\n      textAlign: 'right',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 32\n      }\n    }, state.counter)\n  }, {\n    title: t('str_totalPrice'),\n    field: 'totalprice',\n    headerStyle: {\n      textAlign: 'right'\n    },\n    render: state => __jsx(TableColumnText, {\n      textAlign: 'right',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 32\n      }\n    }, formatMoney(state.totalprice))\n  }, {\n    title: t('str_numberDesc'),\n    field: 'numberdesc',\n    render: state => __jsx(TableColumnText, {\n      minWidth: 250,\n      maxWidth: 250,\n      showToolTip: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 32\n      }\n    }, state.numberdesc)\n  }, {\n    title: t('str_account'),\n    field: 'acccode'\n  }, {\n    title: t('str_note'),\n    field: 'note',\n    render: state => __jsx(TableColumnText, {\n      minWidth: 250,\n      maxWidth: 250,\n      showToolTip: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 32\n      }\n    }, state.note)\n  }, {\n    title: t('str_extension'),\n    field: 'extension',\n    render: state => __jsx(TableColumnText, {\n      minWidth: 120,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 32\n      }\n    }, state.extension)\n  }, {\n    title: t('str_commType'),\n    field: 'commtypedesc'\n  }, {\n    title: t('str_id'),\n    field: 'id',\n    headerStyle: {\n      textAlign: 'right',\n      cursor: 'default'\n    },\n    render: state => __jsx(TableColumnText, {\n      textAlign: 'right',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 32\n      }\n    }, state.id)\n  }];\n  useEffect(() => {\n    getCallLogList();\n  }, []);\n\n  const getCallLogList = () => {\n    setIsLoading(true);\n    ViewList({\n      apiUrl: GENERAL_SETTINGS.OREST_URL,\n      endpoint: OREST_ENDPOINT.COMM,\n      token,\n      params: {\n        hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO,\n        query: `accid:${clientBase === null || clientBase === void 0 ? void 0 : clientBase.id}`\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setLogList(res.data.data);\n        setIsLoading(false);\n      } else {\n        setIsLoading(false);\n      }\n    });\n  };\n\n  const handleOpenDetailPanel = callLogInfo => {\n    setSelectedCallLogInfo(callLogInfo);\n    setToState('userPortal', ['panelStatus'], panels.requestDetail);\n    setToState('userPortal', ['currentTask'], callLogInfo);\n  };\n\n  const handleReset = () => {\n    setMidValue(0);\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }\n  }, __jsx(Collapse, {\n    in: panelStatus === panels.requestList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 29\n    }\n  }, __jsx(CustomToolTip, {\n    title: t('str_refresh'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 33\n    }\n  }, __jsx(IconButton, {\n    onClick: () => {\n      getCallLogList();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 37\n    }\n  }, __jsx(CachedIcon, {\n    style: {\n      color: \"#F16A4B\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 41\n    }\n  })))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: classes.table,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 33\n    }\n  }, __jsx(MaterialTable, {\n    tableRef: tableRef,\n    columns: columns,\n    data: logList,\n    isLoading: isLoading,\n    options: {\n      headerStyle: {\n        cursor: 'default',\n        fontWeight: \"bold\",\n        fontSize: \"12px\",\n        color: \"#A3A6B4\",\n        textTransform: \"uppercase\",\n        backgroundColor: \"#F5F6FA\",\n        whiteSpace: 'nowrap',\n        borderLeft: '1px solid #FFF'\n      },\n      cellStyle: {\n        whiteSpace: 'nowrap',\n        borderLeft: '1px solid rgba(224, 224, 224, 1)',\n        minWidth: '100px'\n      },\n      toolbar: false,\n      selection: true,\n      sorting: false,\n      search: false,\n      actionsColumnIndex: 1,\n      selectionColumnIndex: 1\n    },\n    components: {\n      Header: props => {\n        const overrideProps = _objectSpread({}, props);\n\n        overrideProps.draggable = false;\n        return __jsx(MTableHeader, _extends({}, overrideProps, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 53\n          }\n        }));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 37\n    }\n  }))))), __jsx(Collapse, {\n    in: panelStatus === panels.requestDetail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 29\n    }\n  }, selectedCallLogInfo && __jsx(RequestDetail, {\n    taskmid: selectedCallLogInfo === null || selectedCallLogInfo === void 0 ? void 0 : selectedCallLogInfo.mid,\n    taskHotelRefNo: selectedCallLogInfo === null || selectedCallLogInfo === void 0 ? void 0 : selectedCallLogInfo.hotelrefno,\n    tableName: OREST_ENDPOINT.COMM,\n    gid: selectedCallLogInfo === null || selectedCallLogInfo === void 0 ? void 0 : selectedCallLogInfo.gid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 57\n    }\n  })))))), __jsx(AddRaTagDialog, {\n    open: openAddRaTagDialog,\n    onClose: () => {\n      handleReset();\n      setOpenAddRaTagDialog(false);\n    },\n    mid: midValue,\n    token: token,\n    orestUrl: GENERAL_SETTINGS.OREST_URL,\n    hotelRefNo: hotelRefNo,\n    raTagLabel: t('str_label'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }));\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(null, mapDispatchToProps)(CallLog);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/account/CallLog/index.js"],"names":["React","useEffect","useState","useContext","useRef","connect","useSelector","ViewList","IconButton","Grid","Typography","Collapse","Fab","Menu","MenuItem","CachedIcon","NotInterestedIcon","MenuIcon","ArrowBackIcon","ArrowDownwardIcon","ArrowUpwardIcon","MoreVertIcon","AddIcon","WebCmsGlobal","moment","formatMoney","OREST_ENDPOINT","useTranslation","MaterialTable","MTableHeader","CustomToolTip","makeStyles","setToState","RequestDetail","TableColumnText","AddRaTagDialog","PopupState","bindMenu","bindTrigger","EditOutlinedIcon","useStyles","theme","overflowContainer","maxWidth","minWidth","overflow","whiteSpace","textOverflow","inputAdornmentStyle","position","right","top","marginRight","callType","left","transform","visibility","ctxMenu","textAlign","table","backgroundColor","CallLog","props","classes","GENERAL_SETTINGS","t","token","state","orest","currentUser","auth","access_token","clientBase","client","hotelRefNo","hotelinfo","currentHotelRefNo","panelStatus","formReducer","userPortal","panels","isLoading","setIsLoading","logList","setLogList","selectedCallLogInfo","setSelectedCallLogInfo","openAddRaTagDialog","setOpenAddRaTagDialog","midValue","setMidValue","tableRef","columns","title","field","render","fontSize","transtypeicon","padding","handleOpenDetailPanel","popupState","vertical","horizontal","mid","close","paddingLeft","empcode","transdate","format","headerStyle","counter","totalprice","numberdesc","note","extension","cursor","id","getCallLogList","apiUrl","OREST_URL","endpoint","COMM","params","hotelrefno","HOTELREFNO","query","then","res","status","data","callLogInfo","requestDetail","handleReset","requestList","color","fontWeight","textTransform","borderLeft","cellStyle","toolbar","selection","sorting","search","actionsColumnIndex","selectionColumnIndex","Header","overrideProps","draggable","gid","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext, useRef} from \"react\";\nimport { connect, useSelector } from 'react-redux'\nimport { ViewList } from '@webcms/orest'\nimport {\n    IconButton,\n    Grid,\n    Typography,\n    Collapse,\n    Fab, Menu, MenuItem\n} from '@material-ui/core'\nimport CachedIcon from '@material-ui/icons/Cached';\nimport NotInterestedIcon from '@material-ui/icons/NotInterested';\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport WebCmsGlobal from \"../../../webcms-global\";\nimport moment from 'moment'\nimport {formatMoney, OREST_ENDPOINT} from \"../../../../model/orest/constants\";\nimport useTranslation from \"../../../../lib/translations/hooks/useTranslation\";\nimport MaterialTable, { MTableHeader } from 'material-table'\nimport {CustomToolTip} from \"../../../user-portal/components/CustomToolTip/CustomToolTip\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { setToState } from \"../../../../state/actions\";\nimport RequestDetail from \"../../../user-portal/components/RequestDetail\";\nimport TableColumnText from \"../../../TableColumnText\";\nimport AddRaTagDialog from \"../../../AddRaTagDialog\";\nimport PopupState, {bindMenu, bindTrigger} from \"material-ui-popup-state\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\n\n\nconst useStyles = makeStyles( theme => ({\n    overflowContainer: {\n        maxWidth: '255px',\n        minWidth: '255px',\n        overflow: 'hidden',\n        whiteSpace: 'nowrap',\n        textOverflow: 'ellipsis'\n    },\n    inputAdornmentStyle: {\n        position:\"absolute\",\n        right:\"2px\",\n        top:\"10px\",\n        \"&.MuiInputAdornment-positionStart\": {\n            marginRight:\"0\"\n        }\n    },\n    callType: {\n        left: '50%',\n        transform: 'translateX(-50%)',\n        position: 'absolute',\n        visibility: 'visible'\n    },\n    ctxMenu: {\n        textAlign: 'center',\n        visibility: 'hidden'\n    },\n    table: {\n        \"& tbody>.MuiTableRow-root:hover\": {\n            backgroundColor: \"rgb(163, 166, 180,0.1)\"\n        },\n        \"& tbody>.MuiTableRow-root:hover $ctxMenu\": {\n            visibility: 'visible'\n        },\n        \"& tbody>.MuiTableRow-root:hover $callType\": {\n            visibility: 'hidden'\n        },\n    },\n\n\n}));\n\nfunction CallLog(props){\n    const classes = useStyles();\n\n    //props\n    const { setToState } = props\n\n    //context\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal);\n    const { t } = useTranslation();\n\n    //redux\n    const token = useSelector((state) => state?.orest?.currentUser?.auth.access_token || false);\n    const clientBase = useSelector((state) => state?.orest?.state?.client || false)\n    const hotelRefNo = useSelector(state => state?.hotelinfo?.currentHotelRefNo || null);\n    const panelStatus = useSelector(state => state?.formReducer?.userPortal?.panelStatus);\n    const panels = useSelector(state => state?.formReducer?.userPortal?.panels || false);\n\n    //state\n    const [isLoading, setIsLoading] = useState(false);\n    const [logList, setLogList] = useState();\n    const [selectedCallLogInfo, setSelectedCallLogInfo] = useState(false);\n    const [openAddRaTagDialog, setOpenAddRaTagDialog] = useState(false);\n    const [midValue, setMidValue] = useState(0);\n\n\n    //ref\n    const tableRef = useRef(null);\n\n    const columns = [\n        {\n            title: t('str_callType'),\n            field: 'calltype',\n            render: (props) => (\n                <div style={{position: 'relative'}}>\n                    <div className={classes.callType}>\n                        <Typography style={{textAlign :'center', fontSize: 'inherit'}}>\n                            <img src={props?.transtypeicon || ''} style={{maxWidth: '1em'}}/>\n                        </Typography>\n                    </div>\n                    <div className={classes.ctxMenu}>\n                        <IconButton style={{padding: '0'}} onClick={() => handleOpenDetailPanel(props)}>\n                            <MenuIcon />\n                        </IconButton>\n                        <PopupState variant=\"popover\" popupId=\"status-menu\">\n                            {(popupState) => (\n                                <React.Fragment>\n                                    <IconButton style={{padding: '0'}} {...bindTrigger(popupState)}>\n                                        <MoreVertIcon />\n                                    </IconButton>\n                                    <Menu\n                                        anchorOrigin={{\n                                            vertical: \"bottom\",\n                                            horizontal: \"left\"\n                                        }}\n                                        transformOrigin={{\n                                            vertical: \"top\",\n                                            horizontal: \"left\"\n                                        }}\n                                        getContentAnchorEl={null}\n                                        {...bindMenu(popupState)}\n                                    >\n                                        <MenuItem onClick={() => {\n                                            setOpenAddRaTagDialog(true)\n                                            setMidValue(props?.mid)\n                                            popupState.close();\n                                        }}\n                                        >\n                                            <AddIcon />\n                                            <Typography style={{paddingLeft: '8px'}}> {t('str_addTag')}</Typography>\n                                        </MenuItem>\n                                    </Menu>\n                                </React.Fragment>\n                            )}\n                        </PopupState>\n                    </div>\n                </div>\n            )\n        },\n        {\n            title: t('str_empCode'),\n            field: 'empcode',\n            render: (state) => <TableColumnText minWidth={150}>{state.empcode}</TableColumnText>\n        },\n        {\n            title: t('str_date'),\n            field: 'transdate',\n            render: (state) => <TableColumnText>{moment(state.transdate).format('L')}</TableColumnText>\n        },\n        {\n            title: t('str_time'),\n            field: 'transtime',\n        },\n        {\n            title: t('str_calledNumber'),\n            field: 'callednumber',\n        },\n        {\n            title: t('str_elapsed'),\n            field: 'elapsed',\n        },\n        {\n            title: t('str_counter'),\n            field: 'counter',\n            headerStyle: {\n                textAlign: 'right'\n            },\n            render: (state) => <TableColumnText textAlign={'right'}>{state.counter}</TableColumnText>\n        },\n        {\n            title: t('str_totalPrice'),\n            field: 'totalprice',\n            headerStyle: {\n                textAlign: 'right'\n            },\n            render: (state) => <TableColumnText textAlign={'right'}>{formatMoney(state.totalprice)}</TableColumnText>\n        },\n        {\n            title: t('str_numberDesc'),\n            field: 'numberdesc',\n            render: (state) => <TableColumnText minWidth={250} maxWidth={250} showToolTip>{state.numberdesc}</TableColumnText>\n        },\n        {\n            title: t('str_account'),\n            field: 'acccode',\n        },\n        {\n            title: t('str_note'),\n            field: 'note',\n            render: (state) => <TableColumnText minWidth={250} maxWidth={250} showToolTip>{state.note}</TableColumnText>\n        },\n        {\n            title: t('str_extension'),\n            field: 'extension',\n            render: (state) => <TableColumnText minWidth={120}>{state.extension}</TableColumnText>\n        },\n        {\n            title: t('str_commType'),\n            field: 'commtypedesc',\n        },\n        {\n            title: t('str_id'),\n            field: 'id',\n            headerStyle: {\n                textAlign: 'right',\n                cursor: 'default',\n            },\n            render: (state) => <TableColumnText textAlign={'right'}>{state.id}</TableColumnText>\n        },\n    ]\n    \n    \n    useEffect(() => {\n        getCallLogList();\n    }, [])\n\n    const getCallLogList = () => {\n        setIsLoading(true);\n        ViewList({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: OREST_ENDPOINT.COMM,\n            token,\n            params: {\n                hotelrefno: hotelRefNo || GENERAL_SETTINGS.HOTELREFNO,\n                query: `accid:${clientBase?.id}`\n            }\n        }).then(res => {\n            if(res.status === 200){\n                setLogList(res.data.data);\n                setIsLoading(false);\n            } else {\n                setIsLoading(false);\n            }\n        })\n    }\n\n    const handleOpenDetailPanel = (callLogInfo) => {\n        setSelectedCallLogInfo(callLogInfo)\n        setToState('userPortal', ['panelStatus'], panels.requestDetail)\n        setToState('userPortal', ['currentTask'], callLogInfo)\n    }\n\n    const handleReset = () => {\n        setMidValue(0)\n    }\n\n\n    return(\n        <div>\n            <Grid container>\n                <Grid item xs={12}>\n                    <Collapse in={panelStatus === panels.requestList}>\n                        <Grid container>\n                            <Grid item xs={12}>\n                                <CustomToolTip title={t('str_refresh')}>\n                                    <IconButton\n                                        onClick={() => {\n                                            getCallLogList();\n                                        }}\n                                    >\n                                        <CachedIcon style={{color:\"#F16A4B\"}}/>\n                                    </IconButton>\n                                </CustomToolTip>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <div className={classes.table}>\n                                    <MaterialTable\n                                        tableRef={tableRef}\n                                        columns={columns}\n                                        data={logList}\n                                        isLoading={isLoading}\n                                        options={{\n                                            headerStyle:{\n                                                cursor: 'default',\n                                                fontWeight:\"bold\",\n                                                fontSize:\"12px\",\n                                                color:\"#A3A6B4\",\n                                                textTransform:\"uppercase\",\n                                                backgroundColor:\"#F5F6FA\",\n                                                whiteSpace: 'nowrap',\n                                                borderLeft: '1px solid #FFF',\n                                            },\n                                            cellStyle: {\n                                                whiteSpace: 'nowrap',\n                                                borderLeft: '1px solid rgba(224, 224, 224, 1)',\n                                                minWidth: '100px'\n                                            },\n                                            toolbar: false,\n                                            selection: true,\n                                            sorting: false,\n                                            search: false,\n                                            actionsColumnIndex: 1,\n                                            selectionColumnIndex: 1\n                                        }}\n                                        components={{\n                                            Header: (props) => {\n                                                const overrideProps = {...props}\n                                                overrideProps.draggable = false\n                                                return(\n                                                    <MTableHeader  {...overrideProps}/>\n                                                )\n                                            },\n                                        }}\n                                    />\n                                </div>\n                            </Grid>\n                        </Grid>\n                    </Collapse>\n                    <Collapse in={panelStatus === panels.requestDetail}>\n                        <Grid container>\n                            <Grid item xs={12}>\n                                {selectedCallLogInfo && <RequestDetail taskmid={selectedCallLogInfo?.mid} taskHotelRefNo={selectedCallLogInfo?.hotelrefno} tableName={OREST_ENDPOINT.COMM} gid={selectedCallLogInfo?.gid}/>}\n                            </Grid>\n                        </Grid>\n                    </Collapse>\n                </Grid>\n            </Grid>\n            <AddRaTagDialog\n                open={openAddRaTagDialog}\n                onClose={() => {\n                    handleReset();\n                    setOpenAddRaTagDialog(false);\n                }}\n                mid={midValue}\n                token={token}\n                orestUrl={GENERAL_SETTINGS.OREST_URL}\n                hotelRefNo={hotelRefNo}\n                raTagLabel={t('str_label')}\n            />\n        </div>\n    );\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(null, mapDispatchToProps)(CallLog);"]},"metadata":{},"sourceType":"module"}