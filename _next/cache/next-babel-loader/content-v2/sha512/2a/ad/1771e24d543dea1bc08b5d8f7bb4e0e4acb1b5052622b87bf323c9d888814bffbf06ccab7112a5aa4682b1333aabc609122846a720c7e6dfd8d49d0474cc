{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/CustomAutoComplete/CustomAutoComplete.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext, useEffect, useState, useRef } from \"react\";\nimport { connect, useSelector } from 'react-redux';\nimport { IconButton, TextField } from '@material-ui/core';\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport LoadingSpinner from \"../LoadingSpinner\";\nimport WebCmsGlobal from \"../webcms-global\";\nimport useTranslation from \"../../lib/translations/hooks/useTranslation\";\nimport { UseOrest } from '@webcms/orest';\nimport PropTypes from 'prop-types';\nimport { useOrestAction } from \"../../model/orest\";\nimport { REQUEST_METHOD_CONST } from \"../../model/orest/constants\";\nimport { setToState } from \"../../state/actions\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n      paddingRight: '0'\n    },\n    '&.MuiAutocomplete-hasPopupIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n      paddingRight: '0'\n    },\n    '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]:hover $addIconContainer': {\n      visibility: 'visible'\n    },\n    '& .MuiInputBase-root > .MuiAutocomplete-endAdornment': {\n      position: 'initial'\n    },\n    '& .MuiAutocomplete-endAdornment > .MuiAutocomplete-clearIndicator': {\n      fontSize: '1.125rem',\n      padding: '3px'\n    },\n    '& .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"] .MuiAutocomplete-endAdornment': {\n      right: '0',\n      paddingRight: '8px'\n    }\n  },\n  addIconContainer: {\n    visibility: 'hidden'\n  }\n}));\nconst filter = createFilterOptions();\n\nfunction CustomAutoComplete(props) {\n  const classes = useStyles();\n  const {\n    id,\n    name,\n    endpoint,\n    params,\n    disabled,\n    variant,\n    searchParam,\n    label,\n    value,\n    showOptionLabel,\n    initialId,\n    trgValKey,\n    showOption,\n    required,\n    searchInitialParam,\n    onChange,\n    onLoad,\n    freeSolo,\n    helperText,\n    error,\n    triggerValue,\n    onInputChange,\n    useDefaultFilter,\n    onBlur,\n    withoutToken,\n    setToState,\n    withoutTokenData,\n    fullWidth,\n    showAddIcon,\n    handleAddIconClick,\n    fontSize,\n    findDefaultValue\n  } = props; //context\n\n  const {\n    GENERAL_SETTINGS\n  } = useContext(WebCmsGlobal);\n  const {\n    t\n  } = useTranslation();\n  const {\n    setOrestState\n  } = useOrestAction(); //redux\n\n  const token = useSelector(state => {\n    var _state$orest, _state$orest$currentU;\n\n    return (state === null || state === void 0 ? void 0 : (_state$orest = state.orest) === null || _state$orest === void 0 ? void 0 : (_state$orest$currentU = _state$orest.currentUser) === null || _state$orest$currentU === void 0 ? void 0 : _state$orest$currentU.auth.access_token) || false;\n  });\n  const reduxList = useSelector(state => {\n    var _state$formReducer, _state$formReducer$dy;\n\n    return (state === null || state === void 0 ? void 0 : (_state$formReducer = state.formReducer) === null || _state$formReducer === void 0 ? void 0 : (_state$formReducer$dy = _state$formReducer.dynamicList) === null || _state$formReducer$dy === void 0 ? void 0 : _state$formReducer$dy[name]) || false;\n  }); //state\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: searchText,\n    1: setSearchText\n  } = useState('');\n  const {\n    0: reason,\n    1: setReason\n  } = useState('');\n  const {\n    0: list,\n    1: setList\n  } = useState(reduxList || []);\n  const {\n    0: filterList,\n    1: setFilterList\n  } = useState(list);\n  const {\n    0: initialValue,\n    1: setInitialValue\n  } = useState('');\n  const {\n    0: localStateTriggerValue,\n    1: setLocalStateTriggerValue\n  } = useState(false);\n  let baseUrl = GENERAL_SETTINGS === null || GENERAL_SETTINGS === void 0 ? void 0 : GENERAL_SETTINGS.BASE_URL;\n\n  if (withoutToken && baseUrl.length > 0) {\n    if (baseUrl[baseUrl.length - 1] === '/') {\n      baseUrl = baseUrl.substring(0, baseUrl.length - 1);\n    }\n  } //ref\n\n\n  const ref = useRef();\n  useEffect(() => {\n    if (initialId && initialId !== '' && initialValue === 'find' && initialId !== initialValue) {\n      UseOrest({\n        apiUrl: GENERAL_SETTINGS.OREST_URL,\n        endpoint: endpoint,\n        token,\n        params: {\n          query: `${searchInitialParam ? searchInitialParam : 'id'}:${initialId}`,\n          hotelrefno: params === null || params === void 0 ? void 0 : params.hotelrefno\n        }\n      }).then(r1 => {\n        if (r1.status === 200) {\n          if (typeof onLoad === 'function') {\n            onLoad(r1.data.data[0]);\n          }\n        }\n      });\n    }\n  }, [initialId, initialValue]);\n  useEffect(() => {\n    if (endpoint && params && !reduxList || endpoint && withoutToken && !reduxList) {\n      setLoading(true);\n      UseOrest({\n        apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n        endpoint: endpoint,\n        method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n        token: withoutToken ? false : token,\n        params: params,\n        data: withoutToken ? withoutTokenData : false\n      }).then(res => {\n        if (res.status === 200 && res.data.success) {\n          setLoading(false);\n          setList(res.data.data);\n          setFilterList(res.data.data);\n          setToState('dynamicList', [name], res.data.data);\n        } else {\n          setLoading(false);\n        }\n      });\n    } else if (reduxList && (reduxList === null || reduxList === void 0 ? void 0 : reduxList.length) > 0) {\n      setList(reduxList);\n    }\n  }, []);\n  useEffect(() => {\n    if (initialId && list.length > 0) {\n      handleFindInitialValue(list);\n    }\n  }, [initialId, list]);\n  useEffect(() => {\n    if (localStateTriggerValue !== (typeof triggerValue === 'object' ? triggerValue[trgValKey] : triggerValue) && triggerValue !== '' && triggerValue) {\n      setLocalStateTriggerValue(triggerValue);\n      setLoading(true);\n      UseOrest({\n        apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n        endpoint: endpoint,\n        method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n        token: withoutToken ? false : token,\n        params: params,\n        data: withoutToken ? withoutTokenData && withoutTokenData : false\n      }).then(res => {\n        if (res.status === 200) {\n          setList(res.data.data);\n        }\n\n        setLoading(false);\n      });\n    }\n  }, [triggerValue]);\n\n  const handleFindInitialValue = (list = []) => {\n    if (list.length > 0) {\n      if (initialId) {\n        let initialValue;\n\n        if (searchInitialParam) {\n          initialValue = list.find(e => e[searchInitialParam] === initialId);\n        } else {\n          initialValue = list.find(e => e.id === initialId);\n        }\n\n        if (initialValue) {\n          if (typeof onLoad === 'function') {\n            onLoad(initialValue);\n          }\n\n          setInitialValue(typeof initialValue === 'object' ? initialValue[searchInitialParam] : initialValue);\n        } else {\n          setInitialValue('find');\n\n          if (findDefaultValue) {\n            const defaultValue = list.find(e => e.isdef === true);\n\n            if (defaultValue) {\n              if (typeof onLoad === 'function') {\n                onLoad(defaultValue && defaultValue);\n              }\n\n              setInitialValue(initialValue);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!useDefaultFilter) {\n      if (searchText.length > 0 && reason !== 'reset') {\n        const timer = setTimeout(() => {\n          params.text = `*${searchText}`;\n          params.field = searchParam;\n          setLoading(true);\n          UseOrest({\n            apiUrl: GENERAL_SETTINGS.OREST_URL,\n            endpoint: endpoint,\n            token,\n            params: params\n          }).then(res => {\n            if (res.status === 200) {\n              setFilterList(res.data.data);\n              setLoading(false);\n            } else {\n              setLoading(false);\n            }\n          });\n        }, 1000);\n        return () => clearTimeout(timer);\n      } else {\n        setFilterList([]);\n      }\n    }\n  }, [searchText]);\n\n  const handleOnBlur = event => {\n    if (typeof onBlur === 'function') onBlur(event);\n  };\n\n  return __jsx(Autocomplete, {\n    className: classes.root,\n    id: id,\n    name: name,\n    ref: ref,\n    loading: loading,\n    disabled: disabled || loading,\n    noOptionsText: t(\"str_notFound\"),\n    fullWidth: fullWidth,\n    value: value,\n    variant: variant || 'outlined',\n    onChange: (event, newValue) => {\n      onChange(event, newValue, ref.current.getAttribute(\"name\"));\n    },\n    onInputChange: (e, newInputValue, reason) => {\n      setSearchText(newInputValue.toUpperCase());\n      setReason(reason);\n\n      if (typeof onInputChange === 'function') {\n        onInputChange(newInputValue);\n      }\n    },\n    onBlur: e => handleOnBlur(e),\n    options: searchText.length > 0 && filterList.length > 0 ? filterList : list,\n    filterOptions: (options, params) => useDefaultFilter ? list.length > 0 && filter(options, params) : options,\n    getOptionLabel: option => {\n      // Value selected with enter, right from the input\n      if (typeof option === 'string') {\n        return option;\n      } // Add \"xxx\" option created dynamically\n\n\n      if (option[showOption]) {\n        return option[showOption];\n      } // Regular option\n\n\n      return option.code;\n    } //renderOption={(option) => option[showOption ? showOption : 'code']}\n    ,\n    getOptionSelected: (option, value) => option[showOption ? showOption : 'id'] === value[showOption ? showOption : 'id'],\n    renderInput: params => __jsx(TextField, _extends({}, params, {\n      required: required,\n      error: error,\n      label: label || '',\n      InputProps: _objectSpread(_objectSpread({}, params.InputProps), {}, {\n        style: {\n          fontSize: fontSize || 'inherit'\n        },\n        endAdornment: __jsx(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 29\n          }\n        }, showAddIcon && __jsx(\"div\", {\n          className: classes.addIconContainer,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 41\n          }\n        }, __jsx(IconButton, {\n          size: 'small',\n          onClick: () => typeof handleAddIconClick === 'function' && handleAddIconClick(),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 45\n          }\n        }, __jsx(AddIcon, {\n          fontSize: 'small',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 49\n          }\n        }))), loading ? __jsx(\"div\", {\n          style: {\n            paddingRight: '4px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 41\n          }\n        }, __jsx(LoadingSpinner, {\n          size: 18,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 45\n          }\n        })) : null, params.InputProps.endAdornment)\n      }),\n      variant: variant,\n      helperText: helperText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }\n    })),\n    freeSolo: freeSolo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  });\n}\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomAutoComplete);\nCustomAutoComplete.defaultProps = {\n  showOptionLabel: 'code'\n};\nCustomAutoComplete.propTypes = {\n  endpoint: PropTypes.string.isRequired\n};","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/CustomAutoComplete/CustomAutoComplete.js"],"names":["React","useContext","useEffect","useState","useRef","connect","useSelector","IconButton","TextField","Autocomplete","createFilterOptions","LoadingSpinner","WebCmsGlobal","useTranslation","UseOrest","PropTypes","useOrestAction","REQUEST_METHOD_CONST","setToState","AddIcon","makeStyles","useStyles","theme","root","paddingRight","visibility","position","fontSize","padding","right","addIconContainer","filter","CustomAutoComplete","props","classes","id","name","endpoint","params","disabled","variant","searchParam","label","value","showOptionLabel","initialId","trgValKey","showOption","required","searchInitialParam","onChange","onLoad","freeSolo","helperText","error","triggerValue","onInputChange","useDefaultFilter","onBlur","withoutToken","withoutTokenData","fullWidth","showAddIcon","handleAddIconClick","findDefaultValue","GENERAL_SETTINGS","t","setOrestState","token","state","orest","currentUser","auth","access_token","reduxList","formReducer","dynamicList","loading","setLoading","searchText","setSearchText","reason","setReason","list","setList","filterList","setFilterList","initialValue","setInitialValue","localStateTriggerValue","setLocalStateTriggerValue","baseUrl","BASE_URL","length","substring","ref","apiUrl","OREST_URL","query","hotelrefno","then","r1","status","data","method","POST","GET","res","success","handleFindInitialValue","find","e","defaultValue","isdef","timer","setTimeout","text","field","clearTimeout","handleOnBlur","event","newValue","current","getAttribute","newInputValue","toUpperCase","options","option","code","InputProps","style","endAdornment","mapStateToProps","guest","mapDispatchToProps","dispatch","stateType","stateName","defaultProps","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState, useRef} from \"react\";\nimport {connect, useSelector} from 'react-redux'\nimport {IconButton, TextField} from '@material-ui/core'\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport LoadingSpinner from \"../LoadingSpinner\";\nimport WebCmsGlobal from \"../webcms-global\";\nimport useTranslation from \"../../lib/translations/hooks/useTranslation\";\nimport {UseOrest} from '@webcms/orest'\nimport PropTypes from 'prop-types'\nimport {useOrestAction} from \"../../model/orest\";\nimport { REQUEST_METHOD_CONST } from \"../../model/orest/constants\";\nimport { setToState } from \"../../state/actions\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n            paddingRight: '0',\n        },\n        '&.MuiAutocomplete-hasPopupIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]': {\n            paddingRight: '0',\n        },\n        '&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"]:hover $addIconContainer': {\n            visibility: 'visible',\n        },\n        '& .MuiInputBase-root > .MuiAutocomplete-endAdornment': {\n            position: 'initial',\n        },\n        '& .MuiAutocomplete-endAdornment > .MuiAutocomplete-clearIndicator': {\n            fontSize: '1.125rem',\n            padding: '3px'\n        },\n        '& .MuiAutocomplete-inputRoot[class*=\"MuiOutlinedInput-root\"] .MuiAutocomplete-endAdornment': {\n            right: '0',\n            paddingRight: '8px'\n        }\n    },\n    addIconContainer: {\n        visibility: 'hidden'\n    }\n}))\n\nconst filter = createFilterOptions();\n\nfunction CustomAutoComplete(props) {\n    const classes = useStyles()\n\n    const { id, name, endpoint, params, disabled, variant, searchParam, label, value, showOptionLabel, initialId, trgValKey, showOption, required, searchInitialParam, onChange, onLoad, freeSolo, helperText, error, triggerValue, onInputChange, useDefaultFilter, onBlur, withoutToken, setToState, withoutTokenData, fullWidth, showAddIcon, handleAddIconClick, fontSize, findDefaultValue } = props\n\n    //context\n    const { GENERAL_SETTINGS } = useContext(WebCmsGlobal);\n    const { t } = useTranslation();\n\n    const { setOrestState } = useOrestAction()\n\n    //redux\n    const token = useSelector((state) => state?.orest?.currentUser?.auth.access_token || false);\n    const reduxList = useSelector((state) => state?.formReducer?.dynamicList?.[name] || false);\n\n    //state\n    const [loading, setLoading] = useState(false);\n    const [searchText, setSearchText] = useState('');\n    const [reason, setReason] = useState('');\n    const [list, setList] = useState(reduxList || []);\n    const [filterList, setFilterList] = useState(list)\n    const [initialValue, setInitialValue] = useState('');\n    const [localStateTriggerValue, setLocalStateTriggerValue] = useState(false);\n\n    let baseUrl = GENERAL_SETTINGS?.BASE_URL\n    if(withoutToken && baseUrl.length > 0) {\n        if(baseUrl[baseUrl.length - 1] === '/') {\n            baseUrl = baseUrl.substring(0, baseUrl.length - 1)\n        }\n    }\n\n    //ref\n    const ref = useRef();\n\n    useEffect(() => {\n        if(initialId && initialId !== '' && initialValue === 'find' && initialId !== initialValue) {\n            UseOrest({\n                apiUrl: GENERAL_SETTINGS.OREST_URL,\n                endpoint: endpoint,\n                token,\n                params: {\n                    query: `${searchInitialParam ? searchInitialParam : 'id'}:${initialId}`,\n                    hotelrefno: params?.hotelrefno\n                }\n            }).then(r1 => {\n                if(r1.status === 200) {\n                    if(typeof onLoad === 'function') {\n                        onLoad(r1.data.data[0])\n                    }\n                }\n            })\n        }\n    }, [initialId, initialValue])\n\n    useEffect(() => {\n        if((endpoint && params && !reduxList) || (endpoint && withoutToken && !reduxList)) {\n            setLoading(true);\n            UseOrest({\n                apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n                endpoint: endpoint,\n                method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n                token: withoutToken ? false : token,\n                params: params,\n                data: withoutToken ? withoutTokenData : false\n            }).then(res => {\n                if(res.status === 200 && res.data.success) {\n                    setLoading(false);\n                    setList(res.data.data);\n                    setFilterList(res.data.data);\n                    setToState('dynamicList', [name], res.data.data)\n                } else {\n                    setLoading(false);\n                }\n            })\n        } else if(reduxList && reduxList?.length > 0) {\n            setList(reduxList);\n        }\n    }, [])\n\n    useEffect(() => {\n        if(initialId && list.length > 0) {\n            handleFindInitialValue(list)\n        }\n    }, [initialId, list])\n\n\n\n\n    useEffect(() => {\n        if(localStateTriggerValue !== (typeof triggerValue === 'object' ? triggerValue[trgValKey] : triggerValue)  && triggerValue !== '' && triggerValue) {\n            setLocalStateTriggerValue(triggerValue);\n            setLoading(true);\n            UseOrest({\n                apiUrl: withoutToken ? baseUrl : GENERAL_SETTINGS.OREST_URL,\n                endpoint: endpoint,\n                method: withoutToken ? REQUEST_METHOD_CONST.POST : REQUEST_METHOD_CONST.GET,\n                token: withoutToken ? false : token,\n                params: params,\n                data: withoutToken ? withoutTokenData && withoutTokenData : false\n            }).then(res => {\n                if(res.status === 200) {\n                    setList(res.data.data)\n                }\n                setLoading(false);\n            })\n        }\n    }, [triggerValue])\n\n    const handleFindInitialValue = (list = []) => {\n        if(list.length > 0) {\n            if(initialId) {\n                let initialValue;\n                if(searchInitialParam) {\n                    initialValue = list.find(e => e[searchInitialParam] === initialId)\n                } else {\n                    initialValue = list.find(e => e.id === initialId)\n                }\n                if(initialValue){\n                    if(typeof onLoad === 'function') {\n                        onLoad(initialValue)\n                    }\n                    setInitialValue(typeof initialValue === 'object' ? initialValue[searchInitialParam] : initialValue)\n                } else {\n                    setInitialValue('find')\n                    if(findDefaultValue) {\n                        const defaultValue = list.find(e => e.isdef === true);\n                        if(defaultValue) {\n                            if(typeof onLoad === 'function') {\n                                onLoad(defaultValue && defaultValue)\n                            }\n                            setInitialValue(initialValue)\n                        }\n                    }                    \n                }\n            }\n        }\n    }\n\n\n\n\n    useEffect(() => {\n        if(!useDefaultFilter) {\n            if(searchText.length > 0 && reason !== 'reset') {\n                const timer = setTimeout(() => {\n                    params.text = `*${searchText}`;\n                    params.field = searchParam\n                    setLoading(true);\n                    UseOrest({\n                        apiUrl: GENERAL_SETTINGS.OREST_URL,\n                        endpoint: endpoint,\n                        token,\n                        params: params\n                    }).then(res => {\n                        if(res.status === 200) {\n                            setFilterList(res.data.data)\n                            setLoading(false)\n                        } else {\n                            setLoading(false);\n                        }\n                    })\n                }, 1000)\n                return () => clearTimeout(timer);\n            } else {\n                setFilterList([])\n            }\n        }\n\n    }, [searchText])\n\n    const handleOnBlur = (event) => {\n       if(typeof onBlur === 'function') onBlur(event)\n    }\n\n    return(\n        <Autocomplete\n            className={classes.root}\n            id={id}\n            name={name}\n            ref={ref}\n            loading={loading}\n            disabled={disabled || loading}\n            noOptionsText={t(\"str_notFound\")}\n            fullWidth={fullWidth}\n            value={value}\n            variant={variant || 'outlined'}\n            onChange={(event, newValue) => {\n                onChange(event, newValue, ref.current.getAttribute(\"name\"))\n            }}\n            onInputChange={(e, newInputValue, reason) => {\n                setSearchText(newInputValue.toUpperCase())\n                setReason(reason)\n                if(typeof onInputChange === 'function') {\n                    onInputChange(newInputValue)\n                }\n            }}\n            onBlur={(e) => handleOnBlur(e)}\n            options={searchText.length > 0 && filterList.length > 0 ? filterList : list}\n            filterOptions={(options, params) => useDefaultFilter ? list.length > 0 && filter(options, params) : options}\n            getOptionLabel={(option) => {\n                // Value selected with enter, right from the input\n                if (typeof option === 'string') {\n                    return option;\n                }\n                // Add \"xxx\" option created dynamically\n                if (option[showOption]) {\n                    return option[showOption];\n                }\n                // Regular option\n                return option.code;\n            }}\n            //renderOption={(option) => option[showOption ? showOption : 'code']}\n            getOptionSelected={(option, value) => option[showOption ? showOption : 'id'] === value[showOption ? showOption : 'id']}\n            renderInput={(params) => (\n                <TextField\n                    {...params}\n                    required={required}\n                    error={error}\n                    label={label || ''}\n                    InputProps={{\n                        ...params.InputProps,\n                        style:{fontSize: fontSize || 'inherit'},\n                        endAdornment: (\n                            <React.Fragment>\n\n                                {\n                                    showAddIcon && (\n                                        <div className={classes.addIconContainer}>\n                                            <IconButton size={'small'} onClick={() => typeof handleAddIconClick === 'function' && handleAddIconClick()}>\n                                                <AddIcon fontSize={'small'}/>\n                                            </IconButton>\n                                        </div>\n                                    )\n                                }\n                                {\n                                    loading ? (\n                                        <div style={{paddingRight: '4px'}}>\n                                            <LoadingSpinner size={18} />\n                                        </div>\n                                    ) : null\n                                }\n                                {params.InputProps.endAdornment}\n                            </React.Fragment>\n                        ),\n                    }}\n                    variant={variant}\n                    helperText={helperText}\n                />\n            )}\n            freeSolo={freeSolo}\n        />\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomAutoComplete)\n\nCustomAutoComplete.defaultProps = {\n    showOptionLabel: 'code'\n}\n\nCustomAutoComplete.propTypes = {\n    endpoint: PropTypes.string.isRequired,\n\n}"]},"metadata":{},"sourceType":"module"}