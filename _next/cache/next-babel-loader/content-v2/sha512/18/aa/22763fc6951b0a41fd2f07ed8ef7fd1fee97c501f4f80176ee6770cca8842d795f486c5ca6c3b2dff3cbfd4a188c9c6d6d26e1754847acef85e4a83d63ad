{"ast":null,"code":"import _defineProperty from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/mata/app-cloudweb/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/email/body/EditEmailSection.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useContext, useEffect, useState } from 'react'; //material imports\n\nimport Container from '@material-ui/core/Container';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from \"@material-ui/core/TextField\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Radio from \"@material-ui/core/Radio\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useRouter } from \"next/router\";\nimport { withStyles } from '@material-ui/core/styles'; //import toast\n\nimport { toast } from \"react-toastify\"; //custom imports\n\nimport EditImage from \"../../page/sections/image/EditImage\";\nimport EditParagraph from \"../../page/sections/paragraph/EditParagrapgh\";\nimport Alert from \"../../page/sections/AlertDialog\"; //redux import\n\nimport { connect } from 'react-redux';\nimport { setToState as _setToState } from \"../../../../../../state/actions\"; //integration related imports\n\nimport axios from \"axios\";\nimport WebCmsGlobal from \"../../../../../webcms-global\";\nimport { isErrorMsg, OREST_ENDPOINT, REQUEST_METHOD_CONST } from \"../../../../../../model/orest/constants\";\nimport { Delete, Insert, Patch } from \"@webcms/orest\";\nimport { DELETE_SUCCESS } from \"../../../constants\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nvar useStyle = makeStyles(function (theme) {\n  return {\n    disableSlider: {\n      pointerEvents: \"none\",\n      opacity: 0.5\n    },\n    actionButtons: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      marginTop: theme.spacing(2)\n    },\n    actionButton: {\n      marginLeft: theme.spacing(1),\n      borderRadius: 20\n    }\n  };\n});\nvar marks = [{\n  value: 0,\n  label: '0'\n}, {\n  value: 10,\n  label: '10%'\n}, {\n  value: 20,\n  label: '20%'\n}, {\n  value: 30,\n  label: '30%'\n}, {\n  value: 40,\n  label: '40%'\n}, {\n  value: 50,\n  label: '50%'\n}, {\n  value: 60,\n  label: '60'\n}, {\n  value: 70,\n  label: '70%'\n}, {\n  value: 80,\n  label: '80%'\n}, {\n  value: 90,\n  label: '90%'\n}, {\n  value: 100,\n  label: '100%'\n}];\nvar iOSBoxShadow = '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\nvar CustomSlider = withStyles({\n  root: {\n    // color: COLORS.primary,\n    height: 2,\n    padding: '15px 0'\n  },\n  thumb: {\n    height: 28,\n    width: 28,\n    backgroundColor: '#fff',\n    boxShadow: iOSBoxShadow,\n    marginTop: -14,\n    marginLeft: -14,\n    '&:focus, &:hover, &$active': {\n      boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        boxShadow: iOSBoxShadow\n      }\n    }\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 11px)',\n    top: -22,\n    '& *': {\n      background: 'transparent',\n      color: '#000'\n    }\n  },\n  track: {\n    height: 2\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5,\n    backgroundColor: '#bfbfbf'\n  },\n  mark: {\n    backgroundColor: '#bfbfbf',\n    height: 8,\n    width: 1,\n    marginTop: -3\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor'\n  }\n})(Slider);\n\nvar EditEmailSection = function EditEmailSection(props) {\n  _s();\n\n  var _state$page, _state$page$sections;\n\n  var dialogTitle = props.dialogTitle,\n      section = props.section,\n      isDialogOpen = props.isDialogOpen,\n      state = props.state,\n      onEditSection = props.onEditSection,\n      resetRender = props.resetRender,\n      setToState = props.setToState,\n      otherLangSection = props.otherLangSection;\n\n  var _useState = useState(isDialogOpen),\n      openModal = _useState[0],\n      setOpenModal = _useState[1];\n\n  var _useState2 = useState(0),\n      activeStep = _useState2[0],\n      setActiveStep = _useState2[1];\n\n  var _useState3 = useState(section.type),\n      sectionType = _useState3[0],\n      setSectionType = _useState3[1];\n\n  var _useState4 = useState(''),\n      alertType = _useState4[0],\n      setAlertType = _useState4[1];\n\n  var _useState5 = useState([]),\n      steps = _useState5[0],\n      setSteps = _useState5[1];\n\n  var _useState6 = useState(0),\n      consumeWidth = _useState6[0],\n      setConsumeWidth = _useState6[1];\n\n  var _useState7 = useState(section),\n      editedSection = _useState7[0],\n      setEditedSection = _useState7[1];\n\n  var _useState8 = useState(false),\n      isAlertDialog = _useState8[0],\n      setAlertDialog = _useState8[1];\n\n  var _useState9 = useState(''),\n      tmp_sectionType = _useState9[0],\n      setTempSectionType = _useState9[1];\n\n  var _useState10 = useState(false),\n      isSave = _useState10[0],\n      setSave = _useState10[1];\n\n  var _useState11 = useState(section.items),\n      components = _useState11[0],\n      setComponents = _useState11[1];\n\n  var _useState12 = useState(section.id),\n      sectionID = _useState12[0],\n      setSectionID = _useState12[1];\n\n  var _useState13 = useState(null),\n      selectedComponent = _useState13[0],\n      setSelectedComponent = _useState13[1];\n\n  var _useState14 = useState(null),\n      newComponent = _useState14[0],\n      setNewComponent = _useState14[1];\n\n  var _useState15 = useState(false),\n      isNextDisable = _useState15[0],\n      setNextDisable = _useState15[1];\n\n  var index = state.email.body.indexOf(editedSection);\n  var sectionTypes = [{\n    label: 'Full Section',\n    value: 'fullcol'\n  }, {\n    label: '2 Column Section',\n    value: 'twocol'\n  }, {\n    label: '3 Column Section',\n    value: 'threecol'\n  }];\n\n  var _useState16 = useState(index + 1 || 1),\n      sectionOrder = _useState16[0],\n      setSectionOrder = _useState16[1];\n\n  var router = useRouter();\n  var companyId = router.query.companyID;\n\n  var _useContext = useContext(WebCmsGlobal),\n      GENERAL_SETTINGS = _useContext.GENERAL_SETTINGS,\n      token = _useContext.token;\n\n  var authToken = token || router.query.authToken;\n  var classes = useStyle();\n  useEffect(function () {\n    if (sectionType === 'fullcol') {\n      setSteps(['Type', 'Sub Section 1']);\n    } else if (sectionType === 'twocol') {\n      setSteps(['Type', 'Sub Section 1', 'Sub Section 2']);\n    } else {\n      setSteps(['Type', 'Sub Section 1', 'Sub Section 2', 'Sub Section 3']);\n    }\n  }, [sectionType]);\n  useEffect(function () {\n    handleNextComponentWidth();\n  }, [editedSection, activeStep]);\n\n  var handleComponents = function handleComponents(data) {\n    var updatedComponents = _toConsumableArray(components);\n\n    updatedComponents[activeStep - 1] = data;\n    setComponents(updatedComponents);\n  };\n\n  var handleDisable = function handleDisable(isDisabled) {\n    setNextDisable(isDisabled);\n  };\n\n  var setModalType = function setModalType(component, index) {\n    switch (component.type) {\n      case 'image':\n        return state.langCode === state.defaultLang ? __jsx(EditImage, {\n          imageComponent: component,\n          handleCmponent: handleComponents,\n          handleDisable: handleDisable,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 60\n          }\n        }) : __jsx(EditImage, {\n          imageComponent: component,\n          handleCmponent: handleComponents,\n          otherLangImage: otherLangSection[index],\n          handleDisable: handleDisable,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 26\n          }\n        });\n\n      case 'paragraph':\n        return state.langCode === state.defaultLang ? __jsx(EditParagraph, {\n          paragraphComponent: component,\n          handleCmponent: handleComponents,\n          handleDisable: handleDisable,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }\n        }) : __jsx(EditParagraph, {\n          paragraphComponent: component,\n          handleCmponent: handleComponents,\n          otherLangParagraph: otherLangSection[index],\n          handleDisable: handleDisable,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }\n        });\n    }\n  };\n\n  var handleCancel = function handleCancel() {\n    setOpenModal(false);\n    props.resetRender();\n  };\n\n  var handleApply = function handleApply() {\n    if (isSave) {\n      var newSection = {\n        id: sectionID.toLowerCase(),\n        type: sectionType,\n        items: components\n      };\n      onEditSection(newSection, index, sectionOrder);\n      resetRender();\n      setOpenModal(false);\n    }\n  };\n\n  var handleNextSection = function handleNextSection() {\n    if (activeStep === steps.length - 1) {\n      setSave(true);\n      components.map(function (component) {\n        if (component.type === 'paragraph') {\n          if (component.gid) {\n            Patch({\n              // update into rafile\n              apiUrl: GENERAL_SETTINGS.OREST_URL,\n              endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n              token: authToken,\n              gid: component.gid,\n              data: {\n                itemtext: component.service,\n                hotelrefno: Number(companyId)\n              }\n            }).then(function (res) {\n              if (res.status === 200 && res.data.data) {\n                component.service = 'hcmitemtxtpar';\n              }\n            });\n          } else {\n            Insert({\n              // insert paragraph into hcmitemtxt\n              apiUrl: GENERAL_SETTINGS.OREST_URL,\n              endpoint: OREST_ENDPOINT.HCMITEMTXT,\n              token: authToken,\n              data: {\n                itemid: state.hcmItemId,\n                hotelrefno: Number(companyId)\n              }\n            }).then(function (res) {\n              if (res.status === 200 && res.data.data) {\n                Insert({\n                  // insert textpar\n                  apiUrl: GENERAL_SETTINGS.OREST_URL,\n                  endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n                  token: authToken,\n                  data: {\n                    itemid: res.data.data.id,\n                    itemtext: component.service,\n                    hotelrefno: Number(companyId)\n                  }\n                }).then(function (res1) {\n                  if (res1.status === 200 && res1.data.data) {\n                    component.service = 'hcmitemtxtpar';\n                    component.gid = res1.data.data.gid;\n                  }\n                });\n              }\n            });\n          }\n        }\n      });\n    } else {\n      setActiveStep(function (previousStep) {\n        return previousStep + 1;\n      });\n    }\n  };\n\n  var handleBackSection = function handleBackSection() {\n    setActiveStep(function (previousStep) {\n      return previousStep - 1;\n    });\n  };\n\n  var handleNextComponentWidth = function handleNextComponentWidth() {\n    var totalConsumeWidth = 0;\n    editedSection.items.map(function (component, index) {\n      if (index <= activeStep - 1) {\n        totalConsumeWidth += component.width;\n      }\n    });\n    setConsumeWidth(totalConsumeWidth);\n  };\n\n  var handleComponentWidthChange = function handleComponentWidthChange(e, value) {\n    setConsumeWidth(value);\n  };\n\n  var handleSectionType = function handleSectionType(event) {\n    setAlertType('section');\n    setAlertDialog(true);\n    setTempSectionType(event.target.value);\n  };\n\n  var handleComponentType = function handleComponentType(event, component) {\n    if (section.type !== sectionType) {\n      var updatedSections = state.email.body;\n      var componentIndex = updatedSections[index].items.indexOf(component);\n      component.service = handleComponentService(event.target.value);\n      component.type = event.target.value;\n      updatedSections[index].items[componentIndex] = component;\n      setEditedSection(updatedSections[index]);\n      setToState('pageBuilder', ['email', 'body'], updatedSections);\n    } else {\n      setAlertType('component');\n      setAlertDialog(true);\n      setSelectedComponent(component);\n      handleNewComponent(event.target.value);\n    }\n  };\n\n  var handleComponentService = function handleComponentService(componentType) {\n    if (componentType === 'slider') {\n      return 'hcmitemsld';\n    } else if (componentType === 'image') {\n      return 'hcmitemimg';\n    } else if (componentType === 'widgetbooking') {\n      return 'widgetbooking';\n    } else if (componentType === 'paragraph') {\n      return 'hcmitemtxtpar';\n    } else return null;\n  };\n\n  var handleNewComponent = function handleNewComponent(componenttype) {\n    if (componenttype === 'slider') {\n      setNewComponent({\n        gid: '',\n        service: 'hcmitemsld',\n        type: componenttype,\n        width: 100\n      });\n    }\n\n    if (componenttype === 'image') {\n      setNewComponent({\n        gid: '',\n        service: 'hcmitemimg',\n        type: componenttype,\n        width: 100\n      });\n    }\n\n    if (componenttype === 'paragraph') {\n      setNewComponent({\n        gid: '',\n        service: 'hcmitemtxtpar',\n        type: componenttype,\n        width: 100\n      });\n    }\n\n    if (componenttype === 'widgetbooking') {\n      setNewComponent({\n        service: '',\n        type: 'widgetbooking',\n        width: 100\n      });\n    }\n  };\n\n  var handleAlertActionChange = function handleAlertActionChange(isDelete) {\n    if (isDelete) {\n      if (alertType === 'section') {\n        handleDeleteSection();\n      }\n\n      if (alertType === 'component') {\n        handleComponentDelete();\n      }\n    }\n\n    setAlertDialog(false);\n  };\n\n  var handleDeleteSection = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var selectedSection, req, _iterator, _step, component, REQUEST_OPTIONS_DELETE_HCMITEMIMG, image, REQUEST_OPTIONS_DELETE_HCMITEMTXTPAR, paragrapgh;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              selectedSection = state.email.body[index];\n              req = [];\n              _iterator = _createForOfIteratorHelper(selectedSection.items);\n              _context2.prev = 3;\n\n              _iterator.s();\n\n            case 5:\n              if ((_step = _iterator.n()).done) {\n                _context2.next = 21;\n                break;\n              }\n\n              component = _step.value;\n\n              if (!(component.type === 'image')) {\n                _context2.next = 13;\n                break;\n              }\n\n              REQUEST_OPTIONS_DELETE_HCMITEMIMG = {\n                url: GENERAL_SETTINGS.OREST_URL + OREST_ENDPOINT.SLASH + OREST_ENDPOINT.HCMITEMIMG + OREST_ENDPOINT.SLASH + 'del/' + component.gid,\n                method: REQUEST_METHOD_CONST.DELETE,\n                headers: {\n                  Authorization: \"Bearer \".concat(authToken),\n                  'Content-Type': 'application/json'\n                },\n                params: {\n                  hotelrefno: Number(companyId)\n                }\n              };\n              _context2.next = 11;\n              return deleteImage(REQUEST_OPTIONS_DELETE_HCMITEMIMG);\n\n            case 11:\n              image = _context2.sent;\n              req.push(image);\n\n            case 13:\n              if (!(component.type === 'paragraph')) {\n                _context2.next = 19;\n                break;\n              }\n\n              REQUEST_OPTIONS_DELETE_HCMITEMTXTPAR = {\n                url: GENERAL_SETTINGS.OREST_URL + OREST_ENDPOINT.SLASH + OREST_ENDPOINT.HCMITEMTXTPAR + OREST_ENDPOINT.SLASH + 'del/' + component.gid,\n                method: REQUEST_METHOD_CONST.DELETE,\n                headers: {\n                  Authorization: \"Bearer \".concat(authToken),\n                  'Content-Type': 'application/json'\n                },\n                params: {\n                  hotelrefno: Number(companyId)\n                }\n              };\n              _context2.next = 17;\n              return deleteParagraph(REQUEST_OPTIONS_DELETE_HCMITEMTXTPAR);\n\n            case 17:\n              paragrapgh = _context2.sent;\n              req.push(paragrapgh);\n\n            case 19:\n              _context2.next = 5;\n              break;\n\n            case 21:\n              _context2.next = 26;\n              break;\n\n            case 23:\n              _context2.prev = 23;\n              _context2.t0 = _context2[\"catch\"](3);\n\n              _iterator.e(_context2.t0);\n\n            case 26:\n              _context2.prev = 26;\n\n              _iterator.f();\n\n              return _context2.finish(26);\n\n            case 29:\n              _context2.next = 31;\n              return Promise.all(req).then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n                  var isSuccess;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          isSuccess = true;\n                          _context.next = 3;\n                          return res.map(function (r) {\n                            if (r.status !== 200) {\n                              isSuccess = false;\n                            }\n                          });\n\n                        case 3:\n                          if (isSuccess) {\n                            setSectionType(tmp_sectionType);\n                            handleResetSection();\n                            toast.success(DELETE_SUCCESS, {\n                              position: toast.POSITION.TOP_RIGHT\n                            });\n                          } else {\n                            toast.error('Something went wrong', {\n                              position: toast.POSITION.TOP_RIGHT\n                            });\n                          }\n\n                        case 4:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n\n            case 31:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 23, 26, 29]]);\n    }));\n\n    return function handleDeleteSection() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleResetSection = function handleResetSection() {\n    var index = state.email.body.indexOf(section);\n    var updateSections = state.email.body;\n    var newSection = {};\n    var initialComponents = [];\n\n    switch (tmp_sectionType) {\n      case 'fullcol':\n        initialComponents = [{\n          id: 'item-1',\n          service: '',\n          type: '',\n          gid: '',\n          width: 100\n        }];\n        newSection = {\n          id: section.id,\n          type: tmp_sectionType,\n          items: initialComponents\n        };\n        break;\n\n      case 'twocol':\n        [50, 50].map(function (value, i) {\n          initialComponents.push({\n            id: 'item-' + (i + 1),\n            service: '',\n            type: '',\n            gid: '',\n            width: value\n          });\n        });\n        newSection = {\n          id: section.id,\n          type: tmp_sectionType,\n          items: initialComponents\n        };\n        break;\n\n      case 'threecol':\n        [30, 30, 40].map(function (value, i) {\n          initialComponents.push({\n            id: 'item-' + (i + 1),\n            service: '',\n            type: '',\n            gid: '',\n            width: value\n          });\n        });\n        newSection = {\n          id: section.id,\n          type: tmp_sectionType,\n          items: initialComponents\n        };\n        break;\n    }\n\n    setEditedSection(newSection);\n    updateSections[index] = newSection;\n    setToState('pageBuilder', ['email', 'body'], updateSections);\n  };\n\n  var handleComponentDelete = function handleComponentDelete() {\n    var updatedSection = _objectSpread({}, section);\n\n    var updatedSections = state.email.body;\n    var componentIndex = updatedSection.items.indexOf(selectedComponent);\n    updatedSection.items[componentIndex] = newComponent;\n\n    if (state.code.toLowerCase() === 'new page') {\n      if (selectedComponent.type === 'image') {\n        Delete({\n          apiUrl: GENERAL_SETTINGS.OREST_URL,\n          endpoint: OREST_ENDPOINT.HCMITEMIMG,\n          token: authToken,\n          gid: selectedComponent.gid,\n          params: {\n            hotelrefno: Number(companyId)\n          }\n        }).then(function (res) {\n          if (res.status === 200) {\n            toast.success('Image deleted successfully', {\n              position: toast.POSITION.TOP_RIGHT\n            });\n            setEditedSection(updatedSection);\n            updatedSections[index] = updatedSection;\n            setToState('pageBuilder', ['email', 'body'], updatedSections);\n          } else {\n            var retErr = isErrorMsg(res);\n            toast.error(retErr.errorMsg, {\n              position: toast.POSITION.TOP_RIGHT\n            });\n          }\n        });\n      }\n\n      if (selectedComponent.type === 'paragraph') {\n        setEditedSection(updatedSection);\n        updatedSections[index] = updatedSection;\n        setToState('pageBuilder', ['email', 'body'], updatedSections);\n        toast.success('Text deleted successfully', {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    } else {\n      setEditedSection(updatedSection);\n      updatedSections[index] = updatedSection;\n      setToState('pageBuilder', ['email', 'body'], updatedSections);\n    }\n  };\n\n  var deleteImage = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(header) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              return _context5.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(resv) {\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return axios(header).then( /*#__PURE__*/function () {\n                            var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response) {\n                              var retErr;\n                              return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                                while (1) {\n                                  switch (_context3.prev = _context3.next) {\n                                    case 0:\n                                      if (response.status === 200 && response.data && response.data.success) {\n                                        resv(response);\n                                      } else {\n                                        retErr = isErrorMsg(response);\n                                        toast.error(retErr.errorMsg, {\n                                          position: toast.POSITION.TOP_RIGHT\n                                        });\n                                      }\n\n                                    case 1:\n                                    case \"end\":\n                                      return _context3.stop();\n                                  }\n                                }\n                              }, _callee3);\n                            }));\n\n                            return function (_x4) {\n                              return _ref5.apply(this, arguments);\n                            };\n                          }())[\"catch\"](function (error) {\n                            console.log(error);\n                            resv(error.response || {\n                              status: 0\n                            });\n                          });\n\n                        case 2:\n                          return _context4.abrupt(\"return\", _context4.sent);\n\n                        case 3:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function (_x3) {\n                  return _ref4.apply(this, arguments);\n                };\n              }()));\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function deleteImage(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var deleteParagraph = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(header) {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              return _context8.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(resv) {\n                  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          _context7.next = 2;\n                          return axios(header).then( /*#__PURE__*/function () {\n                            var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(response) {\n                              var retErr;\n                              return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                                while (1) {\n                                  switch (_context6.prev = _context6.next) {\n                                    case 0:\n                                      if (response.status === 200 && response.data && response.data.success) {\n                                        resv(response);\n                                      } else {\n                                        retErr = isErrorMsg(response);\n                                        toast.error(retErr.errorMsg, {\n                                          position: toast.POSITION.TOP_RIGHT\n                                        });\n                                      }\n\n                                    case 1:\n                                    case \"end\":\n                                      return _context6.stop();\n                                  }\n                                }\n                              }, _callee6);\n                            }));\n\n                            return function (_x7) {\n                              return _ref8.apply(this, arguments);\n                            };\n                          }())[\"catch\"](function (error) {\n                            console.log(error);\n                            resv(error.response || {\n                              status: 0\n                            });\n                          });\n\n                        case 2:\n                          return _context7.abrupt(\"return\", _context7.sent);\n\n                        case 3:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                }));\n\n                return function (_x6) {\n                  return _ref7.apply(this, arguments);\n                };\n              }()));\n\n            case 1:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function deleteParagraph(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleSectionID = function handleSectionID(event) {\n    setSectionID(event.target.value);\n\n    if (state.type === 'email' || state.type === 'emailOnly') {\n      var _state$email, _state$email$body;\n\n      if (state !== null && state !== void 0 && (_state$email = state.email) !== null && _state$email !== void 0 && (_state$email$body = _state$email.body) !== null && _state$email$body !== void 0 && _state$email$body.length) {\n        setNextDisable(state.email.body.some(function (section, sectionIndex) {\n          return section.id === event.target.value && sectionIndex !== index;\n        }));\n      }\n    }\n  };\n\n  return __jsx(Dialog, {\n    disableBackdropClick: true,\n    disableEnforceFocus: true,\n    fullWidth: true,\n    maxWidth: \"md\",\n    open: openModal,\n    onClose: handleCancel,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 9\n    }\n  }, __jsx(DialogTitle, {\n    id: \"form-dialog-title\",\n    color: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 13\n    }\n  }, \" \", dialogTitle, __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 17\n    }\n  })), __jsx(DialogContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 13\n    }\n  }, __jsx(Stepper, {\n    activeStep: activeStep,\n    alternativeLabel: true // connector={<ColorlibConnector/>}\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 17\n    }\n  }, steps.map(function (label, index) {\n    return __jsx(Step, {\n      key: \"step-\".concat(index),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 29\n      }\n    }, __jsx(StepLabel, {\n      color: \"secondary\" // StepIconComponent={() => getStepsIcons(index, (pageStep === index), (pageStep > index), pageBuilderType)}\n      ,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 33\n      }\n    }, label));\n  })), __jsx(Container, {\n    className: isSave ? classes.disableSlider : '',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 17\n    }\n  }, activeStep === 0 && __jsx(Grid, {\n    container: true,\n    justify: 'center',\n    spacing: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 29\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 33\n    }\n  }, __jsx(FormControl, {\n    disabled: state.langCode !== state.defaultLang,\n    fullWidth: true,\n    component: \"fieldset\",\n    size: 'small',\n    variant: \"outlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 37\n    }\n  }, (sectionTypes === null || sectionTypes === void 0 ? void 0 : sectionTypes.length) > 0 && __jsx(Select, {\n    value: sectionType,\n    onChange: handleSectionType,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 45\n    }\n  }, sectionTypes.map(function (option, index) {\n    return __jsx(MenuItem, {\n      disabled: sectionType !== option.value,\n      value: option.value,\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 57\n      }\n    }, option.label);\n  })))), __jsx(Grid, {\n    item: true,\n    xs: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 33\n    }\n  }, __jsx(FormControl, {\n    component: 'fieldset',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 37\n    }\n  }, __jsx(TextField, {\n    disabled: state.langCode !== state.defaultLang,\n    label: \"Section ID *\",\n    value: sectionID,\n    onChange: handleSectionID,\n    error: isNextDisable,\n    helperText: isNextDisable ? 'Already Exist' : '',\n    variant: 'outlined',\n    size: 'small',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 41\n    }\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 33\n    }\n  }, __jsx(FormControl, {\n    fullWidth: true,\n    component: 'fieldset',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 37\n    }\n  }, __jsx(TextField, {\n    label: \"Order\",\n    inputProps: {\n      min: 1,\n      max: (state === null || state === void 0 ? void 0 : (_state$page = state.page) === null || _state$page === void 0 ? void 0 : (_state$page$sections = _state$page.sections) === null || _state$page$sections === void 0 ? void 0 : _state$page$sections.length) + 1\n    },\n    onChange: function onChange(e) {\n      return setSectionOrder(e.target.value);\n    },\n    disabled: state.langCode !== state.defaultLang,\n    value: sectionOrder,\n    size: 'small',\n    variant: 'outlined',\n    type: 'number',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 41\n    }\n  })))), state.email.body.length > 0 && state.email.body[index] && state.email.body[index].items && state.email.body[index].items.map(function (value, i) {\n    return i === activeStep - 1 ? __jsx(\"div\", {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 33\n      }\n    }, __jsx(CustomSlider // className={classes.disableSlider}\n    , {\n      marks: marks,\n      value: consumeWidth,\n      onChange: handleComponentWidthChange,\n      style: {\n        pointerEvents: 'none',\n        opacity: 0.5\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 37\n      }\n    }), __jsx(FormControl, {\n      component: \"fieldset\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 37\n      }\n    }, __jsx(RadioGroup, {\n      \"aria-label\": \"component\",\n      name: \"component\",\n      row: true,\n      value: value.type,\n      onChange: function onChange(e) {\n        handleComponentType(e, value);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 706,\n        columnNumber: 41\n      }\n    }, __jsx(FormControlLabel, {\n      value: \"image\",\n      control: __jsx(Radio, {\n        color: 'primary',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 58\n        }\n      }),\n      label: \"Image\",\n      disabled: value.type !== 'image',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 45\n      }\n    }), __jsx(FormControlLabel, {\n      value: \"paragraph\",\n      control: __jsx(Radio, {\n        color: 'primary',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 58\n        }\n      }),\n      label: \"Text\",\n      disabled: value.type !== 'paragraph',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 45\n      }\n    }))), setModalType(value, i)) : null;\n  }), __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"flex-start\",\n    alignItems: \"flex-start\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: classes.actionButtons,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 732,\n      columnNumber: 25\n    }\n  }, activeStep !== 0 && __jsx(Button, {\n    onClick: handleBackSection,\n    variant: \"contained\",\n    size: \"small\",\n    \"aria-label\": \"add\",\n    className: classes.actionButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 54\n    }\n  }, \"BACK\"), __jsx(Button, {\n    onClick: handleNextSection,\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    className: classes.actionButton,\n    disabled: isNextDisable,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 744,\n      columnNumber: 29\n    }\n  }, activeStep === steps.length - 1 ? 'SAVE' : 'NEXT')))), isAlertDialog && __jsx(Alert, {\n    handleAlert: handleAlertActionChange,\n    alertType: alertType,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 759,\n      columnNumber: 38\n    }\n  })), __jsx(DialogActions, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 762,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    className: classes.actionButton,\n    onClick: handleCancel,\n    variant: \"contained\",\n    size: \"small\",\n    \"aria-label\": \"add\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 763,\n      columnNumber: 17\n    }\n  }, \"Cancel\"), __jsx(Button, {\n    onClick: handleApply,\n    className: classes.actionButton,\n    variant: \"contained\",\n    size: \"small\",\n    \"aria-label\": \"add\",\n    color: \"primary\",\n    disabled: !isSave,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 17\n    }\n  }, \"Apply\")));\n};\n\n_s(EditEmailSection, \"442IQcPqW4WgoVJeUHaJwQvFyrQ=\", false, function () {\n  return [useRouter, useStyle];\n});\n\n_c = EditEmailSection;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.formReducer.pageBuilder\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setToState: function setToState(stateType, stateName, value) {\n      return dispatch(_setToState(stateType, stateName, value));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditEmailSection);\n\nvar _c;\n\n$RefreshReg$(_c, \"EditEmailSection\");","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/page-builder/PageBuilderSteps/components/email/body/EditEmailSection.js"],"names":["React","useContext","useEffect","useState","Container","Dialog","DialogActions","DialogContent","DialogTitle","Button","TextField","Step","StepLabel","Stepper","FormControl","RadioGroup","FormControlLabel","Radio","Grid","Slider","makeStyles","useRouter","withStyles","toast","EditImage","EditParagraph","Alert","connect","setToState","axios","WebCmsGlobal","isErrorMsg","OREST_ENDPOINT","REQUEST_METHOD_CONST","Delete","Insert","Patch","DELETE_SUCCESS","Select","MenuItem","useStyle","theme","disableSlider","pointerEvents","opacity","actionButtons","display","justifyContent","marginTop","spacing","actionButton","marginLeft","borderRadius","marks","value","label","iOSBoxShadow","CustomSlider","root","height","padding","thumb","width","backgroundColor","boxShadow","active","valueLabel","left","top","background","color","track","rail","mark","markActive","EditEmailSection","props","dialogTitle","section","isDialogOpen","state","onEditSection","resetRender","otherLangSection","openModal","setOpenModal","activeStep","setActiveStep","type","sectionType","setSectionType","alertType","setAlertType","steps","setSteps","consumeWidth","setConsumeWidth","editedSection","setEditedSection","isAlertDialog","setAlertDialog","tmp_sectionType","setTempSectionType","isSave","setSave","items","components","setComponents","id","sectionID","setSectionID","selectedComponent","setSelectedComponent","newComponent","setNewComponent","isNextDisable","setNextDisable","index","email","body","indexOf","sectionTypes","sectionOrder","setSectionOrder","router","companyId","query","companyID","GENERAL_SETTINGS","token","authToken","classes","handleNextComponentWidth","handleComponents","data","updatedComponents","handleDisable","isDisabled","setModalType","component","langCode","defaultLang","handleCancel","handleApply","newSection","toLowerCase","handleNextSection","length","map","gid","apiUrl","OREST_URL","endpoint","HCMITEMTXTPAR","itemtext","service","hotelrefno","Number","then","res","status","HCMITEMTXT","itemid","hcmItemId","res1","previousStep","handleBackSection","totalConsumeWidth","handleComponentWidthChange","e","handleSectionType","event","target","handleComponentType","updatedSections","componentIndex","handleComponentService","handleNewComponent","componentType","componenttype","handleAlertActionChange","isDelete","handleDeleteSection","handleComponentDelete","selectedSection","req","REQUEST_OPTIONS_DELETE_HCMITEMIMG","url","SLASH","HCMITEMIMG","method","DELETE","headers","Authorization","params","deleteImage","image","push","REQUEST_OPTIONS_DELETE_HCMITEMTXTPAR","deleteParagraph","paragrapgh","Promise","all","isSuccess","r","handleResetSection","success","position","POSITION","TOP_RIGHT","error","updateSections","initialComponents","i","updatedSection","code","retErr","errorMsg","header","resv","response","console","log","handleSectionID","some","sectionIndex","option","min","max","page","sections","mapStateToProps","formReducer","pageBuilder","mapDispatchToProps","dispatch","stateType","stateName"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\n//material imports\nimport Container from '@material-ui/core/Container';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from \"@material-ui/core/TextField\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Radio from \"@material-ui/core/Radio\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {useRouter} from \"next/router\";\nimport { withStyles } from '@material-ui/core/styles'\n//import toast\nimport {toast} from \"react-toastify\";\n//custom imports\nimport EditImage from \"../../page/sections/image/EditImage\";\nimport EditParagraph from \"../../page/sections/paragraph/EditParagrapgh\";\nimport Alert from \"../../page/sections/AlertDialog\";\n//redux import\nimport { connect } from 'react-redux';\nimport {setToState} from \"../../../../../../state/actions\";\n//integration related imports\nimport axios from \"axios\";\nimport WebCmsGlobal from \"../../../../../webcms-global\";\nimport {\n    isErrorMsg,\n    OREST_ENDPOINT,\n    REQUEST_METHOD_CONST\n} from \"../../../../../../model/orest/constants\";\nimport {Delete, Insert, Patch} from \"@webcms/orest\";\nimport {DELETE_SUCCESS} from \"../../../constants\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst useStyle = makeStyles(theme => ({\n    disableSlider: {\n        pointerEvents: \"none\",\n        opacity: 0.5\n    },\n    actionButtons: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        marginTop: theme.spacing(2)\n    },\n    actionButton: {\n        marginLeft: theme.spacing(1),\n        borderRadius: 20,\n    },\n}))\n\nconst marks = [{value: 0, label: '0'}, {value: 10, label: '10%'}, {value: 20, label: '20%'}, { value: 30, label: '30%'},\n    {value: 40, label: '40%'}, {value: 50, label: '50%'}, {value: 60, label: '60'}, {value: 70, label: '70%'},\n    {value: 80, label: '80%'}, { value: 90, label: '90%'}, {value: 100, label: '100%'},];\n\nconst iOSBoxShadow =\n    '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\n\nconst CustomSlider = withStyles({\n    root: {\n        // color: COLORS.primary,\n        height: 2,\n        padding: '15px 0',\n    },\n    thumb: {\n        height: 28,\n        width: 28,\n        backgroundColor: '#fff',\n        boxShadow: iOSBoxShadow,\n        marginTop: -14,\n        marginLeft: -14,\n        '&:focus, &:hover, &$active': {\n            boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n            // Reset on touch devices, it doesn't add specificity\n            '@media (hover: none)': {\n                boxShadow: iOSBoxShadow,\n            },\n        },\n    },\n    active: {},\n    valueLabel: {\n        left: 'calc(-50% + 11px)',\n        top: -22,\n        '& *': {\n            background: 'transparent',\n            color: '#000',\n        },\n    },\n    track: {\n        height: 2,\n    },\n    rail: {\n        height: 2,\n        opacity: 0.5,\n        backgroundColor: '#bfbfbf',\n    },\n    mark: {\n        backgroundColor: '#bfbfbf',\n        height: 8,\n        width: 1,\n        marginTop: -3,\n    },\n    markActive: {\n        opacity: 1,\n        backgroundColor: 'currentColor',\n    },\n})(Slider)\n\nconst EditEmailSection = (props) => {\n\n    const {\n        dialogTitle,\n        section,\n        isDialogOpen,\n        state,\n        onEditSection,\n        resetRender,\n        setToState,\n        otherLangSection\n    } = props;\n\n    const [openModal, setOpenModal] = useState(isDialogOpen);\n    const [ activeStep, setActiveStep] = useState(0);\n    const [ sectionType, setSectionType ] = useState(section.type);\n    const [alertType, setAlertType] = useState('');\n    const [steps, setSteps] = useState([]);\n    const [consumeWidth, setConsumeWidth] = useState(0);\n    const [editedSection, setEditedSection] = useState(section);\n    const [isAlertDialog, setAlertDialog] = useState(false);\n    const [tmp_sectionType, setTempSectionType] = useState('');\n    const [isSave, setSave] = useState(false);\n    const [components, setComponents] = useState(section.items);\n    const [sectionID, setSectionID] = useState(section.id);\n    const [selectedComponent, setSelectedComponent] = useState(null);\n    const [newComponent, setNewComponent] = useState(null);\n    const [isNextDisable, setNextDisable] = useState(false)\n    let index = state.email.body.indexOf(editedSection);\n    const sectionTypes = [{\n        label: 'Full Section',\n        value: 'fullcol'\n    }, {\n        label: '2 Column Section',\n        value: 'twocol'\n    }, {\n        label: '3 Column Section',\n        value: 'threecol'\n    }];\n    const [sectionOrder, setSectionOrder] = useState(index + 1 || 1);\n\n    const router = useRouter();\n    const companyId = router.query.companyID;\n    const {GENERAL_SETTINGS, token} = useContext(WebCmsGlobal);\n    const authToken = token || router.query.authToken;\n\n    const classes = useStyle();\n\n    useEffect(() => {\n        if(sectionType === 'fullcol') {\n            setSteps(['Type', 'Sub Section 1']);\n        } else if(sectionType === 'twocol') {\n            setSteps(['Type', 'Sub Section 1', 'Sub Section 2']);\n        } else {\n            setSteps(['Type', 'Sub Section 1', 'Sub Section 2', 'Sub Section 3']);\n        }\n    }, [sectionType]);\n\n    useEffect(() => {\n        handleNextComponentWidth();\n    }, [editedSection, activeStep]);\n\n    const handleComponents = (data) => {\n        const updatedComponents = [...components];\n        updatedComponents[activeStep - 1] = data;\n        setComponents(updatedComponents);\n    }\n\n    const handleDisable = (isDisabled) => {\n        setNextDisable(isDisabled);\n    }\n\n    const setModalType = (component, index) => {\n        switch (component.type) {\n            case 'image':\n                return (\n                    state.langCode === state.defaultLang ? <EditImage\n                        imageComponent={component}\n                        handleCmponent={handleComponents}\n                        handleDisable={handleDisable}\n                    /> : <EditImage\n                        imageComponent={component}\n                        handleCmponent={handleComponents}\n                        otherLangImage={otherLangSection[index]}\n                        handleDisable={handleDisable}\n                    />\n                )\n            case 'paragraph':\n                return (\n                    state.langCode === state.defaultLang ?\n                        <EditParagraph\n                            paragraphComponent={component}\n                            handleCmponent={handleComponents}\n                            handleDisable={handleDisable}\n                        /> :\n                        <EditParagraph\n                            paragraphComponent={component}\n                            handleCmponent={handleComponents}\n                            otherLangParagraph={otherLangSection[index]}\n                            handleDisable={handleDisable}\n                        />\n                )\n        }\n    }\n\n    const handleCancel = () => {\n        setOpenModal(false);\n        props.resetRender();\n    }\n\n    const handleApply = () => {\n        if(isSave) {\n            const newSection = {\n                id: sectionID.toLowerCase(),\n                type: sectionType,\n                items: components\n            }\n            onEditSection(newSection, index, sectionOrder);\n            resetRender();\n            setOpenModal(false);\n        }\n    }\n\n    const handleNextSection = () => {\n\n        if(activeStep === steps.length - 1) {\n            setSave(true);\n            components.map(component => {\n                if (component.type === 'paragraph') {\n                    if (component.gid) {\n                        Patch({ // update into rafile\n                            apiUrl: GENERAL_SETTINGS.OREST_URL,\n                            endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n                            token: authToken,\n                            gid: component.gid,\n                            data: {\n                                itemtext: component.service,\n                                hotelrefno: Number(companyId)\n                            },\n                        }).then(res => {\n                            if (res.status === 200 && res.data.data) {\n                                component.service = 'hcmitemtxtpar'\n                            }\n                        })\n                    } else {\n                        Insert({ // insert paragraph into hcmitemtxt\n                            apiUrl: GENERAL_SETTINGS.OREST_URL,\n                            endpoint: OREST_ENDPOINT.HCMITEMTXT,\n                            token: authToken,\n                            data: {\n                                itemid: state.hcmItemId,\n                                hotelrefno: Number(companyId)\n                            },\n                        }).then(res => {\n                            if(res.status === 200 && res.data.data) {\n                                Insert({ // insert textpar\n                                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                                    endpoint: OREST_ENDPOINT.HCMITEMTXTPAR,\n                                    token: authToken,\n                                    data: {\n                                        itemid: res.data.data.id,\n                                        itemtext: component.service,\n                                        hotelrefno: Number(companyId)\n                                    },\n                                }).then(res1 => {\n                                    if (res1.status === 200 && res1.data.data) {\n                                        component.service = 'hcmitemtxtpar';\n                                        component.gid = res1.data.data.gid;\n                                    }\n                                })\n                            }\n                        });\n                    }\n                }\n            })\n        } else {\n            setActiveStep(previousStep => previousStep + 1);\n        }\n    }\n\n    const handleBackSection = () => {\n        setActiveStep(previousStep => previousStep - 1);\n    }\n\n    const handleNextComponentWidth = () => {\n        let totalConsumeWidth = 0;\n        editedSection.items.map((component, index) => {\n            if (index <= activeStep - 1) {\n                totalConsumeWidth += component.width;\n            }\n        })\n        setConsumeWidth(totalConsumeWidth);\n    }\n\n    const handleComponentWidthChange = (e, value) => {\n        setConsumeWidth(value);\n    }\n\n    const handleSectionType = (event) => {\n        setAlertType('section');\n        setAlertDialog(true);\n        setTempSectionType(event.target.value);\n    }\n\n    const handleComponentType = (event, component) => {\n        if(section.type !== sectionType) {\n            const updatedSections = state.email.body;\n            const componentIndex = updatedSections[index].items.indexOf(component);\n            component.service = handleComponentService(event.target.value);\n            component.type = event.target.value;\n            updatedSections[index].items[componentIndex] = component;\n            setEditedSection(updatedSections[index]);\n            setToState('pageBuilder', ['email', 'body'], updatedSections);\n        } else {\n            setAlertType('component');\n            setAlertDialog(true);\n            setSelectedComponent(component);\n            handleNewComponent(event.target.value);\n        }\n    }\n\n    const handleComponentService = (componentType) => {\n        if(componentType === 'slider') {\n            return 'hcmitemsld'\n        } else if(componentType === 'image') {\n            return 'hcmitemimg'\n        } else if(componentType === 'widgetbooking') {\n            return 'widgetbooking'\n        } else if(componentType === 'paragraph') {\n            return 'hcmitemtxtpar'\n        } else return null;\n    }\n\n    const handleNewComponent = (componenttype) => {\n        if(componenttype === 'slider' ) {\n            setNewComponent({\n                gid: '',\n                service: 'hcmitemsld',\n                type: componenttype,\n                width: 100\n            })\n        }\n        if(componenttype === 'image' ) {\n            setNewComponent({\n                gid: '',\n                service: 'hcmitemimg',\n                type: componenttype,\n                width: 100\n            });\n        }\n        if(componenttype === 'paragraph' ) {\n            setNewComponent({\n                gid: '',\n                service: 'hcmitemtxtpar',\n                type: componenttype,\n                width: 100\n            })\n        }\n        if(componenttype === 'widgetbooking' ) {\n            setNewComponent({\n                service: '',\n                type: 'widgetbooking',\n                width: 100\n            });\n        }\n    }\n\n    const handleAlertActionChange = (isDelete) => {\n        if(isDelete) {\n            if(alertType === 'section') {\n                handleDeleteSection();\n            }\n            if(alertType === 'component') {\n                handleComponentDelete();\n            }\n        }\n        setAlertDialog(false);\n    }\n\n    const handleDeleteSection = async () => {\n        const selectedSection = state.email.body[index]\n        let req = []\n        for (let component of selectedSection.items) {\n            if (component.type === 'image') {\n                const REQUEST_OPTIONS_DELETE_HCMITEMIMG = {\n                    url:\n                        GENERAL_SETTINGS.OREST_URL +\n                        OREST_ENDPOINT.SLASH +\n                        OREST_ENDPOINT.HCMITEMIMG +\n                        OREST_ENDPOINT.SLASH +\n                        'del/' +\n                        component.gid,\n                    method: REQUEST_METHOD_CONST.DELETE,\n                    headers: {\n                        Authorization: `Bearer ${authToken}`,\n                        'Content-Type': 'application/json',\n                    },\n                    params: {\n                        hotelrefno: Number(companyId),\n                    },\n                }\n                const image = await deleteImage(REQUEST_OPTIONS_DELETE_HCMITEMIMG)\n                req.push(image)\n            }\n            if (component.type === 'paragraph') {\n                const REQUEST_OPTIONS_DELETE_HCMITEMTXTPAR = {\n                    url:\n                        GENERAL_SETTINGS.OREST_URL +\n                        OREST_ENDPOINT.SLASH +\n                        OREST_ENDPOINT.HCMITEMTXTPAR +\n                        OREST_ENDPOINT.SLASH +\n                        'del/' +\n                        component.gid,\n                    method: REQUEST_METHOD_CONST.DELETE,\n                    headers: {\n                        Authorization: `Bearer ${authToken}`,\n                        'Content-Type': 'application/json',\n                    },\n                    params: {\n                        hotelrefno: Number(companyId),\n                    },\n                }\n                const paragrapgh = await deleteParagraph(REQUEST_OPTIONS_DELETE_HCMITEMTXTPAR)\n                req.push(paragrapgh)\n            }\n        }\n        await Promise.all(req).then(async (res) => {\n            let isSuccess = true\n            await res.map((r) => {\n                if (r.status !== 200) {\n                    isSuccess = false\n                }\n            })\n            if (isSuccess) {\n                setSectionType(tmp_sectionType);\n                handleResetSection();\n                toast.success(DELETE_SUCCESS, {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            } else {\n                toast.error('Something went wrong', {\n                    position: toast.POSITION.TOP_RIGHT,\n                })\n            }\n        })\n    }\n\n    const handleResetSection = () => {\n\n        const index = state.email.body.indexOf(section);\n        const updateSections =  state.email.body;\n        let newSection ={};\n        let initialComponents = []\n        switch (tmp_sectionType) {\n            case 'fullcol':\n                initialComponents = [{\n                    id: 'item-1',\n                    service: '',\n                    type: '',\n                    gid: '',\n                    width: 100\n                }]\n                newSection = {\n                    id: section.id,\n                    type: tmp_sectionType,\n                    items: initialComponents\n                }\n                break;\n            case 'twocol':\n                [50,50].map((value, i) => {\n                    initialComponents.push({\n                        id: 'item-'+ (i+1),\n                        service: '',\n                        type: '',\n                        gid: '',\n                        width: value\n                    });\n                })\n                newSection = {\n                    id: section.id,\n                    type: tmp_sectionType,\n                    items: initialComponents\n                }\n                break;\n            case 'threecol':\n                [30,30,40].map((value, i) => {\n                    initialComponents.push({\n                        id: 'item-'+ (i+1),\n                        service: '',\n                        type: '',\n                        gid: '',\n                        width: value\n                    });\n                })\n                newSection = {\n                    id: section.id,\n                    type: tmp_sectionType,\n                    items: initialComponents\n                }\n                break;\n        }\n        setEditedSection(newSection);\n        updateSections[index]= newSection;\n        setToState('pageBuilder', ['email', 'body'], updateSections);\n    }\n\n    const handleComponentDelete = () => {\n        const updatedSection = {...section};\n        const updatedSections = state.email.body;\n        const componentIndex = updatedSection.items.indexOf(selectedComponent);\n        updatedSection.items[componentIndex] = newComponent;\n        if(state.code.toLowerCase() === 'new page') {\n             if(selectedComponent.type === 'image') {\n                Delete({\n                    apiUrl: GENERAL_SETTINGS.OREST_URL,\n                    endpoint: OREST_ENDPOINT.HCMITEMIMG,\n                    token: authToken,\n                    gid: selectedComponent.gid,\n                    params: {\n                        hotelrefno: Number(companyId)\n                    }\n                }).then(res => {\n                    if (res.status === 200) {\n                        toast.success('Image deleted successfully', {\n                            position: toast.POSITION.TOP_RIGHT\n                        });\n                        setEditedSection(updatedSection);\n                        updatedSections[index] = updatedSection;\n                        setToState('pageBuilder', ['email', 'body'], updatedSections);\n                    } else {\n                        const retErr = isErrorMsg(res);\n                        toast.error(retErr.errorMsg, {\n                            position: toast.POSITION.TOP_RIGHT\n                        });\n                    }\n                })\n             }\n             if(selectedComponent.type === 'paragraph') {\n                setEditedSection(updatedSection);\n                updatedSections[index] = updatedSection;\n                setToState('pageBuilder', ['email', 'body'], updatedSections);\n                toast.success('Text deleted successfully', {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n            }\n        } else {\n            setEditedSection(updatedSection);\n            updatedSections[index] = updatedSection;\n            setToState('pageBuilder', ['email', 'body'], updatedSections);\n        }\n    }\n\n    const deleteImage = async (header) => {\n        return new Promise(async (resv) => {\n            return await axios(header)\n                .then(async (response) => {\n                    if (response.status === 200 && response.data && response.data.success) {\n                        resv(response)\n                    } else {\n                        const retErr = isErrorMsg(response);\n                        toast.error(retErr.errorMsg, {\n                            position: toast.POSITION.TOP_RIGHT\n                        });\n                    }\n                })\n                .catch((error) => {\n                    console.log(error)\n                    resv(error.response || { status: 0 })\n                })\n        })\n    }\n\n    const deleteParagraph = async (header) => {\n        return new Promise(async (resv) => {\n            return await axios(header)\n                .then(async (response) => {\n                    if (response.status === 200 && response.data && response.data.success) {\n                        resv(response)\n                    } else {\n                        const retErr = isErrorMsg(response);\n                        toast.error(retErr.errorMsg, {\n                            position: toast.POSITION.TOP_RIGHT\n                        });\n                    }\n                })\n                .catch((error) => {\n                    console.log(error)\n                    resv(error.response || { status: 0 })\n                })\n        })\n    }\n\n    const handleSectionID = (event) => {\n        setSectionID(event.target.value);\n        if (state.type === 'email' || state.type === 'emailOnly') {\n            if (state?.email?.body?.length) {\n                setNextDisable(state.email.body.some((section, sectionIndex ) => {\n                    return (section.id === event.target.value && sectionIndex !== index)\n                }));\n            }\n        }\n    }\n\n    return(\n        <Dialog disableBackdropClick disableEnforceFocus fullWidth={true} maxWidth=\"md\" open={openModal}\n                onClose={handleCancel} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\" color=\"secondary\"> {dialogTitle}\n                <hr/>\n            </DialogTitle>\n            <DialogContent>\n                <Stepper activeStep={activeStep} alternativeLabel\n                    // connector={<ColorlibConnector/>}\n                >\n                    {steps.map((label, index) => {\n                        return (\n                            <Step key={`step-${index}`}>\n                                <StepLabel color=\"secondary\"\n                                    // StepIconComponent={() => getStepsIcons(index, (pageStep === index), (pageStep > index), pageBuilderType)}\n                                >{label}</StepLabel>\n                            </Step>\n                        );\n                    })}\n                </Stepper>\n                <Container className={isSave ? classes.disableSlider : ''}>\n                    {\n                        activeStep === 0 && (\n                            <Grid container={true} justify={'center'} spacing={6} >\n                                <Grid item xs={8}>\n                                    <FormControl disabled={state.langCode !== state.defaultLang} fullWidth component=\"fieldset\" size={'small'} variant=\"outlined\">\n                                        {\n                                            sectionTypes?.length > 0 &&\n                                            <Select value={sectionType} onChange={handleSectionType}>\n                                                {sectionTypes.map((option, index) => {\n                                                    return (\n                                                        <MenuItem disabled={sectionType !== option.value} value={option.value} key={index}>\n                                                            {option.label}\n                                                        </MenuItem>\n                                                    )\n                                                })}\n                                            </Select>\n                                        }\n                                    </FormControl>\n                                </Grid>\n                                <Grid item xs={2}>\n                                    <FormControl component={'fieldset'}>\n                                        <TextField\n                                            disabled={state.langCode !== state.defaultLang}\n                                            label=\"Section ID *\" value={sectionID}\n                                            onChange={handleSectionID}\n                                            error={isNextDisable}\n                                            helperText={isNextDisable ? 'Already Exist' : ''}\n                                            variant={'outlined'}\n                                            size={'small'}\n                                        />\n                                    </FormControl>\n                                </Grid>\n                                <Grid item xs={2}>\n                                    <FormControl fullWidth component={'fieldset'}>\n                                        <TextField label=\"Order\"\n                                                   inputProps={{ min: 1, max: state?.page?.sections?.length + 1 }}\n                                                   onChange={(e) => setSectionOrder(e.target.value)}\n                                                   disabled={state.langCode !== state.defaultLang}\n                                                   value={sectionOrder}\n                                                   size={'small'}\n                                                   variant={'outlined'}\n                                                   type={'number'}\n                                        />\n                                    </FormControl>\n                                </Grid>\n                            </Grid>\n\n                        )\n                    }\n                    {\n                        state.email.body.length > 0 && state.email.body[index] &&\n                        state.email.body[index].items &&\n                        state.email.body[index].items.map((value, i) => {\n                            return (i === activeStep - 1) ? (\n                                <div key={i}>\n                                    <CustomSlider\n                                        // className={classes.disableSlider}\n                                        marks={marks}\n                                        value={consumeWidth}\n                                        onChange={handleComponentWidthChange}\n                                        style={{pointerEvents: 'none', opacity: 0.5}}\n                                    />\n                                    <FormControl\n                                        component=\"fieldset\"\n                                    >\n                                        <RadioGroup aria-label=\"component\" name=\"component\" row value={value.type}\n                                                    onChange={(e) => {\n                                                        handleComponentType(e, value);\n                                                    }}>\n                                            <FormControlLabel\n                                                value=\"image\"\n                                                control={<Radio color={'primary'}/>}\n                                                label=\"Image\"\n                                                disabled={value.type !== 'image'}\n                                            />\n                                            <FormControlLabel\n                                                value=\"paragraph\"\n                                                control={<Radio color={'primary'}/>}\n                                                label=\"Text\"\n                                                disabled={value.type !== 'paragraph'}\n                                            />\n                                        </RadioGroup>\n                                    </FormControl>\n                                    {\n                                        setModalType(value, i)\n                                    }\n                                </div>\n                            ) : null\n                        })\n                    }\n                    <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\">\n                        <div className={classes.actionButtons}>\n                            {\n                                activeStep !== 0 && (<Button\n                                    onClick={handleBackSection}\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    aria-label=\"add\"\n                                    className={classes.actionButton}\n                                >\n                                    BACK\n                                </Button>)\n                            }\n                            <Button\n                                onClick={handleNextSection}\n                                variant=\"contained\"\n                                size=\"small\"\n                                color=\"primary\"\n                                aria-label=\"add\"\n                                className={classes.actionButton}\n                                disabled={isNextDisable}\n                            >\n                                { activeStep === steps.length - 1 ? 'SAVE' : 'NEXT' }\n                            </Button>\n                        </div>\n                    </Grid>\n                </Container>\n                {\n                    isAlertDialog && <Alert handleAlert={handleAlertActionChange} alertType={alertType} />\n                }\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    className={classes.actionButton}\n                    onClick={handleCancel}\n                    variant=\"contained\"\n                    size=\"small\"\n                    aria-label=\"add\"\n                >\n                    Cancel\n                </Button>\n                <Button\n                    onClick={handleApply}\n                    className={classes.actionButton}\n                    variant=\"contained\"\n                    size=\"small\"\n                    aria-label=\"add\"\n                    color=\"primary\"\n                    disabled={!isSave}\n                >\n                    Apply\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        state: state.formReducer.pageBuilder\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(EditEmailSection);\n"]},"metadata":{},"sourceType":"module"}