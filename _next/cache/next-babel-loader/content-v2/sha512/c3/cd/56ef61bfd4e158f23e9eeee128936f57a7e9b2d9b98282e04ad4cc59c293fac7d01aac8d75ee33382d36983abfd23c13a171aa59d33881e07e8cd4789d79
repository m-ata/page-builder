{"ast":null,"code":"var pathRedirection = function pathRedirection(ctx) {\n  var _res$GENERAL_SETTINGS, _req$_parsedUrl, _pathList$find;\n\n  var req = ctx.req,\n      res = ctx.res;\n  var pathList = (res === null || res === void 0 ? void 0 : (_res$GENERAL_SETTINGS = res.GENERAL_SETTINGS) === null || _res$GENERAL_SETTINGS === void 0 ? void 0 : _res$GENERAL_SETTINGS.WEBCMS_PATH_REDIRECT) || false;\n  var pathName = (req === null || req === void 0 ? void 0 : (_req$_parsedUrl = req._parsedUrl) === null || _req$_parsedUrl === void 0 ? void 0 : _req$_parsedUrl.pathname) || false;\n  var newPathName = pathList && ((_pathList$find = pathList.find(function (item) {\n    return item.oldpath === pathName;\n  })) === null || _pathList$find === void 0 ? void 0 : _pathList$find.newpath) || false;\n\n  if (pathList && pathName && newPathName) {\n    res.setHeader('location', newPathName);\n    res.statusCode = 301;\n    res.end();\n    return {\n      props: {}\n    };\n  }\n\n  return false;\n};\n\nmodule.exports = {\n  pathRedirection: pathRedirection\n};","map":{"version":3,"sources":["/Users/mata/app-cloudweb/lib/helpers/usePathRedirection.js"],"names":["pathRedirection","ctx","req","res","pathList","GENERAL_SETTINGS","WEBCMS_PATH_REDIRECT","pathName","_parsedUrl","pathname","newPathName","find","item","oldpath","newpath","setHeader","statusCode","end","props","module","exports"],"mappings":"AAAA,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAS;AAAA;;AAAA,MACrBC,GADqB,GACRD,GADQ,CACrBC,GADqB;AAAA,MAChBC,GADgB,GACRF,GADQ,CAChBE,GADgB;AAE7B,MAAMC,QAAQ,GAAG,CAAAD,GAAG,SAAH,IAAAA,GAAG,WAAH,qCAAAA,GAAG,CAAEE,gBAAL,gFAAuBC,oBAAvB,KAA+C,KAAhE;AACA,MAAMC,QAAQ,GAAG,CAAAL,GAAG,SAAH,IAAAA,GAAG,WAAH,+BAAAA,GAAG,CAAEM,UAAL,oEAAiBC,QAAjB,KAA6B,KAA9C;AACA,MAAMC,WAAW,GAAGN,QAAQ,uBAAIA,QAAQ,CAACO,IAAT,CAAc,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,OAAL,KAAiBN,QAArB;AAAA,GAAlB,CAAJ,mDAAI,eAAkDO,OAAtD,CAAR,IAAyE,KAA7F;;AAEA,MAAIV,QAAQ,IAAIG,QAAZ,IAAwBG,WAA5B,EAAyC;AACrCP,IAAAA,GAAG,CAACY,SAAJ,CAAc,UAAd,EAA0BL,WAA1B;AACAP,IAAAA,GAAG,CAACa,UAAJ,GAAiB,GAAjB;AACAb,IAAAA,GAAG,CAACc,GAAJ;AACA,WAAO;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAP;AACH;;AAED,SAAO,KAAP;AACH,CAdD;;AAgBAC,MAAM,CAACC,OAAP,GAAiB;AACbpB,EAAAA,eAAe,EAAfA;AADa,CAAjB","sourcesContent":["const pathRedirection = (ctx) => {\n    const { req, res } = ctx\n    const pathList = res?.GENERAL_SETTINGS?.WEBCMS_PATH_REDIRECT || false\n    const pathName = req?._parsedUrl?.pathname || false\n    const newPathName = pathList && pathList.find(item => item.oldpath === pathName)?.newpath || false\n\n    if (pathList && pathName && newPathName) {\n        res.setHeader('location', newPathName)\n        res.statusCode = 301\n        res.end()\n        return { props: {} }\n    }\n\n    return false\n}\n\nmodule.exports = {\n    pathRedirection,\n}"]},"metadata":{},"sourceType":"script"}