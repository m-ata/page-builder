{"ast":null,"code":"var _jsxFileName = \"/Users/mata/app-cloudweb/components/guest/public/Home.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { connect, useSelector } from 'react-redux';\nimport { setToState, updateState } from 'state/actions';\nimport { Container } from '@material-ui/core';\nimport useTranslation from 'lib/translations/hooks/useTranslation';\nimport Carousel from '@webcms-ui/core/carousel';\nimport Box from '@material-ui/core/Box';\nimport Offers from '../account/Offers/Offers';\nimport Divider from '@material-ui/core/Divider';\nimport WebCmsGlobal from 'components/webcms-global';\nimport Typography from '@material-ui/core/Typography';\nimport LoadingSpinner from 'components/LoadingSpinner';\nimport QuickSurvey from \"../account/QuickSurvey\";\n\nconst Home = props => {\n  const {\n    state,\n    setToState\n  } = props;\n  const {\n    t\n  } = useTranslation();\n  const {\n    GENERAL_SETTINGS,\n    locale\n  } = useContext(WebCmsGlobal);\n  const loginfo = useSelector(state => state.orest.currentUser && state.orest.currentUser.loginfo);\n  const isLogin = !!loginfo;\n  let clientParams = {};\n  useEffect(() => {\n    let isLangChange = false;\n\n    if (state.homeList.langcode !== locale) {\n      isLangChange = true;\n      setToState('guest', ['homeList', 'langcode'], locale);\n    }\n\n    clientParams.langcode = locale;\n\n    if (isLangChange && !state.homeList.isLoading) {\n      setToState('guest', ['homeList', 'isLoading'], true);\n      axios({\n        url: GENERAL_SETTINGS.BASE_URL + 'api/guestweb/home-list',\n        method: 'post',\n        params: clientParams\n      }).then(homeSliderResponse => {\n        const homeSliderData = homeSliderResponse.data;\n\n        if (homeSliderData.success && homeSliderData.data.length > 0) {\n          //Home Slider\n          const secHomeSldData = homeSliderData.data.filter(item => item.sectype === 'SECHOMESLD');\n\n          if (secHomeSldData) {\n            setToState('guest', ['homeSlider', 'data'], secHomeSldData);\n          } else {\n            setToState('guest', ['homeSlider', 'data'], null);\n          } //Offers\n\n\n          const secOffersData = homeSliderData.data.filter(item => item.sectype === 'SECOFFERS');\n\n          if (secOffersData) {\n            setToState('guest', ['offers', 'data'], secOffersData);\n          } else {\n            setToState('guest', ['offers', 'data'], null);\n          }\n\n          setToState('guest', ['homeList', 'langcode'], locale);\n          setToState('guest', ['homeList', 'isLoading'], false);\n        } else {\n          setToState('guest', ['homeSlider', 'data'], null);\n          setToState('guest', ['offers', 'data'], null);\n          setToState('guest', ['homeList', 'langcode'], locale);\n          setToState('guest', ['homeList', 'isLoading'], false);\n        }\n      }).catch(() => {\n        setToState('guest', ['homeSlider', 'data'], null);\n        setToState('guest', ['offers', 'data'], null);\n        setToState('guest', ['homeList', 'langcode'], locale);\n        setToState('guest', ['homeList', 'isLoading'], false);\n      });\n    }\n  }, [locale]);\n\n  const HomeSlider = () => {\n    if (state.homeSlider.data === false || state.homeList.isLoading) {\n      return __jsx(Box, {\n        p: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, __jsx(LoadingSpinner, {\n        size: 40,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }));\n    }\n\n    if (state.homeSlider.data === null) {\n      return __jsx(Box, {\n        p: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, __jsx(Typography, {\n        variant: \"h6\",\n        align: \"center\",\n        gutterBottom: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, t('str_noDataAvailable')));\n    }\n\n    return __jsx(Carousel, {\n      slideData: state.homeSlider.data || [],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 16\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, __jsx(Container, {\n    maxWidth: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, __jsx(HomeSlider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }), __jsx(Divider, {\n    style: {\n      marginTop: 50,\n      marginBottom: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), __jsx(Offers, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  })));\n};\n\nconst mapStateToProps = state => {\n  return {\n    state: state.formReducer.guest\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n  setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/mata/app-cloudweb/components/guest/public/Home.js"],"names":["React","useEffect","useContext","axios","connect","useSelector","setToState","updateState","Container","useTranslation","Carousel","Box","Offers","Divider","WebCmsGlobal","Typography","LoadingSpinner","QuickSurvey","Home","props","state","t","GENERAL_SETTINGS","locale","loginfo","orest","currentUser","isLogin","clientParams","isLangChange","homeList","langcode","isLoading","url","BASE_URL","method","params","then","homeSliderResponse","homeSliderData","data","success","length","secHomeSldData","filter","item","sectype","secOffersData","catch","HomeSlider","homeSlider","marginTop","marginBottom","mapStateToProps","formReducer","guest","mapDispatchToProps","dispatch","stateType","stateName","value"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,EAAiBC,WAAjB,QAAmC,aAAnC;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,eAAxC;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,OAAOC,cAAP,MAA2B,uCAA3B;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,cAAP,MAA2B,2BAA3B;AACA,OAAOC,WAAP,MAAwB,wBAAxB;;AAEA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AACpB,QAAM;AAAEC,IAAAA,KAAF;AAASd,IAAAA;AAAT,MAAwBa,KAA9B;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAQZ,cAAc,EAA5B;AACA,QAAM;AAAEa,IAAAA,gBAAF;AAAoBC,IAAAA;AAApB,MAA+BrB,UAAU,CAACY,YAAD,CAA/C;AAEA,QAAMU,OAAO,GAAGnB,WAAW,CAAEe,KAAD,IAAWA,KAAK,CAACK,KAAN,CAAYC,WAAZ,IAA2BN,KAAK,CAACK,KAAN,CAAYC,WAAZ,CAAwBF,OAA/D,CAA3B;AACA,QAAMG,OAAO,GAAG,CAAC,CAACH,OAAlB;AAEA,MAAII,YAAY,GAAG,EAAnB;AAEA3B,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI4B,YAAY,GAAG,KAAnB;;AAEA,QAAIT,KAAK,CAACU,QAAN,CAAeC,QAAf,KAA4BR,MAAhC,EAAwC;AACpCM,MAAAA,YAAY,GAAG,IAAf;AACAvB,MAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,UAAb,CAAV,EAAoCiB,MAApC,CAAV;AACH;;AAEDK,IAAAA,YAAY,CAACG,QAAb,GAAwBR,MAAxB;;AAEA,QAAIM,YAAY,IAAI,CAACT,KAAK,CAACU,QAAN,CAAeE,SAApC,EAA+C;AAC3C1B,MAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,WAAb,CAAV,EAAqC,IAArC,CAAV;AACAH,MAAAA,KAAK,CAAC;AACF8B,QAAAA,GAAG,EAAEX,gBAAgB,CAACY,QAAjB,GAA4B,wBAD/B;AAEFC,QAAAA,MAAM,EAAE,MAFN;AAGFC,QAAAA,MAAM,EAAER;AAHN,OAAD,CAAL,CAIGS,IAJH,CAISC,kBAAD,IAAwB;AAC5B,cAAMC,cAAc,GAAGD,kBAAkB,CAACE,IAA1C;;AACA,YAAID,cAAc,CAACE,OAAf,IAA0BF,cAAc,CAACC,IAAf,CAAoBE,MAApB,GAA6B,CAA3D,EAA8D;AAE1D;AACA,gBAAMC,cAAc,GAAGJ,cAAc,CAACC,IAAf,CAAoBI,MAApB,CAA4BC,IAAD,IAAUA,IAAI,CAACC,OAAL,KAAiB,YAAtD,CAAvB;;AACA,cAAIH,cAAJ,EAAoB;AAChBrC,YAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,YAAD,EAAe,MAAf,CAAV,EAAkCqC,cAAlC,CAAV;AACH,WAFD,MAEO;AACHrC,YAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,YAAD,EAAe,MAAf,CAAV,EAAkC,IAAlC,CAAV;AACH,WARyD,CAU1D;;;AACA,gBAAMyC,aAAa,GAAGR,cAAc,CAACC,IAAf,CAAoBI,MAApB,CAA4BC,IAAD,IAAUA,IAAI,CAACC,OAAL,KAAiB,WAAtD,CAAtB;;AACA,cAAIC,aAAJ,EAAmB;AACfzC,YAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,QAAD,EAAW,MAAX,CAAV,EAA8ByC,aAA9B,CAAV;AACH,WAFD,MAEO;AACHzC,YAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,QAAD,EAAW,MAAX,CAAV,EAA8B,IAA9B,CAAV;AACH;;AAEDA,UAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,UAAb,CAAV,EAAoCiB,MAApC,CAAV;AACAjB,UAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,WAAb,CAAV,EAAqC,KAArC,CAAV;AAEH,SArBD,MAqBO;AAEHA,UAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,YAAD,EAAe,MAAf,CAAV,EAAkC,IAAlC,CAAV;AACAA,UAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,QAAD,EAAW,MAAX,CAAV,EAA8B,IAA9B,CAAV;AAEAA,UAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,UAAb,CAAV,EAAoCiB,MAApC,CAAV;AACAjB,UAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,WAAb,CAAV,EAAqC,KAArC,CAAV;AAEH;AACJ,OApCD,EAoCG0C,KApCH,CAoCS,MAAM;AACX1C,QAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,YAAD,EAAe,MAAf,CAAV,EAAkC,IAAlC,CAAV;AACAA,QAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,QAAD,EAAW,MAAX,CAAV,EAA8B,IAA9B,CAAV;AAEAA,QAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,UAAb,CAAV,EAAoCiB,MAApC,CAAV;AACAjB,QAAAA,UAAU,CAAC,OAAD,EAAU,CAAC,UAAD,EAAa,WAAb,CAAV,EAAqC,KAArC,CAAV;AACH,OA1CD;AA2CH;AAEJ,GAzDQ,EAyDN,CAACiB,MAAD,CAzDM,CAAT;;AA2DA,QAAM0B,UAAU,GAAG,MAAM;AAErB,QAAI7B,KAAK,CAAC8B,UAAN,CAAiBV,IAAjB,KAA0B,KAA1B,IAAmCpB,KAAK,CAACU,QAAN,CAAeE,SAAtD,EAAiE;AAC7D,aACI,MAAC,GAAD;AAAK,QAAA,CAAC,EAAE,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,cAAD;AAAgB,QAAA,IAAI,EAAE,EAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ;AAKH;;AAED,QAAIZ,KAAK,CAAC8B,UAAN,CAAiBV,IAAjB,KAA0B,IAA9B,EAAoC;AAChC,aACI,MAAC,GAAD;AAAK,QAAA,CAAC,EAAE,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAyB,QAAA,KAAK,EAAC,QAA/B;AAAwC,QAAA,YAAY,MAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKnB,CAAC,CAAC,qBAAD,CADN,CADJ,CADJ;AAOH;;AAED,WAAO,MAAC,QAAD;AAAU,MAAA,SAAS,EAAED,KAAK,CAAC8B,UAAN,CAAiBV,IAAjB,IAAyB,EAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH,GArBD;;AAuBA,SACI,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,SAAD;AAAW,IAAA,QAAQ,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,OAAD;AAAS,IAAA,KAAK,EAAE;AAAEW,MAAAA,SAAS,EAAE,EAAb;AAAiBC,MAAAA,YAAY,EAAE;AAA/B,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADJ,CADJ;AASH,CArGD;;AAuGA,MAAMC,eAAe,GAAIjC,KAAD,IAAW;AAC/B,SAAO;AACHA,IAAAA,KAAK,EAAEA,KAAK,CAACkC,WAAN,CAAkBC;AADtB,GAAP;AAGH,CAJD;;AAMA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;AACtClD,EAAAA,WAAW,EAAE,CAACmD,SAAD,EAAYC,SAAZ,EAAuBC,KAAvB,KAAiCH,QAAQ,CAAClD,WAAW,CAACmD,SAAD,EAAYC,SAAZ,EAAuBC,KAAvB,CAAZ,CADhB;AAEtCtD,EAAAA,UAAU,EAAE,CAACoD,SAAD,EAAYC,SAAZ,EAAuBC,KAAvB,KAAiCH,QAAQ,CAACnD,UAAU,CAACoD,SAAD,EAAYC,SAAZ,EAAuBC,KAAvB,CAAX;AAFf,CAAf,CAA3B;;AAKA,eAAexD,OAAO,CAACiD,eAAD,EAAkBG,kBAAlB,CAAP,CAA6CtC,IAA7C,CAAf","sourcesContent":["import React, { useEffect, useContext } from 'react'\nimport axios from 'axios'\nimport {connect, useSelector} from 'react-redux'\nimport { setToState, updateState } from 'state/actions'\nimport { Container } from '@material-ui/core'\nimport useTranslation from 'lib/translations/hooks/useTranslation'\nimport Carousel from '@webcms-ui/core/carousel'\nimport Box from '@material-ui/core/Box'\nimport Offers from '../account/Offers/Offers'\nimport Divider from '@material-ui/core/Divider'\nimport WebCmsGlobal from 'components/webcms-global'\nimport Typography from '@material-ui/core/Typography'\nimport LoadingSpinner from 'components/LoadingSpinner'\nimport QuickSurvey from \"../account/QuickSurvey\";\n\nconst Home = (props) => {\n    const { state, setToState } = props\n    const { t } = useTranslation()\n    const { GENERAL_SETTINGS, locale } = useContext(WebCmsGlobal)\n\n    const loginfo = useSelector((state) => state.orest.currentUser && state.orest.currentUser.loginfo)\n    const isLogin = !!loginfo\n\n    let clientParams = {}\n\n    useEffect(() => {\n        let isLangChange = false\n\n        if (state.homeList.langcode !== locale) {\n            isLangChange = true\n            setToState('guest', ['homeList', 'langcode'], locale)\n        }\n\n        clientParams.langcode = locale\n\n        if (isLangChange && !state.homeList.isLoading) {\n            setToState('guest', ['homeList', 'isLoading'], true)\n            axios({\n                url: GENERAL_SETTINGS.BASE_URL + 'api/guestweb/home-list',\n                method: 'post',\n                params: clientParams,\n            }).then((homeSliderResponse) => {\n                const homeSliderData = homeSliderResponse.data\n                if (homeSliderData.success && homeSliderData.data.length > 0) {\n\n                    //Home Slider\n                    const secHomeSldData = homeSliderData.data.filter((item) => item.sectype === 'SECHOMESLD')\n                    if (secHomeSldData) {\n                        setToState('guest', ['homeSlider', 'data'], secHomeSldData)\n                    } else {\n                        setToState('guest', ['homeSlider', 'data'], null)\n                    }\n\n                    //Offers\n                    const secOffersData = homeSliderData.data.filter((item) => item.sectype === 'SECOFFERS')\n                    if (secOffersData) {\n                        setToState('guest', ['offers', 'data'], secOffersData)\n                    } else {\n                        setToState('guest', ['offers', 'data'], null)\n                    }\n\n                    setToState('guest', ['homeList', 'langcode'], locale)\n                    setToState('guest', ['homeList', 'isLoading'], false)\n\n                } else {\n\n                    setToState('guest', ['homeSlider', 'data'], null)\n                    setToState('guest', ['offers', 'data'], null)\n\n                    setToState('guest', ['homeList', 'langcode'], locale)\n                    setToState('guest', ['homeList', 'isLoading'], false)\n\n                }\n            }).catch(() => {\n                setToState('guest', ['homeSlider', 'data'], null)\n                setToState('guest', ['offers', 'data'], null)\n\n                setToState('guest', ['homeList', 'langcode'], locale)\n                setToState('guest', ['homeList', 'isLoading'], false)\n            })\n        }\n\n    }, [locale])\n\n    const HomeSlider = () => {\n\n        if (state.homeSlider.data === false || state.homeList.isLoading) {\n            return (\n                <Box p={4}>\n                    <LoadingSpinner size={40}/>\n                </Box>\n            )\n        }\n\n        if (state.homeSlider.data === null) {\n            return (\n                <Box p={4}>\n                    <Typography variant=\"h6\" align=\"center\" gutterBottom>\n                        {t('str_noDataAvailable')}\n                    </Typography>\n                </Box>\n            )\n        }\n\n        return <Carousel slideData={state.homeSlider.data || []}/>\n    }\n\n    return (\n        <React.Fragment>\n            <Container maxWidth=\"lg\">\n                <HomeSlider />\n                <Divider style={{ marginTop: 50, marginBottom: 50 }} />\n                <Offers />\n            </Container>\n        </React.Fragment>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        state: state.formReducer.guest,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateState: (stateType, stateName, value) => dispatch(updateState(stateType, stateName, value)),\n    setToState: (stateType, stateName, value) => dispatch(setToState(stateType, stateName, value)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n"]},"metadata":{},"sourceType":"module"}