{"ast":null,"code":"const getRoomRate = roomRate => {\n  roomRate = Number(roomRate);\n\n  if (roomRate > 0 && roomRate !== null) {\n    return roomRate;\n  } else {\n    return null;\n  }\n};\n\nfunction naiveRound(num, decimalPlaces = 0) {\n  let p = Math.pow(10, decimalPlaces);\n  return Math.round(num * p) / p;\n}\n\nfunction formatDiscRate(discRate) {\n  let newDiscRate;\n\n  if (discRate) {\n    let discStr = String(discRate).split('.');\n\n    if (discStr && discStr[0].length > 1) {\n      newDiscRate = String(discRate).substr(0, 5);\n    } else {\n      newDiscRate = String(discRate).substr(0, 4);\n    }\n  } else {\n    newDiscRate = discRate;\n  }\n\n  return naiveRound(parseFloat(newDiscRate));\n}\n\nfunction showDiscountRate(totalPrice, discTotalPrice) {\n  let disc = (totalPrice - discTotalPrice) * 100 / totalPrice;\n  return disc < 0 ? 0 : disc;\n}\n\nfunction applyDiscount(price, discrate) {\n  if (discrate) {\n    price = Number(price), discrate = Number(discrate) / 100;\n    return price - price * discrate;\n  }\n\n  return 0;\n}\n\nconst getPaxPrice = (totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate) => {\n  if (totalPax === 1) {\n    return getRoomRate(sngrate);\n  } else if (totalPax === 2) {\n    return getRoomRate(dblrate);\n  } else if (totalPax === 3) {\n    return getRoomRate(trprate);\n  } else if (totalPax === 4) {\n    return getRoomRate(quadrate);\n  } else if (totalPax === 5) {\n    return getRoomRate(Number(quadrate) + Number(extrarate));\n  } else if (totalPax >= 6) {\n    const extraPax = Number(totalPax) - 5,\n          basePrice = Number(quadrate) + Number(extrarate),\n          extraPaxPrice = basePrice + Number(extra2rate) * extraPax;\n    return getRoomRate(extraPaxPrice);\n  } else {\n    return null;\n  }\n};\n\nconst getChdPrice = (chdAges, agencyChdAges, babyrate, chdrate, chd2rate) => {\n  const childTotals = getChildTotals(chdAges, agencyChdAges),\n        totalBaby = Number(childTotals.totalBaby) * Number(babyrate) || 0,\n        totalChd1 = Number(childTotals.totalChd1) * Number(chdrate) || 0,\n        totalChd2 = Number(childTotals.totalChd2) * Number(chd2rate) || 0;\n  return totalChd1 + totalChd2 + totalBaby;\n};\n\nconst getTotalPrice = (priceList, totalPax, chdAges, agencyChdAges, useResRateVal = false) => {\n  let useTotalPrice, paxPrice, chdPrice, discrateVal;\n\n  if (useResRateVal) {\n    const {\n      rsingle,\n      rdouble,\n      rtriple,\n      rquad,\n      extra,\n      extra2,\n      baby,\n      child,\n      child2,\n      discrate\n    } = priceList;\n    paxPrice = getPaxPrice(totalPax, rsingle, rdouble, rtriple, rquad, extra, extra2);\n    chdPrice = getChdPrice(chdAges, agencyChdAges, baby, child, child2);\n    discrateVal = discrate;\n    useTotalPrice = Number(paxPrice) + Number(chdPrice);\n  } else {\n    const {\n      sngrate,\n      dblrate,\n      trprate,\n      quadrate,\n      extrarate,\n      extra2rate,\n      babyrate,\n      chdrate,\n      chd2rate,\n      discrate\n    } = priceList;\n    paxPrice = getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate);\n    chdPrice = getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate);\n    discrateVal = discrate;\n    useTotalPrice = Number(paxPrice) + Number(chdPrice);\n  }\n\n  return {\n    totalPrice: useTotalPrice || 0,\n    discTotalPrice: applyDiscount(useTotalPrice, discrateVal) || 0\n  };\n};\n\nconst useTotalPrice = (priceList, totalPax, chdAges, agencyChdAges, useResRateVal = false) => {\n  if (priceList) {\n    let totalPrice = 0,\n        discTotalPrice = 0,\n        useDisc = false;\n\n    for (let priceItems of priceList) {\n      const dailyPaxPrice = getTotalPrice(priceItems, totalPax, chdAges, agencyChdAges, useResRateVal);\n      totalPrice += dailyPaxPrice.totalPrice;\n\n      if ((dailyPaxPrice === null || dailyPaxPrice === void 0 ? void 0 : dailyPaxPrice.discTotalPrice) > 0) {\n        useDisc = true;\n        discTotalPrice += dailyPaxPrice.discTotalPrice;\n      } else {\n        discTotalPrice += dailyPaxPrice.totalPrice;\n      }\n    }\n\n    const discrateTotal = useDisc ? showDiscountRate(totalPrice, discTotalPrice) : 0;\n    return {\n      totalPrice,\n      discTotalPrice,\n      discrateTotal\n    };\n  }\n\n  return {\n    totalPrice: 0,\n    discTotalPrice: 0,\n    discrateTotal: 0\n  };\n};\n\nconst getCurrencyCodeToIso = currCode => {\n  switch (currCode) {\n    case 'TL':\n      return 'TRY';\n\n    default:\n      return currCode;\n  }\n};\n\nconst getChildTotals = (childAges, agencyInfo) => {\n  let totalChd1 = 0,\n      totalChd2 = 0,\n      totalBaby = 0;\n\n  if (childAges && childAges.length > 0) {\n    const babyAge = Number(agencyInfo.babyage),\n          chd1Age = Number(agencyInfo.chd1age),\n          chd2Age = Number(agencyInfo.chd2age);\n\n    for (let childAge of childAges) {\n      if (childAge) {\n        const useChild = typeof childAge === 'string' ? JSON.parse(childAge) : childAge,\n              useAge = Number(useChild.age);\n\n        if (useAge > 0 && babyAge > 0 && useAge <= babyAge) {\n          totalBaby++;\n        } else if (useAge > 0 && chd1Age > 0 && useAge <= chd1Age) {\n          totalChd1++;\n        } else if (useAge > 0 && chd2Age > 0 && useAge <= chd2Age) {\n          totalChd2++;\n        }\n      }\n    }\n  }\n\n  return {\n    totalChd1,\n    totalChd2,\n    totalBaby\n  };\n};\n\nconst getDeviceType = () => {\n  if (/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android|iemobile|w3c|acs\\-|alav|alca|amoi|audi|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd\\-|dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg\\-c|lg\\-d|lg\\-g|lge\\-|maui|maxo|midp|mits|mmef|mobi|mot\\-|moto|mwbp|nec\\-|newt|noki|palm|pana|pant|phil|play|port|prox|qwap|sage|sams|sany|sch\\-|sec\\-|send|seri|sgh\\-|shar|sie\\-|siem|smal|smar|sony|sph\\-|symb|t\\-mo|teli|tim\\-|tosh|tsm\\-|upg1|upsi|vk\\-v|voda|wap\\-|wapa|wapi|wapp|wapr|webc|winw|winw|xda|xda\\-) /i.test(navigator.userAgent)) {\n    if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n      return 'Tablet';\n    } else {\n      return 'Mobile';\n    }\n  } else if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n    return 'Tablet';\n  } else {\n    return 'Desktop';\n  }\n};\n\nconst getBrowser = () => {\n  let ua = navigator.userAgent,\n      tem,\n      M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n\n  if (/trident/i.test(M[1])) {\n    tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n    return {\n      name: 'IE',\n      version: tem[1] || ''\n    };\n  }\n\n  if (M[1] === 'Chrome') {\n    tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n\n    if (tem != null) {\n      return {\n        name: 'Opera',\n        version: tem[1]\n      };\n    }\n  }\n\n  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n\n  if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n    M.splice(1, 1, tem[1]);\n  }\n\n  return {\n    name: M[0],\n    version: M[1]\n  };\n};\n\nconst toSelfName = fileName => {\n  const fileExt = fileName.split('.').pop(),\n        newFileName = fileName.toString().normalize('NFD').replace(`.${fileExt}`, '').replace(/[\\u0300-\\u036f]/g, '').replace(/\\s+/g, '-').toLowerCase().replace(/&/g, '-and-').replace(/[^a-z0-9\\-]/g, '').replace(/-+/g, '-').replace(/^-*/, '').replace(/-*$/, '');\n  return newFileName + `.${fileExt}`;\n};\n\nmodule.exports = {\n  getChildTotals,\n  getDeviceType,\n  getBrowser,\n  toSelfName,\n  getRoomRate,\n  showDiscountRate,\n  formatDiscRate,\n  useTotalPrice,\n  getTotalPrice,\n  getPaxPrice,\n  getChdPrice,\n  getCurrencyCodeToIso\n};","map":{"version":3,"sources":["/Users/mata/app-cloudweb/lib/helpers/useFunction.js"],"names":["getRoomRate","roomRate","Number","naiveRound","num","decimalPlaces","p","Math","pow","round","formatDiscRate","discRate","newDiscRate","discStr","String","split","length","substr","parseFloat","showDiscountRate","totalPrice","discTotalPrice","disc","applyDiscount","price","discrate","getPaxPrice","totalPax","sngrate","dblrate","trprate","quadrate","extrarate","extra2rate","extraPax","basePrice","extraPaxPrice","getChdPrice","chdAges","agencyChdAges","babyrate","chdrate","chd2rate","childTotals","getChildTotals","totalBaby","totalChd1","totalChd2","getTotalPrice","priceList","useResRateVal","useTotalPrice","paxPrice","chdPrice","discrateVal","rsingle","rdouble","rtriple","rquad","extra","extra2","baby","child","child2","useDisc","priceItems","dailyPaxPrice","discrateTotal","getCurrencyCodeToIso","currCode","childAges","agencyInfo","babyAge","babyage","chd1Age","chd1age","chd2Age","chd2age","childAge","useChild","JSON","parse","useAge","age","getDeviceType","test","navigator","userAgent","getBrowser","ua","tem","M","match","exec","name","version","appName","appVersion","splice","toSelfName","fileName","fileExt","pop","newFileName","toString","normalize","replace","toLowerCase","module","exports"],"mappings":"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","sourcesContent":["const getRoomRate = (roomRate) => {\n    roomRate = Number(roomRate)\n    if (roomRate > 0 && roomRate !== null) {\n        return roomRate\n    } else {\n        return null\n    }\n}\n\nfunction naiveRound(num, decimalPlaces = 0) {\n    let p = Math.pow(10, decimalPlaces);\n    return Math.round(num * p) / p;\n}\n\nfunction formatDiscRate(discRate) {\n    let newDiscRate;\n    if (discRate) {\n        let discStr = String(discRate).split('.')\n        if (discStr && discStr[0].length > 1) {\n            newDiscRate = String(discRate).substr(0, 5)\n        } else {\n            newDiscRate = String(discRate).substr(0, 4)\n        }\n    } else {\n        newDiscRate = discRate\n    }\n    return naiveRound(parseFloat(newDiscRate))\n}\n\nfunction showDiscountRate(totalPrice, discTotalPrice) {\n    let disc = (totalPrice - discTotalPrice) * 100 / totalPrice\n    return disc < 0 ? 0 : disc\n}\n\nfunction applyDiscount(price, discrate) {\n    if (discrate) {\n        price = Number(price), discrate = Number(discrate) / 100\n        return (price - (price * discrate))\n    }\n    return 0\n}\n\nconst getPaxPrice = (totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate) => {\n    if (totalPax === 1) {\n        return getRoomRate(sngrate)\n    } else if (totalPax === 2) {\n        return getRoomRate(dblrate)\n    } else if (totalPax === 3) {\n        return getRoomRate(trprate)\n    } else if (totalPax === 4) {\n        return getRoomRate(quadrate)\n    } else if (totalPax === 5) {\n        return getRoomRate(Number(quadrate) + Number(extrarate))\n    } else if (totalPax >= 6) {\n        const extraPax = Number(totalPax) - 5\n            , basePrice = Number(quadrate) + Number(extrarate)\n            , extraPaxPrice = basePrice + (Number(extra2rate) * extraPax)\n        return getRoomRate(extraPaxPrice)\n    } else {\n        return null\n    }\n}\n\nconst getChdPrice = (chdAges, agencyChdAges, babyrate, chdrate, chd2rate) => {\n    const childTotals = getChildTotals(chdAges, agencyChdAges)\n        , totalBaby = Number(childTotals.totalBaby) * Number(babyrate) || 0\n        , totalChd1 = Number(childTotals.totalChd1) * Number(chdrate) || 0\n        , totalChd2 = Number(childTotals.totalChd2) * Number(chd2rate) || 0\n\n    return (totalChd1 + totalChd2 + totalBaby)\n}\n\nconst getTotalPrice = (priceList, totalPax, chdAges, agencyChdAges, useResRateVal = false) => {\n    let useTotalPrice, paxPrice, chdPrice, discrateVal\n    if(useResRateVal){\n        const { rsingle, rdouble, rtriple, rquad, extra, extra2, baby, child, child2, discrate } = priceList\n        paxPrice = getPaxPrice(totalPax, rsingle, rdouble, rtriple, rquad, extra, extra2)\n        chdPrice = getChdPrice(chdAges, agencyChdAges, baby, child, child2)\n        discrateVal = discrate\n        useTotalPrice = Number(paxPrice) + Number(chdPrice)\n    }else {\n        const { sngrate, dblrate, trprate, quadrate, extrarate, extra2rate, babyrate, chdrate, chd2rate, discrate } = priceList\n        paxPrice = getPaxPrice(totalPax, sngrate, dblrate, trprate, quadrate, extrarate, extra2rate)\n        chdPrice = getChdPrice(chdAges, agencyChdAges, babyrate, chdrate, chd2rate)\n        discrateVal = discrate\n        useTotalPrice = Number(paxPrice) + Number(chdPrice)\n    }\n\n    return {\n        totalPrice: useTotalPrice || 0,\n        discTotalPrice: applyDiscount(useTotalPrice, discrateVal) || 0,\n    }\n}\n\nconst useTotalPrice = (priceList, totalPax, chdAges, agencyChdAges, useResRateVal = false) => {\n    if(priceList){\n        let totalPrice = 0, discTotalPrice = 0, useDisc = false\n        for (let priceItems of priceList) {\n            const dailyPaxPrice = getTotalPrice(priceItems, totalPax, chdAges, agencyChdAges, useResRateVal)\n            totalPrice += dailyPaxPrice.totalPrice\n            if(dailyPaxPrice?.discTotalPrice > 0){\n                useDisc = true\n                discTotalPrice += dailyPaxPrice.discTotalPrice\n            }else {\n                discTotalPrice += dailyPaxPrice.totalPrice\n            }\n        }\n\n        const discrateTotal = useDisc ? showDiscountRate(totalPrice, discTotalPrice) : 0\n        return {\n            totalPrice,\n            discTotalPrice,\n            discrateTotal\n        }\n    }\n\n    return  {\n        totalPrice: 0,\n        discTotalPrice: 0,\n        discrateTotal: 0\n    }\n}\n\nconst getCurrencyCodeToIso = (currCode) => {\n    switch (currCode) {\n        case 'TL':\n            return 'TRY'\n        default:\n            return currCode\n    }\n}\n\nconst getChildTotals = (childAges, agencyInfo) => {\n    let\n        totalChd1 = 0\n        , totalChd2 = 0\n        , totalBaby = 0\n\n    if (childAges && childAges.length > 0) {\n        const\n            babyAge = Number(agencyInfo.babyage)\n            , chd1Age = Number(agencyInfo.chd1age)\n            , chd2Age = Number(agencyInfo.chd2age)\n\n        for (let childAge of childAges) {\n            if (childAge) {\n                const useChild = typeof childAge === 'string' ? JSON.parse(childAge) : childAge\n                    , useAge = Number(useChild.age)\n                if (useAge > 0 && babyAge > 0 && useAge <= babyAge) {\n                    totalBaby++\n                } else if (useAge > 0 && chd1Age > 0 && useAge <= chd1Age) {\n                    totalChd1++\n                } else if (useAge > 0 && chd2Age > 0 && useAge <= chd2Age) {\n                    totalChd2++\n                }\n            }\n        }\n    }\n\n    return {\n        totalChd1, totalChd2, totalBaby\n    }\n}\n\nconst getDeviceType = () => {\n    if (/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android|iemobile|w3c|acs\\-|alav|alca|amoi|audi|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd\\-|dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg\\-c|lg\\-d|lg\\-g|lge\\-|maui|maxo|midp|mits|mmef|mobi|mot\\-|moto|mwbp|nec\\-|newt|noki|palm|pana|pant|phil|play|port|prox|qwap|sage|sams|sany|sch\\-|sec\\-|send|seri|sgh\\-|shar|sie\\-|siem|smal|smar|sony|sph\\-|symb|t\\-mo|teli|tim\\-|tosh|tsm\\-|upg1|upsi|vk\\-v|voda|wap\\-|wapa|wapi|wapp|wapr|webc|winw|winw|xda|xda\\-) /i.test(navigator.userAgent)) {\n        if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n            return 'Tablet'\n        } else {\n            return 'Mobile'\n        }\n    } else if (/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)) {\n        return 'Tablet'\n    } else {\n        return 'Desktop'\n    }\n}\n\nconst getBrowser = () => {\n    let ua = navigator.userAgent, tem,\n        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || []\n    if (/trident/i.test(M[1])) {\n        tem = /\\brv[ :]+(\\d+)/g.exec(ua) || []\n        return { name: 'IE', version: (tem[1] || '') }\n    }\n    if (M[1] === 'Chrome') {\n        tem = ua.match(/\\bOPR|Edge\\/(\\d+)/)\n        if (tem != null) {\n            return { name: 'Opera', version: tem[1] }\n        }\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?']\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n        M.splice(1, 1, tem[1])\n    }\n    return {\n        name: M[0],\n        version: M[1],\n    }\n}\n\nconst toSelfName = (fileName) => {\n    const fileExt = fileName.split('.').pop(),\n        newFileName = fileName.toString()\n            .normalize('NFD')\n            .replace(`.${fileExt}`, '')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .replace(/\\s+/g, '-')\n            .toLowerCase()\n            .replace(/&/g, '-and-')\n            .replace(/[^a-z0-9\\-]/g, '')\n            .replace(/-+/g, '-')\n            .replace(/^-*/, '')\n            .replace(/-*$/, '')\n\n    return newFileName + `.${fileExt}`\n}\n\nmodule.exports = { getChildTotals, getDeviceType, getBrowser, toSelfName, getRoomRate, showDiscountRate, formatDiscRate, useTotalPrice, getTotalPrice, getPaxPrice, getChdPrice, getCurrencyCodeToIso  }"]},"metadata":{},"sourceType":"script"}